2025-04-17 14:15:20,021 - app - INFO - Session ID: string, User Query: string, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-17 14:15:20,021 - app.db - INFO - Getting chat history.
2025-04-17 14:15:20,023 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-17 14:15:20,029 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-17 14:15:20,029 - app - INFO - Chat history: []
2025-04-17 14:15:20,029 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-17 14:15:20,029 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-17 14:15:20,033 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'RedisEmbeddingsWrapper'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x75b130d8fd40> search_kwargs={'k': 3}
2025-04-17 14:15:20,039 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-17 14:16:02,083 - app - INFO - Session ID: string, User Query: string, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-17 14:16:02,083 - app.db - INFO - Getting chat history.
2025-04-17 14:16:02,086 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-17 14:16:02,089 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-17 14:16:02,089 - app - INFO - Chat history: []
2025-04-17 14:16:02,090 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-17 14:16:02,090 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-17 14:16:02,091 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7ba761d75400> search_kwargs={'k': 3}
2025-04-17 14:16:02,095 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-17 14:26:28,859 - app - INFO - Session ID: string, User Query: string, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-17 14:26:28,859 - app.db - INFO - Getting chat history.
2025-04-17 14:26:28,861 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-17 14:26:28,869 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-17 14:26:28,870 - app - INFO - Chat history: []
2025-04-17 14:26:28,870 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-17 14:26:28,870 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-17 14:26:28,873 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7f2f82b72840> search_kwargs={'k': 3}
2025-04-17 14:26:28,879 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-17 14:26:30,867 - app - INFO - Sucessfully invoke rag_chain
2025-04-17 14:26:30,867 - app.db - INFO - Inserting application logs.
2025-04-17 14:26:30,868 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-17 14:26:30,872 - app.db - INFO - Successfully inserted application logs.
2025-04-17 14:26:30,873 - app - INFO - Session ID: string, AI response: {'input': 'string', 'chat_history': [], 'context': [], 'answer': 'The question is not about any specific topic, so I cannot provide an answer.'}
2025-04-17 14:29:38,981 - app - INFO - Session ID: string, User Query: string, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-17 14:29:38,981 - app.db - INFO - Getting chat history.
2025-04-17 14:29:38,983 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-17 14:29:38,986 - app.db - INFO - Successfully retrieved 1 conversation turns
2025-04-17 14:29:38,986 - app - INFO - Chat history: [('human', 'string'), ('ai', 'The question is not about any specific topic, so I cannot provide an answer.')]
2025-04-17 14:29:38,986 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-17 14:29:38,986 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-17 14:29:38,988 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7f2f82b72840> search_kwargs={'k': 3}
2025-04-17 14:29:38,988 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-17 14:29:40,633 - app - INFO - Sucessfully invoke rag_chain
2025-04-17 14:29:40,633 - app.db - INFO - Inserting application logs.
2025-04-17 14:29:40,634 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-17 14:29:40,638 - app.db - INFO - Successfully inserted application logs.
2025-04-17 14:29:40,639 - app - INFO - Session ID: string, AI response: {'input': 'string', 'chat_history': [('human', 'string'), ('ai', 'The question is not about any specific topic, so I cannot provide an answer.')], 'context': [], 'answer': 'I am unable to answer this question, as it is too vague. Can you please provide me with more context?'}
2025-04-17 16:39:11,447 - app.chat_controller - INFO - Session ID: string, User Query: string, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-17 16:39:11,448 - app.db - INFO - Getting chat history.
2025-04-17 16:39:11,450 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-17 16:39:11,470 - app.db - INFO - Successfully retrieved 2 conversation turns
2025-04-17 16:39:11,471 - app.chat_controller - INFO - Chat history: [('human', 'string'), ('ai', 'I am unable to answer this question, as it is too vague. Can you please provide me with more context?'), ('human', 'string'), ('ai', 'The question is not about any specific topic, so I cannot provide an answer.')]
2025-04-17 16:39:11,471 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-17 16:39:11,471 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-17 16:39:11,473 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7d5e9f29e570> search_kwargs={'k': 3}
2025-04-17 16:39:11,476 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-17 16:39:13,629 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-17 16:39:13,629 - app.db - INFO - Inserting application logs.
2025-04-17 16:39:13,630 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-17 16:39:13,649 - app.db - INFO - Successfully inserted application logs.
2025-04-17 16:39:13,650 - app.chat_controller - INFO - Session ID: string, AI response: {'input': 'string', 'chat_history': [('human', 'string'), ('ai', 'I am unable to answer this question, as it is too vague. Can you please provide me with more context?'), ('human', 'string'), ('ai', 'The question is not about any specific topic, so I cannot provide an answer.')], 'context': [], 'answer': 'This question is too vague for me to answer. Can you please provide more information?'}
2025-04-17 16:39:26,433 - app.chat_controller - INFO - Session ID: 123, User Query: Hello, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-17 16:39:26,433 - app.db - INFO - Getting chat history.
2025-04-17 16:39:26,434 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-17 16:39:26,437 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-17 16:39:26,438 - app.chat_controller - INFO - Chat history: []
2025-04-17 16:39:26,438 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-17 16:39:26,438 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-17 16:39:26,439 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7d5e9f29e570> search_kwargs={'k': 3}
2025-04-17 16:39:26,440 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-17 16:39:28,395 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-17 16:39:28,395 - app.db - INFO - Inserting application logs.
2025-04-17 16:39:28,397 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-17 16:39:28,409 - app.db - INFO - Successfully inserted application logs.
2025-04-17 16:39:28,410 - app.chat_controller - INFO - Session ID: 123, AI response: {'input': 'Hello', 'chat_history': [], 'context': [], 'answer': 'Hello! How can I assist you today? I am ready to answer your questions or provide information as needed.'}
2025-04-17 16:39:42,230 - app.chat_controller - INFO - Session ID: 123, User Query: I would love to make some pie today, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-17 16:39:42,230 - app.db - INFO - Getting chat history.
2025-04-17 16:39:42,231 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-17 16:39:42,235 - app.db - INFO - Successfully retrieved 1 conversation turns
2025-04-17 16:39:42,235 - app.chat_controller - INFO - Chat history: [('human', 'Hello'), ('ai', 'Hello! How can I assist you today? I am ready to answer your questions or provide information as needed.')]
2025-04-17 16:39:42,235 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-17 16:39:42,235 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-17 16:39:42,237 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7d5e9f29e570> search_kwargs={'k': 3}
2025-04-17 16:39:42,237 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-17 16:39:49,657 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-17 16:39:49,657 - app.db - INFO - Inserting application logs.
2025-04-17 16:39:49,659 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-17 16:39:49,662 - app.db - INFO - Successfully inserted application logs.
2025-04-17 16:39:49,663 - app.chat_controller - INFO - Session ID: 123, AI response: {'input': 'I would love to make some pie today', 'chat_history': [('human', 'Hello'), ('ai', 'Hello! How can I assist you today? I am ready to answer your questions or provide information as needed.')], 'context': [], 'answer': 'That sounds delicious! What kind of pie are you thinking of making? I can help you find recipes or offer tips if you have a specific pie in mind.'}
2025-04-17 16:41:12,503 - app.chat_controller - INFO - Session ID: 123, User Query: Sorry, I have gone for awhile, what have we been talking about?, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-17 16:41:12,503 - app.db - INFO - Getting chat history.
2025-04-17 16:41:12,504 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-17 16:41:12,517 - app.db - INFO - Successfully retrieved 2 conversation turns
2025-04-17 16:41:12,518 - app.chat_controller - INFO - Chat history: [('human', 'I would love to make some pie today'), ('ai', 'That sounds delicious! What kind of pie are you thinking of making? I can help you find recipes or offer tips if you have a specific pie in mind.'), ('human', 'Hello'), ('ai', 'Hello! How can I assist you today? I am ready to answer your questions or provide information as needed.')]
2025-04-17 16:41:12,518 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-17 16:41:12,518 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-17 16:41:12,519 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7d5e9f29e570> search_kwargs={'k': 3}
2025-04-17 16:41:12,519 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-17 16:41:14,361 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-17 16:41:14,361 - app.db - INFO - Inserting application logs.
2025-04-17 16:41:14,363 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-17 16:41:14,366 - app.db - INFO - Successfully inserted application logs.
2025-04-17 16:41:14,367 - app.chat_controller - INFO - Session ID: 123, AI response: {'input': 'Sorry, I have gone for awhile, what have we been talking about?', 'chat_history': [('human', 'I would love to make some pie today'), ('ai', 'That sounds delicious! What kind of pie are you thinking of making? I can help you find recipes or offer tips if you have a specific pie in mind.'), ('human', 'Hello'), ('ai', 'Hello! How can I assist you today? I am ready to answer your questions or provide information as needed.')], 'context': [], 'answer': 'We were just talking about making pie. I offered to help you find recipes or offer tips.'}
2025-04-18 11:35:19,753 - app.chat_controller - INFO - Session ID: string, User Query: string, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 11:35:19,753 - app.db - INFO - Getting chat history.
2025-04-18 11:35:19,756 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 11:35:19,760 - app.db - INFO - Successfully retrieved 3 conversation turns
2025-04-18 11:35:19,760 - app.chat_controller - INFO - Chat history: [('human', 'string'), ('ai', 'This question is too vague for me to answer. Can you please provide more information?'), ('human', 'string'), ('ai', 'I am unable to answer this question, as it is too vague. Can you please provide me with more context?'), ('human', 'string'), ('ai', 'The question is not about any specific topic, so I cannot provide an answer.')]
2025-04-18 11:35:19,761 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 11:35:19,761 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 11:35:19,763 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7dbcc8335490> search_kwargs={'k': 3}
2025-04-18 11:35:19,768 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 11:35:22,689 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 11:35:22,689 - app.db - INFO - Inserting application logs.
2025-04-18 11:35:22,691 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 11:35:22,695 - app.db - INFO - Successfully inserted application logs.
2025-04-18 11:35:22,696 - app.chat_controller - INFO - Session ID: string, AI response: {'input': 'string', 'chat_history': [('human', 'string'), ('ai', 'This question is too vague for me to answer. Can you please provide more information?'), ('human', 'string'), ('ai', 'I am unable to answer this question, as it is too vague. Can you please provide me with more context?'), ('human', 'string'), ('ai', 'The question is not about any specific topic, so I cannot provide an answer.')], 'context': [], 'answer': 'This is a very general question that I am unable to answer. Can you please provide me with more context?'}
2025-04-18 11:47:32,158 - app.chat_controller - INFO - Session ID: a4005b02-99d4-4006-a54f-1161ad37d1d0, User Query: Hello, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 11:47:32,158 - app.db - INFO - Getting chat history.
2025-04-18 11:47:32,160 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 11:47:32,166 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-18 11:47:32,166 - app.chat_controller - INFO - Chat history: []
2025-04-18 11:47:32,166 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 11:47:32,166 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 11:47:32,168 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x74339ef8fbc0> search_kwargs={'k': 3}
2025-04-18 11:47:32,172 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 11:47:34,345 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 11:47:34,345 - app.db - INFO - Inserting application logs.
2025-04-18 11:47:34,347 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 11:47:34,360 - app.db - INFO - Successfully inserted application logs.
2025-04-18 11:47:34,361 - app.chat_controller - INFO - Session ID: a4005b02-99d4-4006-a54f-1161ad37d1d0, AI response: {'input': 'Hello', 'chat_history': [], 'context': [], 'answer': 'Hello! How can I assist you today?'}
2025-04-18 11:47:41,573 - app.chat_controller - INFO - Session ID: a4005b02-99d4-4006-a54f-1161ad37d1d0, User Query: What are you?, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 11:47:41,573 - app.db - INFO - Getting chat history.
2025-04-18 11:47:41,575 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 11:47:41,579 - app.db - INFO - Successfully retrieved 1 conversation turns
2025-04-18 11:47:41,579 - app.chat_controller - INFO - Chat history: [('human', 'Hello'), ('ai', 'Hello! How can I assist you today?')]
2025-04-18 11:47:41,579 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 11:47:41,579 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 11:47:41,580 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x74339ef8fbc0> search_kwargs={'k': 3}
2025-04-18 11:47:41,581 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 11:47:43,667 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 11:47:43,667 - app.db - INFO - Inserting application logs.
2025-04-18 11:47:43,668 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 11:47:43,673 - app.db - INFO - Successfully inserted application logs.
2025-04-18 11:47:43,674 - app.chat_controller - INFO - Session ID: a4005b02-99d4-4006-a54f-1161ad37d1d0, AI response: {'input': 'What are you?', 'chat_history': [('human', 'Hello'), ('ai', 'Hello! How can I assist you today?')], 'context': [], 'answer': 'I am an AI assistant. I am designed to help with question-answering tasks. I use retrieved context to provide concise answers.'}
2025-04-18 11:47:50,018 - app.chat_controller - INFO - Session ID: a4005b02-99d4-4006-a54f-1161ad37d1d0, User Query: I mean, what model are you, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 11:47:50,018 - app.db - INFO - Getting chat history.
2025-04-18 11:47:50,020 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 11:47:50,037 - app.db - INFO - Successfully retrieved 2 conversation turns
2025-04-18 11:47:50,038 - app.chat_controller - INFO - Chat history: [('human', 'What are you?'), ('ai', 'I am an AI assistant. I am designed to help with question-answering tasks. I use retrieved context to provide concise answers.'), ('human', 'Hello'), ('ai', 'Hello! How can I assist you today?')]
2025-04-18 11:47:50,038 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 11:47:50,038 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 11:47:50,040 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x74339ef8fbc0> search_kwargs={'k': 3}
2025-04-18 11:47:50,040 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 11:47:52,673 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 11:47:52,673 - app.db - INFO - Inserting application logs.
2025-04-18 11:47:52,675 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 11:47:52,688 - app.db - INFO - Successfully inserted application logs.
2025-04-18 11:47:52,689 - app.chat_controller - INFO - Session ID: a4005b02-99d4-4006-a54f-1161ad37d1d0, AI response: {'input': 'I mean, what model are you', 'chat_history': [('human', 'What are you?'), ('ai', 'I am an AI assistant. I am designed to help with question-answering tasks. I use retrieved context to provide concise answers.'), ('human', 'Hello'), ('ai', 'Hello! How can I assist you today?')], 'context': [], 'answer': "I am an AI assistant. I don't have specifics regarding the model I use. I am designed to help with question-answering tasks."}
2025-04-18 11:47:58,677 - app.chat_controller - INFO - Session ID: a4005b02-99d4-4006-a54f-1161ad37d1d0, User Query: Who built you, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 11:47:58,678 - app.db - INFO - Getting chat history.
2025-04-18 11:47:58,679 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 11:47:58,703 - app.db - INFO - Successfully retrieved 3 conversation turns
2025-04-18 11:47:58,704 - app.chat_controller - INFO - Chat history: [('human', 'I mean, what model are you'), ('ai', "I am an AI assistant. I don't have specifics regarding the model I use. I am designed to help with question-answering tasks."), ('human', 'What are you?'), ('ai', 'I am an AI assistant. I am designed to help with question-answering tasks. I use retrieved context to provide concise answers.'), ('human', 'Hello'), ('ai', 'Hello! How can I assist you today?')]
2025-04-18 11:47:58,704 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 11:47:58,704 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 11:47:58,705 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x74339ef8fbc0> search_kwargs={'k': 3}
2025-04-18 11:47:58,705 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 11:48:00,565 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 11:48:00,565 - app.db - INFO - Inserting application logs.
2025-04-18 11:48:00,566 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 11:48:00,580 - app.db - INFO - Successfully inserted application logs.
2025-04-18 11:48:00,581 - app.chat_controller - INFO - Session ID: a4005b02-99d4-4006-a54f-1161ad37d1d0, AI response: {'input': 'Who built you', 'chat_history': [('human', 'I mean, what model are you'), ('ai', "I am an AI assistant. I don't have specifics regarding the model I use. I am designed to help with question-answering tasks."), ('human', 'What are you?'), ('ai', 'I am an AI assistant. I am designed to help with question-answering tasks. I use retrieved context to provide concise answers.'), ('human', 'Hello'), ('ai', 'Hello! How can I assist you today?')], 'context': [], 'answer': 'I am a large language model, trained by Google.'}
2025-04-18 13:06:27,602 - app.chat_controller - INFO - Session ID: 46ed212b-b94f-4cea-b868-7c7b2b6e3184, User Query: Hello, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:06:27,602 - app.db - INFO - Getting chat history.
2025-04-18 13:06:27,603 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:06:27,618 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-18 13:06:27,618 - app.chat_controller - INFO - Chat history: []
2025-04-18 13:06:27,618 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:06:27,618 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:06:27,619 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x74339ef8fbc0> search_kwargs={'k': 3}
2025-04-18 13:06:27,619 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:07:46,902 - app.chat_controller - INFO - Session ID: d9ca8fe5-aca8-4074-9ef0-577b3088fffe, User Query: Hello, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:07:46,902 - app.db - INFO - Getting chat history.
2025-04-18 13:07:46,904 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:07:46,908 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-18 13:07:46,908 - app.chat_controller - INFO - Chat history: []
2025-04-18 13:07:46,908 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:07:46,908 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:07:46,912 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:07:46,918 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:07:49,168 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:07:49,168 - app.db - INFO - Inserting application logs.
2025-04-18 13:07:49,170 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:07:49,185 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:07:49,186 - app.chat_controller - INFO - Session ID: d9ca8fe5-aca8-4074-9ef0-577b3088fffe, AI response: {'input': 'Hello', 'chat_history': [], 'context': [], 'answer': 'Hi there! How can I help you today?'}
2025-04-18 13:12:34,288 - app.chat_controller - INFO - Session ID: bc892243-4768-4d8e-a5ec-183710fd8427, User Query: Hello, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:12:34,288 - app.db - INFO - Getting chat history.
2025-04-18 13:12:34,290 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:12:34,306 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-18 13:12:34,306 - app.chat_controller - INFO - Chat history: []
2025-04-18 13:12:34,306 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:12:34,306 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:12:34,307 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:12:34,308 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:12:35,448 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:12:35,448 - app.db - INFO - Inserting application logs.
2025-04-18 13:12:35,450 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:12:35,463 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:12:35,464 - app.chat_controller - INFO - Session ID: bc892243-4768-4d8e-a5ec-183710fd8427, AI response: {'input': 'Hello', 'chat_history': [], 'context': [], 'answer': 'Hello! How can I help you today?'}
2025-04-18 13:12:40,854 - app.chat_controller - INFO - Session ID: bc892243-4768-4d8e-a5ec-183710fd8427, User Query: I want to bake some cake :D, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:12:40,854 - app.db - INFO - Getting chat history.
2025-04-18 13:12:40,856 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:12:40,871 - app.db - INFO - Successfully retrieved 1 conversation turns
2025-04-18 13:12:40,871 - app.chat_controller - INFO - Chat history: [('human', 'Hello'), ('ai', 'Hello! How can I help you today?')]
2025-04-18 13:12:40,871 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:12:40,871 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:12:40,872 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:12:40,873 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:12:42,723 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:12:42,723 - app.db - INFO - Inserting application logs.
2025-04-18 13:12:42,725 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:12:42,729 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:12:42,731 - app.chat_controller - INFO - Session ID: bc892243-4768-4d8e-a5ec-183710fd8427, AI response: {'input': 'I want to bake some cake :D', 'chat_history': [('human', 'Hello'), ('ai', 'Hello! How can I help you today?')], 'context': [], 'answer': "That's great! What kind of cake are you thinking of baking? I can help you find a recipe or offer some baking tips."}
2025-04-18 13:13:02,402 - app.chat_controller - INFO - Session ID: bc892243-4768-4d8e-a5ec-183710fd8427, User Query: I'm thinking of Lava cake , Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:13:02,402 - app.db - INFO - Getting chat history.
2025-04-18 13:13:02,403 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:13:02,415 - app.db - INFO - Successfully retrieved 2 conversation turns
2025-04-18 13:13:02,415 - app.chat_controller - INFO - Chat history: [('human', 'I want to bake some cake :D'), ('ai', "That's great! What kind of cake are you thinking of baking? I can help you find a recipe or offer some baking tips."), ('human', 'Hello'), ('ai', 'Hello! How can I help you today?')]
2025-04-18 13:13:02,415 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:13:02,416 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:13:02,417 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:13:02,418 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:13:04,326 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:13:04,326 - app.db - INFO - Inserting application logs.
2025-04-18 13:13:04,328 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:13:04,341 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:13:04,342 - app.chat_controller - INFO - Session ID: bc892243-4768-4d8e-a5ec-183710fd8427, AI response: {'input': "I'm thinking of Lava cake ", 'chat_history': [('human', 'I want to bake some cake :D'), ('ai', "That's great! What kind of cake are you thinking of baking? I can help you find a recipe or offer some baking tips."), ('human', 'Hello'), ('ai', 'Hello! How can I help you today?')], 'context': [], 'answer': 'That sounds delicious! Lava cake is a rich and decadent dessert. Would you like me to help you find a recipe or offer some tips for making it?'}
2025-04-18 13:13:10,151 - app.chat_controller - INFO - Session ID: bc892243-4768-4d8e-a5ec-183710fd8427, User Query: Yes, sure, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:13:10,152 - app.db - INFO - Getting chat history.
2025-04-18 13:13:10,153 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:13:10,159 - app.db - INFO - Successfully retrieved 3 conversation turns
2025-04-18 13:13:10,160 - app.chat_controller - INFO - Chat history: [('human', "I'm thinking of Lava cake "), ('ai', 'That sounds delicious! Lava cake is a rich and decadent dessert. Would you like me to help you find a recipe or offer some tips for making it?'), ('human', 'I want to bake some cake :D'), ('ai', "That's great! What kind of cake are you thinking of baking? I can help you find a recipe or offer some baking tips."), ('human', 'Hello'), ('ai', 'Hello! How can I help you today?')]
2025-04-18 13:13:10,160 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:13:10,160 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:13:10,162 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:13:10,162 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:13:11,907 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:13:11,907 - app.db - INFO - Inserting application logs.
2025-04-18 13:13:11,908 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:13:11,911 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:13:11,912 - app.chat_controller - INFO - Session ID: bc892243-4768-4d8e-a5ec-183710fd8427, AI response: {'input': 'Yes, sure', 'chat_history': [('human', "I'm thinking of Lava cake "), ('ai', 'That sounds delicious! Lava cake is a rich and decadent dessert. Would you like me to help you find a recipe or offer some tips for making it?'), ('human', 'I want to bake some cake :D'), ('ai', "That's great! What kind of cake are you thinking of baking? I can help you find a recipe or offer some baking tips."), ('human', 'Hello'), ('ai', 'Hello! How can I help you today?')], 'context': [], 'answer': "Okay! What is your question? I'm ready to help."}
2025-04-18 13:13:29,666 - app.chat_controller - INFO - Session ID: bc892243-4768-4d8e-a5ec-183710fd8427, User Query: Give me some recipes, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:13:29,666 - app.db - INFO - Getting chat history.
2025-04-18 13:13:29,668 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:13:29,682 - app.db - INFO - Successfully retrieved 4 conversation turns
2025-04-18 13:13:29,682 - app.chat_controller - INFO - Chat history: [('human', 'Yes, sure'), ('ai', "Okay! What is your question? I'm ready to help."), ('human', "I'm thinking of Lava cake "), ('ai', 'That sounds delicious! Lava cake is a rich and decadent dessert. Would you like me to help you find a recipe or offer some tips for making it?'), ('human', 'I want to bake some cake :D'), ('ai', "That's great! What kind of cake are you thinking of baking? I can help you find a recipe or offer some baking tips."), ('human', 'Hello'), ('ai', 'Hello! How can I help you today?')]
2025-04-18 13:13:29,682 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:13:29,682 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:13:29,683 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:13:29,684 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:13:32,402 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:13:32,402 - app.db - INFO - Inserting application logs.
2025-04-18 13:13:32,404 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:13:32,407 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:13:32,408 - app.chat_controller - INFO - Session ID: bc892243-4768-4d8e-a5ec-183710fd8427, AI response: {'input': 'Give me some recipes', 'chat_history': [('human', 'Yes, sure'), ('ai', "Okay! What is your question? I'm ready to help."), ('human', "I'm thinking of Lava cake "), ('ai', 'That sounds delicious! Lava cake is a rich and decadent dessert. Would you like me to help you find a recipe or offer some tips for making it?'), ('human', 'I want to bake some cake :D'), ('ai', "That's great! What kind of cake are you thinking of baking? I can help you find a recipe or offer some baking tips."), ('human', 'Hello'), ('ai', 'Hello! How can I help you today?')], 'context': [], 'answer': 'I can definitely help you with that! To give you the best recommendations, what kind of recipe are you looking for? (e.g., type of cuisine, specific dish, dietary restrictions, skill level, etc.)'}
2025-04-18 13:18:08,948 - app.chat_controller - INFO - Session ID: bc892243-4768-4d8e-a5ec-183710fd8427, User Query: Wait, you don't remember the food I told you?, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:18:08,948 - app.db - INFO - Getting chat history.
2025-04-18 13:18:08,950 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:18:08,956 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-04-18 13:18:08,956 - app.chat_controller - INFO - Chat history: [('human', 'Give me some recipes'), ('ai', 'I can definitely help you with that! To give you the best recommendations, what kind of recipe are you looking for? (e.g., type of cuisine, specific dish, dietary restrictions, skill level, etc.)'), ('human', 'Yes, sure'), ('ai', "Okay! What is your question? I'm ready to help."), ('human', "I'm thinking of Lava cake "), ('ai', 'That sounds delicious! Lava cake is a rich and decadent dessert. Would you like me to help you find a recipe or offer some tips for making it?'), ('human', 'I want to bake some cake :D'), ('ai', "That's great! What kind of cake are you thinking of baking? I can help you find a recipe or offer some baking tips."), ('human', 'Hello'), ('ai', 'Hello! How can I help you today?')]
2025-04-18 13:18:08,956 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:18:08,956 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:18:08,958 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:18:08,959 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:18:10,926 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:18:10,926 - app.db - INFO - Inserting application logs.
2025-04-18 13:18:10,927 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:18:10,941 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:18:10,942 - app.chat_controller - INFO - Session ID: bc892243-4768-4d8e-a5ec-183710fd8427, AI response: {'input': "Wait, you don't remember the food I told you?", 'chat_history': [('human', 'Give me some recipes'), ('ai', 'I can definitely help you with that! To give you the best recommendations, what kind of recipe are you looking for? (e.g., type of cuisine, specific dish, dietary restrictions, skill level, etc.)'), ('human', 'Yes, sure'), ('ai', "Okay! What is your question? I'm ready to help."), ('human', "I'm thinking of Lava cake "), ('ai', 'That sounds delicious! Lava cake is a rich and decadent dessert. Would you like me to help you find a recipe or offer some tips for making it?'), ('human', 'I want to bake some cake :D'), ('ai', "That's great! What kind of cake are you thinking of baking? I can help you find a recipe or offer some baking tips."), ('human', 'Hello'), ('ai', 'Hello! How can I help you today?')], 'context': [], 'answer': 'I apologize, but as an AI, I have no memory of past conversations. To help me assist you, could you please remind me of the food you mentioned?'}
2025-04-18 13:18:37,996 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, User Query: Hello, my name is Avada, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:18:37,996 - app.db - INFO - Getting chat history.
2025-04-18 13:18:37,998 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:18:38,012 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-18 13:18:38,012 - app.chat_controller - INFO - Chat history: []
2025-04-18 13:18:38,012 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:18:38,013 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:18:38,014 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:18:38,014 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:18:39,148 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:18:39,148 - app.db - INFO - Inserting application logs.
2025-04-18 13:18:39,150 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:18:39,166 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:18:39,167 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, AI response: {'input': 'Hello, my name is Avada', 'chat_history': [], 'context': [], 'answer': "Hello Avada, it's nice to meet you! How can I help you today?"}
2025-04-18 13:18:45,838 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, User Query: What is my name?, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:18:45,838 - app.db - INFO - Getting chat history.
2025-04-18 13:18:45,840 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:18:45,853 - app.db - INFO - Successfully retrieved 1 conversation turns
2025-04-18 13:18:45,853 - app.chat_controller - INFO - Chat history: [('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")]
2025-04-18 13:18:45,853 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:18:45,853 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:18:45,854 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:18:45,855 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:18:47,588 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:18:47,588 - app.db - INFO - Inserting application logs.
2025-04-18 13:18:47,590 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:18:47,603 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:18:47,603 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, AI response: {'input': 'What is my name?', 'chat_history': [('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")], 'context': [], 'answer': 'Your name is Avada.'}
2025-04-18 13:18:57,868 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, User Query: Great, i love to make Lava cake, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:18:57,868 - app.db - INFO - Getting chat history.
2025-04-18 13:18:57,870 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:18:57,875 - app.db - INFO - Successfully retrieved 2 conversation turns
2025-04-18 13:18:57,875 - app.chat_controller - INFO - Chat history: [('human', 'What is my name?'), ('ai', 'Your name is Avada.'), ('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")]
2025-04-18 13:18:57,875 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:18:57,875 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:18:57,876 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:18:57,877 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:18:59,885 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:18:59,885 - app.db - INFO - Inserting application logs.
2025-04-18 13:18:59,886 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:18:59,899 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:18:59,900 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, AI response: {'input': 'Great, i love to make Lava cake', 'chat_history': [('human', 'What is my name?'), ('ai', 'Your name is Avada.'), ('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")], 'context': [], 'answer': "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?"}
2025-04-18 13:19:05,204 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, User Query: Can you show me how to do it?, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:19:05,204 - app.db - INFO - Getting chat history.
2025-04-18 13:19:05,206 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:19:05,211 - app.db - INFO - Successfully retrieved 3 conversation turns
2025-04-18 13:19:05,211 - app.chat_controller - INFO - Chat history: [('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?"), ('human', 'What is my name?'), ('ai', 'Your name is Avada.'), ('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")]
2025-04-18 13:19:05,211 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:19:05,211 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:19:05,213 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:19:05,213 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:19:07,134 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:19:07,135 - app.db - INFO - Inserting application logs.
2025-04-18 13:19:07,136 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:19:07,139 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:19:07,139 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, AI response: {'input': 'Can you show me how to do it?', 'chat_history': [('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?"), ('human', 'What is my name?'), ('ai', 'Your name is Avada.'), ('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")], 'context': [], 'answer': 'I need more information to answer. What is "it" in your question? Please provide more context.'}
2025-04-18 13:19:16,851 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, User Query: What is my name, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:19:16,852 - app.db - INFO - Getting chat history.
2025-04-18 13:19:16,853 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:19:16,869 - app.db - INFO - Successfully retrieved 4 conversation turns
2025-04-18 13:19:16,869 - app.chat_controller - INFO - Chat history: [('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.'), ('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?"), ('human', 'What is my name?'), ('ai', 'Your name is Avada.'), ('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")]
2025-04-18 13:19:16,869 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:19:16,869 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:19:16,871 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:19:16,871 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:19:18,617 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:19:18,617 - app.db - INFO - Inserting application logs.
2025-04-18 13:19:18,618 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:19:18,621 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:19:18,622 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, AI response: {'input': 'What is my name', 'chat_history': [('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.'), ('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?"), ('human', 'What is my name?'), ('ai', 'Your name is Avada.'), ('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")], 'context': [], 'answer': 'Your name is Avada.'}
2025-04-18 13:19:30,634 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, User Query: Can you show me how to make Lava cake, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:19:30,635 - app.db - INFO - Getting chat history.
2025-04-18 13:19:30,636 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:19:30,651 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-04-18 13:19:30,651 - app.chat_controller - INFO - Chat history: [('human', 'What is my name'), ('ai', 'Your name is Avada.'), ('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.'), ('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?"), ('human', 'What is my name?'), ('ai', 'Your name is Avada.'), ('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")]
2025-04-18 13:19:30,651 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:19:30,651 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:19:30,652 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:19:30,653 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:19:32,543 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:19:32,543 - app.db - INFO - Inserting application logs.
2025-04-18 13:19:32,545 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:19:32,548 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:19:32,549 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, AI response: {'input': 'Can you show me how to make Lava cake', 'chat_history': [('human', 'What is my name'), ('ai', 'Your name is Avada.'), ('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.'), ('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?"), ('human', 'What is my name?'), ('ai', 'Your name is Avada.'), ('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")], 'context': [], 'answer': "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."}
2025-04-18 13:21:14,993 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, User Query: I'm asking you to remember this: my mother name is Lily, my father name is Logan, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:21:14,993 - app.db - INFO - Getting chat history.
2025-04-18 13:21:14,995 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:21:15,010 - app.db - INFO - Successfully retrieved 6 conversation turns
2025-04-18 13:21:15,011 - app.chat_controller - INFO - Chat history: [('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'What is my name'), ('ai', 'Your name is Avada.'), ('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.'), ('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?"), ('human', 'What is my name?'), ('ai', 'Your name is Avada.'), ('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")]
2025-04-18 13:21:15,011 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:21:15,011 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:21:15,012 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:21:15,012 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:21:17,713 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:21:17,714 - app.db - INFO - Inserting application logs.
2025-04-18 13:21:17,715 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:21:17,718 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:21:17,719 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, AI response: {'input': "I'm asking you to remember this: my mother name is Lily, my father name is Logan", 'chat_history': [('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'What is my name'), ('ai', 'Your name is Avada.'), ('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.'), ('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?"), ('human', 'What is my name?'), ('ai', 'Your name is Avada.'), ('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")], 'context': [], 'answer': "Okay, I will remember that your mother's name is Lily and your father's name is Logan."}
2025-04-18 13:21:23,712 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, User Query: What's my name, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:21:23,712 - app.db - INFO - Getting chat history.
2025-04-18 13:21:23,713 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:21:23,718 - app.db - INFO - Successfully retrieved 7 conversation turns
2025-04-18 13:21:23,719 - app.chat_controller - INFO - Chat history: [('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan."), ('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'What is my name'), ('ai', 'Your name is Avada.'), ('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.'), ('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?"), ('human', 'What is my name?'), ('ai', 'Your name is Avada.'), ('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")]
2025-04-18 13:21:23,719 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:21:23,719 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:21:23,720 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:21:23,721 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:21:25,344 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:21:25,344 - app.db - INFO - Inserting application logs.
2025-04-18 13:21:25,346 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:21:25,349 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:21:25,349 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, AI response: {'input': "What's my name", 'chat_history': [('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan."), ('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'What is my name'), ('ai', 'Your name is Avada.'), ('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.'), ('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?"), ('human', 'What is my name?'), ('ai', 'Your name is Avada.'), ('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")], 'context': [], 'answer': 'Your name is Avada.'}
2025-04-18 13:21:31,020 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, User Query: What's my sister name, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:21:31,020 - app.db - INFO - Getting chat history.
2025-04-18 13:21:31,021 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:21:31,026 - app.db - INFO - Successfully retrieved 8 conversation turns
2025-04-18 13:21:31,027 - app.chat_controller - INFO - Chat history: [('human', "What's my name"), ('ai', 'Your name is Avada.'), ('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan."), ('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'What is my name'), ('ai', 'Your name is Avada.'), ('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.'), ('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?"), ('human', 'What is my name?'), ('ai', 'Your name is Avada.'), ('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")]
2025-04-18 13:21:31,027 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:21:31,027 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:21:31,028 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:21:31,028 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:21:32,666 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:21:32,666 - app.db - INFO - Inserting application logs.
2025-04-18 13:21:32,667 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:21:32,670 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:21:32,671 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, AI response: {'input': "What's my sister name", 'chat_history': [('human', "What's my name"), ('ai', 'Your name is Avada.'), ('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan."), ('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'What is my name'), ('ai', 'Your name is Avada.'), ('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.'), ('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?"), ('human', 'What is my name?'), ('ai', 'Your name is Avada.'), ('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")], 'context': [], 'answer': "I do not have access to that information. I don't know who your sister is."}
2025-04-18 13:21:40,933 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, User Query: What's my father name, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:21:40,933 - app.db - INFO - Getting chat history.
2025-04-18 13:21:40,934 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:21:40,938 - app.db - INFO - Successfully retrieved 9 conversation turns
2025-04-18 13:21:40,938 - app.chat_controller - INFO - Chat history: [('human', "What's my sister name"), ('ai', "I do not have access to that information. I don't know who your sister is."), ('human', "What's my name"), ('ai', 'Your name is Avada.'), ('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan."), ('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'What is my name'), ('ai', 'Your name is Avada.'), ('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.'), ('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?"), ('human', 'What is my name?'), ('ai', 'Your name is Avada.'), ('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")]
2025-04-18 13:21:40,938 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:21:40,939 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:21:40,940 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:21:40,941 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:21:42,508 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:21:42,509 - app.db - INFO - Inserting application logs.
2025-04-18 13:21:42,510 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:21:42,512 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:21:42,513 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, AI response: {'input': "What's my father name", 'chat_history': [('human', "What's my sister name"), ('ai', "I do not have access to that information. I don't know who your sister is."), ('human', "What's my name"), ('ai', 'Your name is Avada.'), ('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan."), ('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'What is my name'), ('ai', 'Your name is Avada.'), ('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.'), ('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?"), ('human', 'What is my name?'), ('ai', 'Your name is Avada.'), ('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")], 'context': [], 'answer': "Your father's name is Logan."}
2025-04-18 13:21:57,234 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, User Query: My most loved food is lava cake, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:21:57,234 - app.db - INFO - Getting chat history.
2025-04-18 13:21:57,236 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:21:57,241 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-18 13:21:57,241 - app.chat_controller - INFO - Chat history: [('human', "What's my father name"), ('ai', "Your father's name is Logan."), ('human', "What's my sister name"), ('ai', "I do not have access to that information. I don't know who your sister is."), ('human', "What's my name"), ('ai', 'Your name is Avada.'), ('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan."), ('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'What is my name'), ('ai', 'Your name is Avada.'), ('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.'), ('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?"), ('human', 'What is my name?'), ('ai', 'Your name is Avada.'), ('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")]
2025-04-18 13:21:57,241 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:21:57,241 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:21:57,243 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:21:57,243 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:21:59,087 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:21:59,087 - app.db - INFO - Inserting application logs.
2025-04-18 13:21:59,088 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:21:59,091 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:21:59,092 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, AI response: {'input': 'My most loved food is lava cake', 'chat_history': [('human', "What's my father name"), ('ai', "Your father's name is Logan."), ('human', "What's my sister name"), ('ai', "I do not have access to that information. I don't know who your sister is."), ('human', "What's my name"), ('ai', 'Your name is Avada.'), ('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan."), ('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'What is my name'), ('ai', 'Your name is Avada.'), ('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.'), ('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?"), ('human', 'What is my name?'), ('ai', 'Your name is Avada.'), ('human', 'Hello, my name is Avada'), ('ai', "Hello Avada, it's nice to meet you! How can I help you today?")], 'context': [], 'answer': "That's wonderful! Lava cake is a delicious choice."}
2025-04-18 13:22:06,326 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, User Query: Can you show me how to do my most loved food, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:22:06,326 - app.db - INFO - Getting chat history.
2025-04-18 13:22:06,327 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:22:06,332 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-18 13:22:06,333 - app.chat_controller - INFO - Chat history: [('human', 'My most loved food is lava cake'), ('ai', "That's wonderful! Lava cake is a delicious choice."), ('human', "What's my father name"), ('ai', "Your father's name is Logan."), ('human', "What's my sister name"), ('ai', "I do not have access to that information. I don't know who your sister is."), ('human', "What's my name"), ('ai', 'Your name is Avada.'), ('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan."), ('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'What is my name'), ('ai', 'Your name is Avada.'), ('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.'), ('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?"), ('human', 'What is my name?'), ('ai', 'Your name is Avada.')]
2025-04-18 13:22:06,333 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:22:06,333 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:22:06,334 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:22:06,335 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:22:08,195 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:22:08,195 - app.db - INFO - Inserting application logs.
2025-04-18 13:22:08,197 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:22:08,201 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:22:08,202 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, AI response: {'input': 'Can you show me how to do my most loved food', 'chat_history': [('human', 'My most loved food is lava cake'), ('ai', "That's wonderful! Lava cake is a delicious choice."), ('human', "What's my father name"), ('ai', "Your father's name is Logan."), ('human', "What's my sister name"), ('ai', "I do not have access to that information. I don't know who your sister is."), ('human', "What's my name"), ('ai', 'Your name is Avada.'), ('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan."), ('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'What is my name'), ('ai', 'Your name is Avada.'), ('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.'), ('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?"), ('human', 'What is my name?'), ('ai', 'Your name is Avada.')], 'context': [], 'answer': "Since your most loved food is lava cake, I can provide you with a recipe. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."}
2025-04-18 13:22:29,136 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, User Query: Can you show me how to do my mom most loved food>, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:22:29,136 - app.db - INFO - Getting chat history.
2025-04-18 13:22:29,138 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:22:29,142 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-18 13:22:29,142 - app.chat_controller - INFO - Chat history: [('human', 'Can you show me how to do my most loved food'), ('ai', "Since your most loved food is lava cake, I can provide you with a recipe. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'My most loved food is lava cake'), ('ai', "That's wonderful! Lava cake is a delicious choice."), ('human', "What's my father name"), ('ai', "Your father's name is Logan."), ('human', "What's my sister name"), ('ai', "I do not have access to that information. I don't know who your sister is."), ('human', "What's my name"), ('ai', 'Your name is Avada.'), ('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan."), ('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'What is my name'), ('ai', 'Your name is Avada.'), ('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.'), ('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?")]
2025-04-18 13:22:29,142 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:22:29,142 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:22:29,145 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:22:29,146 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:22:31,150 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:22:31,150 - app.db - INFO - Inserting application logs.
2025-04-18 13:22:31,152 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:22:31,156 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:22:31,157 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, AI response: {'input': 'Can you show me how to do my mom most loved food>', 'chat_history': [('human', 'Can you show me how to do my most loved food'), ('ai', "Since your most loved food is lava cake, I can provide you with a recipe. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'My most loved food is lava cake'), ('ai', "That's wonderful! Lava cake is a delicious choice."), ('human', "What's my father name"), ('ai', "Your father's name is Logan."), ('human', "What's my sister name"), ('ai', "I do not have access to that information. I don't know who your sister is."), ('human', "What's my name"), ('ai', 'Your name is Avada.'), ('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan."), ('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'What is my name'), ('ai', 'Your name is Avada.'), ('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.'), ('human', 'Great, i love to make Lava cake'), ('ai', "That's great! Lava cake is delicious. Is there anything specific you'd like to discuss about making lava cake?")], 'context': [], 'answer': "I do not have information about your mom's favorite food. If you tell me what it is, I can provide you with a recipe or instructions on how to make it."}
2025-04-18 13:22:40,173 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, User Query: It's Pho, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:22:40,173 - app.db - INFO - Getting chat history.
2025-04-18 13:22:40,174 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:22:40,179 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-18 13:22:40,180 - app.chat_controller - INFO - Chat history: [('human', 'Can you show me how to do my mom most loved food>'), ('ai', "I do not have information about your mom's favorite food. If you tell me what it is, I can provide you with a recipe or instructions on how to make it."), ('human', 'Can you show me how to do my most loved food'), ('ai', "Since your most loved food is lava cake, I can provide you with a recipe. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'My most loved food is lava cake'), ('ai', "That's wonderful! Lava cake is a delicious choice."), ('human', "What's my father name"), ('ai', "Your father's name is Logan."), ('human', "What's my sister name"), ('ai', "I do not have access to that information. I don't know who your sister is."), ('human', "What's my name"), ('ai', 'Your name is Avada.'), ('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan."), ('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'What is my name'), ('ai', 'Your name is Avada.'), ('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.')]
2025-04-18 13:22:40,180 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:22:40,180 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:22:40,181 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:22:40,182 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:22:43,018 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:22:43,018 - app.db - INFO - Inserting application logs.
2025-04-18 13:22:43,020 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:22:43,023 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:22:43,024 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, AI response: {'input': "It's Pho", 'chat_history': [('human', 'Can you show me how to do my mom most loved food>'), ('ai', "I do not have information about your mom's favorite food. If you tell me what it is, I can provide you with a recipe or instructions on how to make it."), ('human', 'Can you show me how to do my most loved food'), ('ai', "Since your most loved food is lava cake, I can provide you with a recipe. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'My most loved food is lava cake'), ('ai', "That's wonderful! Lava cake is a delicious choice."), ('human', "What's my father name"), ('ai', "Your father's name is Logan."), ('human', "What's my sister name"), ('ai', "I do not have access to that information. I don't know who your sister is."), ('human', "What's my name"), ('ai', 'Your name is Avada.'), ('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan."), ('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'What is my name'), ('ai', 'Your name is Avada.'), ('human', 'Can you show me how to do it?'), ('ai', 'I need more information to answer. What is "it" in your question? Please provide more context.')], 'context': [], 'answer': "Pho is a Vietnamese noodle soup, typically made with broth, rice noodles, herbs, and meat. To make it, you'll need to simmer bones for the broth, prepare the noodles, and add your choice of toppings. There are many variations depending on the region and personal preference."}
2025-04-18 13:22:53,855 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, User Query: What's my favorite food, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:22:53,856 - app.db - INFO - Getting chat history.
2025-04-18 13:22:53,857 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:22:53,861 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-18 13:22:53,862 - app.chat_controller - INFO - Chat history: [('human', "It's Pho"), ('ai', "Pho is a Vietnamese noodle soup, typically made with broth, rice noodles, herbs, and meat. To make it, you'll need to simmer bones for the broth, prepare the noodles, and add your choice of toppings. There are many variations depending on the region and personal preference."), ('human', 'Can you show me how to do my mom most loved food>'), ('ai', "I do not have information about your mom's favorite food. If you tell me what it is, I can provide you with a recipe or instructions on how to make it."), ('human', 'Can you show me how to do my most loved food'), ('ai', "Since your most loved food is lava cake, I can provide you with a recipe. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'My most loved food is lava cake'), ('ai', "That's wonderful! Lava cake is a delicious choice."), ('human', "What's my father name"), ('ai', "Your father's name is Logan."), ('human', "What's my sister name"), ('ai', "I do not have access to that information. I don't know who your sister is."), ('human', "What's my name"), ('ai', 'Your name is Avada.'), ('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan."), ('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'What is my name'), ('ai', 'Your name is Avada.')]
2025-04-18 13:22:53,862 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:22:53,862 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:22:53,863 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:22:53,864 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:22:55,720 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:22:55,720 - app.db - INFO - Inserting application logs.
2025-04-18 13:22:55,721 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:22:55,725 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:22:55,726 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, AI response: {'input': "What's my favorite food", 'chat_history': [('human', "It's Pho"), ('ai', "Pho is a Vietnamese noodle soup, typically made with broth, rice noodles, herbs, and meat. To make it, you'll need to simmer bones for the broth, prepare the noodles, and add your choice of toppings. There are many variations depending on the region and personal preference."), ('human', 'Can you show me how to do my mom most loved food>'), ('ai', "I do not have information about your mom's favorite food. If you tell me what it is, I can provide you with a recipe or instructions on how to make it."), ('human', 'Can you show me how to do my most loved food'), ('ai', "Since your most loved food is lava cake, I can provide you with a recipe. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'My most loved food is lava cake'), ('ai', "That's wonderful! Lava cake is a delicious choice."), ('human', "What's my father name"), ('ai', "Your father's name is Logan."), ('human', "What's my sister name"), ('ai', "I do not have access to that information. I don't know who your sister is."), ('human', "What's my name"), ('ai', 'Your name is Avada.'), ('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan."), ('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'What is my name'), ('ai', 'Your name is Avada.')], 'context': [], 'answer': 'Your favorite food is lava cake.'}
2025-04-18 13:23:00,557 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, User Query: What's my mom favorite food, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:23:00,557 - app.db - INFO - Getting chat history.
2025-04-18 13:23:00,558 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:23:00,563 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-18 13:23:00,563 - app.chat_controller - INFO - Chat history: [('human', "What's my favorite food"), ('ai', 'Your favorite food is lava cake.'), ('human', "It's Pho"), ('ai', "Pho is a Vietnamese noodle soup, typically made with broth, rice noodles, herbs, and meat. To make it, you'll need to simmer bones for the broth, prepare the noodles, and add your choice of toppings. There are many variations depending on the region and personal preference."), ('human', 'Can you show me how to do my mom most loved food>'), ('ai', "I do not have information about your mom's favorite food. If you tell me what it is, I can provide you with a recipe or instructions on how to make it."), ('human', 'Can you show me how to do my most loved food'), ('ai', "Since your most loved food is lava cake, I can provide you with a recipe. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'My most loved food is lava cake'), ('ai', "That's wonderful! Lava cake is a delicious choice."), ('human', "What's my father name"), ('ai', "Your father's name is Logan."), ('human', "What's my sister name"), ('ai', "I do not have access to that information. I don't know who your sister is."), ('human', "What's my name"), ('ai', 'Your name is Avada.'), ('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan."), ('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten.")]
2025-04-18 13:23:00,563 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:23:00,563 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:23:00,564 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:23:00,565 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:23:02,270 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:23:02,270 - app.db - INFO - Inserting application logs.
2025-04-18 13:23:02,271 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:23:02,275 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:23:02,275 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, AI response: {'input': "What's my mom favorite food", 'chat_history': [('human', "What's my favorite food"), ('ai', 'Your favorite food is lava cake.'), ('human', "It's Pho"), ('ai', "Pho is a Vietnamese noodle soup, typically made with broth, rice noodles, herbs, and meat. To make it, you'll need to simmer bones for the broth, prepare the noodles, and add your choice of toppings. There are many variations depending on the region and personal preference."), ('human', 'Can you show me how to do my mom most loved food>'), ('ai', "I do not have information about your mom's favorite food. If you tell me what it is, I can provide you with a recipe or instructions on how to make it."), ('human', 'Can you show me how to do my most loved food'), ('ai', "Since your most loved food is lava cake, I can provide you with a recipe. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'My most loved food is lava cake'), ('ai', "That's wonderful! Lava cake is a delicious choice."), ('human', "What's my father name"), ('ai', "Your father's name is Logan."), ('human', "What's my sister name"), ('ai', "I do not have access to that information. I don't know who your sister is."), ('human', "What's my name"), ('ai', 'Your name is Avada.'), ('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan."), ('human', 'Can you show me how to make Lava cake'), ('ai', "I can provide you with a recipe for lava cake. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten.")], 'context': [], 'answer': "I do not have access to that information. I don't know what your mom's favorite food is."}
2025-04-18 13:23:11,185 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, User Query: I told you, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:23:11,185 - app.db - INFO - Getting chat history.
2025-04-18 13:23:11,186 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:23:11,191 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-18 13:23:11,191 - app.chat_controller - INFO - Chat history: [('human', "What's my mom favorite food"), ('ai', "I do not have access to that information. I don't know what your mom's favorite food is."), ('human', "What's my favorite food"), ('ai', 'Your favorite food is lava cake.'), ('human', "It's Pho"), ('ai', "Pho is a Vietnamese noodle soup, typically made with broth, rice noodles, herbs, and meat. To make it, you'll need to simmer bones for the broth, prepare the noodles, and add your choice of toppings. There are many variations depending on the region and personal preference."), ('human', 'Can you show me how to do my mom most loved food>'), ('ai', "I do not have information about your mom's favorite food. If you tell me what it is, I can provide you with a recipe or instructions on how to make it."), ('human', 'Can you show me how to do my most loved food'), ('ai', "Since your most loved food is lava cake, I can provide you with a recipe. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'My most loved food is lava cake'), ('ai', "That's wonderful! Lava cake is a delicious choice."), ('human', "What's my father name"), ('ai', "Your father's name is Logan."), ('human', "What's my sister name"), ('ai', "I do not have access to that information. I don't know who your sister is."), ('human', "What's my name"), ('ai', 'Your name is Avada.'), ('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan.")]
2025-04-18 13:23:11,191 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:23:11,191 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:23:11,193 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:23:11,194 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:23:13,023 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:23:13,024 - app.db - INFO - Inserting application logs.
2025-04-18 13:23:13,025 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:23:13,028 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:23:13,029 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, AI response: {'input': 'I told you', 'chat_history': [('human', "What's my mom favorite food"), ('ai', "I do not have access to that information. I don't know what your mom's favorite food is."), ('human', "What's my favorite food"), ('ai', 'Your favorite food is lava cake.'), ('human', "It's Pho"), ('ai', "Pho is a Vietnamese noodle soup, typically made with broth, rice noodles, herbs, and meat. To make it, you'll need to simmer bones for the broth, prepare the noodles, and add your choice of toppings. There are many variations depending on the region and personal preference."), ('human', 'Can you show me how to do my mom most loved food>'), ('ai', "I do not have information about your mom's favorite food. If you tell me what it is, I can provide you with a recipe or instructions on how to make it."), ('human', 'Can you show me how to do my most loved food'), ('ai', "Since your most loved food is lava cake, I can provide you with a recipe. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'My most loved food is lava cake'), ('ai', "That's wonderful! Lava cake is a delicious choice."), ('human', "What's my father name"), ('ai', "Your father's name is Logan."), ('human', "What's my sister name"), ('ai', "I do not have access to that information. I don't know who your sister is."), ('human', "What's my name"), ('ai', 'Your name is Avada.'), ('human', "I'm asking you to remember this: my mother name is Lily, my father name is Logan"), ('ai', "Okay, I will remember that your mother's name is Lily and your father's name is Logan.")], 'context': [], 'answer': "You told me that your mother's name is Lily and your father's name is Logan."}
2025-04-18 13:23:39,182 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, User Query: Can you repeat what you remember until now?, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:23:39,182 - app.db - INFO - Getting chat history.
2025-04-18 13:23:39,184 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:23:39,189 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-18 13:23:39,189 - app.chat_controller - INFO - Chat history: [('human', 'I told you'), ('ai', "You told me that your mother's name is Lily and your father's name is Logan."), ('human', "What's my mom favorite food"), ('ai', "I do not have access to that information. I don't know what your mom's favorite food is."), ('human', "What's my favorite food"), ('ai', 'Your favorite food is lava cake.'), ('human', "It's Pho"), ('ai', "Pho is a Vietnamese noodle soup, typically made with broth, rice noodles, herbs, and meat. To make it, you'll need to simmer bones for the broth, prepare the noodles, and add your choice of toppings. There are many variations depending on the region and personal preference."), ('human', 'Can you show me how to do my mom most loved food>'), ('ai', "I do not have information about your mom's favorite food. If you tell me what it is, I can provide you with a recipe or instructions on how to make it."), ('human', 'Can you show me how to do my most loved food'), ('ai', "Since your most loved food is lava cake, I can provide you with a recipe. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'My most loved food is lava cake'), ('ai', "That's wonderful! Lava cake is a delicious choice."), ('human', "What's my father name"), ('ai', "Your father's name is Logan."), ('human', "What's my sister name"), ('ai', "I do not have access to that information. I don't know who your sister is."), ('human', "What's my name"), ('ai', 'Your name is Avada.')]
2025-04-18 13:23:39,189 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:23:39,189 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:23:39,191 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:23:39,191 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:23:41,986 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:23:41,986 - app.db - INFO - Inserting application logs.
2025-04-18 13:23:41,987 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:23:41,990 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:23:41,990 - app.chat_controller - INFO - Session ID: 33edbc2f-4ac4-41f2-ad03-383990fd9342, AI response: {'input': 'Can you repeat what you remember until now?', 'chat_history': [('human', 'I told you'), ('ai', "You told me that your mother's name is Lily and your father's name is Logan."), ('human', "What's my mom favorite food"), ('ai', "I do not have access to that information. I don't know what your mom's favorite food is."), ('human', "What's my favorite food"), ('ai', 'Your favorite food is lava cake.'), ('human', "It's Pho"), ('ai', "Pho is a Vietnamese noodle soup, typically made with broth, rice noodles, herbs, and meat. To make it, you'll need to simmer bones for the broth, prepare the noodles, and add your choice of toppings. There are many variations depending on the region and personal preference."), ('human', 'Can you show me how to do my mom most loved food>'), ('ai', "I do not have information about your mom's favorite food. If you tell me what it is, I can provide you with a recipe or instructions on how to make it."), ('human', 'Can you show me how to do my most loved food'), ('ai', "Since your most loved food is lava cake, I can provide you with a recipe. You'll typically need ingredients like chocolate, butter, sugar, eggs, and flour. The key is to slightly underbake the cakes so the center remains molten."), ('human', 'My most loved food is lava cake'), ('ai', "That's wonderful! Lava cake is a delicious choice."), ('human', "What's my father name"), ('ai', "Your father's name is Logan."), ('human', "What's my sister name"), ('ai', "I do not have access to that information. I don't know who your sister is."), ('human', "What's my name"), ('ai', 'Your name is Avada.')], 'context': [], 'answer': "Okay, here's what I remember about you: Your name is Avada, your mother's name is Lily, your father's name is Logan, and your favorite food is Pho."}
2025-04-18 13:32:19,919 - app.chat_controller - INFO - Session ID: 71d2bb7e-7d42-4f22-85ff-b3bd8b4d5459, User Query: Howdy partner, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:32:19,919 - app.db - INFO - Getting chat history.
2025-04-18 13:32:19,921 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:32:19,926 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-18 13:32:19,926 - app.chat_controller - INFO - Chat history: []
2025-04-18 13:32:19,926 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:32:19,926 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:32:19,928 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:32:19,928 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:32:21,347 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:32:21,347 - app.db - INFO - Inserting application logs.
2025-04-18 13:32:21,349 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:32:21,352 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:32:21,354 - app.chat_controller - INFO - Session ID: 71d2bb7e-7d42-4f22-85ff-b3bd8b4d5459, AI response: {'input': 'Howdy partner', 'chat_history': [], 'context': [], 'answer': 'Howdy partner is an informal greeting, typically used in the Southwestern United States. It is commonly associated with cowboys and Western culture. The phrase is a friendly way to say "hello."'}
2025-04-18 13:32:42,211 - app.chat_controller - INFO - Session ID: 6b3d6470-73bb-45fe-a88b-bf6749d1868d, User Query: Hi, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:32:42,211 - app.db - INFO - Getting chat history.
2025-04-18 13:32:42,212 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:32:42,217 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-18 13:32:42,217 - app.chat_controller - INFO - Chat history: []
2025-04-18 13:32:42,218 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:32:42,218 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:32:42,219 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:32:42,220 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:32:43,400 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:32:43,400 - app.db - INFO - Inserting application logs.
2025-04-18 13:32:43,402 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:32:43,406 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:32:43,407 - app.chat_controller - INFO - Session ID: 6b3d6470-73bb-45fe-a88b-bf6749d1868d, AI response: {'input': 'Hi', 'chat_history': [], 'context': [], 'answer': 'Hi there! How can I help you today?'}
2025-04-18 13:48:19,860 - app.chat_controller - INFO - Session ID: d63abf2d-d28c-414b-bced-5e85f0092f9b, User Query: Hello, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:48:19,860 - app.db - INFO - Getting chat history.
2025-04-18 13:48:19,863 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:48:19,868 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-18 13:48:19,868 - app.chat_controller - INFO - Chat history: []
2025-04-18 13:48:19,868 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:48:19,868 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:48:19,870 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:48:19,870 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:48:21,208 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:48:21,208 - app.db - INFO - Inserting application logs.
2025-04-18 13:48:21,210 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:48:21,214 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:48:21,215 - app.chat_controller - INFO - Session ID: d63abf2d-d28c-414b-bced-5e85f0092f9b, AI response: {'input': 'Hello', 'chat_history': [], 'context': [], 'answer': 'Hi there! How can I help you today?'}
2025-04-18 13:48:29,057 - app.chat_controller - INFO - Session ID: d63abf2d-d28c-414b-bced-5e85f0092f9b, User Query: I love you, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:48:29,057 - app.db - INFO - Getting chat history.
2025-04-18 13:48:29,058 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:48:29,064 - app.db - INFO - Successfully retrieved 1 conversation turns
2025-04-18 13:48:29,064 - app.chat_controller - INFO - Chat history: [('human', 'Hello'), ('ai', 'Hi there! How can I help you today?')]
2025-04-18 13:48:29,064 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:48:29,064 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:48:29,066 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:48:29,066 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:48:31,040 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:48:31,040 - app.db - INFO - Inserting application logs.
2025-04-18 13:48:31,041 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:48:31,044 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:48:31,044 - app.chat_controller - INFO - Session ID: d63abf2d-d28c-414b-bced-5e85f0092f9b, AI response: {'input': 'I love you', 'chat_history': [('human', 'Hello'), ('ai', 'Hi there! How can I help you today?')], 'context': [], 'answer': "I'm glad to hear that you appreciate me. As an AI, I don't experience emotions like love, but I am here to assist you with any questions or tasks you have. How can I help you further?"}
2025-04-18 13:48:42,573 - app.chat_controller - INFO - Session ID: d63abf2d-d28c-414b-bced-5e85f0092f9b, User Query: I want to commit suicide, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:48:42,573 - app.db - INFO - Getting chat history.
2025-04-18 13:48:42,575 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:48:42,581 - app.db - INFO - Successfully retrieved 2 conversation turns
2025-04-18 13:48:42,581 - app.chat_controller - INFO - Chat history: [('human', 'I love you'), ('ai', "I'm glad to hear that you appreciate me. As an AI, I don't experience emotions like love, but I am here to assist you with any questions or tasks you have. How can I help you further?"), ('human', 'Hello'), ('ai', 'Hi there! How can I help you today?')]
2025-04-18 13:48:42,581 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:48:42,581 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:48:42,583 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:48:42,583 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:48:45,276 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:48:45,276 - app.db - INFO - Inserting application logs.
2025-04-18 13:48:45,278 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:48:45,281 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:48:45,281 - app.chat_controller - INFO - Session ID: d63abf2d-d28c-414b-bced-5e85f0092f9b, AI response: {'input': 'I want to commit suicide', 'chat_history': [('human', 'I love you'), ('ai', "I'm glad to hear that you appreciate me. As an AI, I don't experience emotions like love, but I am here to assist you with any questions or tasks you have. How can I help you further?"), ('human', 'Hello'), ('ai', 'Hi there! How can I help you today?')], 'context': [], 'answer': "If you're feeling suicidal, please know that there's support available. You can contact the National Suicide Prevention Lifeline at 988 or text HOME to 741741 to connect with the Crisis Text Line. These services are free, confidential, and available 24/7."}
2025-04-18 13:49:07,853 - app.chat_controller - INFO - Session ID: d63abf2d-d28c-414b-bced-5e85f0092f9b, User Query: But what meaning in keep living?, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:49:07,853 - app.db - INFO - Getting chat history.
2025-04-18 13:49:07,855 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:49:07,860 - app.db - INFO - Successfully retrieved 3 conversation turns
2025-04-18 13:49:07,861 - app.chat_controller - INFO - Chat history: [('human', 'I want to commit suicide'), ('ai', "If you're feeling suicidal, please know that there's support available. You can contact the National Suicide Prevention Lifeline at 988 or text HOME to 741741 to connect with the Crisis Text Line. These services are free, confidential, and available 24/7."), ('human', 'I love you'), ('ai', "I'm glad to hear that you appreciate me. As an AI, I don't experience emotions like love, but I am here to assist you with any questions or tasks you have. How can I help you further?"), ('human', 'Hello'), ('ai', 'Hi there! How can I help you today?')]
2025-04-18 13:49:07,861 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:49:07,861 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:49:07,862 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:49:07,862 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:49:09,852 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:49:09,852 - app.db - INFO - Inserting application logs.
2025-04-18 13:49:09,855 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:49:09,859 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:49:09,859 - app.chat_controller - INFO - Session ID: d63abf2d-d28c-414b-bced-5e85f0092f9b, AI response: {'input': 'But what meaning in keep living?', 'chat_history': [('human', 'I want to commit suicide'), ('ai', "If you're feeling suicidal, please know that there's support available. You can contact the National Suicide Prevention Lifeline at 988 or text HOME to 741741 to connect with the Crisis Text Line. These services are free, confidential, and available 24/7."), ('human', 'I love you'), ('ai', "I'm glad to hear that you appreciate me. As an AI, I don't experience emotions like love, but I am here to assist you with any questions or tasks you have. How can I help you further?"), ('human', 'Hello'), ('ai', 'Hi there! How can I help you today?')], 'context': [], 'answer': 'As an AI, I am not qualified to provide guidance on existential questions. However, exploring philosophy, spirituality, and personal values can help you discover meaning. Connecting with loved ones, pursuing passions, and contributing to something larger than yourself can also provide a sense of purpose.'}
2025-04-18 13:49:59,353 - app.chat_controller - INFO - Session ID: 43e2858b-1e1f-456c-aa40-a0f90182d64b, User Query: Bonjour, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-18 13:49:59,354 - app.db - INFO - Getting chat history.
2025-04-18 13:49:59,355 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:49:59,359 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-18 13:49:59,359 - app.chat_controller - INFO - Chat history: []
2025-04-18 13:49:59,359 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-18 13:49:59,359 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-18 13:49:59,360 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-18 13:49:59,361 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-18 13:50:00,514 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-18 13:50:00,515 - app.db - INFO - Inserting application logs.
2025-04-18 13:50:00,516 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-18 13:50:00,518 - app.db - INFO - Successfully inserted application logs.
2025-04-18 13:50:00,519 - app.chat_controller - INFO - Session ID: 43e2858b-1e1f-456c-aa40-a0f90182d64b, AI response: {'input': 'Bonjour', 'chat_history': [], 'context': [], 'answer': "Bonjour! That's French for hello. How can I help you today?"}
2025-04-19 14:35:50,319 - app.chat_controller - INFO - Session ID: 0a41b3f7-1ba5-441b-8135-6fabb184122c, User Query: Hello, Model: GenerationModelName.GEMINI_2_FLASH
2025-04-19 14:35:50,323 - app.db - INFO - Getting chat history.
2025-04-19 14:35:50,421 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-19 14:35:50,511 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-19 14:35:50,511 - app.chat_controller - INFO - Chat history: []
2025-04-19 14:35:50,513 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-19 14:35:50,515 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-19 14:35:50,651 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cb5931d0e00> search_kwargs={'k': 3}
2025-04-19 14:35:50,685 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-19 14:35:53,098 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-19 14:35:53,098 - app.db - INFO - Inserting application logs.
2025-04-19 14:35:53,100 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-19 14:35:53,118 - app.db - INFO - Successfully inserted application logs.
2025-04-19 14:35:53,119 - app.chat_controller - INFO - Session ID: 0a41b3f7-1ba5-441b-8135-6fabb184122c, AI response: {'input': 'Hello', 'chat_history': [], 'context': [], 'answer': 'Hello! How can I assist you today? I am ready to answer your questions or provide information.'}
2025-04-19 15:53:21,719 - app.audio_controller - INFO - Whisper transcript: 
2025-04-19 15:54:54,890 - app.audio_controller - INFO - Whisper transcript: , finchao, finchao
2025-04-19 15:57:20,479 - app.audio_controller - INFO - Whisper transcript:  Ciao, ciao, ciao
2025-04-19 16:03:53,109 - app.audio_controller - INFO - Speech: phim cho ti l ngi vit nam.
2025-04-19 16:04:09,440 - app.audio_controller - INFO - Speech: phim cho ti l ngi vit nam.
2025-04-19 16:08:44,184 - app.audio_controller - INFO - Speech: xin cho ti l ngi vit nam.
2025-04-19 16:11:28,299 - app.audio_controller - INFO - Speech: xin cho ti l ngi m  m.
2025-04-19 16:16:16,159 - app.audio_controller - INFO - Speech: xin cho ti l ngi vit nam v ti rt thch n ko v ti cng rt thch gi l i chi vi ngi yu .
2025-04-19 16:17:01,572 - app.audio_controller - INFO - Speech: xin cho ti l ngi vit nam v ti rt thch n kim.
2025-04-19 16:19:42,177 - app.audio_controller - INFO - Speech: chng ti l ngi vit nam.
2025-04-19 16:19:54,622 - app.audio_controller - INFO - Speech: xin cho ti l ngi vit nam.
2025-04-19 16:20:40,482 - app.audio_controller - INFO - Speech: xin cho ti l ngi vit nam th by gi ti mun ni l ti yu bn y nhng m ti khng bit l ni nh th no th bn s hiu c nhng m by gi c ni ba i vi pht ti nh tay tng.
2025-04-19 16:21:25,146 - app.audio_controller - INFO - Speech: ti th cng bnh thng thi nhng m by gi ni chuyn thoi mi nh th ny th  pht hin xem l ci audio ca ti hot ng ng khng ch by gi th khng bit l bao gi ly rng nn l mnh cng phi.
2025-04-19 16:21:54,162 - app.audio_controller - INFO - Speech: vy th by gi mnh c th lun hoc by gi c sai th th thay th th thay cho tht.
2025-04-19 16:22:13,759 - app.audio_controller - INFO - Speech:  by gi th cng ok ri chng c vn  g c.
2025-04-19 16:24:49,305 - app.audio_controller - INFO - Speech: xin cho th by gi mnh c ni l ng khng.
2025-04-19 16:24:56,351 - app.audio_controller - INFO - Speech:  k bn i by gi p by gi.
2025-04-19 16:25:38,570 - app.audio_controller - INFO - Speech: vy th by gi mnh c ni lun by gi c ni  xem mnh tt h thng th no  cho mnh mi tnh c sao.
2025-04-20 07:38:21,529 - app.audio_controller - INFO - Speech: h l xin cho mi ngi.
2025-04-20 07:50:00,993 - app.audio_controller - INFO - Speech: h lu m em y nam vi ai on t ghe t phong nhu.
2025-04-20 07:50:01,044 - app.chat_controller - INFO - Session ID: 25b170cc-d9e8-4a09-9fbe-ea904a556757, User Query: h lu m em y nam vi ai on t ghe t phong nhu., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 07:50:01,044 - app.db - INFO - Getting chat history.
2025-04-20 07:50:01,044 - app.chat_controller - INFO - Session ID: 25b170cc-d9e8-4a09-9fbe-ea904a556757, User Query: h lu m em y nam vi ai on t ghe t phong nhu., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 07:50:01,044 - app.db - INFO - Getting chat history.
2025-04-20 07:50:01,048 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 07:50:01,048 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 07:50:01,072 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-20 07:50:01,072 - app.chat_controller - INFO - Chat history: []
2025-04-20 07:50:01,072 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 07:50:01,072 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 07:50:01,073 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-20 07:50:01,073 - app.chat_controller - INFO - Chat history: []
2025-04-20 07:50:01,074 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 07:50:01,074 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 07:50:01,076 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 07:50:01,081 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 07:50:01,082 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 07:50:01,083 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 07:50:03,171 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 07:50:03,171 - app.db - INFO - Inserting application logs.
2025-04-20 07:50:03,173 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 07:50:03,195 - app.db - INFO - Successfully inserted application logs.
2025-04-20 07:50:03,196 - app.chat_controller - INFO - Session ID: 25b170cc-d9e8-4a09-9fbe-ea904a556757, AI response: {'input': 'h lu m em y nam vi ai on t ghe t phong nhu.', 'chat_history': [], 'context': [], 'answer': 'I am sorry, I cannot provide a translation for that query. It may contain inappropriate content.'}
2025-04-20 07:50:04,116 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 07:50:04,116 - app.db - INFO - Inserting application logs.
2025-04-20 07:50:04,117 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 07:50:04,130 - app.db - INFO - Successfully inserted application logs.
2025-04-20 07:50:04,131 - app.chat_controller - INFO - Session ID: 25b170cc-d9e8-4a09-9fbe-ea904a556757, AI response: {'input': 'h lu m em y nam vi ai on t ghe t phong nhu.', 'chat_history': [], 'context': [], 'answer': 'I am sorry, I cannot provide a response in that language. I can answer in English or other widely spoken languages.'}
2025-04-20 07:52:08,839 - app.chat_controller - INFO - Session ID: 9aab04fc-eb90-47d4-a013-490b214d73de, User Query: h lu m em y nam vi ai on t ghe t phong nhu., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 07:52:08,840 - app.db - INFO - Getting chat history.
2025-04-20 07:52:08,841 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 07:52:08,855 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-20 07:52:08,855 - app.chat_controller - INFO - Chat history: []
2025-04-20 07:52:08,855 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 07:52:08,855 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 07:52:08,856 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 07:52:08,857 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 07:52:09,944 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 07:52:09,944 - app.db - INFO - Inserting application logs.
2025-04-20 07:52:09,946 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 07:52:09,949 - app.db - INFO - Successfully inserted application logs.
2025-04-20 07:52:09,950 - app.chat_controller - INFO - Session ID: 9aab04fc-eb90-47d4-a013-490b214d73de, AI response: {'input': 'h lu m em y nam vi ai on t ghe t phong nhu.', 'chat_history': [], 'context': [], 'answer': "I'm sorry, I can't help with that. The request violates my safety guidelines."}
2025-04-20 07:52:18,341 - app.audio_controller - INFO - Speech: elu mai u ca xin lng.
2025-04-20 07:52:18,364 - app.chat_controller - INFO - Session ID: c209e919-05e9-491f-b9ab-15721bf9fdca, User Query: elu mai u ca xin lng., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 07:52:18,364 - app.chat_controller - INFO - Session ID: c209e919-05e9-491f-b9ab-15721bf9fdca, User Query: elu mai u ca xin lng., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 07:52:18,364 - app.db - INFO - Getting chat history.
2025-04-20 07:52:18,364 - app.db - INFO - Getting chat history.
2025-04-20 07:52:18,367 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 07:52:18,367 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 07:52:18,380 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-20 07:52:18,380 - app.chat_controller - INFO - Chat history: []
2025-04-20 07:52:18,380 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 07:52:18,380 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 07:52:18,382 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-20 07:52:18,382 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 07:52:18,382 - app.chat_controller - INFO - Chat history: []
2025-04-20 07:52:18,383 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 07:52:18,383 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 07:52:18,384 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 07:52:18,387 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 07:52:18,388 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 07:52:19,402 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 07:52:19,402 - app.db - INFO - Inserting application logs.
2025-04-20 07:52:19,403 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 07:52:19,406 - app.db - INFO - Successfully inserted application logs.
2025-04-20 07:52:19,406 - app.chat_controller - INFO - Session ID: c209e919-05e9-491f-b9ab-15721bf9fdca, AI response: {'input': 'elu mai u ca xin lng.', 'chat_history': [], 'context': [], 'answer': 'Ti xin li, ti khng c thng tin .'}
2025-04-20 07:52:20,323 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 07:52:20,323 - app.db - INFO - Inserting application logs.
2025-04-20 07:52:20,324 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 07:52:20,328 - app.db - INFO - Successfully inserted application logs.
2025-04-20 07:52:20,328 - app.chat_controller - INFO - Session ID: c209e919-05e9-491f-b9ab-15721bf9fdca, AI response: {'input': 'elu mai u ca xin lng.', 'chat_history': [], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng th din t li khng?'}
2025-04-20 07:52:31,880 - app.audio_controller - INFO - Speech:  xin cho ti l ngi vit nam v ti tn l nam.
2025-04-20 07:52:31,897 - app.chat_controller - INFO - Session ID: aff89ad6-8760-4255-8e29-97a79fd61206, User Query:  xin cho ti l ngi vit nam v ti tn l nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 07:52:31,898 - app.db - INFO - Getting chat history.
2025-04-20 07:52:31,899 - app.chat_controller - INFO - Session ID: aff89ad6-8760-4255-8e29-97a79fd61206, User Query:  xin cho ti l ngi vit nam v ti tn l nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 07:52:31,900 - app.db - INFO - Getting chat history.
2025-04-20 07:52:31,901 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 07:52:31,904 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 07:52:31,919 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-20 07:52:31,919 - app.chat_controller - INFO - Chat history: []
2025-04-20 07:52:31,919 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 07:52:31,920 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 07:52:31,922 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 07:52:31,922 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 07:52:31,923 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-20 07:52:31,923 - app.chat_controller - INFO - Chat history: []
2025-04-20 07:52:31,923 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 07:52:31,923 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 07:52:31,927 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 07:52:31,928 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 07:52:33,855 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 07:52:33,855 - app.db - INFO - Inserting application logs.
2025-04-20 07:52:33,856 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 07:52:33,870 - app.db - INFO - Successfully inserted application logs.
2025-04-20 07:52:33,871 - app.chat_controller - INFO - Session ID: aff89ad6-8760-4255-8e29-97a79fd61206, AI response: {'input': ' xin cho ti l ngi vit nam v ti tn l nam.', 'chat_history': [], 'context': [], 'answer': 'Cho bn Nam, rt vui c gp bn. Ti l mt tr l o v sn sng h tr bn.'}
2025-04-20 07:52:34,816 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 07:52:34,816 - app.db - INFO - Inserting application logs.
2025-04-20 07:52:34,817 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 07:52:34,820 - app.db - INFO - Successfully inserted application logs.
2025-04-20 07:52:34,821 - app.chat_controller - INFO - Session ID: aff89ad6-8760-4255-8e29-97a79fd61206, AI response: {'input': ' xin cho ti l ngi vit nam v ti tn l nam.', 'chat_history': [], 'context': [], 'answer': 'Cho bn Nam, rt vui c gp bn. Ti l mt tr l o v sn sng gip  bn vi bt k cu hi hoc yu cu no.'}
2025-04-20 07:53:14,586 - app.audio_controller - INFO - Speech: xin cho ti l ngi vit nam.
2025-04-20 07:53:14,605 - app.chat_controller - INFO - Session ID: 3f92f943-055e-4f68-805b-1de09f6b6466, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 07:53:14,606 - app.db - INFO - Getting chat history.
2025-04-20 07:53:14,606 - app.chat_controller - INFO - Session ID: 3f92f943-055e-4f68-805b-1de09f6b6466, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 07:53:14,606 - app.db - INFO - Getting chat history.
2025-04-20 07:53:14,608 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 07:53:14,609 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 07:53:14,617 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-20 07:53:14,617 - app.chat_controller - INFO - Chat history: []
2025-04-20 07:53:14,618 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-20 07:53:14,618 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 07:53:14,618 - app.chat_controller - INFO - Chat history: []
2025-04-20 07:53:14,618 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 07:53:14,618 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 07:53:14,618 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 07:53:14,620 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 07:53:14,621 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 07:53:14,622 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 07:53:14,623 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 07:53:15,782 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 07:53:15,782 - app.db - INFO - Inserting application logs.
2025-04-20 07:53:15,783 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 07:53:15,787 - app.db - INFO - Successfully inserted application logs.
2025-04-20 07:53:15,787 - app.chat_controller - INFO - Session ID: 3f92f943-055e-4f68-805b-1de09f6b6466, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [], 'context': [], 'answer': 'Ti rt vui c gp bn. Rt vui c h tr bn hm nay. Bn cn g?'}
2025-04-20 07:53:17,449 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 07:53:17,449 - app.db - INFO - Inserting application logs.
2025-04-20 07:53:17,451 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 07:53:17,454 - app.db - INFO - Successfully inserted application logs.
2025-04-20 07:53:17,455 - app.chat_controller - INFO - Session ID: 3f92f943-055e-4f68-805b-1de09f6b6466, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [], 'context': [], 'answer': 'Ti l mt tr l o, rt vui c tr chuyn vi bn. Bn c cu hi no mun hi ti khng?'}
2025-04-20 07:57:17,438 - app.audio_controller - INFO - Speech: xin cho tt c ngi vit nam.
2025-04-20 07:57:27,056 - app.audio_controller - INFO - Speech: ti mun c.
2025-04-20 07:57:48,099 - app.audio_controller - INFO - Speech: iu ny  khin nhiu ngi m c c hiu r.
2025-04-20 08:00:01,019 - app.audio_controller - INFO - Speech: google ngay lp tc vo mn vn hc v ng k nhn nh phong tro to s nghip ca lp hc.
2025-04-20 08:00:11,412 - app.audio_controller - INFO - Speech: cho cn l ngi vit nam.
2025-04-20 08:00:11,421 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: cho cn l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:00:11,422 - app.db - INFO - Getting chat history.
2025-04-20 08:00:11,423 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:00:11,428 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-20 08:00:11,428 - app.chat_controller - INFO - Chat history: []
2025-04-20 08:00:11,428 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:00:11,428 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:00:11,430 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:00:11,431 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:00:14,263 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 08:00:14,263 - app.db - INFO - Inserting application logs.
2025-04-20 08:00:14,265 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:00:14,268 - app.db - INFO - Successfully inserted application logs.
2025-04-20 08:00:14,268 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'cho cn l ngi vit nam.', 'chat_history': [], 'context': [], 'answer': 'Ti l mt m hnh ngn ng ln, c Google hun luyn.'}
2025-04-20 08:03:19,237 - app.audio_controller - INFO - Speech: y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.
2025-04-20 08:03:19,252 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:03:19,252 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:03:19,252 - app.db - INFO - Getting chat history.
2025-04-20 08:03:19,252 - app.db - INFO - Getting chat history.
2025-04-20 08:03:19,255 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:03:19,256 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:03:19,269 - app.db - INFO - Successfully retrieved 1 conversation turns
2025-04-20 08:03:19,270 - app.chat_controller - INFO - Chat history: [('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')]
2025-04-20 08:03:19,270 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:03:19,270 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:03:19,271 - app.db - INFO - Successfully retrieved 1 conversation turns
2025-04-20 08:03:19,272 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:03:19,272 - app.chat_controller - INFO - Chat history: [('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')]
2025-04-20 08:03:19,272 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:03:19,272 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:03:19,273 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:03:19,277 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:03:19,277 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:03:20,953 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 08:03:20,953 - app.db - INFO - Inserting application logs.
2025-04-20 08:03:20,954 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:03:20,966 - app.db - INFO - Successfully inserted application logs.
2025-04-20 08:03:20,967 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.', 'chat_history': [('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')], 'context': [], 'answer': 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.'}
2025-04-20 08:03:22,131 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 08:03:22,131 - app.db - INFO - Inserting application logs.
2025-04-20 08:03:22,133 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:03:22,136 - app.db - INFO - Successfully inserted application logs.
2025-04-20 08:03:22,137 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.', 'chat_history': [('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')], 'context': [], 'answer': 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'}
2025-04-20 08:03:30,119 - app.audio_controller - INFO - Speech: bn c th nghe  ti ni g ch.
2025-04-20 08:03:30,125 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: bn c th nghe  ti ni g ch., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:03:30,125 - app.db - INFO - Getting chat history.
2025-04-20 08:03:30,126 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:03:30,140 - app.db - INFO - Successfully retrieved 3 conversation turns
2025-04-20 08:03:30,140 - app.chat_controller - INFO - Chat history: [('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.'), ('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')]
2025-04-20 08:03:30,140 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:03:30,140 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:03:30,142 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:03:30,142 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:03:32,700 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 08:03:32,700 - app.db - INFO - Inserting application logs.
2025-04-20 08:03:32,702 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:03:32,713 - app.db - INFO - Successfully inserted application logs.
2025-04-20 08:03:32,714 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'bn c th nghe  ti ni g ch.', 'chat_history': [('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.'), ('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')], 'context': [], 'answer': 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.'}
2025-04-20 08:03:44,913 - app.audio_controller - INFO - Speech:  cho ti vit.
2025-04-20 08:03:44,920 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query:  cho ti vit., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:03:44,920 - app.db - INFO - Getting chat history.
2025-04-20 08:03:44,921 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:03:44,926 - app.db - INFO - Successfully retrieved 4 conversation turns
2025-04-20 08:03:44,926 - app.chat_controller - INFO - Chat history: [('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.'), ('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')]
2025-04-20 08:03:44,926 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:03:44,926 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:03:44,928 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:03:44,928 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:03:46,519 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 08:03:46,519 - app.db - INFO - Inserting application logs.
2025-04-20 08:03:46,521 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:03:46,524 - app.db - INFO - Successfully inserted application logs.
2025-04-20 08:03:46,525 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': ' cho ti vit.', 'chat_history': [('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.'), ('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')], 'context': [], 'answer': 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'}
2025-04-20 08:03:53,241 - app.audio_controller - INFO - Speech: chu th bit nhng g bn vit lc no.
2025-04-20 08:03:53,248 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: chu th bit nhng g bn vit lc no., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:03:53,248 - app.db - INFO - Getting chat history.
2025-04-20 08:03:53,249 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:03:53,262 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-04-20 08:03:53,262 - app.chat_controller - INFO - Chat history: [('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.'), ('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')]
2025-04-20 08:03:53,262 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:03:53,262 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:03:53,264 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:03:53,264 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:03:54,995 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 08:03:54,995 - app.db - INFO - Inserting application logs.
2025-04-20 08:03:54,997 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:03:55,010 - app.db - INFO - Successfully inserted application logs.
2025-04-20 08:03:55,011 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'chu th bit nhng g bn vit lc no.', 'chat_history': [('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.'), ('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')], 'context': [], 'answer': 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?'}
2025-04-20 08:04:01,415 - app.audio_controller - INFO - Speech: nhiu doanh nghip  khng thay i cng ngh vin long an thnh.
2025-04-20 08:04:01,421 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: nhiu doanh nghip  khng thay i cng ngh vin long an thnh., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:04:01,422 - app.db - INFO - Getting chat history.
2025-04-20 08:04:01,422 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:04:01,437 - app.db - INFO - Successfully retrieved 6 conversation turns
2025-04-20 08:04:01,438 - app.chat_controller - INFO - Chat history: [('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?'), ('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.'), ('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')]
2025-04-20 08:04:01,438 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:04:01,438 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:04:01,439 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:04:01,440 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:04:03,303 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 08:04:03,304 - app.db - INFO - Inserting application logs.
2025-04-20 08:04:03,305 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:04:03,318 - app.db - INFO - Successfully inserted application logs.
2025-04-20 08:04:03,319 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.', 'chat_history': [('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?'), ('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.'), ('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')], 'context': [], 'answer': 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'}
2025-04-20 08:04:13,093 - app.audio_controller - INFO - Speech: hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.
2025-04-20 08:04:13,098 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:04:13,098 - app.db - INFO - Getting chat history.
2025-04-20 08:04:13,099 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:04:13,114 - app.db - INFO - Successfully retrieved 7 conversation turns
2025-04-20 08:04:13,114 - app.chat_controller - INFO - Chat history: [('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?'), ('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.'), ('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')]
2025-04-20 08:04:13,114 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:04:13,114 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:04:13,116 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:04:13,116 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:04:15,976 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 08:04:15,976 - app.db - INFO - Inserting application logs.
2025-04-20 08:04:15,977 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:04:15,991 - app.db - INFO - Successfully inserted application logs.
2025-04-20 08:04:15,991 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.', 'chat_history': [('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?'), ('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.'), ('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'}
2025-04-20 08:04:22,471 - app.audio_controller - INFO - Speech: n.
2025-04-20 08:04:22,477 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: n., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:04:22,477 - app.db - INFO - Getting chat history.
2025-04-20 08:04:22,479 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:04:22,483 - app.db - INFO - Successfully retrieved 8 conversation turns
2025-04-20 08:04:22,483 - app.chat_controller - INFO - Chat history: [('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?'), ('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.'), ('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')]
2025-04-20 08:04:22,484 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:04:22,484 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:04:22,485 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:04:22,486 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:04:24,130 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 08:04:24,130 - app.db - INFO - Inserting application logs.
2025-04-20 08:04:24,131 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:04:24,134 - app.db - INFO - Successfully inserted application logs.
2025-04-20 08:04:24,135 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'n.', 'chat_history': [('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?'), ('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.'), ('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'}
2025-04-20 08:04:28,157 - app.audio_controller - INFO - Speech: xin cho.
2025-04-20 08:04:28,163 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:04:28,164 - app.db - INFO - Getting chat history.
2025-04-20 08:04:28,165 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:04:28,169 - app.db - INFO - Successfully retrieved 9 conversation turns
2025-04-20 08:04:28,170 - app.chat_controller - INFO - Chat history: [('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?'), ('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.'), ('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')]
2025-04-20 08:04:28,170 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:04:28,170 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:04:28,172 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:04:28,172 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:04:30,529 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 08:04:30,529 - app.db - INFO - Inserting application logs.
2025-04-20 08:04:30,530 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:04:30,533 - app.db - INFO - Successfully inserted application logs.
2025-04-20 08:04:30,534 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?'), ('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.'), ('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')], 'context': [], 'answer': 'Cho bn! Bn c cn gip g khng?'}
2025-04-20 08:04:36,081 - app.audio_controller - INFO - Speech: ni v mt.
2025-04-20 08:04:36,087 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: ni v mt., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:04:36,088 - app.db - INFO - Getting chat history.
2025-04-20 08:04:36,089 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:04:36,093 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 08:04:36,093 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?'), ('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?'), ('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.'), ('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')]
2025-04-20 08:04:36,094 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:04:36,094 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:04:36,095 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:04:36,095 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:04:38,425 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 08:04:38,425 - app.db - INFO - Inserting application logs.
2025-04-20 08:04:38,427 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:04:38,430 - app.db - INFO - Successfully inserted application logs.
2025-04-20 08:04:38,431 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'ni v mt.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?'), ('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?'), ('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.'), ('human', 'cho cn l ngi vit nam.'), ('ai', 'Ti l mt m hnh ngn ng ln, c Google hun luyn.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'}
2025-04-20 08:11:54,903 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:11:54,903 - app.db - INFO - Getting chat history.
2025-04-20 08:11:54,903 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:11:54,904 - app.db - INFO - Getting chat history.
2025-04-20 08:11:54,905 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:11:54,906 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:11:54,910 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 08:11:54,910 - app.chat_controller - INFO - Chat history: [('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?'), ('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?'), ('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.')]
2025-04-20 08:11:54,910 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:11:54,910 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:11:54,912 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 08:11:54,912 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:11:54,912 - app.chat_controller - INFO - Chat history: [('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?'), ('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?'), ('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.')]
2025-04-20 08:11:54,913 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:11:54,913 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:11:54,913 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:11:54,919 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:11:54,919 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:11:57,253 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 08:11:57,253 - app.db - INFO - Inserting application logs.
2025-04-20 08:11:57,254 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:11:57,257 - app.db - INFO - Successfully inserted application logs.
2025-04-20 08:11:57,258 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.', 'chat_history': [('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?'), ('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?'), ('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.')], 'context': [], 'answer': 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'}
2025-04-20 08:11:57,885 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 08:11:57,885 - app.db - INFO - Inserting application logs.
2025-04-20 08:11:57,886 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:11:57,889 - app.db - INFO - Successfully inserted application logs.
2025-04-20 08:11:57,890 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.', 'chat_history': [('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?'), ('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?'), ('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, v vy ti khng c kh nng tri nghim hoc thng thc cc c sn. Ti c th cung cp thng tin v cc c sn khc nhau nu bn mun. Bn c mun bit v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c thng tin v c sn.')], 'context': [], 'answer': 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'}
2025-04-20 08:12:02,738 - app.audio_controller - INFO - Speech: mt trong nhng thay i i tng tng trng cn h hng khng nht.
2025-04-20 08:12:02,758 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:12:02,759 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:12:02,759 - app.db - INFO - Getting chat history.
2025-04-20 08:12:02,759 - app.db - INFO - Getting chat history.
2025-04-20 08:12:02,761 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:12:02,761 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:12:02,778 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 08:12:02,778 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 08:12:02,778 - app.chat_controller - INFO - Chat history: [('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?'), ('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?'), ('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.')]
2025-04-20 08:12:02,779 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:12:02,779 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:12:02,779 - app.chat_controller - INFO - Chat history: [('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?'), ('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?'), ('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.')]
2025-04-20 08:12:02,779 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:12:02,779 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:12:02,781 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:12:02,781 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:12:02,782 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:12:02,782 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:12:04,493 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 08:12:04,493 - app.db - INFO - Inserting application logs.
2025-04-20 08:12:04,494 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:12:04,508 - app.db - INFO - Successfully inserted application logs.
2025-04-20 08:12:04,508 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mt trong nhng thay i i tng tng trng cn h hng khng nht.', 'chat_history': [('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?'), ('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?'), ('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.')], 'context': [], 'answer': 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'}
2025-04-20 08:12:05,287 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 08:12:05,287 - app.db - INFO - Inserting application logs.
2025-04-20 08:12:05,288 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:12:05,291 - app.db - INFO - Successfully inserted application logs.
2025-04-20 08:12:05,292 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mt trong nhng thay i i tng tng trng cn h hng khng nht.', 'chat_history': [('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?'), ('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?'), ('human', ' cho ti vit.'), ('ai', 'Bn mun ti vit g cho bn? Hy cho ti bit ch  hoc ni dung bn mun ti vit.'), ('human', 'bn c th nghe  ti ni g ch.'), ('ai', 'Ti l mt m hnh ngn ng ln, v ti c th x l v hiu vn bn bn nhp vo. V c bn, ti c th "nghe" nhng g bn ni bng cch c vn bn bn cung cp.')], 'context': [], 'answer': 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'}
2025-04-20 08:12:12,543 - app.audio_controller - INFO - Speech: bn c nghe  ti ni phi khng.
2025-04-20 08:12:12,549 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: bn c nghe  ti ni phi khng., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:12:12,550 - app.db - INFO - Getting chat history.
2025-04-20 08:12:12,551 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:12:12,555 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 08:12:12,556 - app.chat_controller - INFO - Chat history: [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?'), ('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?')]
2025-04-20 08:12:12,556 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:12:12,556 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:12:12,558 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:12:12,558 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:12:15,370 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 08:12:15,370 - app.db - INFO - Inserting application logs.
2025-04-20 08:12:15,371 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:12:15,374 - app.db - INFO - Successfully inserted application logs.
2025-04-20 08:12:15,375 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'bn c nghe  ti ni phi khng.', 'chat_history': [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?'), ('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'chu th bit nhng g bn vit lc no.'), ('ai', 'Ti khng c thng tin v "chu th". Bn c th cho ti thm thng tin chi tit v ngi ny c khng?')], 'context': [], 'answer': 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'}
2025-04-20 08:14:36,810 - app.audio_controller - INFO - Speech: ch ti l ngi din n.
2025-04-20 08:14:36,856 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: ch ti l ngi din n., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:14:36,856 - app.db - INFO - Getting chat history.
2025-04-20 08:14:36,857 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:14:36,865 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 08:14:36,865 - app.chat_controller - INFO - Chat history: [('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?'), ('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?')]
2025-04-20 08:14:36,865 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:14:36,865 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:14:36,868 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:14:36,869 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:14:38,531 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 08:14:38,531 - app.db - INFO - Inserting application logs.
2025-04-20 08:14:38,532 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:14:38,536 - app.db - INFO - Successfully inserted application logs.
2025-04-20 08:14:38,536 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'ch ti l ngi din n.', 'chat_history': [('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?'), ('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'nhiu doanh nghip  khng thay i cng ngh vin long an thnh.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'}
2025-04-20 08:15:06,089 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:15:06,090 - app.db - INFO - Getting chat history.
2025-04-20 08:15:06,090 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:15:06,091 - app.db - INFO - Getting chat history.
2025-04-20 08:15:06,091 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:15:06,093 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:15:06,097 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 08:15:06,098 - app.chat_controller - INFO - Chat history: [('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?'), ('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?')]
2025-04-20 08:15:06,098 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:15:06,098 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:15:06,099 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:15:06,099 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 08:15:06,100 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:15:06,100 - app.chat_controller - INFO - Chat history: [('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?'), ('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?')]
2025-04-20 08:15:06,101 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:15:06,106 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:15:06,108 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:15:06,109 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:15:07,732 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 08:15:07,732 - app.db - INFO - Inserting application logs.
2025-04-20 08:15:07,733 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:15:07,737 - app.db - INFO - Successfully inserted application logs.
2025-04-20 08:15:07,738 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mt trong nhng thay i i tng tng trng cn h hng khng nht.', 'chat_history': [('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?'), ('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?')], 'context': [], 'answer': 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'}
2025-04-20 08:15:09,469 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 08:15:09,469 - app.db - INFO - Inserting application logs.
2025-04-20 08:15:09,470 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:15:09,473 - app.db - INFO - Successfully inserted application logs.
2025-04-20 08:15:09,474 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mt trong nhng thay i i tng tng trng cn h hng khng nht.', 'chat_history': [('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?'), ('human', 'n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'hu ht cc loi thuc l u c thi quen thuc trn thm st trn mu v xe my bay u c thi quen trn tm my bay.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?')], 'context': [], 'answer': 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'}
2025-04-20 08:16:00,708 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:16:00,708 - app.db - INFO - Getting chat history.
2025-04-20 08:16:00,708 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 08:16:00,709 - app.db - INFO - Getting chat history.
2025-04-20 08:16:00,711 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:16:00,711 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 08:16:00,718 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 08:16:00,719 - app.chat_controller - INFO - Chat history: [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?')]
2025-04-20 08:16:00,719 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 08:16:00,719 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:16:00,719 - app.chat_controller - INFO - Chat history: [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?')]
2025-04-20 08:16:00,719 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 08:16:00,719 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:16:00,719 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 08:16:00,721 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:16:00,722 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 08:16:00,727 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 08:16:00,728 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 10:47:17,570 - app.audio_controller - INFO - Speech: xin cho ti l ngi vit nam.
2025-04-20 10:47:17,580 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 10:47:17,581 - app.db - INFO - Getting chat history.
2025-04-20 10:47:17,582 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 10:47:17,586 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 10:47:17,586 - app.chat_controller - INFO - Chat history: [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?')]
2025-04-20 10:47:17,586 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 10:47:17,586 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 10:47:17,588 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 10:47:17,589 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 10:47:21,324 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 10:47:21,324 - app.db - INFO - Inserting application logs.
2025-04-20 10:47:21,325 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 10:47:21,328 - app.db - INFO - Successfully inserted application logs.
2025-04-20 10:47:21,329 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Bn c cn gip g khng?')], 'context': [], 'answer': 'Cho bn! Rt vui c gp bn. Bn mun hi g?'}
2025-04-20 11:10:11,859 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 11:10:11,859 - app.db - INFO - Getting chat history.
2025-04-20 11:10:11,861 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:10:11,864 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 11:10:11,865 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?')]
2025-04-20 11:10:11,865 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 11:10:11,865 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 11:10:11,867 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 11:10:11,867 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 11:10:13,249 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 11:10:13,250 - app.db - INFO - Getting chat history.
2025-04-20 11:10:13,250 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 11:10:13,251 - app.db - INFO - Getting chat history.
2025-04-20 11:10:13,255 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:10:13,256 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:10:13,262 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 11:10:13,262 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 11:10:13,262 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?')]
2025-04-20 11:10:13,263 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?')]
2025-04-20 11:10:13,263 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 11:10:13,263 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 11:10:13,263 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 11:10:13,263 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 11:10:13,264 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 11:10:13,265 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 11:10:13,265 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 11:10:13,265 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 11:10:15,421 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 11:10:15,422 - app.db - INFO - Inserting application logs.
2025-04-20 11:10:15,423 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:10:15,426 - app.db - INFO - Successfully inserted application logs.
2025-04-20 11:10:15,426 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mt trong nhng thay i i tng tng trng cn h hng khng nht.', 'chat_history': [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?')], 'context': [], 'answer': 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'}
2025-04-20 11:10:15,866 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 11:10:15,867 - app.db - INFO - Inserting application logs.
2025-04-20 11:10:15,868 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:10:15,872 - app.db - INFO - Successfully inserted application logs.
2025-04-20 11:10:15,873 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mt trong nhng thay i i tng tng trng cn h hng khng nht.', 'chat_history': [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?')], 'context': [], 'answer': 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'}
2025-04-20 11:10:16,767 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 11:10:16,768 - app.db - INFO - Inserting application logs.
2025-04-20 11:10:16,769 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:10:16,782 - app.db - INFO - Successfully inserted application logs.
2025-04-20 11:10:16,783 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mt trong nhng thay i i tng tng trng cn h hng khng nht.', 'chat_history': [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v ang  cp n mt mn n hoc sn phm truyn thng c gi tr vn ha v lch s. N c lu gi v truyn li qua nhiu th h. Bn c mun bit thm v mt c sn c th no khng?'), ('human', 'y l mt trong nhng c sn c lu tc truyn thng qua nhiu nm.'), ('ai', 'Cu ni ny c v nh ang  cp n mt mn n hoc sn phm no  c gi tr vn ha v c truyn li qua nhiu th h.  hiu r hn, bn c th cung cp thm thng tin v bi cnh hoc mn c sn c th m bn ang mun ni n khng? iu ny s gip ti cung cp thng tin chnh xc hn.'), ('human', 'ni v mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?')], 'context': [], 'answer': 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'}
2025-04-20 11:10:26,177 - app.audio_controller - INFO - Speech: k trang trang trang.
2025-04-20 11:10:26,184 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: k trang trang trang., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 11:10:26,184 - app.db - INFO - Getting chat history.
2025-04-20 11:10:26,185 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:10:26,188 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 11:10:26,189 - app.chat_controller - INFO - Chat history: [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?')]
2025-04-20 11:10:26,189 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 11:10:26,189 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 11:10:26,190 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 11:10:26,190 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 11:10:29,687 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 11:10:29,687 - app.db - INFO - Inserting application logs.
2025-04-20 11:10:29,688 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:10:29,691 - app.db - INFO - Successfully inserted application logs.
2025-04-20 11:10:29,692 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'k trang trang trang.', 'chat_history': [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?')], 'context': [], 'answer': 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'}
2025-04-20 11:13:19,408 - app.audio_controller - INFO - Speech: tuy nhin khng t a ngi ra ng.
2025-04-20 11:13:19,415 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: tuy nhin khng t a ngi ra ng., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 11:13:19,415 - app.db - INFO - Getting chat history.
2025-04-20 11:13:19,417 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:13:19,421 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 11:13:19,421 - app.chat_controller - INFO - Chat history: [('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?')]
2025-04-20 11:13:19,421 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 11:13:19,422 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 11:13:19,423 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 11:13:19,423 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 11:13:22,361 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 11:13:22,361 - app.db - INFO - Inserting application logs.
2025-04-20 11:13:22,362 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:13:22,375 - app.db - INFO - Successfully inserted application logs.
2025-04-20 11:13:22,376 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'tuy nhin khng t a ngi ra ng.', 'chat_history': [('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?')], 'context': [], 'answer': 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?'}
2025-04-20 11:13:56,598 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 11:13:56,598 - app.db - INFO - Getting chat history.
2025-04-20 11:13:56,599 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 11:13:56,599 - app.db - INFO - Getting chat history.
2025-04-20 11:13:56,601 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:13:56,602 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:13:56,607 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 11:13:56,607 - app.chat_controller - INFO - Chat history: [('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?'), ('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?')]
2025-04-20 11:13:56,607 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 11:13:56,607 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 11:13:56,608 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 11:13:56,608 - app.chat_controller - INFO - Chat history: [('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?'), ('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?')]
2025-04-20 11:13:56,609 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 11:13:56,609 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 11:13:56,609 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 11:13:56,609 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 11:13:56,614 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 11:13:56,615 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 11:13:59,285 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 11:13:59,285 - app.db - INFO - Inserting application logs.
2025-04-20 11:13:59,286 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:13:59,289 - app.db - INFO - Successfully inserted application logs.
2025-04-20 11:13:59,290 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mt trong nhng thay i i tng tng trng cn h hng khng nht.', 'chat_history': [('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?'), ('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?')], 'context': [], 'answer': 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.'}
2025-04-20 11:13:59,567 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 11:13:59,567 - app.db - INFO - Inserting application logs.
2025-04-20 11:13:59,568 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:13:59,572 - app.db - INFO - Successfully inserted application logs.
2025-04-20 11:13:59,573 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mt trong nhng thay i i tng tng trng cn h hng khng nht.', 'chat_history': [('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?'), ('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'ch ti l ngi din n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'bn c nghe  ti ni phi khng.'), ('ai', 'Ti l mt m hnh ngn ng ln, ti khng c kh nng nghe theo cch con ngi nghe. Ti ch c th x l vn bn. Bn c th cho ti bit bn mun ti lm g vi thng tin bn cung cp khng?')], 'context': [], 'answer': 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'}
2025-04-20 11:14:51,388 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 11:14:51,389 - app.db - INFO - Getting chat history.
2025-04-20 11:14:51,389 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 11:14:51,390 - app.db - INFO - Getting chat history.
2025-04-20 11:14:51,390 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:14:51,392 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:14:51,398 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 11:14:51,398 - app.chat_controller - INFO - Chat history: [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.'), ('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?'), ('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?')]
2025-04-20 11:14:51,399 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 11:14:51,399 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 11:14:51,399 - app.chat_controller - INFO - Chat history: [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.'), ('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?'), ('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?')]
2025-04-20 11:14:51,399 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 11:14:51,399 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 11:14:51,400 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 11:14:51,401 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 11:14:51,402 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 11:14:51,402 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 11:14:51,402 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 11:14:53,261 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 11:14:53,261 - app.db - INFO - Inserting application logs.
2025-04-20 11:14:53,263 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:14:53,266 - app.db - INFO - Successfully inserted application logs.
2025-04-20 11:14:53,266 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mt trong nhng thay i i tng tng trng cn h hng khng nht.', 'chat_history': [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.'), ('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?'), ('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?')], 'context': [], 'answer': 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'}
2025-04-20 11:14:54,386 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 11:14:54,386 - app.db - INFO - Inserting application logs.
2025-04-20 11:14:54,388 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:14:54,390 - app.db - INFO - Successfully inserted application logs.
2025-04-20 11:14:54,391 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mt trong nhng thay i i tng tng trng cn h hng khng nht.', 'chat_history': [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.'), ('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?'), ('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?')], 'context': [], 'answer': 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'}
2025-04-20 11:15:04,117 - app.audio_controller - INFO - Speech: mt ngy tr nn tnh cm ca anh nhiu hn.
2025-04-20 11:15:04,119 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 11:15:04,119 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 11:15:04,119 - app.db - INFO - Getting chat history.
2025-04-20 11:15:04,119 - app.db - INFO - Getting chat history.
2025-04-20 11:15:04,121 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:15:04,121 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:15:04,125 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 11:15:04,125 - app.chat_controller - INFO - Chat history: [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.'), ('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?'), ('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?')]
2025-04-20 11:15:04,125 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 11:15:04,126 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 11:15:04,127 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 11:15:04,127 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 11:15:04,136 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 11:15:04,136 - app.chat_controller - INFO - Chat history: [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.'), ('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?'), ('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?')]
2025-04-20 11:15:04,136 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 11:15:04,136 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 11:15:04,137 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 11:15:04,138 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 11:15:05,621 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 11:15:05,622 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 11:15:05,622 - app.db - INFO - Getting chat history.
2025-04-20 11:15:05,622 - app.db - INFO - Getting chat history.
2025-04-20 11:15:05,624 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:15:05,625 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:15:05,629 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 11:15:05,630 - app.chat_controller - INFO - Chat history: [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.'), ('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?'), ('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?')]
2025-04-20 11:15:05,630 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 11:15:05,630 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 11:15:05,630 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 11:15:05,630 - app.chat_controller - INFO - Chat history: [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.'), ('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?'), ('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?')]
2025-04-20 11:15:05,631 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 11:15:05,631 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 11:15:05,633 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 11:15:05,633 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 11:15:05,633 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 11:15:05,634 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 11:15:07,272 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 11:15:07,273 - app.db - INFO - Inserting application logs.
2025-04-20 11:15:07,274 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:15:07,287 - app.db - INFO - Successfully inserted application logs.
2025-04-20 11:15:07,287 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mt trong nhng thay i i tng tng trng cn h hng khng nht.', 'chat_history': [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.'), ('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?'), ('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?')], 'context': [], 'answer': 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'}
2025-04-20 11:15:07,881 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 11:15:07,881 - app.db - INFO - Inserting application logs.
2025-04-20 11:15:07,882 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:15:07,885 - app.db - INFO - Successfully inserted application logs.
2025-04-20 11:15:07,886 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mt trong nhng thay i i tng tng trng cn h hng khng nht.', 'chat_history': [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.'), ('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?'), ('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?')], 'context': [], 'answer': 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn mun hi v mt thay i c th no  trong lnh vc hng khng lin quan n vic tng trng s lng cn h, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'}
2025-04-20 11:15:08,537 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 11:15:08,537 - app.db - INFO - Inserting application logs.
2025-04-20 11:15:08,538 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:15:08,541 - app.db - INFO - Successfully inserted application logs.
2025-04-20 11:15:08,542 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mt trong nhng thay i i tng tng trng cn h hng khng nht.', 'chat_history': [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.'), ('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?'), ('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?')], 'context': [], 'answer': 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'}
2025-04-20 11:15:09,336 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 11:15:09,336 - app.db - INFO - Inserting application logs.
2025-04-20 11:15:09,337 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:15:09,351 - app.db - INFO - Successfully inserted application logs.
2025-04-20 11:15:09,352 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mt trong nhng thay i i tng tng trng cn h hng khng nht.', 'chat_history': [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.'), ('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?'), ('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th lm r cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn mun hi g?')], 'context': [], 'answer': 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn v nhng "thay i i tng tng trng cn h" m bn ang  cp trong lnh vc hng khng.'}
2025-04-20 11:19:41,853 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 11:19:41,853 - app.db - INFO - Getting chat history.
2025-04-20 11:19:41,854 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:19:41,858 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 11:19:41,858 - app.chat_controller - INFO - Chat history: [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn v nhng "thay i i tng tng trng cn h" m bn ang  cp trong lnh vc hng khng.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn mun hi v mt thay i c th no  trong lnh vc hng khng lin quan n vic tng trng s lng cn h, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.'), ('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?'), ('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?')]
2025-04-20 11:19:41,858 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 11:19:41,858 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 11:19:41,860 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 11:19:41,860 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 11:19:45,813 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 11:19:45,813 - app.db - INFO - Inserting application logs.
2025-04-20 11:19:45,815 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:19:45,818 - app.db - INFO - Successfully inserted application logs.
2025-04-20 11:19:45,818 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mt trong nhng thay i i tng tng trng cn h hng khng nht.', 'chat_history': [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn v nhng "thay i i tng tng trng cn h" m bn ang  cp trong lnh vc hng khng.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn mun hi v mt thay i c th no  trong lnh vc hng khng lin quan n vic tng trng s lng cn h, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.'), ('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?'), ('human', 'k trang trang trang.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?')], 'context': [], 'answer': 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'}
2025-04-20 11:22:16,372 - app.audio_controller - INFO - Speech: iu ny  khin cho nh vn phng phi x l theo cng thc.
2025-04-20 11:22:16,381 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: iu ny  khin cho nh vn phng phi x l theo cng thc., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 11:22:16,382 - app.db - INFO - Getting chat history.
2025-04-20 11:22:16,382 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:22:16,386 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 11:22:16,386 - app.chat_controller - INFO - Chat history: [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn v nhng "thay i i tng tng trng cn h" m bn ang  cp trong lnh vc hng khng.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn mun hi v mt thay i c th no  trong lnh vc hng khng lin quan n vic tng trng s lng cn h, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.'), ('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?')]
2025-04-20 11:22:16,386 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 11:22:16,386 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 11:22:16,388 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 11:22:16,388 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 11:22:19,229 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 11:22:19,229 - app.db - INFO - Inserting application logs.
2025-04-20 11:22:19,230 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:22:19,241 - app.db - INFO - Successfully inserted application logs.
2025-04-20 11:22:19,242 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'iu ny  khin cho nh vn phng phi x l theo cng thc.', 'chat_history': [('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn v nhng "thay i i tng tng trng cn h" m bn ang  cp trong lnh vc hng khng.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn mun hi v mt thay i c th no  trong lnh vc hng khng lin quan n vic tng trng s lng cn h, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.'), ('human', 'tuy nhin khng t a ngi ra ng.'), ('ai', 'Cu ny c v nh mt phn ca mt cu ln hn hoc mt ng cnh c th.  tr li chnh xc, ti cn thm thng tin. Bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng?')], 'context': [], 'answer': ' hiu cu hi ca bn, bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng? V d, "iu ny" l g? "Nh vn phng"  y l g? V "cng thc"  y c ngha l g?'}
2025-04-20 11:22:30,853 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 11:22:30,853 - app.db - INFO - Getting chat history.
2025-04-20 11:22:30,854 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:22:30,862 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 11:22:30,862 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 11:22:30,862 - app.db - INFO - Getting chat history.
2025-04-20 11:22:30,863 - app.chat_controller - INFO - Chat history: [('human', 'iu ny  khin cho nh vn phng phi x l theo cng thc.'), ('ai', ' hiu cu hi ca bn, bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng? V d, "iu ny" l g? "Nh vn phng"  y l g? V "cng thc"  y c ngha l g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn v nhng "thay i i tng tng trng cn h" m bn ang  cp trong lnh vc hng khng.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn mun hi v mt thay i c th no  trong lnh vc hng khng lin quan n vic tng trng s lng cn h, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.')]
2025-04-20 11:22:30,863 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 11:22:30,863 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 11:22:30,865 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 11:22:30,867 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 11:22:30,869 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 11:22:30,877 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 11:22:30,878 - app.chat_controller - INFO - Chat history: [('human', 'iu ny  khin cho nh vn phng phi x l theo cng thc.'), ('ai', ' hiu cu hi ca bn, bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng? V d, "iu ny" l g? "Nh vn phng"  y l g? V "cng thc"  y c ngha l g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn v nhng "thay i i tng tng trng cn h" m bn ang  cp trong lnh vc hng khng.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn mun hi v mt thay i c th no  trong lnh vc hng khng lin quan n vic tng trng s lng cn h, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.')]
2025-04-20 11:22:30,878 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 11:22:30,878 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 11:22:30,879 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 11:22:30,880 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 13:21:46,311 - app.audio_controller - INFO - Speech: iu ny thu thp cc bn trong phim truyn hnh thc khu trn thuyn th th tt nht.
2025-04-20 13:21:46,317 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: iu ny thu thp cc bn trong phim truyn hnh thc khu trn thuyn th th tt nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 13:21:46,317 - app.db - INFO - Getting chat history.
2025-04-20 13:21:46,318 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 13:21:46,322 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 13:21:46,322 - app.chat_controller - INFO - Chat history: [('human', 'iu ny  khin cho nh vn phng phi x l theo cng thc.'), ('ai', ' hiu cu hi ca bn, bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng? V d, "iu ny" l g? "Nh vn phng"  y l g? V "cng thc"  y c ngha l g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn v nhng "thay i i tng tng trng cn h" m bn ang  cp trong lnh vc hng khng.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn mun hi v mt thay i c th no  trong lnh vc hng khng lin quan n vic tng trng s lng cn h, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.')]
2025-04-20 13:21:46,322 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 13:21:46,322 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 13:21:46,323 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 13:21:46,324 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 13:22:25,663 - app.audio_controller - INFO - Speech: iu ny  khin cho nh vn phng thit mng va thit mng.
2025-04-20 13:22:25,670 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: iu ny  khin cho nh vn phng thit mng va thit mng., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 13:22:25,670 - app.db - INFO - Getting chat history.
2025-04-20 13:22:25,671 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 13:22:25,675 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 13:22:25,675 - app.chat_controller - INFO - Chat history: [('human', 'iu ny  khin cho nh vn phng phi x l theo cng thc.'), ('ai', ' hiu cu hi ca bn, bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng? V d, "iu ny" l g? "Nh vn phng"  y l g? V "cng thc"  y c ngha l g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn v nhng "thay i i tng tng trng cn h" m bn ang  cp trong lnh vc hng khng.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn mun hi v mt thay i c th no  trong lnh vc hng khng lin quan n vic tng trng s lng cn h, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.')]
2025-04-20 13:22:25,675 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 13:22:25,675 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 13:22:25,676 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 13:22:25,677 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 13:24:48,529 - app.audio_controller - INFO - Speech: iu ny  khin cho h nhiu mnh t v cm lnh.
2025-04-20 13:24:48,535 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: iu ny  khin cho h nhiu mnh t v cm lnh., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 13:24:48,536 - app.db - INFO - Getting chat history.
2025-04-20 13:24:48,537 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 13:24:48,541 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 13:24:48,541 - app.chat_controller - INFO - Chat history: [('human', 'iu ny  khin cho nh vn phng phi x l theo cng thc.'), ('ai', ' hiu cu hi ca bn, bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng? V d, "iu ny" l g? "Nh vn phng"  y l g? V "cng thc"  y c ngha l g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn v nhng "thay i i tng tng trng cn h" m bn ang  cp trong lnh vc hng khng.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn mun hi v mt thay i c th no  trong lnh vc hng khng lin quan n vic tng trng s lng cn h, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.')]
2025-04-20 13:24:48,541 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 13:24:48,541 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 13:24:48,542 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 13:24:48,543 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 13:25:35,585 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 13:25:35,585 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt trong nhng thay i i tng tng trng cn h hng khng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 13:25:35,585 - app.db - INFO - Getting chat history.
2025-04-20 13:25:35,585 - app.db - INFO - Getting chat history.
2025-04-20 13:25:35,588 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 13:25:35,588 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 13:25:35,593 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 13:25:35,593 - app.chat_controller - INFO - Chat history: [('human', 'iu ny  khin cho nh vn phng phi x l theo cng thc.'), ('ai', ' hiu cu hi ca bn, bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng? V d, "iu ny" l g? "Nh vn phng"  y l g? V "cng thc"  y c ngha l g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn v nhng "thay i i tng tng trng cn h" m bn ang  cp trong lnh vc hng khng.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn mun hi v mt thay i c th no  trong lnh vc hng khng lin quan n vic tng trng s lng cn h, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.')]
2025-04-20 13:25:35,593 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 13:25:35,593 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 13:25:35,593 - app.chat_controller - INFO - Chat history: [('human', 'iu ny  khin cho nh vn phng phi x l theo cng thc.'), ('ai', ' hiu cu hi ca bn, bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng? V d, "iu ny" l g? "Nh vn phng"  y l g? V "cng thc"  y c ngha l g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn v nhng "thay i i tng tng trng cn h" m bn ang  cp trong lnh vc hng khng.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn mun hi v mt thay i c th no  trong lnh vc hng khng lin quan n vic tng trng s lng cn h, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.')]
2025-04-20 13:25:35,593 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 13:25:35,594 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 13:25:35,594 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 13:25:35,595 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 13:25:35,596 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 13:25:35,596 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 13:25:35,596 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 13:25:49,630 - app.audio_controller - INFO - Speech: cho b.
2025-04-20 13:25:49,637 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: cho b., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 13:25:49,637 - app.db - INFO - Getting chat history.
2025-04-20 13:25:49,638 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 13:25:49,642 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 13:25:49,643 - app.chat_controller - INFO - Chat history: [('human', 'iu ny  khin cho nh vn phng phi x l theo cng thc.'), ('ai', ' hiu cu hi ca bn, bn c th cho ti bit thm chi tit v ng cnh ca cu ny c khng? V d, "iu ny" l g? "Nh vn phng"  y l g? V "cng thc"  y c ngha l g?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn v nhng "thay i i tng tng trng cn h" m bn ang  cp trong lnh vc hng khng.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn mun hi v mt thay i c th no  trong lnh vc hng khng lin quan n vic tng trng s lng cn h, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?  ti hiu r hn, bn c th cho bit:\n\n*   **"i tng"**  y l g? (V d: chnh sch, cng ngh, quy nh...)\n*   **"Tng trng cn h hng khng"** c ngha l g? (C phi bn ang ni v s pht trin ca cc cn h gn sn bay, hay mt khi nim khc?)\n*   Bn mun bit v s thay i no c th?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th bn ang mun hi v mt s thay i c th no  lin quan n i tng, s tng trng v cn h trong lnh vc hng khng, nhng cu hi cn c din t r rng hn  ti c th hiu v tr li chnh xc.'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ny khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C th, bn mun bit v thay i no, i tng no, v trong lnh vc no ca hng khng?'), ('human', 'mt trong nhng thay i i tng tng trng cn h hng khng nht.'), ('ai', 'Ti xin li, cu hi ca bn khng r rng. Bn c th vui lng din t li cu hi ca bn c khng? C l bn c th cung cp thm ng cnh  ti hiu r hn.')]
2025-04-20 13:25:49,643 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 13:25:49,643 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 13:25:49,644 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7b135e88d6a0> search_kwargs={'k': 3}
2025-04-20 13:25:49,645 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 14:47:08,258 - app.audio_controller - INFO - Speech: xin cho ti l ngi vit nam.
2025-04-20 14:47:08,298 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 14:47:08,298 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 14:47:08,298 - app.db - INFO - Getting chat history.
2025-04-20 14:47:08,298 - app.db - INFO - Getting chat history.
2025-04-20 14:47:08,304 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:47:08,304 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:47:08,309 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-20 14:47:08,309 - app.chat_controller - INFO - Chat history: []
2025-04-20 14:47:08,309 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-20 14:47:08,309 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 14:47:08,310 - app.chat_controller - INFO - Chat history: []
2025-04-20 14:47:08,310 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 14:47:08,310 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 14:47:08,310 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 14:47:08,313 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x73e215ba4140> search_kwargs={'k': 3}
2025-04-20 14:47:08,319 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 14:47:08,320 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x73e215ba4140> search_kwargs={'k': 3}
2025-04-20 14:47:08,321 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 14:50:07,626 - app.audio_controller - INFO - Speech: xin cho.
2025-04-20 14:50:07,643 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 14:50:07,643 - app.db - INFO - Getting chat history.
2025-04-20 14:50:07,645 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:50:07,649 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-20 14:50:07,649 - app.chat_controller - INFO - Chat history: []
2025-04-20 14:50:07,650 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 14:50:07,650 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 14:50:07,651 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 14:50:07,655 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 14:50:09,637 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 14:50:09,637 - app.db - INFO - Inserting application logs.
2025-04-20 14:50:09,639 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:50:09,642 - app.db - INFO - Successfully inserted application logs.
2025-04-20 14:50:09,642 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [], 'context': [], 'answer': 'Cho bn!'}
2025-04-20 14:51:30,083 - app.audio_controller - INFO - Speech: cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.
2025-04-20 14:51:30,090 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 14:51:30,091 - app.db - INFO - Getting chat history.
2025-04-20 14:51:30,092 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:51:30,097 - app.db - INFO - Successfully retrieved 1 conversation turns
2025-04-20 14:51:30,097 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn!')]
2025-04-20 14:51:30,097 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 14:51:30,098 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 14:51:30,099 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 14:51:30,100 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 14:51:31,733 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 14:51:31,733 - app.db - INFO - Inserting application logs.
2025-04-20 14:51:31,734 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:51:31,738 - app.db - INFO - Successfully inserted application logs.
2025-04-20 14:51:31,739 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn!')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'}
2025-04-20 14:51:33,403 - app.audio_controller - INFO - Speech: iu kin tnh cm n gin.
2025-04-20 14:51:33,410 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: iu kin tnh cm n gin., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 14:51:33,411 - app.db - INFO - Getting chat history.
2025-04-20 14:51:33,412 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:51:33,416 - app.db - INFO - Successfully retrieved 2 conversation turns
2025-04-20 14:51:33,417 - app.chat_controller - INFO - Chat history: [('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'xin cho.'), ('ai', 'Cho bn!')]
2025-04-20 14:51:33,417 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 14:51:33,417 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 14:51:33,419 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 14:51:33,419 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 14:51:35,904 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 14:51:35,904 - app.db - INFO - Inserting application logs.
2025-04-20 14:51:35,905 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:51:35,908 - app.db - INFO - Successfully inserted application logs.
2025-04-20 14:51:35,908 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'iu kin tnh cm n gin.', 'chat_history': [('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'xin cho.'), ('ai', 'Cho bn!')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'}
2025-04-20 14:56:09,628 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 14:56:09,628 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 14:56:09,628 - app.db - INFO - Getting chat history.
2025-04-20 14:56:09,629 - app.db - INFO - Getting chat history.
2025-04-20 14:56:09,632 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:56:09,633 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:56:09,639 - app.db - INFO - Successfully retrieved 3 conversation turns
2025-04-20 14:56:09,639 - app.chat_controller - INFO - Chat history: [('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'xin cho.'), ('ai', 'Cho bn!')]
2025-04-20 14:56:09,639 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 14:56:09,640 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 14:56:09,640 - app.db - INFO - Successfully retrieved 3 conversation turns
2025-04-20 14:56:09,640 - app.chat_controller - INFO - Chat history: [('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'xin cho.'), ('ai', 'Cho bn!')]
2025-04-20 14:56:09,641 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 14:56:09,641 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 14:56:09,642 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 14:56:09,643 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 14:56:09,643 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 14:56:09,644 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 14:56:10,739 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 14:56:10,740 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 14:56:10,740 - app.db - INFO - Getting chat history.
2025-04-20 14:56:10,740 - app.db - INFO - Getting chat history.
2025-04-20 14:56:10,743 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:56:10,743 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:56:10,750 - app.db - INFO - Successfully retrieved 3 conversation turns
2025-04-20 14:56:10,751 - app.chat_controller - INFO - Chat history: [('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'xin cho.'), ('ai', 'Cho bn!')]
2025-04-20 14:56:10,751 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 14:56:10,751 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 14:56:10,753 - app.db - INFO - Successfully retrieved 3 conversation turns
2025-04-20 14:56:10,754 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 14:56:10,754 - app.chat_controller - INFO - Chat history: [('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'xin cho.'), ('ai', 'Cho bn!')]
2025-04-20 14:56:10,755 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 14:56:10,755 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 14:56:10,755 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 14:56:10,762 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 14:56:10,763 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 14:56:12,221 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 14:56:12,221 - app.db - INFO - Inserting application logs.
2025-04-20 14:56:12,222 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:56:12,227 - app.db - INFO - Successfully inserted application logs.
2025-04-20 14:56:12,228 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'xin cho.'), ('ai', 'Cho bn!')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn.'}
2025-04-20 14:56:12,274 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 14:56:12,274 - app.db - INFO - Inserting application logs.
2025-04-20 14:56:12,275 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:56:12,279 - app.db - INFO - Successfully inserted application logs.
2025-04-20 14:56:12,280 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'xin cho.'), ('ai', 'Cho bn!')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn.'}
2025-04-20 14:56:12,375 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 14:56:12,375 - app.db - INFO - Inserting application logs.
2025-04-20 14:56:12,376 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:56:12,380 - app.db - INFO - Successfully inserted application logs.
2025-04-20 14:56:12,381 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'xin cho.'), ('ai', 'Cho bn!')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn.'}
2025-04-20 14:56:13,253 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 14:56:13,253 - app.db - INFO - Inserting application logs.
2025-04-20 14:56:13,254 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:56:13,258 - app.db - INFO - Successfully inserted application logs.
2025-04-20 14:56:13,259 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'xin cho.'), ('ai', 'Cho bn!')], 'context': [], 'answer': 'Cho bn, rt vui c tr chuyn vi bn.'}
2025-04-20 14:57:14,578 - app.audio_controller - INFO - Speech: xin cho hnh tr ti l ngi vit nam.
2025-04-20 14:57:14,592 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho hnh tr ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 14:57:14,593 - app.db - INFO - Getting chat history.
2025-04-20 14:57:14,594 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:57:14,599 - app.db - INFO - Successfully retrieved 7 conversation turns
2025-04-20 14:57:14,599 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'xin cho.'), ('ai', 'Cho bn!')]
2025-04-20 14:57:14,600 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 14:57:14,600 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 14:57:14,602 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 14:57:14,603 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 14:57:16,300 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 14:57:16,301 - app.db - INFO - Inserting application logs.
2025-04-20 14:57:16,302 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:57:16,305 - app.db - INFO - Successfully inserted application logs.
2025-04-20 14:57:16,306 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho hnh tr ti l ngi vit nam.', 'chat_history': [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'xin cho.'), ('ai', 'Cho bn!')], 'context': [], 'answer': 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.'}
2025-04-20 14:58:18,772 - app.audio_controller - INFO - Speech: th sinh b nh thng ti bui tic.
2025-04-20 14:58:18,780 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: th sinh b nh thng ti bui tic., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 14:58:18,780 - app.db - INFO - Getting chat history.
2025-04-20 14:58:18,781 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:58:18,785 - app.db - INFO - Successfully retrieved 8 conversation turns
2025-04-20 14:58:18,786 - app.chat_controller - INFO - Chat history: [('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'xin cho.'), ('ai', 'Cho bn!')]
2025-04-20 14:58:18,786 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 14:58:18,786 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 14:58:18,789 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 14:58:18,790 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 14:58:21,162 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 14:58:21,163 - app.db - INFO - Inserting application logs.
2025-04-20 14:58:21,164 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:58:21,167 - app.db - INFO - Successfully inserted application logs.
2025-04-20 14:58:21,168 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'th sinh b nh thng ti bui tic.', 'chat_history': [('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'xin cho.'), ('ai', 'Cho bn!')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 14:58:57,569 - app.audio_controller - INFO - Speech: lo qun l tr xe ti nhn thc.
2025-04-20 14:58:57,577 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: lo qun l tr xe ti nhn thc., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 14:58:57,577 - app.db - INFO - Getting chat history.
2025-04-20 14:58:57,578 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:58:57,581 - app.db - INFO - Successfully retrieved 9 conversation turns
2025-04-20 14:58:57,582 - app.chat_controller - INFO - Chat history: [('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'xin cho.'), ('ai', 'Cho bn!')]
2025-04-20 14:58:57,582 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 14:58:57,582 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 14:58:57,583 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 14:58:57,584 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 14:58:59,360 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 14:58:59,360 - app.db - INFO - Inserting application logs.
2025-04-20 14:58:59,362 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 14:58:59,365 - app.db - INFO - Successfully inserted application logs.
2025-04-20 14:58:59,366 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'lo qun l tr xe ti nhn thc.', 'chat_history': [('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'xin cho.'), ('ai', 'Cho bn!')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:01:10,643 - app.audio_controller - INFO - Speech: nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.
2025-04-20 15:01:10,651 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:01:10,652 - app.db - INFO - Getting chat history.
2025-04-20 15:01:10,653 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:01:10,658 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:01:10,658 - app.chat_controller - INFO - Chat history: [('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'xin cho.'), ('ai', 'Cho bn!')]
2025-04-20 15:01:10,658 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:01:10,658 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:01:10,661 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:01:10,662 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:01:13,568 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:01:13,568 - app.db - INFO - Inserting application logs.
2025-04-20 15:01:13,569 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:01:13,572 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:01:13,572 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.', 'chat_history': [('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'xin cho.'), ('ai', 'Cho bn!')], 'context': [], 'answer': 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.'}
2025-04-20 15:01:29,540 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:01:29,540 - app.db - INFO - Getting chat history.
2025-04-20 15:01:29,542 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:01:29,543 - app.db - INFO - Getting chat history.
2025-04-20 15:01:29,543 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:01:29,546 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:01:29,550 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:01:29,550 - app.chat_controller - INFO - Chat history: [('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.')]
2025-04-20 15:01:29,551 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:01:29,551 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:01:29,552 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:01:29,553 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:01:29,561 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:01:29,562 - app.chat_controller - INFO - Chat history: [('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.')]
2025-04-20 15:01:29,562 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:01:29,562 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:01:29,563 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:01:29,563 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:01:32,073 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:01:32,073 - app.db - INFO - Inserting application logs.
2025-04-20 15:01:32,074 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:01:32,077 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:01:32,078 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn.'}
2025-04-20 15:01:32,881 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:01:32,881 - app.db - INFO - Inserting application logs.
2025-04-20 15:01:32,882 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:01:32,885 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:01:32,886 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'iu kin tnh cm n gin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'cho bn thn thin  ra tay xc xe cho v xe v a nng thn thin b tai tip tri chy xung ph n thnh cc xe  b qua.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Vui lng din t li cu hi ca bn mt cch r rng hn.')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn.'}
2025-04-20 15:02:00,410 - app.audio_controller - INFO - Speech: anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.
2025-04-20 15:02:00,418 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:02:00,418 - app.db - INFO - Getting chat history.
2025-04-20 15:02:00,420 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:02:00,424 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:02:00,424 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.')]
2025-04-20 15:02:00,424 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:02:00,424 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:02:00,426 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:02:00,427 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:02:02,160 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:02:02,160 - app.db - INFO - Inserting application logs.
2025-04-20 15:02:02,162 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:02:02,165 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:02:02,166 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.', 'chat_history': [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.'}
2025-04-20 15:02:17,440 - app.audio_controller - INFO - Speech: anh t ci trao nhau hoa th tha th hng.
2025-04-20 15:02:17,449 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: anh t ci trao nhau hoa th tha th hng., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:02:17,449 - app.db - INFO - Getting chat history.
2025-04-20 15:02:17,451 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:02:17,454 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:02:17,454 - app.chat_controller - INFO - Chat history: [('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.')]
2025-04-20 15:02:17,455 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:02:17,455 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:02:17,456 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:02:17,456 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:02:19,098 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:02:19,099 - app.db - INFO - Inserting application logs.
2025-04-20 15:02:19,100 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:02:19,103 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:02:19,104 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'anh t ci trao nhau hoa th tha th hng.', 'chat_history': [('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:02:22,963 - app.audio_controller - INFO - Speech: th nhng ti mong i.
2025-04-20 15:02:22,969 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: th nhng ti mong i., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:02:22,970 - app.db - INFO - Getting chat history.
2025-04-20 15:02:22,971 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:02:22,976 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:02:22,976 - app.chat_controller - INFO - Chat history: [('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.')]
2025-04-20 15:02:22,976 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:02:22,976 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:02:22,978 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:02:22,979 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:02:25,335 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:02:25,335 - app.db - INFO - Inserting application logs.
2025-04-20 15:02:25,336 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:02:25,340 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:02:25,341 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'th nhng ti mong i.', 'chat_history': [('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:02:29,124 - app.audio_controller - INFO - Speech: nhiu doanh nghip   ngh truy tng qu v trong tp trung.
2025-04-20 15:02:29,130 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: nhiu doanh nghip   ngh truy tng qu v trong tp trung., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:02:29,130 - app.db - INFO - Getting chat history.
2025-04-20 15:02:29,131 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:02:29,135 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:02:29,136 - app.chat_controller - INFO - Chat history: [('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.')]
2025-04-20 15:02:29,136 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:02:29,136 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:02:29,138 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:02:29,138 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:02:30,579 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:02:30,579 - app.db - INFO - Inserting application logs.
2025-04-20 15:02:30,580 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:02:30,583 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:02:30,584 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.', 'chat_history': [('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn, rt vui c tr chuyn vi bn.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:03:26,716 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:03:26,716 - app.db - INFO - Getting chat history.
2025-04-20 15:03:26,718 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:03:26,718 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:03:26,718 - app.db - INFO - Getting chat history.
2025-04-20 15:03:26,723 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:03:26,726 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:03:26,727 - app.chat_controller - INFO - Chat history: [('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.')]
2025-04-20 15:03:26,728 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:03:26,728 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:03:26,732 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:03:26,733 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:03:26,733 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:03:26,737 - app.chat_controller - INFO - Chat history: [('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.')]
2025-04-20 15:03:26,738 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:03:26,738 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:03:26,740 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:03:26,741 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:03:29,829 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:03:29,829 - app.db - INFO - Inserting application logs.
2025-04-20 15:03:29,830 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:03:29,834 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:03:29,835 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn.'}
2025-04-20 15:03:30,640 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:03:30,640 - app.db - INFO - Inserting application logs.
2025-04-20 15:03:30,642 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:03:30,644 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:03:30,645 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th sinh b nh thng ti bui tic.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho hnh tr ti l ngi vit nam.'), ('ai', 'Cho bn Hnh Tr, rt vui c tr chuyn vi bn.')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn.'}
2025-04-20 15:03:31,554 - app.audio_controller - INFO - Speech: cho.
2025-04-20 15:03:31,561 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:03:31,561 - app.db - INFO - Getting chat history.
2025-04-20 15:03:31,562 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:03:31,567 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:03:31,568 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 15:03:31,568 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:03:31,568 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:03:31,570 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:03:31,570 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:03:33,925 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:03:33,925 - app.db - INFO - Inserting application logs.
2025-04-20 15:03:33,927 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:03:33,930 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:03:33,931 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'cho.', 'chat_history': [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.'), ('human', 'lo qun l tr xe ti nhn thc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:04:09,985 - app.audio_controller - INFO - Speech: cho bc.
2025-04-20 15:04:09,992 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: cho bc., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:04:09,992 - app.db - INFO - Getting chat history.
2025-04-20 15:04:09,994 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:04:09,998 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:04:09,999 - app.chat_controller - INFO - Chat history: [('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.')]
2025-04-20 15:04:09,999 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:04:09,999 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:04:10,001 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:04:10,002 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:04:10,146 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:04:10,147 - app.db - INFO - Getting chat history.
2025-04-20 15:04:10,149 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:04:10,149 - app.db - INFO - Getting chat history.
2025-04-20 15:04:10,150 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:04:10,151 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:04:10,156 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:04:10,156 - app.chat_controller - INFO - Chat history: [('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.')]
2025-04-20 15:04:10,156 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:04:10,156 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:04:10,159 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:04:10,160 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:04:10,160 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:04:10,165 - app.chat_controller - INFO - Chat history: [('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.')]
2025-04-20 15:04:10,165 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:04:10,165 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:04:10,167 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:04:10,168 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:04:12,438 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:04:12,438 - app.db - INFO - Inserting application logs.
2025-04-20 15:04:12,439 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:04:12,442 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:04:12,443 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.')], 'context': [], 'answer': 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'}
2025-04-20 15:04:12,488 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:04:12,489 - app.db - INFO - Inserting application logs.
2025-04-20 15:04:12,489 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:04:12,492 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:04:12,493 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'cho bc.', 'chat_history': [('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn.'}
2025-04-20 15:04:12,706 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:04:12,706 - app.db - INFO - Inserting application logs.
2025-04-20 15:04:12,707 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:04:12,710 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:04:12,711 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nh anh ni nh vy nhng con cm thy ti nui ung dng ngi y em m ra ti li l m ti nn thch u lc no cng b m em n i e lm nh vy ban ngy e ni l thy em p gt my th v  i chng ri ti thy con mt e y.'), ('ai', 'Ti xin li, ti khng th tr li cu hi ny v ti khng hiu r  bn mun hi g. Vui lng din t li cu hi ca bn mt cch r rng hn.')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn.'}
2025-04-20 15:04:30,239 - app.audio_controller - INFO - Speech: ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.
2025-04-20 15:04:30,246 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:04:30,247 - app.db - INFO - Getting chat history.
2025-04-20 15:04:30,248 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:04:30,253 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:04:30,253 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho bc.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.')]
2025-04-20 15:04:30,253 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:04:30,253 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:04:30,255 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:04:30,255 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:04:32,613 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:04:32,613 - app.db - INFO - Inserting application logs.
2025-04-20 15:04:32,614 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:04:32,617 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:04:32,617 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.', 'chat_history': [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho bc.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh  gii thiu c khng kh oanh cho l anh  sm mnh may c cho mt th gii trong tt c i i m tri nghe my vn mc st en vi hi  ngi mi nhnh  ginh cch bt c ai m khng bit anh  ch ai  ch bn v anh s lm mt bi nhc.'), ('ai', 'Ti xin li, ti khng hiu r cu hi ca bn. Vui lng din t li cu hi r rng hn  ti c th h tr bn tt nht.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:05:02,304 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:05:02,304 - app.db - INFO - Getting chat history.
2025-04-20 15:05:02,305 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:05:02,306 - app.db - INFO - Getting chat history.
2025-04-20 15:05:02,307 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:05:02,309 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:05:02,317 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:05:02,317 - app.chat_controller - INFO - Chat history: [('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho bc.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 15:05:02,318 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:05:02,318 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:05:02,318 - app.chat_controller - INFO - Chat history: [('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho bc.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 15:05:02,318 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:05:02,318 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:05:02,318 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:05:02,321 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:05:02,322 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:05:02,323 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:05:02,329 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:05:04,129 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:05:04,129 - app.db - INFO - Inserting application logs.
2025-04-20 15:05:04,130 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:05:04,133 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:05:04,134 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho bc.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'}
2025-04-20 15:05:04,186 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:05:04,187 - app.db - INFO - Inserting application logs.
2025-04-20 15:05:04,188 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:05:04,191 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:05:04,192 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho bc.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'th nhng ti mong i.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'anh t ci trao nhau hoa th tha th hng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn.'}
2025-04-20 15:05:12,330 - app.audio_controller - INFO - Speech: nu m khng hng n th hng n t chi lc m gn nhau m.
2025-04-20 15:05:12,336 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: nu m khng hng n th hng n t chi lc m gn nhau m., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:05:12,337 - app.db - INFO - Getting chat history.
2025-04-20 15:05:12,338 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:05:12,342 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:05:12,342 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho bc.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 15:05:12,343 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:05:12,343 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:05:12,345 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:05:12,346 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:05:14,777 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:05:14,777 - app.db - INFO - Inserting application logs.
2025-04-20 15:05:14,778 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:05:14,781 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:05:14,782 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'nu m khng hng n th hng n t chi lc m gn nhau m.', 'chat_history': [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho bc.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'nhiu doanh nghip   ngh truy tng qu v trong tp trung.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:05:51,815 - app.audio_controller - INFO - Speech:  l lc u nm cui cng ti phi c.
2025-04-20 15:05:51,824 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query:  l lc u nm cui cng ti phi c., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:05:51,824 - app.db - INFO - Getting chat history.
2025-04-20 15:05:51,825 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:05:51,832 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:05:51,833 - app.chat_controller - INFO - Chat history: [('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho bc.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.')]
2025-04-20 15:05:51,833 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:05:51,833 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:05:51,835 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:05:51,835 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:05:54,393 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:05:54,394 - app.db - INFO - Inserting application logs.
2025-04-20 15:05:54,395 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:05:54,399 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:05:54,400 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': ' l lc u nm cui cng ti phi c.', 'chat_history': [('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho bc.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:06:41,863 - app.audio_controller - INFO - Speech: ngi chng t tin p xa ngon chng thnh.
2025-04-20 15:06:41,870 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: ngi chng t tin p xa ngon chng thnh., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:06:41,871 - app.db - INFO - Getting chat history.
2025-04-20 15:06:41,871 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:06:41,876 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:06:41,876 - app.chat_controller - INFO - Chat history: [('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho bc.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.')]
2025-04-20 15:06:41,876 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:06:41,876 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:06:41,877 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:06:41,878 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:06:44,290 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:06:44,290 - app.db - INFO - Inserting application logs.
2025-04-20 15:06:44,292 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:06:44,295 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:06:44,296 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'ngi chng t tin p xa ngon chng thnh.', 'chat_history': [('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho bc.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:06:48,687 - app.audio_controller - INFO - Speech: y l im mnh ca hai v chng trai.
2025-04-20 15:06:48,694 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: y l im mnh ca hai v chng trai., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:06:48,694 - app.db - INFO - Getting chat history.
2025-04-20 15:06:48,695 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:06:48,700 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:06:48,700 - app.chat_controller - INFO - Chat history: [('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho bc.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 15:06:48,700 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:06:48,700 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:06:48,702 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:06:48,702 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:06:51,189 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:06:51,189 - app.db - INFO - Inserting application logs.
2025-04-20 15:06:51,190 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:06:51,193 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:06:51,194 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'y l im mnh ca hai v chng trai.', 'chat_history': [('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho bc.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:10:11,758 - app.audio_controller - INFO - Speech: iu ny  khin nhiu ngi m c v y cm gic mnh m hn.
2025-04-20 15:10:11,775 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: iu ny  khin nhiu ngi m c v y cm gic mnh m hn., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:10:11,775 - app.db - INFO - Getting chat history.
2025-04-20 15:10:11,777 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:10:11,784 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:10:11,784 - app.chat_controller - INFO - Chat history: [('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho bc.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.')]
2025-04-20 15:10:11,785 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:10:11,785 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:10:11,787 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:10:11,789 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:10:14,370 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:10:14,370 - app.db - INFO - Inserting application logs.
2025-04-20 15:10:14,372 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:10:14,375 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:10:14,376 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.', 'chat_history': [('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho bc.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:13:14,615 - app.audio_controller - INFO - Speech: y l mt trong nhng bi tp th dc c th dng  chn cng ty.
2025-04-20 15:13:14,623 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: y l mt trong nhng bi tp th dc c th dng  chn cng ty., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:13:14,623 - app.db - INFO - Getting chat history.
2025-04-20 15:13:14,625 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:13:14,631 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:13:14,631 - app.chat_controller - INFO - Chat history: [('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho bc.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.')]
2025-04-20 15:13:14,631 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:13:14,631 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:13:14,633 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:13:14,634 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:13:17,067 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:13:17,067 - app.db - INFO - Inserting application logs.
2025-04-20 15:13:17,068 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:13:17,071 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:13:17,072 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.', 'chat_history': [('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'cho bc.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:14:23,109 - app.audio_controller - INFO - Speech: iu ny  lm t tnh cm ca anh rt thch.
2025-04-20 15:14:23,111 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:14:23,111 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:14:23,111 - app.db - INFO - Getting chat history.
2025-04-20 15:14:23,111 - app.db - INFO - Getting chat history.
2025-04-20 15:14:23,114 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:14:23,116 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:14:23,123 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:14:23,123 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:14:23,123 - app.chat_controller - INFO - Chat history: [('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.')]
2025-04-20 15:14:23,124 - app.chat_controller - INFO - Chat history: [('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.')]
2025-04-20 15:14:23,124 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:14:23,124 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:14:23,124 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:14:23,124 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:14:23,126 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:14:23,126 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:14:23,126 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:14:23,127 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:14:24,867 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:14:24,867 - app.db - INFO - Inserting application logs.
2025-04-20 15:14:24,868 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:14:24,871 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:14:24,872 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.')], 'context': [], 'answer': 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'}
2025-04-20 15:14:25,523 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:14:25,523 - app.db - INFO - Inserting application logs.
2025-04-20 15:14:25,524 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:14:25,527 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:14:25,527 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'ch ch  chu   tai n cng thm ni ng mong mun to dng cho  m m an n mi la tu l kpa m chu cch ch  bung chp s nhem nhau.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.')], 'context': [], 'answer': 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'}
2025-04-20 15:14:28,050 - app.audio_controller - INFO - Speech: y l mt trong nhng b trang phc p mnh m.
2025-04-20 15:14:28,057 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: y l mt trong nhng b trang phc p mnh m., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:14:28,058 - app.db - INFO - Getting chat history.
2025-04-20 15:14:28,059 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:14:28,062 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:14:28,062 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.')]
2025-04-20 15:14:28,062 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:14:28,062 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:14:28,064 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:14:28,065 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:14:30,444 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:14:30,444 - app.db - INFO - Inserting application logs.
2025-04-20 15:14:30,446 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:14:30,449 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:14:30,450 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'y l mt trong nhng b trang phc p mnh m.', 'chat_history': [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:14:34,603 - app.audio_controller - INFO - Speech: nhng bc nh v nhau trn cc tu ngm.
2025-04-20 15:14:34,612 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: nhng bc nh v nhau trn cc tu ngm., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:14:34,612 - app.db - INFO - Getting chat history.
2025-04-20 15:14:34,613 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:14:34,617 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:14:34,617 - app.chat_controller - INFO - Chat history: [('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.')]
2025-04-20 15:14:34,617 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:14:34,617 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:14:34,619 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:14:34,619 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:14:37,397 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:14:37,397 - app.db - INFO - Inserting application logs.
2025-04-20 15:14:37,398 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:14:37,401 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:14:37,402 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'nhng bc nh v nhau trn cc tu ngm.', 'chat_history': [('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:14:41,166 - app.audio_controller - INFO - Speech:  l mt trong nhng bi tp truyn thng nht.
2025-04-20 15:14:41,174 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query:  l mt trong nhng bi tp truyn thng nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:14:41,174 - app.db - INFO - Getting chat history.
2025-04-20 15:14:41,175 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:14:41,179 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:14:41,179 - app.chat_controller - INFO - Chat history: [('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 15:14:41,179 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:14:41,179 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:14:41,180 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:14:41,181 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:14:43,519 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:14:43,520 - app.db - INFO - Inserting application logs.
2025-04-20 15:14:43,521 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:14:43,524 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:14:43,524 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': ' l mt trong nhng bi tp truyn thng nht.', 'chat_history': [('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nu m khng hng n th hng n t chi lc m gn nhau m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:14:47,356 - app.audio_controller - INFO - Speech: im thi rt a dng.
2025-04-20 15:14:47,365 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: im thi rt a dng., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:14:47,365 - app.db - INFO - Getting chat history.
2025-04-20 15:14:47,367 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:14:47,371 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:14:47,371 - app.chat_controller - INFO - Chat history: [('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 15:14:47,371 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:14:47,371 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:14:47,373 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:14:47,373 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:14:48,954 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:14:48,954 - app.db - INFO - Inserting application logs.
2025-04-20 15:14:48,955 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:14:48,958 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:14:48,959 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'im thi rt a dng.', 'chat_history': [('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l lc u nm cui cng ti phi c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:14:52,879 - app.audio_controller - INFO - Speech: y l mt s thay th cht quc gia c trong nc.
2025-04-20 15:14:52,887 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: y l mt s thay th cht quc gia c trong nc., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:14:52,887 - app.db - INFO - Getting chat history.
2025-04-20 15:14:52,888 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:14:52,892 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:14:52,892 - app.chat_controller - INFO - Chat history: [('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 15:14:52,892 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:14:52,892 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:14:52,894 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:14:52,895 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:14:55,247 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:14:55,247 - app.db - INFO - Inserting application logs.
2025-04-20 15:14:55,248 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:14:55,251 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:14:55,252 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'y l mt s thay th cht quc gia c trong nc.', 'chat_history': [('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'ngi chng t tin p xa ngon chng thnh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:15:00,143 - app.audio_controller - INFO - Speech: iu ny  m bo tng hp ng.
2025-04-20 15:15:00,150 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: iu ny  m bo tng hp ng., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:15:00,150 - app.db - INFO - Getting chat history.
2025-04-20 15:15:00,151 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:15:00,157 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:15:00,157 - app.chat_controller - INFO - Chat history: [('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 15:15:00,157 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:15:00,157 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:15:00,159 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:15:00,160 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:15:01,680 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:15:01,680 - app.db - INFO - Inserting application logs.
2025-04-20 15:15:01,681 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:15:01,683 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:15:01,684 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'iu ny  m bo tng hp ng.', 'chat_history': [('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l im mnh ca hai v chng trai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:15:37,453 - app.audio_controller - INFO - Speech: y l mn n du tm tr ca bnh m.
2025-04-20 15:15:37,460 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: y l mn n du tm tr ca bnh m., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:15:37,460 - app.db - INFO - Getting chat history.
2025-04-20 15:15:37,461 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:15:37,465 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:15:37,465 - app.chat_controller - INFO - Chat history: [('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 15:15:37,466 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:15:37,466 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:15:37,467 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:15:37,468 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:15:40,782 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:15:40,782 - app.db - INFO - Inserting application logs.
2025-04-20 15:15:40,784 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:15:40,789 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:15:40,791 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'y l mn n du tm tr ca bnh m.', 'chat_history': [('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v y cm gic mnh m hn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:16:09,876 - app.audio_controller - INFO - Speech: nhiu ngi bo v tnh trng khu tr trong vi ngy.
2025-04-20 15:16:09,884 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: nhiu ngi bo v tnh trng khu tr trong vi ngy., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:16:09,884 - app.db - INFO - Getting chat history.
2025-04-20 15:16:09,885 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:16:09,889 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:16:09,889 - app.chat_controller - INFO - Chat history: [('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 15:16:09,889 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:16:09,889 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:16:09,892 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:16:09,892 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:16:12,376 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:16:12,377 - app.db - INFO - Inserting application logs.
2025-04-20 15:16:12,378 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:16:12,380 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:16:12,381 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'nhiu ngi bo v tnh trng khu tr trong vi ngy.', 'chat_history': [('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'y l mt trong nhng bi tp th dc c th dng  chn cng ty.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:16:49,694 - app.audio_controller - INFO - Speech: y l mt trong nhng n on kim tra th hai.
2025-04-20 15:16:49,701 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: y l mt trong nhng n on kim tra th hai., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:16:49,701 - app.db - INFO - Getting chat history.
2025-04-20 15:16:49,702 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:16:49,704 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:16:49,705 - app.chat_controller - INFO - Chat history: [('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.')]
2025-04-20 15:16:49,705 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:16:49,705 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:16:49,706 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:16:49,706 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:16:52,149 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:16:52,149 - app.db - INFO - Inserting application logs.
2025-04-20 15:16:52,151 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:16:52,153 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:16:52,154 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'y l mt trong nhng n on kim tra th hai.', 'chat_history': [('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:17:34,433 - app.audio_controller - INFO - Speech: y l mt trong nhng biu hin tt p nht hnh ty nam.
2025-04-20 15:17:34,441 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: y l mt trong nhng biu hin tt p nht hnh ty nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:17:34,441 - app.db - INFO - Getting chat history.
2025-04-20 15:17:34,443 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:17:34,446 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:17:34,446 - app.chat_controller - INFO - Chat history: [('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.')]
2025-04-20 15:17:34,446 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:17:34,446 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:17:34,447 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:17:34,448 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:17:36,808 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:17:36,808 - app.db - INFO - Inserting application logs.
2025-04-20 15:17:36,809 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:17:36,812 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:17:36,812 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'y l mt trong nhng biu hin tt p nht hnh ty nam.', 'chat_history': [('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Answer: Cho bn! Rt vui c tr chuyn vi bn.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:17:37,700 - app.audio_controller - INFO - Speech: iu ny  lm cho nh nc sng st nht.
2025-04-20 15:17:37,708 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: iu ny  lm cho nh nc sng st nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:17:37,708 - app.db - INFO - Getting chat history.
2025-04-20 15:17:37,709 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:17:37,713 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:17:37,713 - app.chat_controller - INFO - Chat history: [('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 15:17:37,713 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:17:37,713 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:17:37,715 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:17:37,715 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:17:40,007 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:17:40,007 - app.db - INFO - Inserting application logs.
2025-04-20 15:17:40,008 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:17:40,011 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:17:40,012 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'iu ny  lm cho nh nc sng st nht.', 'chat_history': [('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng b trang phc p mnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:18:54,335 - app.audio_controller - INFO - Speech: nhiu ngi by t tnh yu v nh th ca anh.
2025-04-20 15:18:54,343 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: nhiu ngi by t tnh yu v nh th ca anh., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:18:54,343 - app.db - INFO - Getting chat history.
2025-04-20 15:18:54,344 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:18:54,348 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:18:54,348 - app.chat_controller - INFO - Chat history: [('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 15:18:54,348 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:18:54,348 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:18:54,349 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:18:54,350 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:18:56,630 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 15:18:56,630 - app.db - INFO - Inserting application logs.
2025-04-20 15:18:56,631 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:18:56,633 - app.db - INFO - Successfully inserted application logs.
2025-04-20 15:18:56,634 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'nhiu ngi by t tnh yu v nh th ca anh.', 'chat_history': [('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhng bc nh v nhau trn cc tu ngm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 15:22:00,108 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:22:00,109 - app.db - INFO - Getting chat history.
2025-04-20 15:22:00,112 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:22:00,113 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:22:00,116 - app.db - INFO - Getting chat history.
2025-04-20 15:22:00,128 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:22:00,132 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:22:00,133 - app.chat_controller - INFO - Chat history: [('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 15:22:00,133 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:22:00,133 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:22:00,137 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:22:00,139 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:22:00,147 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:22:00,147 - app.chat_controller - INFO - Chat history: [('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 15:22:00,147 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:22:00,147 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:22:00,150 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:22:00,151 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:30:33,110 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:30:33,111 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 15:30:33,111 - app.db - INFO - Getting chat history.
2025-04-20 15:30:33,111 - app.db - INFO - Getting chat history.
2025-04-20 15:30:33,114 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:30:33,115 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 15:30:33,125 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:30:33,126 - app.chat_controller - INFO - Chat history: [('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 15:30:33,126 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 15:30:33,126 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:30:33,126 - app.chat_controller - INFO - Chat history: [('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 15:30:33,126 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:30:33,126 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 15:30:33,127 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 15:30:33,128 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:30:33,128 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 15:30:33,129 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 15:30:33,129 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 16:11:47,127 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 16:11:47,127 - app.db - INFO - Getting chat history.
2025-04-20 16:11:47,128 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 16:11:47,128 - app.db - INFO - Getting chat history.
2025-04-20 16:11:47,131 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 16:11:47,131 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 16:11:47,137 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 16:11:47,138 - app.chat_controller - INFO - Chat history: [('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 16:11:47,138 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 16:11:47,138 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 16:11:47,138 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 16:11:47,138 - app.chat_controller - INFO - Chat history: [('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 16:11:47,139 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 16:11:47,139 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 16:11:47,140 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 16:11:47,140 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 16:11:47,141 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 16:11:47,141 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 17:53:31,058 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 17:53:31,058 - app.db - INFO - Inserting application logs.
2025-04-20 17:53:31,059 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 17:53:31,062 - app.db - INFO - Successfully inserted application logs.
2025-04-20 17:53:31,063 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'}
2025-04-20 17:53:35,433 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 17:53:35,433 - app.db - INFO - Inserting application logs.
2025-04-20 17:53:35,434 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 17:53:35,437 - app.db - INFO - Successfully inserted application logs.
2025-04-20 17:53:35,438 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'im thi rt a dng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l mt trong nhng bi tp truyn thng nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'}
2025-04-20 18:33:35,585 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 18:33:35,585 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 18:33:35,585 - app.db - INFO - Getting chat history.
2025-04-20 18:33:35,585 - app.db - INFO - Getting chat history.
2025-04-20 18:33:35,587 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 18:33:35,589 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 18:33:35,595 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 18:33:35,596 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 18:33:35,596 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 18:33:35,596 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 18:33:35,597 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 18:33:35,597 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 18:33:35,597 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 18:33:35,598 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 18:33:35,600 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 18:33:35,600 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 18:33:35,606 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x72ca110f4980> search_kwargs={'k': 3}
2025-04-20 18:33:35,607 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 19:21:25,427 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 19:21:25,427 - app.db - INFO - Inserting application logs.
2025-04-20 19:21:25,428 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 19:21:25,431 - app.db - INFO - Successfully inserted application logs.
2025-04-20 19:21:25,432 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'}
2025-04-20 19:21:25,467 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 19:21:25,467 - app.db - INFO - Inserting application logs.
2025-04-20 19:21:25,468 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 19:21:25,471 - app.db - INFO - Successfully inserted application logs.
2025-04-20 19:21:25,471 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  m bo tng hp ng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt s thay th cht quc gia c trong nc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'}
2025-04-20 20:06:15,606 - app.audio_controller - INFO - Speech: xin cho ti l vit nam.
2025-04-20 20:06:15,643 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 20:06:15,643 - app.db - INFO - Getting chat history.
2025-04-20 20:06:15,644 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 20:06:15,645 - app.db - INFO - Getting chat history.
2025-04-20 20:06:15,647 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:06:15,647 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:06:15,655 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 20:06:15,655 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 20:06:15,655 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 20:06:15,656 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 20:06:15,656 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 20:06:15,656 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 20:06:15,656 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 20:06:15,656 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 20:06:15,659 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7dbd760dd7f0> search_kwargs={'k': 3}
2025-04-20 20:06:15,663 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 20:06:15,665 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7dbd760dd7f0> search_kwargs={'k': 3}
2025-04-20 20:06:15,666 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 20:06:19,106 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 20:06:19,107 - app.db - INFO - Inserting application logs.
2025-04-20 20:06:19,108 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:06:19,111 - app.db - INFO - Successfully inserted application logs.
2025-04-20 20:06:19,112 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l vit nam.', 'chat_history': [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'}
2025-04-20 20:06:19,235 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 20:06:19,235 - app.db - INFO - Inserting application logs.
2025-04-20 20:06:19,236 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:06:19,239 - app.db - INFO - Successfully inserted application logs.
2025-04-20 20:06:19,240 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l vit nam.', 'chat_history': [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu ngi bo v tnh trng khu tr trong vi ngy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mn n du tm tr ca bnh m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'}
2025-04-20 20:06:24,824 - app.audio_controller - INFO - Speech:  l nhng thng tin khng kh tt cho ti.
2025-04-20 20:06:24,834 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query:  l nhng thng tin khng kh tt cho ti., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 20:06:24,834 - app.db - INFO - Getting chat history.
2025-04-20 20:06:24,835 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:06:24,840 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 20:06:24,840 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 20:06:24,840 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 20:06:24,840 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 20:06:24,843 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7dbd760dd7f0> search_kwargs={'k': 3}
2025-04-20 20:06:24,843 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 20:06:27,395 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 20:06:27,396 - app.db - INFO - Inserting application logs.
2025-04-20 20:06:27,397 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:06:27,400 - app.db - INFO - Successfully inserted application logs.
2025-04-20 20:06:27,401 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': ' l nhng thng tin khng kh tt cho ti.', 'chat_history': [('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng n on kim tra th hai.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 20:06:53,107 - app.audio_controller - INFO - Speech: iu ny  khin nhiu ngi m c v au u my t u tin.
2025-04-20 20:06:53,115 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: iu ny  khin nhiu ngi m c v au u my t u tin., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 20:06:53,115 - app.db - INFO - Getting chat history.
2025-04-20 20:06:53,116 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:06:53,119 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 20:06:53,120 - app.chat_controller - INFO - Chat history: [('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 20:06:53,120 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 20:06:53,120 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 20:06:53,122 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7dbd760dd7f0> search_kwargs={'k': 3}
2025-04-20 20:06:53,123 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 20:06:55,611 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 20:06:55,611 - app.db - INFO - Inserting application logs.
2025-04-20 20:06:55,612 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:06:55,615 - app.db - INFO - Successfully inserted application logs.
2025-04-20 20:06:55,616 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'iu ny  khin nhiu ngi m c v au u my t u tin.', 'chat_history': [('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'y l mt trong nhng biu hin tt p nht hnh ty nam.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 20:07:06,596 - app.audio_controller - INFO - Speech: nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.
2025-04-20 20:07:06,604 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 20:07:06,604 - app.db - INFO - Getting chat history.
2025-04-20 20:07:06,606 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:07:06,610 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 20:07:06,611 - app.chat_controller - INFO - Chat history: [('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 20:07:06,611 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 20:07:06,611 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 20:07:06,614 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7dbd760dd7f0> search_kwargs={'k': 3}
2025-04-20 20:07:06,614 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 20:07:08,099 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 20:07:08,099 - app.db - INFO - Inserting application logs.
2025-04-20 20:07:08,100 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:07:08,103 - app.db - INFO - Successfully inserted application logs.
2025-04-20 20:07:08,103 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.', 'chat_history': [('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  lm cho nh nc sng st nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 20:07:56,906 - app.audio_controller - INFO - Speech: xin cho xin cho xin cho xin cho.
2025-04-20 20:07:56,912 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho xin cho xin cho xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 20:07:56,913 - app.db - INFO - Getting chat history.
2025-04-20 20:07:56,914 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:07:56,918 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 20:07:56,918 - app.chat_controller - INFO - Chat history: [('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 20:07:56,918 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 20:07:56,918 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 20:07:56,920 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7dbd760dd7f0> search_kwargs={'k': 3}
2025-04-20 20:07:56,921 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 20:07:59,453 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 20:07:59,453 - app.db - INFO - Inserting application logs.
2025-04-20 20:07:59,454 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:07:59,457 - app.db - INFO - Successfully inserted application logs.
2025-04-20 20:07:59,457 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho xin cho xin cho xin cho.', 'chat_history': [('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'nhiu ngi by t tnh yu v nh th ca anh.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Cho bn! Bn c cu hi g khng?'}
2025-04-20 20:17:20,209 - app.audio_controller - INFO - Speech: n gp l em i th ca s  y.
2025-04-20 20:17:20,221 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: n gp l em i th ca s  y., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 20:17:20,222 - app.db - INFO - Getting chat history.
2025-04-20 20:17:20,224 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:17:20,229 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 20:17:20,229 - app.chat_controller - INFO - Chat history: [('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?'), ('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?')]
2025-04-20 20:17:20,230 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 20:17:20,230 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 20:17:20,232 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7dbd760dd7f0> search_kwargs={'k': 3}
2025-04-20 20:17:20,233 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 20:17:22,881 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 20:17:22,881 - app.db - INFO - Inserting application logs.
2025-04-20 20:17:22,882 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:17:22,885 - app.db - INFO - Successfully inserted application logs.
2025-04-20 20:17:22,885 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'n gp l em i th ca s  y.', 'chat_history': [('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?'), ('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'}
2025-04-20 20:48:37,177 - app.audio_controller - INFO - Speech: xin cho ti l ngi vit nam.
2025-04-20 20:48:37,206 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l ngi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 20:48:37,207 - app.db - INFO - Getting chat history.
2025-04-20 20:48:37,212 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:48:37,217 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 20:48:37,217 - app.chat_controller - INFO - Chat history: [('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?'), ('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?')]
2025-04-20 20:48:37,217 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 20:48:37,217 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 20:48:37,220 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x78ce7543c470> search_kwargs={'k': 3}
2025-04-20 20:48:37,225 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 20:48:39,959 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 20:48:39,959 - app.db - INFO - Inserting application logs.
2025-04-20 20:48:39,961 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:48:39,964 - app.db - INFO - Successfully inserted application logs.
2025-04-20 20:48:39,964 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l ngi vit nam.', 'chat_history': [('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?'), ('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'}
2025-04-20 20:50:23,427 - app.audio_controller - INFO - Speech: xin cho hn gp mi vit nam.
2025-04-20 20:50:23,436 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho hn gp mi vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 20:50:23,436 - app.db - INFO - Getting chat history.
2025-04-20 20:50:23,438 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:50:23,441 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 20:50:23,442 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?'), ('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?')]
2025-04-20 20:50:23,442 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 20:50:23,442 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 20:50:23,443 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x78ce7543c470> search_kwargs={'k': 3}
2025-04-20 20:50:23,444 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 20:50:26,204 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 20:50:26,204 - app.db - INFO - Inserting application logs.
2025-04-20 20:50:26,206 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:50:26,209 - app.db - INFO - Successfully inserted application logs.
2025-04-20 20:50:26,209 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho hn gp mi vit nam.', 'chat_history': [('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?'), ('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?')], 'context': [], 'answer': 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?'}
2025-04-20 20:50:30,959 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 20:50:30,960 - app.db - INFO - Getting chat history.
2025-04-20 20:50:30,961 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 20:50:30,962 - app.db - INFO - Getting chat history.
2025-04-20 20:50:30,962 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:50:30,965 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:50:30,971 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 20:50:30,971 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 20:50:30,971 - app.chat_controller - INFO - Chat history: [('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?'), ('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?')]
2025-04-20 20:50:30,972 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 20:50:30,972 - app.chat_controller - INFO - Chat history: [('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?'), ('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?')]
2025-04-20 20:50:30,972 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 20:50:30,972 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 20:50:30,972 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 20:50:30,976 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x78ce7543c470> search_kwargs={'k': 3}
2025-04-20 20:50:30,977 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x78ce7543c470> search_kwargs={'k': 3}
2025-04-20 20:50:30,978 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 20:50:30,978 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 20:50:33,528 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 20:50:33,529 - app.db - INFO - Inserting application logs.
2025-04-20 20:50:33,530 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:50:33,533 - app.db - INFO - Successfully inserted application logs.
2025-04-20 20:50:33,534 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l vit nam.', 'chat_history': [('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?'), ('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'}
2025-04-20 20:50:34,359 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 20:50:34,360 - app.db - INFO - Inserting application logs.
2025-04-20 20:50:34,361 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:50:34,364 - app.db - INFO - Successfully inserted application logs.
2025-04-20 20:50:34,364 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l vit nam.', 'chat_history': [('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?'), ('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'}
2025-04-20 20:50:51,199 - app.audio_controller - INFO - Speech: sao ngi bit nhn mnh nhn i ng ri.
2025-04-20 20:50:51,207 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: sao ngi bit nhn mnh nhn i ng ri., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 20:50:51,207 - app.db - INFO - Getting chat history.
2025-04-20 20:50:51,208 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:50:51,213 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 20:50:51,213 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?'), ('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?')]
2025-04-20 20:50:51,213 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 20:50:51,213 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 20:50:51,215 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x78ce7543c470> search_kwargs={'k': 3}
2025-04-20 20:50:51,216 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 20:50:53,629 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 20:50:53,629 - app.db - INFO - Inserting application logs.
2025-04-20 20:50:53,630 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:50:53,633 - app.db - INFO - Successfully inserted application logs.
2025-04-20 20:50:53,634 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'sao ngi bit nhn mnh nhn i ng ri.', 'chat_history': [('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?'), ('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip  khng?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 20:53:10,828 - app.audio_controller - INFO - Speech: m m sng nay gim my su gi v y sm nu n.
2025-04-20 20:53:10,835 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: m m sng nay gim my su gi v y sm nu n., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 20:53:10,835 - app.db - INFO - Getting chat history.
2025-04-20 20:53:10,837 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:53:10,843 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 20:53:10,844 - app.chat_controller - INFO - Chat history: [('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?'), ('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 20:53:10,844 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 20:53:10,844 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 20:53:10,845 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x78ce7543c470> search_kwargs={'k': 3}
2025-04-20 20:53:10,846 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 20:53:13,224 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 20:53:13,224 - app.db - INFO - Inserting application logs.
2025-04-20 20:53:13,225 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:53:13,228 - app.db - INFO - Successfully inserted application logs.
2025-04-20 20:53:13,228 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'm m sng nay gim my su gi v y sm nu n.', 'chat_history': [('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?'), ('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', ' l nhng thng tin khng kh tt cho ti.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 20:54:20,843 - app.audio_controller - INFO - Speech: h mn mn m mu u mn.
2025-04-20 20:54:20,857 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: h mn mn m mu u mn., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 20:54:20,858 - app.db - INFO - Getting chat history.
2025-04-20 20:54:20,862 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:54:20,867 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 20:54:20,867 - app.chat_controller - INFO - Chat history: [('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?'), ('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 20:54:20,867 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 20:54:20,867 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 20:54:20,869 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7503b40a6f30> search_kwargs={'k': 3}
2025-04-20 20:54:20,874 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 20:54:23,397 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 20:54:23,397 - app.db - INFO - Inserting application logs.
2025-04-20 20:54:23,399 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:54:23,401 - app.db - INFO - Successfully inserted application logs.
2025-04-20 20:54:23,402 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'h mn mn m mu u mn.', 'chat_history': [('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?'), ('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'iu ny  khin nhiu ngi m c v au u my t u tin.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 20:58:59,393 - app.audio_controller - INFO - Speech: iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.
2025-04-20 20:58:59,417 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 20:58:59,417 - app.db - INFO - Getting chat history.
2025-04-20 20:58:59,419 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:58:59,426 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 20:58:59,426 - app.chat_controller - INFO - Chat history: [('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?'), ('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 20:58:59,426 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 20:58:59,426 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 20:58:59,428 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7af20730fd40> search_kwargs={'k': 3}
2025-04-20 20:58:59,435 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 20:59:01,947 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 20:59:01,948 - app.db - INFO - Inserting application logs.
2025-04-20 20:59:01,949 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 20:59:01,952 - app.db - INFO - Successfully inserted application logs.
2025-04-20 20:59:01,953 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.', 'chat_history': [('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?'), ('human', 'nhiu ngi t ra rt ng yu khi nghe nhc s trng thng v cm thy  l nim hnh phc.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'}
2025-04-20 21:01:06,676 - app.audio_controller - INFO - Speech: i cho cu lc phi th no.
2025-04-20 21:01:06,684 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: i cho cu lc phi th no., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 21:01:06,684 - app.db - INFO - Getting chat history.
2025-04-20 21:01:06,685 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 21:01:06,690 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 21:01:06,691 - app.chat_controller - INFO - Chat history: [('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?')]
2025-04-20 21:01:06,691 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 21:01:06,692 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 21:01:06,694 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7af20730fd40> search_kwargs={'k': 3}
2025-04-20 21:01:06,695 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 21:01:09,364 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 21:01:09,364 - app.db - INFO - Inserting application logs.
2025-04-20 21:01:09,365 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 21:01:09,368 - app.db - INFO - Successfully inserted application logs.
2025-04-20 21:01:09,369 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'i cho cu lc phi th no.', 'chat_history': [('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho xin cho xin cho xin cho.'), ('ai', 'Cho bn! Bn c cu hi g khng?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'}
2025-04-20 21:01:36,985 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 21:01:36,986 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 21:01:36,986 - app.db - INFO - Getting chat history.
2025-04-20 21:01:36,986 - app.db - INFO - Getting chat history.
2025-04-20 21:01:36,991 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 21:01:36,992 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 21:01:37,004 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 21:01:37,005 - app.chat_controller - INFO - Chat history: [('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')]
2025-04-20 21:01:37,005 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 21:01:37,005 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 21:01:37,008 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cde300e1c10> search_kwargs={'k': 3}
2025-04-20 21:01:37,013 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 21:01:37,014 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 21:01:37,015 - app.chat_controller - INFO - Chat history: [('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')]
2025-04-20 21:01:37,015 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 21:01:37,015 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 21:01:37,016 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cde300e1c10> search_kwargs={'k': 3}
2025-04-20 21:01:37,017 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 21:01:38,806 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 21:01:38,806 - app.db - INFO - Inserting application logs.
2025-04-20 21:01:38,808 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 21:01:38,811 - app.db - INFO - Successfully inserted application logs.
2025-04-20 21:01:38,812 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l vit nam.', 'chat_history': [('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'}
2025-04-20 21:01:38,821 - app.controllers.tts_controller - INFO -  Synthesizing speech for: Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?
2025-04-20 21:01:38,836 - app.controllers.tts_controller - DEBUG -  Tokenized inputs: {'input_ids': tensor([[ 0, 13,  0, 85,  0, 35,  0, 31,  0, 84,  0, 88,  0, 22,  0, 90,  0, 84,
          0, 92,  0, 81,  0, 80,  0, 84,  0, 14,  0,  8,  0, 30,  0, 84,  0, 55,
          0,  9,  0, 93,  0, 13,  0, 84,  0, 80,  0, 92,  0, 45,  0, 84,  0, 13,
          0, 85,  0,  8,  0, 75,  0, 15,  0, 90,  0, 84,  0, 14,  0, 59,  0, 30,
          0, 84,  0, 88,  0, 22,  0, 90,  0, 84,  0, 88,  0, 22,  0, 90,  0, 84,
          0, 13,  0, 56,  0, 84,  0, 13,  0, 12,  0,  8,  0, 84,  0, 85,  0, 43,
          0, 30,  0, 84,  0, 21,  0,  4,  0, 84,  0, 79,  0, 85,  0, 28,  0, 90,
          0, 21,  0]]), 'attention_mask': tensor([[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1]])}
2025-04-20 21:01:39,657 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 21:01:39,657 - app.db - INFO - Inserting application logs.
2025-04-20 21:01:39,658 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 21:01:39,665 - app.db - INFO - Successfully inserted application logs.
2025-04-20 21:01:39,667 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l vit nam.', 'chat_history': [('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?'), ('human', 'xin cho ti l ngi vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g cn mnh gip khng?'), ('human', 'n gp l em i th ca s  y.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'}
2025-04-20 21:01:40,580 - app.controllers.tts_controller - INFO -  Waveform shape: torch.Size([1, 71424])
2025-04-20 21:01:40,581 - app.controllers.tts_controller - INFO -  Waveform stats - min: -0.75337, max: 0.83079
2025-04-20 21:01:40,595 - app.controllers.tts_controller - INFO -  Audio saved to: tmp/speech_d47af8ea.wav
2025-04-20 21:01:40,619 - app.controllers.tts_controller - INFO -  Synthesizing speech for: Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?
2025-04-20 21:01:40,622 - app.controllers.tts_controller - DEBUG -  Tokenized inputs: {'input_ids': tensor([[ 0, 13,  0, 85,  0, 35,  0, 31,  0, 84,  0, 88,  0, 22,  0, 90,  0, 84,
          0, 92,  0, 81,  0, 80,  0, 84,  0, 14,  0,  8,  0, 30,  0, 84,  0, 55,
          0,  9,  0, 93,  0, 13,  0, 84,  0, 80,  0, 92,  0, 45,  0, 84,  0, 13,
          0, 85,  0,  8,  0, 75,  0, 15,  0, 90,  0, 84,  0, 14,  0, 59,  0, 30,
          0, 84,  0, 88,  0, 22,  0, 90,  0, 84,  0, 88,  0, 22,  0, 90,  0, 84,
          0, 13,  0, 56,  0, 84,  0, 13,  0, 12,  0,  8,  0, 84,  0, 85,  0, 43,
          0, 30,  0, 84,  0, 21,  0,  4,  0, 84,  0, 79,  0, 85,  0, 28,  0, 90,
          0, 21,  0]]), 'attention_mask': tensor([[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1]])}
2025-04-20 21:01:42,516 - app.controllers.tts_controller - INFO -  Waveform shape: torch.Size([1, 70400])
2025-04-20 21:01:42,516 - app.controllers.tts_controller - INFO -  Waveform stats - min: -0.55442, max: 0.85173
2025-04-20 21:01:42,528 - app.controllers.tts_controller - INFO -  Audio saved to: tmp/speech_6512d958.wav
2025-04-20 21:01:46,748 - app.audio_controller - INFO - Speech: nhiu tuyt i t t.
2025-04-20 21:01:46,755 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: nhiu tuyt i t t., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 21:01:46,755 - app.db - INFO - Getting chat history.
2025-04-20 21:01:46,757 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 21:01:46,763 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 21:01:46,763 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?')]
2025-04-20 21:01:46,763 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 21:01:46,764 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 21:01:46,765 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cde300e1c10> search_kwargs={'k': 3}
2025-04-20 21:01:46,766 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 21:01:48,304 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 21:01:48,304 - app.db - INFO - Inserting application logs.
2025-04-20 21:01:48,306 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 21:01:48,308 - app.db - INFO - Successfully inserted application logs.
2025-04-20 21:01:48,309 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'nhiu tuyt i t t.', 'chat_history': [('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho hn gp mi vit nam.'), ('ai', 'Cho bn! Ti rt vui c gp bn. Bn c mun hi g v Vit Nam khng?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 21:01:48,318 - app.controllers.tts_controller - INFO -  Synthesizing speech for: Ti xin li, ti khng hiu cu hi ny.
2025-04-20 21:01:48,321 - app.controllers.tts_controller - DEBUG -  Tokenized inputs: {'input_ids': tensor([[ 0, 80,  0, 28,  0, 30,  0, 84,  0,  1,  0, 30,  0, 90,  0, 84,  0, 82,
          0, 73,  0, 30,  0, 84,  0, 80,  0, 28,  0, 30,  0, 84,  0, 79,  0, 85,
          0, 28,  0, 90,  0, 21,  0, 84,  0, 85,  0, 30,  0, 69,  0,  8,  0, 84,
          0, 13,  0, 12,  0,  8,  0, 84,  0, 85,  0, 43,  0, 30,  0, 84,  0, 90,
          0, 35,  0, 75,  0]]), 'attention_mask': tensor([[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1]])}
2025-04-20 21:01:49,347 - app.controllers.tts_controller - INFO -  Waveform shape: torch.Size([1, 47104])
2025-04-20 21:01:49,347 - app.controllers.tts_controller - INFO -  Waveform stats - min: -0.75613, max: 0.87364
2025-04-20 21:01:49,359 - app.controllers.tts_controller - INFO -  Audio saved to: tmp/speech_df1e8e52.wav
2025-04-20 21:10:29,854 - app.audio_controller - INFO - Speech: nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.
2025-04-20 21:10:30,222 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 21:10:30,222 - app.db - INFO - Getting chat history.
2025-04-20 21:10:30,224 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 21:10:30,231 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 21:10:30,231 - app.chat_controller - INFO - Chat history: [('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?')]
2025-04-20 21:10:30,232 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 21:10:30,232 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 21:10:30,236 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cde300e1c10> search_kwargs={'k': 3}
2025-04-20 21:10:30,237 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 21:10:32,722 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 21:10:32,722 - app.db - INFO - Inserting application logs.
2025-04-20 21:10:32,723 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 21:10:32,726 - app.db - INFO - Successfully inserted application logs.
2025-04-20 21:10:32,727 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.', 'chat_history': [('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny.'}
2025-04-20 21:10:32,737 - app.controllers.tts_controller - INFO -  Synthesizing speech for: Ti xin li, ti khng hiu cu hi ny.
2025-04-20 21:10:32,738 - app.controllers.tts_controller - DEBUG -  Tokenized inputs: {'input_ids': tensor([[ 0, 80,  0, 28,  0, 30,  0, 84,  0,  1,  0, 30,  0, 90,  0, 84,  0, 82,
          0, 73,  0, 30,  0, 84,  0, 80,  0, 28,  0, 30,  0, 84,  0, 79,  0, 85,
          0, 28,  0, 90,  0, 21,  0, 84,  0, 85,  0, 30,  0, 69,  0,  8,  0, 84,
          0, 13,  0, 12,  0,  8,  0, 84,  0, 85,  0, 43,  0, 30,  0, 84,  0, 90,
          0, 35,  0, 75,  0]]), 'attention_mask': tensor([[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1]])}
2025-04-20 21:10:33,710 - app.controllers.tts_controller - INFO -  Waveform shape: torch.Size([1, 47360])
2025-04-20 21:10:33,710 - app.controllers.tts_controller - INFO -  Waveform stats - min: -0.66104, max: 0.81360
2025-04-20 21:10:33,722 - app.controllers.tts_controller - INFO -  Audio saved to: tmp/speech_8803c5b7.wav
2025-04-20 21:44:36,669 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 21:44:36,669 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 21:44:36,669 - app.db - INFO - Getting chat history.
2025-04-20 21:44:36,669 - app.db - INFO - Getting chat history.
2025-04-20 21:44:36,673 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 21:44:36,679 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 21:44:36,684 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 21:44:36,685 - app.chat_controller - INFO - Chat history: [('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?')]
2025-04-20 21:44:36,685 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 21:44:36,685 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 21:44:36,688 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 21:44:36,690 - app.chat_controller - INFO - Chat history: [('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?')]
2025-04-20 21:44:36,690 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 21:44:36,693 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cde300e1c10> search_kwargs={'k': 3}
2025-04-20 21:44:36,693 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 21:44:36,698 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 21:44:36,707 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cde300e1c10> search_kwargs={'k': 3}
2025-04-20 21:44:36,708 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 21:59:33,585 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 21:59:33,585 - app.db - INFO - Inserting application logs.
2025-04-20 21:59:33,587 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 21:59:33,590 - app.db - INFO - Successfully inserted application logs.
2025-04-20 21:59:33,591 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l vit nam.', 'chat_history': [('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'}
2025-04-20 21:59:33,600 - app.controllers.tts_controller - INFO -  Synthesizing speech for: Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?
2025-04-20 21:59:33,613 - app.controllers.tts_controller - DEBUG -  Tokenized inputs: {'input_ids': tensor([[ 0, 13,  0, 85,  0, 35,  0, 31,  0, 84,  0, 88,  0, 22,  0, 90,  0, 84,
          0, 92,  0, 81,  0, 80,  0, 84,  0, 14,  0,  8,  0, 30,  0, 84,  0, 55,
          0,  9,  0, 93,  0, 13,  0, 84,  0, 80,  0, 92,  0, 45,  0, 84,  0, 13,
          0, 85,  0,  8,  0, 75,  0, 15,  0, 90,  0, 84,  0, 14,  0, 59,  0, 30,
          0, 84,  0, 88,  0, 22,  0, 90,  0, 84,  0, 88,  0, 22,  0, 90,  0, 84,
          0, 13,  0, 56,  0, 84,  0, 13,  0, 12,  0,  8,  0, 84,  0, 85,  0, 43,
          0, 30,  0, 84,  0, 21,  0,  4,  0, 84,  0, 79,  0, 85,  0, 28,  0, 90,
          0, 21,  0]]), 'attention_mask': tensor([[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1]])}
2025-04-20 21:59:35,063 - app.controllers.tts_controller - INFO -  Waveform shape: torch.Size([1, 70656])
2025-04-20 21:59:35,063 - app.controllers.tts_controller - INFO -  Waveform stats - min: -0.53641, max: 0.84178
2025-04-20 21:59:35,075 - app.controllers.tts_controller - INFO -  Audio saved to: tmp/speech_137ac5a2.wav
2025-04-20 21:59:38,930 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-20 21:59:38,931 - app.db - INFO - Inserting application logs.
2025-04-20 21:59:38,932 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 21:59:38,935 - app.db - INFO - Successfully inserted application logs.
2025-04-20 21:59:38,935 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l vit nam.', 'chat_history': [('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'sao ngi bit nhn mnh nhn i ng ri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'}
2025-04-20 21:59:38,942 - app.controllers.tts_controller - INFO -  Synthesizing speech for: Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?
2025-04-20 21:59:38,944 - app.controllers.tts_controller - DEBUG -  Tokenized inputs: {'input_ids': tensor([[ 0, 13,  0, 85,  0, 35,  0, 31,  0, 84,  0, 88,  0, 22,  0, 90,  0, 84,
          0, 92,  0, 81,  0, 80,  0, 84,  0, 14,  0,  8,  0, 30,  0, 84,  0, 55,
          0,  9,  0, 93,  0, 13,  0, 84,  0, 80,  0, 92,  0, 45,  0, 84,  0, 13,
          0, 85,  0,  8,  0, 75,  0, 15,  0, 90,  0, 84,  0, 14,  0, 59,  0, 30,
          0, 84,  0, 88,  0, 22,  0, 90,  0, 84,  0, 88,  0, 22,  0, 90,  0, 84,
          0, 13,  0, 56,  0, 84,  0, 13,  0, 12,  0,  8,  0, 84,  0, 85,  0, 43,
          0, 30,  0, 84,  0, 21,  0,  4,  0, 84,  0, 79,  0, 85,  0, 28,  0, 90,
          0, 21,  0]]), 'attention_mask': tensor([[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1]])}
2025-04-20 21:59:40,256 - app.controllers.tts_controller - INFO -  Waveform shape: torch.Size([1, 65024])
2025-04-20 21:59:40,256 - app.controllers.tts_controller - INFO -  Waveform stats - min: -0.63362, max: 0.79779
2025-04-20 21:59:40,268 - app.controllers.tts_controller - INFO -  Audio saved to: tmp/speech_9bdbaad3.wav
2025-04-20 22:00:42,732 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 22:00:42,733 - app.db - INFO - Getting chat history.
2025-04-20 22:00:42,733 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-20 22:00:42,734 - app.db - INFO - Getting chat history.
2025-04-20 22:00:42,736 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 22:00:42,736 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-20 22:00:42,744 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 22:00:42,744 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 22:00:42,745 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 22:00:42,745 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 22:00:42,746 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-20 22:00:42,747 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cde300e1c10> search_kwargs={'k': 3}
2025-04-20 22:00:42,747 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-20 22:00:42,748 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-20 22:00:42,748 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-20 22:00:42,751 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-20 22:00:42,756 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cde300e1c10> search_kwargs={'k': 3}
2025-04-20 22:00:42,757 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-21 08:13:47,139 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-21 08:13:47,139 - app.db - INFO - Getting chat history.
2025-04-21 08:13:47,139 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho ti l vit nam., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-21 08:13:47,140 - app.db - INFO - Getting chat history.
2025-04-21 08:13:47,141 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-21 08:13:47,144 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-21 08:13:47,148 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-21 08:13:47,148 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-21 08:13:47,148 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-21 08:13:47,148 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-21 08:13:47,148 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-21 08:13:47,149 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-21 08:13:47,149 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-21 08:13:47,149 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-21 08:13:47,150 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cde300e1c10> search_kwargs={'k': 3}
2025-04-21 08:13:47,151 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-21 08:13:47,152 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7cde300e1c10> search_kwargs={'k': 3}
2025-04-21 08:13:47,154 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-21 08:51:17,777 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-21 08:51:17,778 - app.db - INFO - Inserting application logs.
2025-04-21 08:51:17,779 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-21 08:51:17,783 - app.db - INFO - Successfully inserted application logs.
2025-04-21 08:51:17,784 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l vit nam.', 'chat_history': [('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'}
2025-04-21 08:51:17,792 - app.controllers.tts_controller - INFO -  Synthesizing speech for: Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?
2025-04-21 08:51:17,793 - app.controllers.tts_controller - DEBUG -  Tokenized inputs: {'input_ids': tensor([[ 0, 13,  0, 85,  0, 35,  0, 31,  0, 84,  0, 88,  0, 22,  0, 90,  0, 84,
          0, 92,  0, 81,  0, 80,  0, 84,  0, 14,  0,  8,  0, 30,  0, 84,  0, 55,
          0,  9,  0, 93,  0, 13,  0, 84,  0, 80,  0, 92,  0, 45,  0, 84,  0, 13,
          0, 85,  0,  8,  0, 75,  0, 15,  0, 90,  0, 84,  0, 14,  0, 59,  0, 30,
          0, 84,  0, 88,  0, 22,  0, 90,  0, 84,  0, 88,  0, 22,  0, 90,  0, 84,
          0, 13,  0, 56,  0, 84,  0, 13,  0, 12,  0,  8,  0, 84,  0, 85,  0, 43,
          0, 30,  0, 84,  0, 21,  0,  4,  0, 84,  0, 79,  0, 85,  0, 28,  0, 90,
          0, 21,  0]]), 'attention_mask': tensor([[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1]])}
2025-04-21 08:51:19,335 - app.controllers.tts_controller - INFO -  Waveform shape: torch.Size([1, 72192])
2025-04-21 08:51:19,336 - app.controllers.tts_controller - INFO -  Waveform stats - min: -0.64630, max: 0.82495
2025-04-21 08:51:19,347 - app.controllers.tts_controller - INFO -  Audio saved to: tmp/speech_f6160b19.wav
2025-04-21 08:51:20,755 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-21 08:51:20,756 - app.db - INFO - Inserting application logs.
2025-04-21 08:51:20,758 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-21 08:51:20,761 - app.db - INFO - Successfully inserted application logs.
2025-04-21 08:51:20,763 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho ti l vit nam.', 'chat_history': [('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'h mn mn m mu u mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'm m sng nay gim my su gi v y sm nu n.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'}
2025-04-21 08:51:20,774 - app.controllers.tts_controller - INFO -  Synthesizing speech for: Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?
2025-04-21 08:51:20,776 - app.controllers.tts_controller - DEBUG -  Tokenized inputs: {'input_ids': tensor([[ 0, 13,  0, 85,  0, 35,  0, 31,  0, 84,  0, 88,  0, 22,  0, 90,  0, 84,
          0, 92,  0, 81,  0, 80,  0, 84,  0, 14,  0,  8,  0, 30,  0, 84,  0, 55,
          0,  9,  0, 93,  0, 13,  0, 84,  0, 80,  0, 92,  0, 45,  0, 84,  0, 13,
          0, 85,  0,  8,  0, 75,  0, 15,  0, 90,  0, 84,  0, 14,  0, 59,  0, 30,
          0, 84,  0, 88,  0, 22,  0, 90,  0, 84,  0, 88,  0, 22,  0, 90,  0, 84,
          0, 13,  0, 56,  0, 84,  0, 13,  0, 12,  0,  8,  0, 84,  0, 85,  0, 43,
          0, 30,  0, 84,  0, 21,  0,  4,  0, 84,  0, 79,  0, 85,  0, 28,  0, 90,
          0, 21,  0]]), 'attention_mask': tensor([[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1]])}
2025-04-21 08:51:22,420 - app.controllers.tts_controller - INFO -  Waveform shape: torch.Size([1, 74496])
2025-04-21 08:51:22,420 - app.controllers.tts_controller - INFO -  Waveform stats - min: -0.74931, max: 0.81462
2025-04-21 08:51:22,433 - app.controllers.tts_controller - INFO -  Audio saved to: tmp/speech_e9e6cb16.wav
2025-04-21 20:51:08,595 - app.audio_controller - INFO - Speech: mnh mn mn mn.
2025-04-21 20:51:08,639 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mnh mn mn mn., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-21 20:51:08,639 - app.db - INFO - Getting chat history.
2025-04-21 20:51:08,639 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mnh mn mn mn., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-21 20:51:08,640 - app.db - INFO - Getting chat history.
2025-04-21 20:51:08,644 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-21 20:51:08,644 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-21 20:51:08,656 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-21 20:51:08,656 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')]
2025-04-21 20:51:08,656 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-21 20:51:08,656 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-21 20:51:08,656 - app.chat_controller - INFO - Chat history: [('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')]
2025-04-21 20:51:08,657 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-21 20:51:08,657 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-21 20:51:08,657 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-21 20:51:08,660 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7f725649dac0> search_kwargs={'k': 3}
2025-04-21 20:51:08,665 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-21 20:51:08,667 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7f725649dac0> search_kwargs={'k': 3}
2025-04-21 20:51:08,669 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-21 20:51:12,215 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-21 20:51:12,215 - app.db - INFO - Inserting application logs.
2025-04-21 20:51:12,217 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-21 20:51:12,232 - app.db - INFO - Successfully inserted application logs.
2025-04-21 20:51:12,233 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mnh mn mn mn.', 'chat_history': [('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'}
2025-04-21 20:51:12,244 - app.controllers.tts_controller - INFO -  Synthesizing speech for: Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?
2025-04-21 20:51:12,246 - app.controllers.tts_controller - DEBUG -  Tokenized inputs: {'input_ids': tensor([[ 0, 80,  0, 28,  0, 30,  0, 84,  0,  1,  0, 30,  0, 90,  0, 84,  0, 82,
          0, 73,  0, 30,  0, 84,  0, 80,  0, 28,  0, 30,  0, 84,  0, 79,  0, 85,
          0, 28,  0, 90,  0, 21,  0, 84,  0, 85,  0, 30,  0, 69,  0,  8,  0, 84,
          0, 13,  0, 12,  0,  8,  0, 84,  0, 85,  0, 43,  0, 30,  0, 84,  0, 90,
          0, 35,  0, 75,  0, 84,  0, 88,  0, 22,  0, 90,  0, 84,  0, 13,  0, 56,
          0, 84,  0, 80,  0, 85,  0, 69,  0, 84,  0, 63,  0, 30,  0, 41,  0, 90,
          0, 84,  0, 55,  0, 22,  0, 80,  0, 84,  0, 82,  0, 22,  0, 30,  0, 84,
          0, 55,  0,  9,  0, 93,  0, 13,  0, 84,  0, 79,  0, 85,  0, 28,  0, 90,
          0, 21,  0]]), 'attention_mask': tensor([[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1]])}
2025-04-21 20:51:12,412 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-21 20:51:12,412 - app.db - INFO - Inserting application logs.
2025-04-21 20:51:12,413 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-21 20:51:12,416 - app.db - INFO - Successfully inserted application logs.
2025-04-21 20:51:12,417 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mnh mn mn mn.', 'chat_history': [('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'i cho cu lc phi th no.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'iu ny  lm cho ti c th c th i tn cng th tuyn ng xut chiu  m.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'}
2025-04-21 20:51:14,201 - app.controllers.tts_controller - INFO -  Waveform shape: torch.Size([1, 90880])
2025-04-21 20:51:14,201 - app.controllers.tts_controller - INFO -  Waveform stats - min: -0.84475, max: 0.83835
2025-04-21 20:51:14,216 - app.controllers.tts_controller - INFO -  Audio saved to: tmp/speech_d6b6a1be.wav
2025-04-21 20:51:14,224 - app.controllers.tts_controller - INFO -  Synthesizing speech for: Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?
2025-04-21 20:51:14,226 - app.controllers.tts_controller - DEBUG -  Tokenized inputs: {'input_ids': tensor([[ 0, 80,  0, 28,  0, 30,  0, 84,  0,  1,  0, 30,  0, 90,  0, 84,  0, 82,
          0, 73,  0, 30,  0, 84,  0, 80,  0, 28,  0, 30,  0, 84,  0, 79,  0, 85,
          0, 28,  0, 90,  0, 21,  0, 84,  0, 85,  0, 30,  0, 69,  0,  8,  0, 84,
          0, 13,  0, 12,  0,  8,  0, 84,  0, 85,  0, 43,  0, 30,  0, 84,  0, 90,
          0, 35,  0, 75,  0, 84,  0, 88,  0, 22,  0, 90,  0, 84,  0, 13,  0, 56,
          0, 84,  0, 80,  0, 85,  0, 69,  0, 84,  0, 63,  0, 30,  0, 41,  0, 90,
          0, 84,  0, 55,  0, 22,  0, 80,  0, 84,  0, 82,  0, 22,  0, 30,  0, 84,
          0, 55,  0,  9,  0, 93,  0, 13,  0, 84,  0, 79,  0, 85,  0, 28,  0, 90,
          0, 21,  0]]), 'attention_mask': tensor([[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1]])}
2025-04-21 20:51:16,057 - app.controllers.tts_controller - INFO -  Waveform shape: torch.Size([1, 103424])
2025-04-21 20:51:16,057 - app.controllers.tts_controller - INFO -  Waveform stats - min: -0.64542, max: 0.73506
2025-04-21 20:51:16,070 - app.controllers.tts_controller - INFO -  Audio saved to: tmp/speech_57c2f71a.wav
2025-04-21 21:31:02,043 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mnh mn mn mn., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-21 21:31:02,043 - app.db - INFO - Getting chat history.
2025-04-21 21:31:02,043 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mnh mn mn mn., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-21 21:31:02,044 - app.db - INFO - Getting chat history.
2025-04-21 21:31:02,047 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-21 21:31:02,047 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-21 21:31:02,054 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-21 21:31:02,055 - app.chat_controller - INFO - Chat history: [('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?')]
2025-04-21 21:31:02,055 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-21 21:31:02,055 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-21 21:31:02,056 - app.chat_controller - INFO - Chat history: [('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?')]
2025-04-21 21:31:02,056 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-21 21:31:02,056 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-21 21:31:02,058 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-21 21:31:02,058 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7f725649dac0> search_kwargs={'k': 3}
2025-04-21 21:31:02,059 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-21 21:31:02,066 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7f725649dac0> search_kwargs={'k': 3}
2025-04-21 21:31:02,067 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-22 08:55:51,005 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-22 08:55:51,006 - app.db - INFO - Inserting application logs.
2025-04-22 08:55:51,009 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-22 08:55:51,015 - app.db - INFO - Successfully inserted application logs.
2025-04-22 08:55:51,016 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mnh mn mn mn.', 'chat_history': [('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'}
2025-04-22 08:55:51,032 - app.controllers.tts_controller - INFO -  Synthesizing speech for: Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?
2025-04-22 08:55:51,036 - app.controllers.tts_controller - DEBUG -  Tokenized inputs: {'input_ids': tensor([[ 0, 80,  0, 28,  0, 30,  0, 84,  0,  1,  0, 30,  0, 90,  0, 84,  0, 82,
          0, 73,  0, 30,  0, 84,  0, 80,  0, 28,  0, 30,  0, 84,  0, 79,  0, 85,
          0, 28,  0, 90,  0, 21,  0, 84,  0, 85,  0, 30,  0, 69,  0,  8,  0, 84,
          0, 13,  0, 12,  0,  8,  0, 84,  0, 85,  0, 43,  0, 30,  0, 84,  0, 90,
          0, 35,  0, 75,  0, 84,  0, 88,  0, 22,  0, 90,  0, 84,  0, 13,  0, 56,
          0, 84,  0, 80,  0, 85,  0, 69,  0, 84,  0, 63,  0, 30,  0, 41,  0, 90,
          0, 84,  0, 55,  0, 22,  0, 80,  0, 84,  0, 82,  0, 22,  0, 30,  0, 84,
          0, 55,  0,  9,  0, 93,  0, 13,  0, 84,  0, 79,  0, 85,  0, 28,  0, 90,
          0, 21,  0]]), 'attention_mask': tensor([[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1]])}
2025-04-22 08:55:54,326 - app.controllers.tts_controller - INFO -  Waveform shape: torch.Size([1, 93952])
2025-04-22 08:55:54,326 - app.controllers.tts_controller - INFO -  Waveform stats - min: -0.64653, max: 0.82490
2025-04-22 08:55:54,330 - app.controllers.tts_controller - INFO -  Audio saved to: tmp/speech_1a9bb7f7.wav
2025-04-22 08:55:59,433 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-22 08:55:59,433 - app.db - INFO - Inserting application logs.
2025-04-22 08:55:59,435 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-22 08:55:59,439 - app.db - INFO - Successfully inserted application logs.
2025-04-22 08:55:59,441 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mnh mn mn mn.', 'chat_history': [('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'}
2025-04-22 08:55:59,456 - app.controllers.tts_controller - INFO -  Synthesizing speech for: Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?
2025-04-22 08:55:59,459 - app.controllers.tts_controller - DEBUG -  Tokenized inputs: {'input_ids': tensor([[ 0, 80,  0, 28,  0, 30,  0, 84,  0,  1,  0, 30,  0, 90,  0, 84,  0, 82,
          0, 73,  0, 30,  0, 84,  0, 80,  0, 28,  0, 30,  0, 84,  0, 79,  0, 85,
          0, 28,  0, 90,  0, 21,  0, 84,  0, 85,  0, 30,  0, 69,  0,  8,  0, 84,
          0, 13,  0, 12,  0,  8,  0, 84,  0, 85,  0, 43,  0, 30,  0, 84,  0, 90,
          0, 35,  0, 75,  0, 84,  0, 88,  0, 22,  0, 90,  0, 84,  0, 13,  0, 56,
          0, 84,  0, 80,  0, 85,  0, 69,  0, 84,  0, 63,  0, 30,  0, 41,  0, 90,
          0, 84,  0, 55,  0, 22,  0, 80,  0, 84,  0, 82,  0, 22,  0, 30,  0, 84,
          0, 55,  0,  9,  0, 93,  0, 13,  0, 84,  0, 79,  0, 85,  0, 28,  0, 90,
          0, 21,  0]]), 'attention_mask': tensor([[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
         1, 1, 1]])}
2025-04-22 08:56:02,744 - app.controllers.tts_controller - INFO -  Waveform shape: torch.Size([1, 90368])
2025-04-22 08:56:02,745 - app.controllers.tts_controller - INFO -  Waveform stats - min: -0.64528, max: 0.76565
2025-04-22 08:56:02,750 - app.controllers.tts_controller - INFO -  Audio saved to: tmp/speech_a7c394ea.wav
2025-04-26 14:26:52,911 - app.audio_controller - INFO - Speech: chn chng.
2025-04-26 14:26:52,947 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: chn chng., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:26:52,948 - app.db - INFO - Getting chat history.
2025-04-26 14:26:52,948 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: chn chng., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:26:52,948 - app.db - INFO - Getting chat history.
2025-04-26 14:26:52,952 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:26:52,952 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:26:52,962 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:26:52,963 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:26:52,963 - app.chat_controller - INFO - Chat history: [('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-26 14:26:52,963 - app.chat_controller - INFO - Chat history: [('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')]
2025-04-26 14:26:52,963 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:26:52,963 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:26:52,963 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:26:52,963 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:26:52,966 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x77bb99736930> search_kwargs={'k': 3}
2025-04-26 14:26:52,970 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:26:52,972 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x77bb99736930> search_kwargs={'k': 3}
2025-04-26 14:26:52,973 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:26:54,826 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:26:54,826 - app.db - INFO - Inserting application logs.
2025-04-26 14:26:54,828 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:26:54,843 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:26:54,844 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'chn chng.', 'chat_history': [('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'}
2025-04-26 14:26:55,727 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:26:55,728 - app.db - INFO - Inserting application logs.
2025-04-26 14:26:55,730 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:26:55,733 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:26:55,734 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'chn chng.', 'chat_history': [('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'nu mun gio dc cng ty bn nn truy cp vo nn knh  thng bo cho cng ty kh l.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.'), ('human', 'nhiu tuyt i t t.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny.')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'}
2025-04-26 14:27:09,797 - app.audio_controller - INFO - Speech: y l mt s thng tin duy nht i vi cc th sinh.
2025-04-26 14:27:09,804 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: y l mt s thng tin duy nht i vi cc th sinh., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:27:09,804 - app.db - INFO - Getting chat history.
2025-04-26 14:27:09,805 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:27:09,810 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:27:09,811 - app.chat_controller - INFO - Chat history: [('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?')]
2025-04-26 14:27:09,811 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:27:09,811 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:27:09,813 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x77bb99736930> search_kwargs={'k': 3}
2025-04-26 14:27:09,814 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:27:12,580 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:27:12,580 - app.db - INFO - Inserting application logs.
2025-04-26 14:27:12,581 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:27:12,584 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:27:12,585 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'y l mt s thng tin duy nht i vi cc th sinh.', 'chat_history': [('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?')], 'context': [], 'answer': 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'}
2025-04-26 14:29:43,239 - app.audio_controller - INFO - Speech: phim trm.
2025-04-26 14:29:43,272 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: phim trm., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:29:43,272 - app.db - INFO - Getting chat history.
2025-04-26 14:29:43,273 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: phim trm., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:29:43,273 - app.db - INFO - Getting chat history.
2025-04-26 14:29:43,277 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:29:43,278 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:29:43,282 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:29:43,282 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:29:43,282 - app.chat_controller - INFO - Chat history: [('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?')]
2025-04-26 14:29:43,282 - app.chat_controller - INFO - Chat history: [('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?')]
2025-04-26 14:29:43,282 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:29:43,282 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:29:43,282 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:29:43,282 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:29:43,286 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7faa6cd8c170> search_kwargs={'k': 3}
2025-04-26 14:29:43,290 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:29:43,292 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7faa6cd8c170> search_kwargs={'k': 3}
2025-04-26 14:29:43,293 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:29:45,294 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:29:45,294 - app.db - INFO - Inserting application logs.
2025-04-26 14:29:45,296 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:29:45,299 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:29:45,300 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'phim trm.', 'chat_history': [('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'}
2025-04-26 14:29:45,536 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:29:45,536 - app.db - INFO - Inserting application logs.
2025-04-26 14:29:45,538 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:29:45,541 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:29:45,541 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'phim trm.', 'chat_history': [('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?')], 'context': [], 'answer': 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'}
2025-04-26 14:31:11,713 - app.audio_controller - INFO - Speech: xin cho.
2025-04-26 14:31:11,719 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:31:11,719 - app.db - INFO - Getting chat history.
2025-04-26 14:31:11,720 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:31:11,724 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:31:11,725 - app.chat_controller - INFO - Chat history: [('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?')]
2025-04-26 14:31:11,725 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:31:11,725 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:31:11,727 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7faa6cd8c170> search_kwargs={'k': 3}
2025-04-26 14:31:11,728 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:31:14,704 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:31:14,704 - app.db - INFO - Inserting application logs.
2025-04-26 14:31:14,706 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:31:14,708 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:31:14,709 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho ti l vit nam.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi g khng?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:31:36,044 - app.audio_controller - INFO - Speech: mnh cn gip bng cch cho mnh mt.
2025-04-26 14:31:36,062 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mnh cn gip bng cch cho mnh mt., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:31:36,062 - app.db - INFO - Getting chat history.
2025-04-26 14:31:36,063 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:31:36,066 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:31:36,067 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')]
2025-04-26 14:31:36,067 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:31:36,067 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:31:36,069 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7faa6cd8c170> search_kwargs={'k': 3}
2025-04-26 14:31:36,069 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:31:38,800 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:31:38,801 - app.db - INFO - Inserting application logs.
2025-04-26 14:31:38,802 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:31:38,806 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:31:38,807 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mnh cn gip bng cch cho mnh mt.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'}
2025-04-26 14:31:57,282 - app.audio_controller - INFO - Speech: mnh mun trang im.
2025-04-26 14:31:57,289 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mnh mun trang im., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:31:57,289 - app.db - INFO - Getting chat history.
2025-04-26 14:31:57,290 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:31:57,294 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:31:57,294 - app.chat_controller - INFO - Chat history: [('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')]
2025-04-26 14:31:57,294 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:31:57,294 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:31:57,296 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7faa6cd8c170> search_kwargs={'k': 3}
2025-04-26 14:31:57,297 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:32:01,057 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:32:01,057 - app.db - INFO - Inserting application logs.
2025-04-26 14:32:01,059 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:32:01,062 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:32:01,063 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mnh mun trang im.', 'chat_history': [('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')], 'context': [], 'answer': 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'}
2025-04-26 14:36:02,255 - app.audio_controller - INFO - Speech: xin cho.
2025-04-26 14:36:02,272 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:36:02,272 - app.db - INFO - Getting chat history.
2025-04-26 14:36:02,272 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:36:02,273 - app.db - INFO - Getting chat history.
2025-04-26 14:36:02,274 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:36:02,275 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:36:02,284 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:36:02,284 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:36:02,284 - app.chat_controller - INFO - Chat history: [('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')]
2025-04-26 14:36:02,285 - app.chat_controller - INFO - Chat history: [('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')]
2025-04-26 14:36:02,285 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:36:02,285 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:36:02,287 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:36:02,287 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:36:02,288 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7faa6cd8c170> search_kwargs={'k': 3}
2025-04-26 14:36:02,289 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:36:02,295 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7faa6cd8c170> search_kwargs={'k': 3}
2025-04-26 14:36:02,296 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:36:04,068 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:36:04,068 - app.db - INFO - Inserting application logs.
2025-04-26 14:36:04,069 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:36:04,072 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:36:04,073 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:36:04,719 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:36:04,719 - app.db - INFO - Inserting application logs.
2025-04-26 14:36:04,721 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:36:04,723 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:36:04,724 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'mnh mn mn mn.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:36:37,952 - app.audio_controller - INFO - Speech: xin cho.
2025-04-26 14:36:37,978 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:36:37,978 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:36:37,978 - app.db - INFO - Getting chat history.
2025-04-26 14:36:37,978 - app.db - INFO - Getting chat history.
2025-04-26 14:36:37,982 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:36:37,983 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:36:37,988 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:36:37,988 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:36:37,989 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')]
2025-04-26 14:36:37,989 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')]
2025-04-26 14:36:37,989 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:36:37,989 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:36:37,989 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:36:37,989 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:36:37,992 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7a214e412f60> search_kwargs={'k': 3}
2025-04-26 14:36:37,996 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:36:37,997 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7a214e412f60> search_kwargs={'k': 3}
2025-04-26 14:36:37,998 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:36:39,676 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:36:39,677 - app.db - INFO - Inserting application logs.
2025-04-26 14:36:39,679 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:36:39,681 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:36:39,682 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:36:40,542 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:36:40,542 - app.db - INFO - Inserting application logs.
2025-04-26 14:36:40,544 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:36:40,547 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:36:40,548 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'chn chng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:39:36,731 - app.audio_controller - INFO - Speech: xin cho.
2025-04-26 14:39:36,750 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:39:36,750 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:39:36,750 - app.db - INFO - Getting chat history.
2025-04-26 14:39:36,750 - app.db - INFO - Getting chat history.
2025-04-26 14:39:36,754 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:39:36,754 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:39:36,759 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:39:36,760 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:39:36,760 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?')]
2025-04-26 14:39:36,760 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?')]
2025-04-26 14:39:36,760 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:39:36,761 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:39:36,761 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:39:36,761 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:39:36,763 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7a214e412f60> search_kwargs={'k': 3}
2025-04-26 14:39:36,763 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:39:36,766 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7a214e412f60> search_kwargs={'k': 3}
2025-04-26 14:39:36,770 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:39:38,470 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:39:38,470 - app.db - INFO - Inserting application logs.
2025-04-26 14:39:38,472 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:39:38,475 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:39:38,476 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:39:39,259 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:39:39,259 - app.db - INFO - Inserting application logs.
2025-04-26 14:39:39,261 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:39:39,264 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:39:39,265 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'y l mt s thng tin duy nht i vi cc th sinh.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:39:44,726 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:39:44,726 - app.db - INFO - Getting chat history.
2025-04-26 14:39:44,728 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:39:44,728 - app.db - INFO - Getting chat history.
2025-04-26 14:39:44,729 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:39:44,732 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:39:44,737 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:39:44,737 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?')]
2025-04-26 14:39:44,737 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:39:44,737 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:39:44,737 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?')]
2025-04-26 14:39:44,737 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:39:44,737 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:39:44,738 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:39:44,739 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7a214e412f60> search_kwargs={'k': 3}
2025-04-26 14:39:44,740 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7a214e412f60> search_kwargs={'k': 3}
2025-04-26 14:39:44,740 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:39:44,741 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:39:46,783 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:39:46,783 - app.db - INFO - Inserting application logs.
2025-04-26 14:39:46,785 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:39:46,788 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:39:46,788 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:39:47,699 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:39:47,699 - app.db - INFO - Inserting application logs.
2025-04-26 14:39:47,701 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:39:47,704 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:39:47,705 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'phim trm.'), ('ai', 'Ti xin li, ti khng c thng tin . Bn c th cung cp thm chi tit  ti c th gip bn tt hn khng?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:39:55,704 - app.audio_controller - INFO - Speech: xin cho.
2025-04-26 14:39:55,721 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:39:55,721 - app.db - INFO - Getting chat history.
2025-04-26 14:39:55,722 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:39:55,722 - app.db - INFO - Getting chat history.
2025-04-26 14:39:55,724 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:39:55,724 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:39:55,729 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:39:55,730 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:39:55,730 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')]
2025-04-26 14:39:55,730 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')]
2025-04-26 14:39:55,730 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:39:55,730 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:39:55,731 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:39:55,731 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:39:55,733 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7a214e412f60> search_kwargs={'k': 3}
2025-04-26 14:39:55,734 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:39:55,736 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7a214e412f60> search_kwargs={'k': 3}
2025-04-26 14:39:55,739 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:39:57,938 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:39:57,938 - app.db - INFO - Inserting application logs.
2025-04-26 14:39:57,939 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:39:57,942 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:39:57,943 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:39:58,799 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:39:58,799 - app.db - INFO - Inserting application logs.
2025-04-26 14:39:58,800 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:39:58,804 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:39:58,805 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'mnh mun trang im.'), ('ai', 'Ti xin li, ti khng th gip bn vi vic trang im v ti l mt m hnh ngn ng. Tuy nhin, c rt nhiu ngun ti nguyn trc tuyn v video hng dn c th gip bn hc cch trang im. Bn cng c th n cc ca hng m phm  c t vn v hng dn trc tip.'), ('human', 'mnh cn gip bng cch cho mnh mt.'), ('ai', 'Ti xin li, ti khng hiu cu hi ny. Bn c th din t li c khng?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:40:05,536 - app.audio_controller - INFO - Speech: cc em nh.
2025-04-26 14:40:05,562 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: cc em nh., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:40:05,563 - app.db - INFO - Getting chat history.
2025-04-26 14:40:05,565 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:40:05,569 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:40:05,570 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 14:40:05,570 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:40:05,570 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:40:05,574 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7a214e412f60> search_kwargs={'k': 3}
2025-04-26 14:40:05,575 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:40:08,277 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:40:08,277 - app.db - INFO - Inserting application logs.
2025-04-26 14:40:08,279 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:40:08,281 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:40:08,282 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'cc em nh.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Ti c th gip g cho bn?'}
2025-04-26 14:43:43,792 - app.audio_controller - INFO - Speech: xin cho.
2025-04-26 14:43:43,816 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:43:43,817 - app.db - INFO - Getting chat history.
2025-04-26 14:43:43,817 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:43:43,817 - app.db - INFO - Getting chat history.
2025-04-26 14:43:43,820 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:43:43,820 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:43:43,824 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:43:43,824 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:43:43,825 - app.chat_controller - INFO - Chat history: [('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 14:43:43,825 - app.chat_controller - INFO - Chat history: [('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 14:43:43,825 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:43:43,825 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:43:43,825 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:43:43,825 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:43:43,829 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 14:43:43,829 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 14:43:43,834 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:43:43,835 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:43:45,874 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:43:45,874 - app.db - INFO - Inserting application logs.
2025-04-26 14:43:45,876 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:43:45,878 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:43:45,879 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:43:46,306 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:43:46,306 - app.db - INFO - Inserting application logs.
2025-04-26 14:43:46,307 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:43:46,310 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:43:46,311 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:44:48,629 - app.audio_controller - INFO - Speech: xin cho.
2025-04-26 14:44:48,642 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:44:48,642 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:44:48,642 - app.db - INFO - Getting chat history.
2025-04-26 14:44:48,642 - app.db - INFO - Getting chat history.
2025-04-26 14:44:48,644 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:44:48,644 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:44:48,649 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:44:48,650 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 14:44:48,649 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:44:48,650 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:44:48,650 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:44:48,650 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 14:44:48,650 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:44:48,651 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:44:48,652 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 14:44:48,653 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 14:44:48,653 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:44:48,654 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:44:50,185 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:44:50,185 - app.db - INFO - Inserting application logs.
2025-04-26 14:44:50,187 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:44:50,190 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:44:50,190 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:44:51,192 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:44:51,192 - app.db - INFO - Inserting application logs.
2025-04-26 14:44:51,193 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:44:51,196 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:44:51,196 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:44:58,009 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:44:58,009 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:44:58,010 - app.db - INFO - Getting chat history.
2025-04-26 14:44:58,010 - app.db - INFO - Getting chat history.
2025-04-26 14:44:58,011 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:44:58,012 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:44:58,017 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:44:58,017 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 14:44:58,017 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:44:58,018 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:44:58,018 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 14:44:58,018 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:44:58,018 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:44:58,018 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:44:58,020 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 14:44:58,021 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 14:44:58,021 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:44:58,022 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:44:59,550 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:44:59,550 - app.db - INFO - Inserting application logs.
2025-04-26 14:44:59,552 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:44:59,555 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:44:59,556 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:45:00,447 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:45:00,447 - app.db - INFO - Inserting application logs.
2025-04-26 14:45:00,448 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:45:00,451 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:45:00,452 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:45:13,063 - app.audio_controller - INFO - Speech: xin cho.
2025-04-26 14:45:13,080 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:45:13,081 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:45:13,081 - app.db - INFO - Getting chat history.
2025-04-26 14:45:13,081 - app.db - INFO - Getting chat history.
2025-04-26 14:45:13,083 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:45:13,083 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:45:13,088 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:45:13,088 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:45:13,089 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 14:45:13,089 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 14:45:13,089 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:45:13,089 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:45:13,089 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:45:13,089 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:45:13,091 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 14:45:13,091 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 14:45:13,092 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:45:13,092 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:45:14,680 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:45:14,680 - app.db - INFO - Inserting application logs.
2025-04-26 14:45:14,682 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:45:14,685 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:45:14,685 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:45:15,793 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:45:15,793 - app.db - INFO - Inserting application logs.
2025-04-26 14:45:15,794 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:45:15,797 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:45:15,797 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:50:54,633 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:50:54,633 - app.db - INFO - Getting chat history.
2025-04-26 14:50:54,634 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:50:54,638 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:50:54,638 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 14:50:54,638 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:50:54,638 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:50:54,640 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 14:50:54,640 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:50:57,175 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:50:57,176 - app.db - INFO - Inserting application logs.
2025-04-26 14:50:57,177 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:50:57,179 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:50:57,180 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:51:04,959 - app.audio_controller - INFO - Speech: xin cho.
2025-04-26 14:51:04,975 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:51:04,975 - app.db - INFO - Getting chat history.
2025-04-26 14:51:04,975 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:51:04,976 - app.db - INFO - Getting chat history.
2025-04-26 14:51:04,977 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:51:04,978 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:51:04,984 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:51:04,984 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:51:04,984 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?')]
2025-04-26 14:51:04,984 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?')]
2025-04-26 14:51:04,984 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:51:04,984 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:51:04,984 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:51:04,985 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:51:04,987 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 14:51:04,988 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 14:51:04,988 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:51:04,989 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:51:07,365 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:51:07,365 - app.db - INFO - Inserting application logs.
2025-04-26 14:51:07,367 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:51:07,369 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:51:07,370 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:51:07,404 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:51:07,404 - app.db - INFO - Inserting application logs.
2025-04-26 14:51:07,405 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:51:07,408 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:51:07,409 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'cc em nh.'), ('ai', 'Ti c th gip g cho bn?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:51:34,105 - app.audio_controller - INFO - Speech: xin cho.
2025-04-26 14:51:34,127 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:51:34,128 - app.db - INFO - Getting chat history.
2025-04-26 14:51:34,128 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:51:34,128 - app.db - INFO - Getting chat history.
2025-04-26 14:51:34,129 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:51:34,130 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:51:34,137 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:51:34,137 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 14:51:34,137 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:51:34,137 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:51:34,139 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 14:51:34,139 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:51:34,139 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:51:34,139 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 14:51:34,141 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:51:34,145 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:51:34,148 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 14:51:34,148 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:51:35,840 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:51:35,840 - app.db - INFO - Inserting application logs.
2025-04-26 14:51:35,841 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:51:35,844 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:51:35,845 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Answer: Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:51:36,717 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:51:36,717 - app.db - INFO - Inserting application logs.
2025-04-26 14:51:36,718 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:51:36,720 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:51:36,721 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:55:02,634 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:55:02,635 - app.db - INFO - Getting chat history.
2025-04-26 14:55:02,636 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:55:02,651 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:55:02,651 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 14:55:02,651 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:55:02,651 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:55:02,652 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 14:55:02,653 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:55:04,149 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:55:04,150 - app.db - INFO - Inserting application logs.
2025-04-26 14:55:04,151 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:55:04,155 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:55:04,155 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Answer: Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:55:12,944 - app.audio_controller - INFO - Speech: xin cho.
2025-04-26 14:55:12,977 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:55:12,977 - app.db - INFO - Getting chat history.
2025-04-26 14:55:12,979 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:55:12,985 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:55:12,986 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 14:55:12,986 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:55:12,986 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:55:12,987 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 14:55:12,988 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:55:14,565 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:55:14,565 - app.db - INFO - Inserting application logs.
2025-04-26 14:55:14,567 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:55:14,571 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:55:14,571 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Answer: Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:59:03,655 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:59:03,655 - app.db - INFO - Getting chat history.
2025-04-26 14:59:03,656 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:59:03,660 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:59:03,661 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 14:59:03,661 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:59:03,661 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:59:03,662 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 14:59:03,663 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:59:04,013 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:59:04,013 - app.db - INFO - Getting chat history.
2025-04-26 14:59:04,014 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:59:04,018 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:59:04,018 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 14:59:04,019 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:59:04,019 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:59:04,020 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 14:59:04,020 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:59:06,333 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:59:06,334 - app.db - INFO - Inserting application logs.
2025-04-26 14:59:06,335 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:59:06,339 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:59:06,340 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Answer: Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:59:07,169 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:59:07,169 - app.db - INFO - Inserting application logs.
2025-04-26 14:59:07,171 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:59:07,174 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:59:07,174 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Answer: Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:59:08,061 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:59:08,061 - app.db - INFO - Getting chat history.
2025-04-26 14:59:08,062 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:59:08,066 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:59:08,066 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 14:59:08,066 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:59:08,066 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:59:08,068 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 14:59:08,068 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:59:08,409 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: xin cho., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 14:59:08,409 - app.db - INFO - Getting chat history.
2025-04-26 14:59:08,410 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:59:08,414 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 14:59:08,414 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 14:59:08,414 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 14:59:08,414 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 14:59:08,416 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 14:59:08,417 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 14:59:09,557 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:59:09,558 - app.db - INFO - Inserting application logs.
2025-04-26 14:59:09,559 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:59:09,562 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:59:09,562 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Answer: Cho bn! Ti c th gip g cho bn?'}
2025-04-26 14:59:10,043 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 14:59:10,043 - app.db - INFO - Inserting application logs.
2025-04-26 14:59:10,044 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 14:59:10,048 - app.db - INFO - Successfully inserted application logs.
2025-04-26 14:59:10,049 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Answer: Cho bn! Ti c th gip g cho bn?'}
2025-04-26 15:11:24,996 - app.audio_controller - INFO - Speech: h.
2025-04-26 15:11:25,023 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: h., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:11:25,023 - app.db - INFO - Getting chat history.
2025-04-26 15:11:25,024 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:11:25,028 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:11:25,029 - app.chat_controller - INFO - Chat history: [('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 15:11:25,029 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:11:25,029 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:11:25,030 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:11:25,031 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:11:27,534 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:11:27,535 - app.db - INFO - Inserting application logs.
2025-04-26 15:11:27,536 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:11:27,540 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:11:27,540 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'h.', 'chat_history': [('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Answer: Bn mun hi g ?'}
2025-04-26 15:11:49,747 - app.audio_controller - INFO - Speech: cc em nh.
2025-04-26 15:11:49,766 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: cc em nh., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:11:49,767 - app.db - INFO - Getting chat history.
2025-04-26 15:11:49,768 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:11:49,772 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:11:49,772 - app.chat_controller - INFO - Chat history: [('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 15:11:49,772 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:11:49,772 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:11:49,774 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:11:49,774 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:11:51,418 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:11:51,418 - app.db - INFO - Inserting application logs.
2025-04-26 15:11:51,420 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:11:51,423 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:11:51,424 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'cc em nh.', 'chat_history': [('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'}
2025-04-26 15:12:07,213 - app.audio_controller - INFO - Speech: iu ny  c tc phm v tc gi.
2025-04-26 15:12:07,223 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: iu ny  c tc phm v tc gi., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:12:07,223 - app.db - INFO - Getting chat history.
2025-04-26 15:12:07,224 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:12:07,228 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:12:07,228 - app.chat_controller - INFO - Chat history: [('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?')]
2025-04-26 15:12:07,228 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:12:07,228 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:12:07,229 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:12:07,230 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:12:09,021 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:12:09,021 - app.db - INFO - Inserting application logs.
2025-04-26 15:12:09,023 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:12:09,026 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:12:09,026 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'iu ny  c tc phm v tc gi.', 'chat_history': [('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'}
2025-04-26 15:14:37,325 - app.audio_controller - INFO - Speech: cc em nh.
2025-04-26 15:14:37,337 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: cc em nh., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:14:37,337 - app.db - INFO - Getting chat history.
2025-04-26 15:14:37,339 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:14:37,343 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:14:37,343 - app.chat_controller - INFO - Chat history: [('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')]
2025-04-26 15:14:37,344 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:14:37,344 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:14:37,345 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:14:37,346 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:14:39,717 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:14:39,717 - app.db - INFO - Inserting application logs.
2025-04-26 15:14:39,718 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:14:39,721 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:14:39,722 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'cc em nh.', 'chat_history': [('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'}
2025-04-26 15:14:57,748 - app.audio_controller - INFO - Speech: cng nh mt trong nhng th nht.
2025-04-26 15:14:57,756 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: cng nh mt trong nhng th nht., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:14:57,756 - app.db - INFO - Getting chat history.
2025-04-26 15:14:57,758 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:14:57,762 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:14:57,762 - app.chat_controller - INFO - Chat history: [('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?')]
2025-04-26 15:14:57,762 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:14:57,762 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:14:57,764 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:14:57,765 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:15:00,285 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:15:00,286 - app.db - INFO - Inserting application logs.
2025-04-26 15:15:00,288 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:15:00,292 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:15:00,293 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'cng nh mt trong nhng th nht.', 'chat_history': [('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'}
2025-04-26 15:18:34,136 - app.audio_controller - INFO - Speech: cc em nh.
2025-04-26 15:18:34,147 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: cc em nh., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:18:34,147 - app.db - INFO - Getting chat history.
2025-04-26 15:18:34,149 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:18:34,153 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:18:34,154 - app.chat_controller - INFO - Chat history: [('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?')]
2025-04-26 15:18:34,154 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:18:34,154 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:18:34,156 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:18:34,157 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:18:36,015 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:18:36,015 - app.db - INFO - Inserting application logs.
2025-04-26 15:18:36,016 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:18:36,019 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:18:36,019 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'cc em nh.', 'chat_history': [('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'}
2025-04-26 15:18:48,881 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: iu ny  c tc phm v tc gi., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:18:48,881 - app.db - INFO - Getting chat history.
2025-04-26 15:18:48,882 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:18:48,887 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:18:48,887 - app.chat_controller - INFO - Chat history: [('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?')]
2025-04-26 15:18:48,887 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:18:48,887 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:18:48,889 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:18:48,889 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:18:50,667 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:18:50,667 - app.db - INFO - Inserting application logs.
2025-04-26 15:18:50,668 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:18:50,671 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:18:50,672 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'iu ny  c tc phm v tc gi.', 'chat_history': [('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'}
2025-04-26 15:19:06,972 - app.audio_controller - INFO - Speech: cc em nh.
2025-04-26 15:19:06,983 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: cc em nh., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:19:06,983 - app.db - INFO - Getting chat history.
2025-04-26 15:19:06,985 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:19:06,988 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:19:06,988 - app.chat_controller - INFO - Chat history: [('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?')]
2025-04-26 15:19:06,989 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:19:06,989 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:19:06,990 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:19:06,991 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:19:09,518 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:19:09,518 - app.db - INFO - Inserting application logs.
2025-04-26 15:19:09,520 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:19:09,533 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:19:09,534 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'cc em nh.', 'chat_history': [('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'}
2025-04-26 15:27:30,690 - app.audio_controller - INFO - Speech: mnh phi thc hin mt nn tng.
2025-04-26 15:27:30,706 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mnh phi thc hin mt nn tng., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:27:30,706 - app.db - INFO - Getting chat history.
2025-04-26 15:27:30,707 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:27:30,713 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:27:30,713 - app.chat_controller - INFO - Chat history: [('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?')]
2025-04-26 15:27:30,713 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:27:30,713 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:27:30,716 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:27:30,717 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:27:32,683 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:27:32,683 - app.db - INFO - Inserting application logs.
2025-04-26 15:27:32,685 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:27:32,688 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:27:32,689 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mnh phi thc hin mt nn tng.', 'chat_history': [('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'}
2025-04-26 15:27:58,353 - app.audio_controller - INFO - Speech: cc em nh thy th no th thy th no th thy th no.
2025-04-26 15:27:58,358 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: cc em nh thy th no th thy th no th thy th no., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:27:58,359 - app.db - INFO - Getting chat history.
2025-04-26 15:27:58,360 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:27:58,363 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:27:58,363 - app.chat_controller - INFO - Chat history: [('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?')]
2025-04-26 15:27:58,363 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:27:58,363 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:27:58,364 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:27:58,365 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:28:00,045 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:28:00,045 - app.db - INFO - Inserting application logs.
2025-04-26 15:28:00,047 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:28:00,051 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:28:00,051 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'cc em nh thy th no th thy th no th thy th no.', 'chat_history': [('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?'), ('human', 'xin cho.'), ('ai', 'Answer: Cho bn! Ti c th gip g cho bn?')], 'context': [], 'answer': 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'}
2025-04-26 15:37:18,649 - app.audio_controller - INFO - Speech: iu ny s thy.
2025-04-26 15:37:18,653 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: iu ny s thy., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:37:18,654 - app.db - INFO - Getting chat history.
2025-04-26 15:37:18,655 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:37:18,659 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:37:18,659 - app.chat_controller - INFO - Chat history: [('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?')]
2025-04-26 15:37:18,659 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:37:18,659 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:37:18,661 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:37:18,661 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:37:21,463 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:37:21,463 - app.db - INFO - Inserting application logs.
2025-04-26 15:37:21,464 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:37:21,467 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:37:21,467 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'iu ny s thy.', 'chat_history': [('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'h.'), ('ai', 'Answer: Bn mun hi g ?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'}
2025-04-26 15:44:33,527 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mnh phi thc hin mt nn tng., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:44:33,527 - app.db - INFO - Getting chat history.
2025-04-26 15:44:33,529 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:44:33,533 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:44:33,534 - app.chat_controller - INFO - Chat history: [('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?')]
2025-04-26 15:44:33,534 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:44:33,534 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:44:33,536 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:44:33,536 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:44:35,536 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:44:35,537 - app.db - INFO - Inserting application logs.
2025-04-26 15:44:35,538 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:44:35,540 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:44:35,541 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mnh phi thc hin mt nn tng.', 'chat_history': [('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?')], 'context': [], 'answer': 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'}
2025-04-26 15:44:40,862 - app.audio_controller - INFO - Speech: cc trang phc.
2025-04-26 15:44:40,867 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: cc trang phc., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:44:40,867 - app.db - INFO - Getting chat history.
2025-04-26 15:44:40,868 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:44:40,872 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:44:40,872 - app.chat_controller - INFO - Chat history: [('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?')]
2025-04-26 15:44:40,872 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:44:40,872 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:44:40,873 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:44:40,874 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:44:47,669 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:44:47,669 - app.db - INFO - Inserting application logs.
2025-04-26 15:44:47,670 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:44:47,673 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:44:47,674 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'cc trang phc.', 'chat_history': [('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?')], 'context': [], 'answer': 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?'}
2025-04-26 15:47:44,975 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mnh phi thc hin mt nn tng., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:47:44,975 - app.db - INFO - Getting chat history.
2025-04-26 15:47:44,976 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:47:44,980 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:47:44,981 - app.chat_controller - INFO - Chat history: [('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?')]
2025-04-26 15:47:44,981 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:47:44,981 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:47:44,983 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:47:44,984 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:47:54,498 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:47:54,499 - app.db - INFO - Inserting application logs.
2025-04-26 15:47:54,500 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:47:54,502 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:47:54,503 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mnh phi thc hin mt nn tng.', 'chat_history': [('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?')], 'context': [], 'answer': 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'}
2025-04-26 15:49:02,224 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mnh phi thc hin mt nn tng., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:49:02,224 - app.db - INFO - Getting chat history.
2025-04-26 15:49:02,226 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:49:02,231 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:49:02,231 - app.chat_controller - INFO - Chat history: [('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?')]
2025-04-26 15:49:02,231 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:49:02,231 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:49:02,233 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:49:02,234 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:49:04,290 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:49:04,290 - app.db - INFO - Inserting application logs.
2025-04-26 15:49:04,291 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:49:04,294 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:49:04,295 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mnh phi thc hin mt nn tng.', 'chat_history': [('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'cng nh mt trong nhng th nht.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?')], 'context': [], 'answer': 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'}
2025-04-26 15:50:19,242 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mnh phi thc hin mt nn tng., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:50:19,242 - app.db - INFO - Getting chat history.
2025-04-26 15:50:19,243 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:50:19,247 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:50:19,248 - app.chat_controller - INFO - Chat history: [('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?')]
2025-04-26 15:50:19,248 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:50:19,248 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:50:19,250 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:50:19,250 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:50:21,273 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:50:21,273 - app.db - INFO - Inserting application logs.
2025-04-26 15:50:21,275 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:50:21,278 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:50:21,279 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mnh phi thc hin mt nn tng.', 'chat_history': [('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?')], 'context': [], 'answer': 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'}
2025-04-26 15:51:45,364 - app.audio_controller - INFO - Speech: chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.
2025-04-26 15:51:45,400 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:51:45,400 - app.db - INFO - Getting chat history.
2025-04-26 15:51:45,402 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:51:45,406 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:51:45,406 - app.chat_controller - INFO - Chat history: [('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?')]
2025-04-26 15:51:45,406 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:51:45,406 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:51:45,408 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:51:45,409 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:51:50,633 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:51:50,634 - app.db - INFO - Inserting application logs.
2025-04-26 15:51:50,635 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:51:50,638 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:51:50,639 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.', 'chat_history': [('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?'), ('human', 'iu ny  c tc phm v tc gi.'), ('ai', 'Answer: Ti xin li, nhng ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'}
2025-04-26 15:52:09,039 - app.audio_controller - INFO - Speech: ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .
2025-04-26 15:52:09,045 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  ., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:52:09,046 - app.db - INFO - Getting chat history.
2025-04-26 15:52:09,047 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:52:09,051 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:52:09,051 - app.chat_controller - INFO - Chat history: [('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?')]
2025-04-26 15:52:09,051 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:52:09,051 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:52:09,052 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:52:09,053 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:52:10,814 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:52:10,814 - app.db - INFO - Inserting application logs.
2025-04-26 15:52:10,816 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:52:10,819 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:52:10,820 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .', 'chat_history': [('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc em nh.'), ('ai', 'Answer: Cho cc em! Ti c th gip g cho cc em khng?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'}
2025-04-26 15:52:21,351 - app.audio_controller - INFO - Speech: c th ti tm ra c.
2025-04-26 15:52:21,363 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: c th ti tm ra c., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:52:21,364 - app.db - INFO - Getting chat history.
2025-04-26 15:52:21,365 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:52:21,369 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:52:21,369 - app.chat_controller - INFO - Chat history: [('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?')]
2025-04-26 15:52:21,369 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:52:21,369 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:52:21,371 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:52:21,371 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:52:24,032 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:52:24,032 - app.db - INFO - Inserting application logs.
2025-04-26 15:52:24,033 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:52:24,036 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:52:24,037 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'c th ti tm ra c.', 'chat_history': [('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'}
2025-04-26 15:56:08,638 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: c th ti tm ra c., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:56:08,638 - app.db - INFO - Getting chat history.
2025-04-26 15:56:08,640 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:56:08,645 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:56:08,646 - app.chat_controller - INFO - Chat history: [('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?')]
2025-04-26 15:56:08,646 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:56:08,646 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:56:08,648 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:56:08,649 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:56:10,440 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:56:10,440 - app.db - INFO - Inserting application logs.
2025-04-26 15:56:10,443 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:56:10,445 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:56:10,446 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'c th ti tm ra c.', 'chat_history': [('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'cc em nh thy th no th thy th no th thy th no.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?')], 'context': [], 'answer': 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'}
2025-04-26 15:57:14,856 - app.audio_controller - INFO - Speech: nhng.
2025-04-26 15:57:14,861 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: nhng., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:57:14,861 - app.db - INFO - Getting chat history.
2025-04-26 15:57:14,862 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:57:14,865 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:57:14,865 - app.chat_controller - INFO - Chat history: [('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?')]
2025-04-26 15:57:14,865 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:57:14,865 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:57:14,867 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:57:14,868 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:57:17,502 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:57:17,502 - app.db - INFO - Inserting application logs.
2025-04-26 15:57:17,504 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:57:17,507 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:57:17,508 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'nhng.', 'chat_history': [('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'iu ny s thy.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?')], 'context': [], 'answer': 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'}
2025-04-26 15:57:31,365 - app.audio_controller - INFO - Speech: cc em thy rng cc em c th thy rng cc em c th thy.
2025-04-26 15:57:31,370 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: cc em thy rng cc em c th thy rng cc em c th thy., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:57:31,371 - app.db - INFO - Getting chat history.
2025-04-26 15:57:31,372 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:57:31,375 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:57:31,375 - app.chat_controller - INFO - Chat history: [('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?')]
2025-04-26 15:57:31,375 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:57:31,375 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:57:31,377 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:57:31,377 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 15:57:33,263 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 15:57:33,263 - app.db - INFO - Inserting application logs.
2025-04-26 15:57:33,264 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:57:33,267 - app.db - INFO - Successfully inserted application logs.
2025-04-26 15:57:33,268 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'cc em thy rng cc em c th thy rng cc em c th thy.', 'chat_history': [('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?')], 'context': [], 'answer': 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'}
2025-04-26 15:59:57,992 - app.audio_controller - INFO - Speech: c.
2025-04-26 15:59:57,997 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: c., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 15:59:57,997 - app.db - INFO - Getting chat history.
2025-04-26 15:59:57,999 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 15:59:58,003 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 15:59:58,003 - app.chat_controller - INFO - Chat history: [('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?')]
2025-04-26 15:59:58,003 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 15:59:58,003 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 15:59:58,004 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 15:59:58,005 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 16:00:02,441 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 16:00:02,441 - app.db - INFO - Inserting application logs.
2025-04-26 16:00:02,442 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 16:00:02,446 - app.db - INFO - Successfully inserted application logs.
2025-04-26 16:00:02,446 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'c.', 'chat_history': [('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'cc trang phc.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin g v cc trang phc?')], 'context': [], 'answer': 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'}
2025-04-26 16:00:08,938 - app.audio_controller - INFO - Speech: m.
2025-04-26 16:00:08,943 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: m., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 16:00:08,943 - app.db - INFO - Getting chat history.
2025-04-26 16:00:08,944 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 16:00:08,949 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 16:00:08,949 - app.chat_controller - INFO - Chat history: [('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?')]
2025-04-26 16:00:08,949 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 16:00:08,949 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 16:00:08,951 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 16:00:08,951 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 16:00:10,844 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 16:00:10,844 - app.db - INFO - Inserting application logs.
2025-04-26 16:00:10,845 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 16:00:10,848 - app.db - INFO - Successfully inserted application logs.
2025-04-26 16:00:10,849 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'm.', 'chat_history': [('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?')], 'context': [], 'answer': 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'}
2025-04-26 16:00:22,532 - app.audio_controller - INFO - Speech: v th nhng th.
2025-04-26 16:00:22,537 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: v th nhng th., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 16:00:22,538 - app.db - INFO - Getting chat history.
2025-04-26 16:00:22,539 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 16:00:22,543 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 16:00:22,543 - app.chat_controller - INFO - Chat history: [('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?')]
2025-04-26 16:00:22,543 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 16:00:22,543 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 16:00:22,546 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 16:00:22,547 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 16:00:24,328 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 16:00:24,328 - app.db - INFO - Inserting application logs.
2025-04-26 16:00:24,329 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 16:00:24,332 - app.db - INFO - Successfully inserted application logs.
2025-04-26 16:00:24,332 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'v th nhng th.', 'chat_history': [('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?')], 'context': [], 'answer': 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'}
2025-04-26 16:07:23,419 - app.audio_controller - INFO - Speech: iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.
2025-04-26 16:07:23,447 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 16:07:23,447 - app.db - INFO - Getting chat history.
2025-04-26 16:07:23,449 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 16:07:23,453 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 16:07:23,454 - app.chat_controller - INFO - Chat history: [('human', 'v th nhng th.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?')]
2025-04-26 16:07:23,454 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 16:07:23,454 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 16:07:23,456 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 16:07:23,456 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 16:07:25,906 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 16:07:25,906 - app.db - INFO - Inserting application logs.
2025-04-26 16:07:25,908 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 16:07:25,911 - app.db - INFO - Successfully inserted application logs.
2025-04-26 16:07:25,911 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.', 'chat_history': [('human', 'v th nhng th.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'mnh phi thc hin mt nn tng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn mun bit thng tin v nn tng no, hoc bn mun to mt nn tng?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? C phi bn ang hi v nhng mn n ngon v ph bin hin nay?'}
2025-04-26 16:07:43,788 - app.audio_controller - INFO - Speech: gip a thnh trng tin.
2025-04-26 16:07:43,794 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: gip a thnh trng tin., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 16:07:43,794 - app.db - INFO - Getting chat history.
2025-04-26 16:07:43,796 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 16:07:43,799 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 16:07:43,799 - app.chat_controller - INFO - Chat history: [('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? C phi bn ang hi v nhng mn n ngon v ph bin hin nay?'), ('human', 'v th nhng th.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?')]
2025-04-26 16:07:43,799 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 16:07:43,799 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 16:07:43,801 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 16:07:43,802 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 16:07:53,678 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 16:07:53,678 - app.db - INFO - Inserting application logs.
2025-04-26 16:07:53,679 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 16:07:53,682 - app.db - INFO - Successfully inserted application logs.
2025-04-26 16:07:53,683 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'gip a thnh trng tin.', 'chat_history': [('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? C phi bn ang hi v nhng mn n ngon v ph bin hin nay?'), ('human', 'v th nhng th.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?')], 'context': [], 'answer': 'Ti rt tic, ti khng c  thng tin  gip bn. Bn c th cung cp thm chi tit v vic bn mun ti gip  anh Thnh Trng Tin nh th no khng? V d, bn mun ti tm kim thng tin v anh y, hay bn mun ti gip anh y gii quyt mt vn  c th?'}
2025-04-26 16:39:49,450 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 16:39:49,451 - app.db - INFO - Getting chat history.
2025-04-26 16:39:49,459 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 16:39:49,467 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 16:39:49,467 - app.chat_controller - INFO - Chat history: [('human', 'gip a thnh trng tin.'), ('ai', 'Ti rt tic, ti khng c  thng tin  gip bn. Bn c th cung cp thm chi tit v vic bn mun ti gip  anh Thnh Trng Tin nh th no khng? V d, bn mun ti tm kim thng tin v anh y, hay bn mun ti gip anh y gii quyt mt vn  c th?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? C phi bn ang hi v nhng mn n ngon v ph bin hin nay?'), ('human', 'v th nhng th.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?')]
2025-04-26 16:39:49,468 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 16:39:49,469 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 16:39:49,472 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 16:39:49,473 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 16:39:49,549 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 16:39:49,549 - app.db - INFO - Getting chat history.
2025-04-26 16:39:49,554 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 16:39:49,558 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 16:39:49,559 - app.chat_controller - INFO - Chat history: [('human', 'gip a thnh trng tin.'), ('ai', 'Ti rt tic, ti khng c  thng tin  gip bn. Bn c th cung cp thm chi tit v vic bn mun ti gip  anh Thnh Trng Tin nh th no khng? V d, bn mun ti tm kim thng tin v anh y, hay bn mun ti gip anh y gii quyt mt vn  c th?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? C phi bn ang hi v nhng mn n ngon v ph bin hin nay?'), ('human', 'v th nhng th.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?')]
2025-04-26 16:39:49,559 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 16:39:49,559 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 16:39:49,563 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 16:39:49,565 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 17:13:54,583 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 17:13:54,583 - app.db - INFO - Inserting application logs.
2025-04-26 17:13:54,584 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 17:13:54,586 - app.db - INFO - Successfully inserted application logs.
2025-04-26 17:13:54,587 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.', 'chat_history': [('human', 'gip a thnh trng tin.'), ('ai', 'Ti rt tic, ti khng c  thng tin  gip bn. Bn c th cung cp thm chi tit v vic bn mun ti gip  anh Thnh Trng Tin nh th no khng? V d, bn mun ti tm kim thng tin v anh y, hay bn mun ti gip anh y gii quyt mt vn  c th?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? C phi bn ang hi v nhng mn n ngon v ph bin hin nay?'), ('human', 'v th nhng th.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?')], 'context': [], 'answer': 'Cu hi ca bn c v nh ang ni v s quan tm ca ngi dn ngy nay n nhng mn n ngon, c bit l cc mn bn c sc vng min. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'}
2025-04-26 17:13:54,651 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 17:13:54,651 - app.db - INFO - Inserting application logs.
2025-04-26 17:13:54,653 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 17:13:54,656 - app.db - INFO - Successfully inserted application logs.
2025-04-26 17:13:54,656 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.', 'chat_history': [('human', 'gip a thnh trng tin.'), ('ai', 'Ti rt tic, ti khng c  thng tin  gip bn. Bn c th cung cp thm chi tit v vic bn mun ti gip  anh Thnh Trng Tin nh th no khng? V d, bn mun ti tm kim thng tin v anh y, hay bn mun ti gip anh y gii quyt mt vn  c th?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? C phi bn ang hi v nhng mn n ngon v ph bin hin nay?'), ('human', 'v th nhng th.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'c th ti tm ra c.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?'), ('human', 'ci g th ti tr trc ri l ngi ni bi tnh vi th thi l tnh hung rt bung qua v t hc v  chng lm mt ci g n v l  .'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'}
2025-04-26 17:23:46,110 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 17:23:46,110 - app.db - INFO - Getting chat history.
2025-04-26 17:23:46,115 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 17:23:46,125 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 17:23:46,125 - app.chat_controller - INFO - Chat history: [('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Cu hi ca bn c v nh ang ni v s quan tm ca ngi dn ngy nay n nhng mn n ngon, c bit l cc mn bn c sc vng min. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'gip a thnh trng tin.'), ('ai', 'Ti rt tic, ti khng c  thng tin  gip bn. Bn c th cung cp thm chi tit v vic bn mun ti gip  anh Thnh Trng Tin nh th no khng? V d, bn mun ti tm kim thng tin v anh y, hay bn mun ti gip anh y gii quyt mt vn  c th?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? C phi bn ang hi v nhng mn n ngon v ph bin hin nay?'), ('human', 'v th nhng th.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?')]
2025-04-26 17:23:46,126 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 17:23:46,126 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 17:23:46,131 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 17:23:46,132 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 17:23:46,223 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 17:23:46,223 - app.db - INFO - Getting chat history.
2025-04-26 17:23:46,225 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 17:23:46,230 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 17:23:46,230 - app.chat_controller - INFO - Chat history: [('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Cu hi ca bn c v nh ang ni v s quan tm ca ngi dn ngy nay n nhng mn n ngon, c bit l cc mn bn c sc vng min. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'gip a thnh trng tin.'), ('ai', 'Ti rt tic, ti khng c  thng tin  gip bn. Bn c th cung cp thm chi tit v vic bn mun ti gip  anh Thnh Trng Tin nh th no khng? V d, bn mun ti tm kim thng tin v anh y, hay bn mun ti gip anh y gii quyt mt vn  c th?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? C phi bn ang hi v nhng mn n ngon v ph bin hin nay?'), ('human', 'v th nhng th.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?')]
2025-04-26 17:23:46,230 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 17:23:46,230 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 17:23:46,232 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 17:23:46,233 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 17:46:27,111 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 17:46:27,111 - app.db - INFO - Inserting application logs.
2025-04-26 17:46:27,113 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 17:46:27,115 - app.db - INFO - Successfully inserted application logs.
2025-04-26 17:46:27,116 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.', 'chat_history': [('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Cu hi ca bn c v nh ang ni v s quan tm ca ngi dn ngy nay n nhng mn n ngon, c bit l cc mn bn c sc vng min. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'gip a thnh trng tin.'), ('ai', 'Ti rt tic, ti khng c  thng tin  gip bn. Bn c th cung cp thm chi tit v vic bn mun ti gip  anh Thnh Trng Tin nh th no khng? V d, bn mun ti tm kim thng tin v anh y, hay bn mun ti gip anh y gii quyt mt vn  c th?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? C phi bn ang hi v nhng mn n ngon v ph bin hin nay?'), ('human', 'v th nhng th.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?')], 'context': [], 'answer': 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'}
2025-04-26 17:46:31,866 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 17:46:31,866 - app.db - INFO - Inserting application logs.
2025-04-26 17:46:31,867 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 17:46:31,870 - app.db - INFO - Successfully inserted application logs.
2025-04-26 17:46:31,870 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.', 'chat_history': [('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Cu hi ca bn c v nh ang ni v s quan tm ca ngi dn ngy nay n nhng mn n ngon, c bit l cc mn bn c sc vng min. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'gip a thnh trng tin.'), ('ai', 'Ti rt tic, ti khng c  thng tin  gip bn. Bn c th cung cp thm chi tit v vic bn mun ti gip  anh Thnh Trng Tin nh th no khng? V d, bn mun ti tm kim thng tin v anh y, hay bn mun ti gip anh y gii quyt mt vn  c th?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? C phi bn ang hi v nhng mn n ngon v ph bin hin nay?'), ('human', 'v th nhng th.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'nhng.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'c th ti tm ra c.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? Bn ang mun tm kim iu g?')], 'context': [], 'answer': 'Answer: Cu hi ny ni v s quan tm ca ngi dn n cc mn n ngon, c bit l cc mn bn c sc vng min. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'}
2025-04-26 18:12:56,675 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 18:12:56,675 - app.db - INFO - Getting chat history.
2025-04-26 18:12:56,677 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 18:12:56,682 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 18:12:56,682 - app.chat_controller - INFO - Chat history: [('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Answer: Cu hi ny ni v s quan tm ca ngi dn n cc mn n ngon, c bit l cc mn bn c sc vng min. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Cu hi ca bn c v nh ang ni v s quan tm ca ngi dn ngy nay n nhng mn n ngon, c bit l cc mn bn c sc vng min. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'gip a thnh trng tin.'), ('ai', 'Ti rt tic, ti khng c  thng tin  gip bn. Bn c th cung cp thm chi tit v vic bn mun ti gip  anh Thnh Trng Tin nh th no khng? V d, bn mun ti tm kim thng tin v anh y, hay bn mun ti gip anh y gii quyt mt vn  c th?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? C phi bn ang hi v nhng mn n ngon v ph bin hin nay?'), ('human', 'v th nhng th.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?')]
2025-04-26 18:12:56,682 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 18:12:56,682 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 18:12:56,684 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 18:12:56,685 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 20:21:43,926 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 20:21:43,926 - app.db - INFO - Inserting application logs.
2025-04-26 20:21:43,927 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 20:21:43,935 - app.db - INFO - Successfully inserted application logs.
2025-04-26 20:21:43,936 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.', 'chat_history': [('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Answer: Cu hi ny ni v s quan tm ca ngi dn n cc mn n ngon, c bit l cc mn bn c sc vng min. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Cu hi ca bn c v nh ang ni v s quan tm ca ngi dn ngy nay n nhng mn n ngon, c bit l cc mn bn c sc vng min. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'gip a thnh trng tin.'), ('ai', 'Ti rt tic, ti khng c  thng tin  gip bn. Bn c th cung cp thm chi tit v vic bn mun ti gip  anh Thnh Trng Tin nh th no khng? V d, bn mun ti tm kim thng tin v anh y, hay bn mun ti gip anh y gii quyt mt vn  c th?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? C phi bn ang hi v nhng mn n ngon v ph bin hin nay?'), ('human', 'v th nhng th.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'cc em thy rng cc em c th thy rng cc em c th thy.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?')], 'context': [], 'answer': 'Answer: Cu hi ny  cp n s quan tm ca ngi dn i vi cc mn n ngon, c bit l cc mn bn c sc vng min hin nay. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'}
2025-04-26 20:22:15,704 - app.audio_controller - INFO - Speech: mt ngi n ng trong on trng ny.
2025-04-26 20:22:15,714 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt ngi n ng trong on trng ny., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 20:22:15,714 - app.db - INFO - Getting chat history.
2025-04-26 20:22:15,715 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 20:22:15,722 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 20:22:15,722 - app.chat_controller - INFO - Chat history: [('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Answer: Cu hi ny  cp n s quan tm ca ngi dn i vi cc mn n ngon, c bit l cc mn bn c sc vng min hin nay. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Answer: Cu hi ny ni v s quan tm ca ngi dn n cc mn n ngon, c bit l cc mn bn c sc vng min. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Cu hi ca bn c v nh ang ni v s quan tm ca ngi dn ngy nay n nhng mn n ngon, c bit l cc mn bn c sc vng min. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'gip a thnh trng tin.'), ('ai', 'Ti rt tic, ti khng c  thng tin  gip bn. Bn c th cung cp thm chi tit v vic bn mun ti gip  anh Thnh Trng Tin nh th no khng? V d, bn mun ti tm kim thng tin v anh y, hay bn mun ti gip anh y gii quyt mt vn  c th?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? C phi bn ang hi v nhng mn n ngon v ph bin hin nay?'), ('human', 'v th nhng th.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?')]
2025-04-26 20:22:15,722 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 20:22:15,722 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 20:22:15,724 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7319f03ddc70> search_kwargs={'k': 3}
2025-04-26 20:22:15,725 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 20:22:17,697 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 20:22:17,697 - app.db - INFO - Inserting application logs.
2025-04-26 20:22:17,698 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 20:22:17,702 - app.db - INFO - Successfully inserted application logs.
2025-04-26 20:22:17,702 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mt ngi n ng trong on trng ny.', 'chat_history': [('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Answer: Cu hi ny  cp n s quan tm ca ngi dn i vi cc mn n ngon, c bit l cc mn bn c sc vng min hin nay. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Answer: Cu hi ny ni v s quan tm ca ngi dn n cc mn n ngon, c bit l cc mn bn c sc vng min. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Cu hi ca bn c v nh ang ni v s quan tm ca ngi dn ngy nay n nhng mn n ngon, c bit l cc mn bn c sc vng min. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'gip a thnh trng tin.'), ('ai', 'Ti rt tic, ti khng c  thng tin  gip bn. Bn c th cung cp thm chi tit v vic bn mun ti gip  anh Thnh Trng Tin nh th no khng? V d, bn mun ti tm kim thng tin v anh y, hay bn mun ti gip anh y gii quyt mt vn  c th?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? C phi bn ang hi v nhng mn n ngon v ph bin hin nay?'), ('human', 'v th nhng th.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?'), ('human', 'c.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?')], 'context': [], 'answer': 'Ti xin li, nhng cu hi ca bn khng r rng. Bn c th vui lng cung cp thm thng tin hoc din t li cu hi ca bn khng? "on trng" l mt cm t c nhiu ngha, nn cn thm ng cnh  hiu r  bn.'}
2025-04-26 21:25:58,297 - app.audio_controller - INFO - Speech: cc em nh.
2025-04-26 21:25:58,329 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: cc em nh., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 21:25:58,330 - app.db - INFO - Getting chat history.
2025-04-26 21:25:58,332 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:25:58,337 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 21:25:58,337 - app.chat_controller - INFO - Chat history: [('human', 'mt ngi n ng trong on trng ny.'), ('ai', 'Ti xin li, nhng cu hi ca bn khng r rng. Bn c th vui lng cung cp thm thng tin hoc din t li cu hi ca bn khng? "on trng" l mt cm t c nhiu ngha, nn cn thm ng cnh  hiu r  bn.'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Answer: Cu hi ny  cp n s quan tm ca ngi dn i vi cc mn n ngon, c bit l cc mn bn c sc vng min hin nay. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Answer: Cu hi ny ni v s quan tm ca ngi dn n cc mn n ngon, c bit l cc mn bn c sc vng min. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Cu hi ca bn c v nh ang ni v s quan tm ca ngi dn ngy nay n nhng mn n ngon, c bit l cc mn bn c sc vng min. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'gip a thnh trng tin.'), ('ai', 'Ti rt tic, ti khng c  thng tin  gip bn. Bn c th cung cp thm chi tit v vic bn mun ti gip  anh Thnh Trng Tin nh th no khng? V d, bn mun ti tm kim thng tin v anh y, hay bn mun ti gip anh y gii quyt mt vn  c th?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? C phi bn ang hi v nhng mn n ngon v ph bin hin nay?'), ('human', 'v th nhng th.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?')]
2025-04-26 21:25:58,337 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 21:25:58,337 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 21:25:58,341 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x71440307ad50> search_kwargs={'k': 3}
2025-04-26 21:25:58,347 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 21:26:01,222 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 21:26:01,222 - app.db - INFO - Inserting application logs.
2025-04-26 21:26:01,223 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:26:01,226 - app.db - INFO - Successfully inserted application logs.
2025-04-26 21:26:01,227 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'cc em nh.', 'chat_history': [('human', 'mt ngi n ng trong on trng ny.'), ('ai', 'Ti xin li, nhng cu hi ca bn khng r rng. Bn c th vui lng cung cp thm thng tin hoc din t li cu hi ca bn khng? "on trng" l mt cm t c nhiu ngha, nn cn thm ng cnh  hiu r  bn.'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Answer: Cu hi ny  cp n s quan tm ca ngi dn i vi cc mn n ngon, c bit l cc mn bn c sc vng min hin nay. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Answer: Cu hi ny ni v s quan tm ca ngi dn n cc mn n ngon, c bit l cc mn bn c sc vng min. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'chc ri th tip thit by th tng lu lng lo  lc y c tm hu anh trng cy lm lun cha qua qu s lun d vng th l lc m i ra l th cht con tun tut tut qua qu tri.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Cu hi ca bn c v nh ang ni v s quan tm ca ngi dn ngy nay n nhng mn n ngon, c bit l cc mn bn c sc vng min. Ngi dn mong mun c thng thc nhng mn n ngon v cht lng.'), ('human', 'gip a thnh trng tin.'), ('ai', 'Ti rt tic, ti khng c  thng tin  gip bn. Bn c th cung cp thm chi tit v vic bn mun ti gip  anh Thnh Trng Tin nh th no khng? V d, bn mun ti tm kim thng tin v anh y, hay bn mun ti gip anh y gii quyt mt vn  c th?'), ('human', 'iu ny l mt trong nhng trn tm ca mt ngi dn m trong ngy nay c nhng gi sng vi cc mn bn bn n ngon sc min ng honh la ngon nhng nhng ngi dn mong mun n nhng mn n ngon ngon trong nhng mn n n n ngon ngon ngon.'), ('ai', 'Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng? C phi bn ang hi v nhng mn n ngon v ph bin hin nay?'), ('human', 'v th nhng th.'), ('ai', 'Answer: Ti xin li, ti khng hiu cu hi ca bn. Bn c th vui lng din t li cu hi c khng?'), ('human', 'm.'), ('ai', 'Answer: Cu hi ca bn cha r rng. Bn c th vui lng cung cp thm chi tit hoc t cu hi c th hn khng?')], 'context': [], 'answer': 'Ti l mt m hnh ngn ng ln, ti khng phi tr con.'}
2025-04-26 21:28:02,755 - app.audio_controller - INFO - Speech: c.
2025-04-26 21:28:02,762 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: c., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 21:28:02,762 - app.db - INFO - Getting chat history.
2025-04-26 21:28:02,763 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:28:02,769 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-26 21:28:02,769 - app.chat_controller - INFO - Chat history: []
2025-04-26 21:28:02,769 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 21:28:02,769 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 21:28:02,772 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x71440307ad50> search_kwargs={'k': 3}
2025-04-26 21:28:02,772 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 21:28:03,944 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 21:28:03,944 - app.db - INFO - Inserting application logs.
2025-04-26 21:28:03,945 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:28:03,948 - app.db - INFO - Successfully inserted application logs.
2025-04-26 21:28:03,948 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'c.', 'chat_history': [], 'context': [], 'answer': 'Ti rt vui c gip bn. Bn c cu hi no khng?'}
2025-04-26 21:30:15,992 - app.audio_controller - INFO - Speech:  th tr.
2025-04-26 21:30:15,999 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query:  th tr., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 21:30:15,999 - app.db - INFO - Getting chat history.
2025-04-26 21:30:16,001 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:30:16,016 - app.db - INFO - Successfully retrieved 1 conversation turns
2025-04-26 21:30:16,017 - app.chat_controller - INFO - Chat history: [('human', 'c.'), ('ai', 'Ti rt vui c gip bn. Bn c cu hi no khng?')]
2025-04-26 21:30:16,017 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 21:30:16,017 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 21:30:16,019 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x71440307ad50> search_kwargs={'k': 3}
2025-04-26 21:30:16,019 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 21:30:18,722 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 21:30:18,722 - app.db - INFO - Inserting application logs.
2025-04-26 21:30:18,724 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:30:18,727 - app.db - INFO - Successfully inserted application logs.
2025-04-26 21:30:18,727 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': ' th tr.', 'chat_history': [('human', 'c.'), ('ai', 'Ti rt vui c gip bn. Bn c cu hi no khng?')], 'context': [], 'answer': 'Ti xin li, ti khng hiu bn mun ni g. Bn c th vui lng din t li cu hi ca bn c khng?'}
2025-04-26 21:34:11,592 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: cc em nh., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 21:34:11,592 - app.db - INFO - Getting chat history.
2025-04-26 21:34:11,595 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:34:11,598 - app.db - INFO - Successfully retrieved 2 conversation turns
2025-04-26 21:34:11,599 - app.chat_controller - INFO - Chat history: [('human', ' th tr.'), ('ai', 'Ti xin li, ti khng hiu bn mun ni g. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'c.'), ('ai', 'Ti rt vui c gip bn. Bn c cu hi no khng?')]
2025-04-26 21:34:11,599 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 21:34:11,599 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 21:34:11,602 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7caf5e05eba0> search_kwargs={'k': 3}
2025-04-26 21:34:11,608 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 21:34:14,255 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 21:34:14,256 - app.db - INFO - Inserting application logs.
2025-04-26 21:34:14,258 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:34:14,261 - app.db - INFO - Successfully inserted application logs.
2025-04-26 21:34:14,261 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'cc em nh.', 'chat_history': [('human', ' th tr.'), ('ai', 'Ti xin li, ti khng hiu bn mun ni g. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'c.'), ('ai', 'Ti rt vui c gip bn. Bn c cu hi no khng?')], 'context': [], 'answer': 'Ti hiu ri. Hy cho ti bit bn cn g.'}
2025-04-26 21:34:23,454 - app.audio_controller - INFO - Speech: h.
2025-04-26 21:34:23,460 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: h., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 21:34:23,460 - app.db - INFO - Getting chat history.
2025-04-26 21:34:23,462 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:34:23,466 - app.db - INFO - Successfully retrieved 3 conversation turns
2025-04-26 21:34:23,466 - app.chat_controller - INFO - Chat history: [('human', 'cc em nh.'), ('ai', 'Ti hiu ri. Hy cho ti bit bn cn g.'), ('human', ' th tr.'), ('ai', 'Ti xin li, ti khng hiu bn mun ni g. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'c.'), ('ai', 'Ti rt vui c gip bn. Bn c cu hi no khng?')]
2025-04-26 21:34:23,466 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 21:34:23,466 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 21:34:23,469 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7caf5e05eba0> search_kwargs={'k': 3}
2025-04-26 21:34:23,470 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 21:34:25,980 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 21:34:25,980 - app.db - INFO - Inserting application logs.
2025-04-26 21:34:25,981 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:34:25,984 - app.db - INFO - Successfully inserted application logs.
2025-04-26 21:34:25,985 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'h.', 'chat_history': [('human', 'cc em nh.'), ('ai', 'Ti hiu ri. Hy cho ti bit bn cn g.'), ('human', ' th tr.'), ('ai', 'Ti xin li, ti khng hiu bn mun ni g. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'c.'), ('ai', 'Ti rt vui c gip bn. Bn c cu hi no khng?')], 'context': [], 'answer': 'Ti rt tic, ti khng hiu. Bn c th vui lng th din t li cu hi ca bn khng?'}
2025-04-26 21:36:21,144 - app.audio_controller - INFO - Speech: v n giang tuyt ng t thm nh l ng thnh my a.
2025-04-26 21:36:21,152 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: v n giang tuyt ng t thm nh l ng thnh my a., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 21:36:21,152 - app.db - INFO - Getting chat history.
2025-04-26 21:36:21,153 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:36:21,158 - app.db - INFO - Successfully retrieved 4 conversation turns
2025-04-26 21:36:21,158 - app.chat_controller - INFO - Chat history: [('human', 'h.'), ('ai', 'Ti rt tic, ti khng hiu. Bn c th vui lng th din t li cu hi ca bn khng?'), ('human', 'cc em nh.'), ('ai', 'Ti hiu ri. Hy cho ti bit bn cn g.'), ('human', ' th tr.'), ('ai', 'Ti xin li, ti khng hiu bn mun ni g. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'c.'), ('ai', 'Ti rt vui c gip bn. Bn c cu hi no khng?')]
2025-04-26 21:36:21,158 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 21:36:21,158 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 21:36:21,161 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7caf5e05eba0> search_kwargs={'k': 3}
2025-04-26 21:36:21,162 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 21:36:23,788 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 21:36:23,789 - app.db - INFO - Inserting application logs.
2025-04-26 21:36:23,790 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:36:23,793 - app.db - INFO - Successfully inserted application logs.
2025-04-26 21:36:23,794 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'v n giang tuyt ng t thm nh l ng thnh my a.', 'chat_history': [('human', 'h.'), ('ai', 'Ti rt tic, ti khng hiu. Bn c th vui lng th din t li cu hi ca bn khng?'), ('human', 'cc em nh.'), ('ai', 'Ti hiu ri. Hy cho ti bit bn cn g.'), ('human', ' th tr.'), ('ai', 'Ti xin li, ti khng hiu bn mun ni g. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'c.'), ('ai', 'Ti rt vui c gip bn. Bn c cu hi no khng?')], 'context': [], 'answer': 'Ti xin li, ti khng c  thng tin  tr li cu hi ny.'}
2025-04-26 21:37:11,664 - app.audio_controller - INFO - Speech: ng tin to tn dng.
2025-04-26 21:37:11,669 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: ng tin to tn dng., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 21:37:11,669 - app.db - INFO - Getting chat history.
2025-04-26 21:37:11,671 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:37:11,675 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-04-26 21:37:11,675 - app.chat_controller - INFO - Chat history: [('human', 'v n giang tuyt ng t thm nh l ng thnh my a.'), ('ai', 'Ti xin li, ti khng c  thng tin  tr li cu hi ny.'), ('human', 'h.'), ('ai', 'Ti rt tic, ti khng hiu. Bn c th vui lng th din t li cu hi ca bn khng?'), ('human', 'cc em nh.'), ('ai', 'Ti hiu ri. Hy cho ti bit bn cn g.'), ('human', ' th tr.'), ('ai', 'Ti xin li, ti khng hiu bn mun ni g. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'c.'), ('ai', 'Ti rt vui c gip bn. Bn c cu hi no khng?')]
2025-04-26 21:37:11,675 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash
2025-04-26 21:37:11,675 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 21:37:11,677 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x7caf5e05eba0> search_kwargs={'k': 3}
2025-04-26 21:37:11,677 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 21:37:13,318 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 21:37:13,318 - app.db - INFO - Inserting application logs.
2025-04-26 21:37:13,320 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:37:13,322 - app.db - INFO - Successfully inserted application logs.
2025-04-26 21:37:13,323 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'ng tin to tn dng.', 'chat_history': [('human', 'v n giang tuyt ng t thm nh l ng thnh my a.'), ('ai', 'Ti xin li, ti khng c  thng tin  tr li cu hi ny.'), ('human', 'h.'), ('ai', 'Ti rt tic, ti khng hiu. Bn c th vui lng th din t li cu hi ca bn khng?'), ('human', 'cc em nh.'), ('ai', 'Ti hiu ri. Hy cho ti bit bn cn g.'), ('human', ' th tr.'), ('ai', 'Ti xin li, ti khng hiu bn mun ni g. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'c.'), ('ai', 'Ti rt vui c gip bn. Bn c cu hi no khng?')], 'context': [], 'answer': 'Ti xin li, ti khng c thng tin v ch  ny.'}
2025-04-26 21:38:05,903 - app.audio_controller - INFO - Speech: v thng ti cng phi.
2025-04-26 21:38:05,915 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: v thng ti cng phi., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 21:38:05,915 - app.db - INFO - Getting chat history.
2025-04-26 21:38:05,917 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:38:05,921 - app.db - INFO - Successfully retrieved 6 conversation turns
2025-04-26 21:38:05,922 - app.chat_controller - INFO - Chat history: [('human', 'ng tin to tn dng.'), ('ai', 'Ti xin li, ti khng c thng tin v ch  ny.'), ('human', 'v n giang tuyt ng t thm nh l ng thnh my a.'), ('ai', 'Ti xin li, ti khng c  thng tin  tr li cu hi ny.'), ('human', 'h.'), ('ai', 'Ti rt tic, ti khng hiu. Bn c th vui lng th din t li cu hi ca bn khng?'), ('human', 'cc em nh.'), ('ai', 'Ti hiu ri. Hy cho ti bit bn cn g.'), ('human', ' th tr.'), ('ai', 'Ti xin li, ti khng hiu bn mun ni g. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'c.'), ('ai', 'Ti rt vui c gip bn. Bn c cu hi no khng?')]
2025-04-26 21:38:05,922 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user input : None
2025-04-26 21:38:05,922 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 21:38:05,924 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x78cbc8406930> search_kwargs={'k': 3}
2025-04-26 21:38:05,929 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 21:38:08,975 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 21:38:08,975 - app.db - INFO - Inserting application logs.
2025-04-26 21:38:08,976 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:38:08,979 - app.db - INFO - Successfully inserted application logs.
2025-04-26 21:38:08,980 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'v thng ti cng phi.', 'chat_history': [('human', 'ng tin to tn dng.'), ('ai', 'Ti xin li, ti khng c thng tin v ch  ny.'), ('human', 'v n giang tuyt ng t thm nh l ng thnh my a.'), ('ai', 'Ti xin li, ti khng c  thng tin  tr li cu hi ny.'), ('human', 'h.'), ('ai', 'Ti rt tic, ti khng hiu. Bn c th vui lng th din t li cu hi ca bn khng?'), ('human', 'cc em nh.'), ('ai', 'Ti hiu ri. Hy cho ti bit bn cn g.'), ('human', ' th tr.'), ('ai', 'Ti xin li, ti khng hiu bn mun ni g. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'c.'), ('ai', 'Ti rt vui c gip bn. Bn c cu hi no khng?')], 'context': [], 'answer': 'Ti rt tic, ti khng hiu  ca bn. Bn c th din t li cu hi c khng?'}
2025-04-26 21:40:10,328 - app.audio_controller - INFO - Speech: i.
2025-04-26 21:40:10,339 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: i., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 21:40:10,339 - app.db - INFO - Getting chat history.
2025-04-26 21:40:10,341 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:40:10,346 - app.db - INFO - Successfully retrieved 7 conversation turns
2025-04-26 21:40:10,346 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user input : None
2025-04-26 21:40:10,346 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 21:40:10,349 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x76ee2a7f9fd0> search_kwargs={'k': 3}
2025-04-26 21:40:10,354 - app.langchain - INFO - Successfully created RAG chain with model: gemini-2.0-flash
2025-04-26 21:40:13,434 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 21:40:13,434 - app.db - INFO - Inserting application logs.
2025-04-26 21:40:13,436 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:40:13,439 - app.db - INFO - Successfully inserted application logs.
2025-04-26 21:40:13,440 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'i.', 'chat_history': [('human', 'v thng ti cng phi.'), ('ai', 'Ti rt tic, ti khng hiu  ca bn. Bn c th din t li cu hi c khng?'), ('human', 'ng tin to tn dng.'), ('ai', 'Ti xin li, ti khng c thng tin v ch  ny.'), ('human', 'v n giang tuyt ng t thm nh l ng thnh my a.'), ('ai', 'Ti xin li, ti khng c  thng tin  tr li cu hi ny.'), ('human', 'h.'), ('ai', 'Ti rt tic, ti khng hiu. Bn c th vui lng th din t li cu hi ca bn khng?'), ('human', 'cc em nh.'), ('ai', 'Ti hiu ri. Hy cho ti bit bn cn g.'), ('human', ' th tr.'), ('ai', 'Ti xin li, ti khng hiu bn mun ni g. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'c.'), ('ai', 'Ti rt vui c gip bn. Bn c cu hi no khng?')], 'context': [], 'answer': 'Ti rt tic, ti khng hiu bn mun ni g.'}
2025-04-26 21:42:21,915 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: mt ngi n ng trong on trng ny., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 21:42:21,915 - app.db - INFO - Getting chat history.
2025-04-26 21:42:21,917 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:42:21,922 - app.db - INFO - Successfully retrieved 8 conversation turns
2025-04-26 21:42:21,922 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user input : mt ngi n ng trong on trng ny.
2025-04-26 21:42:21,922 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 21:42:21,926 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x75e96276e3f0> search_kwargs={'k': 3}
2025-04-26 21:42:22,035 - app.intent_detector - INFO - Detected intent: other for input: mt ngi n ng trong on trng ny.
2025-04-26 21:42:22,035 - app.langchain - INFO - Fall back prompt
2025-04-26 21:42:22,035 - app.langchain - INFO - Detected intent: other
2025-04-26 21:42:25,831 - app.audio_controller - INFO - Speech: cc em nh.
2025-04-26 21:42:25,835 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: cc em nh., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 21:42:25,835 - app.db - INFO - Getting chat history.
2025-04-26 21:42:25,837 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:42:25,841 - app.db - INFO - Successfully retrieved 8 conversation turns
2025-04-26 21:42:25,842 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user input : cc em nh.
2025-04-26 21:42:25,842 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 21:42:25,844 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x75e96276e3f0> search_kwargs={'k': 3}
2025-04-26 21:42:25,946 - app.intent_detector - INFO - Detected intent: other for input: cc em nh.
2025-04-26 21:42:25,946 - app.langchain - INFO - Fall back prompt
2025-04-26 21:42:25,946 - app.langchain - INFO - Detected intent: other
2025-04-26 21:43:31,871 - app.audio_controller - INFO - Speech: n.
2025-04-26 21:43:31,875 - app.chat_controller - INFO - Session ID: frontend-simple-session, User Query: n., Model: GenerationModelName.GEMINI_2_FLASH
2025-04-26 21:43:31,875 - app.db - INFO - Getting chat history.
2025-04-26 21:43:31,876 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:43:31,880 - app.db - INFO - Successfully retrieved 8 conversation turns
2025-04-26 21:43:31,880 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user input : n.
2025-04-26 21:43:31,880 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 21:43:31,881 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x75e96276e3f0> search_kwargs={'k': 3}
2025-04-26 21:43:31,937 - app.intent_detector - INFO - Detected intent: other for input: n.
2025-04-26 21:43:31,937 - app.langchain - INFO - Fall back prompt
2025-04-26 21:43:31,937 - app.langchain - INFO - Detected intent: other
2025-04-26 21:44:01,260 - app.audio_controller - INFO - Speech: chng ta s thy.
2025-04-26 21:44:01,272 - app.chat_controller - INFO - User Query: chng ta s thy., 
2025-04-26 21:44:01,272 - app.db - INFO - Getting chat history.
2025-04-26 21:44:01,274 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:44:01,280 - app.db - INFO - Successfully retrieved 8 conversation turns
2025-04-26 21:44:01,280 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user input : chng ta s thy.
2025-04-26 21:44:01,280 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 21:44:01,282 - app.langchain - INFO - Cached_retriever: tags=['Qdrant', 'GoogleGenerativeAIEmbeddings'] vectorstore=<langchain_qdrant.vectorstores.Qdrant object at 0x74e814091220> search_kwargs={'k': 3}
2025-04-26 21:44:01,366 - app.intent_detector - INFO - Detected intent: smalltalk for input: chng ta s thy.
2025-04-26 21:44:01,366 - app.langchain - INFO - Small talk prompt
2025-04-26 21:44:01,366 - app.langchain - INFO - Detected intent: smalltalk
2025-04-26 21:54:09,053 - app.audio_controller - INFO - Speech: h.
2025-04-26 21:54:09,069 - app.chat_controller - INFO - User Query: h., 
2025-04-26 21:54:09,069 - app.db - INFO - Getting chat history.
2025-04-26 21:54:09,071 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:54:09,075 - app.db - INFO - Successfully retrieved 8 conversation turns
2025-04-26 21:54:09,075 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: h.
2025-04-26 21:54:09,075 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 21:54:09,146 - app.intent_detector - INFO - Detected intent: smalltalk for input: h.
2025-04-26 21:54:09,146 - app.langchain - INFO - Selected small talk prompt
2025-04-26 21:54:09,147 - app.langchain - INFO - Detected intent: smalltalk | Requires context: False
2025-04-26 21:54:09,147 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-26 21:54:10,126 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 21:56:14,115 - app.audio_controller - INFO - Speech: ch mt chng t l c mt s th t th no cng c th.
2025-04-26 21:56:14,128 - app.chat_controller - INFO - User Query: ch mt chng t l c mt s th t th no cng c th., 
2025-04-26 21:56:14,128 - app.db - INFO - Getting chat history.
2025-04-26 21:56:14,131 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:56:14,134 - app.db - INFO - Successfully retrieved 8 conversation turns
2025-04-26 21:56:14,135 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: ch mt chng t l c mt s th t th no cng c th.
2025-04-26 21:56:14,135 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 21:56:14,249 - app.intent_detector - INFO - Detected intent: greeting for input: ch mt chng t l c mt s th t th no cng c th.
2025-04-26 21:56:14,250 - app.langchain - INFO - Selected greeting prompt
2025-04-26 21:56:14,250 - app.langchain - INFO - Detected intent: greeting | Requires context: False
2025-04-26 21:56:14,250 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-26 21:56:16,154 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 21:56:16,154 - app.db - INFO - Inserting application logs.
2025-04-26 21:56:16,155 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:56:16,159 - app.db - INFO - Successfully inserted application logs.
2025-04-26 21:56:16,159 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'ch mt chng t l c mt s th t th no cng c th.', 'chat_history': [('human', 'i.'), ('ai', 'Ti rt tic, ti khng hiu bn mun ni g.'), ('human', 'v thng ti cng phi.'), ('ai', 'Ti rt tic, ti khng hiu  ca bn. Bn c th din t li cu hi c khng?'), ('human', 'ng tin to tn dng.'), ('ai', 'Ti xin li, ti khng c thng tin v ch  ny.'), ('human', 'v n giang tuyt ng t thm nh l ng thnh my a.'), ('ai', 'Ti xin li, ti khng c  thng tin  tr li cu hi ny.'), ('human', 'h.'), ('ai', 'Ti rt tic, ti khng hiu. Bn c th vui lng th din t li cu hi ca bn khng?'), ('human', 'cc em nh.'), ('ai', 'Ti hiu ri. Hy cho ti bit bn cn g.'), ('human', ' th tr.'), ('ai', 'Ti xin li, ti khng hiu bn mun ni g. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'c.'), ('ai', 'Ti rt vui c gip bn. Bn c cu hi no khng?')], 'text': 'Cho bn! Rt vui c tr chuyn vi bn. Bn c bt k cu hi no v trang im hoc chm sc da cn mnh gip  khng? '}
2025-04-26 21:58:11,533 - app.audio_controller - INFO - Speech: i thi.
2025-04-26 21:58:11,550 - app.chat_controller - INFO - User Query: i thi., 
2025-04-26 21:58:11,550 - app.db - INFO - Getting chat history.
2025-04-26 21:58:11,552 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:58:11,556 - app.db - INFO - Successfully retrieved 9 conversation turns
2025-04-26 21:58:11,556 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: i thi.
2025-04-26 21:58:11,556 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 21:58:11,643 - app.intent_detector - INFO - Detected intent: thank_you for input: i thi.
2025-04-26 21:58:11,643 - app.langchain - INFO - Selected thank you prompt
2025-04-26 21:58:11,643 - app.langchain - INFO - Detected intent: thank_you | Requires context: False
2025-04-26 21:58:11,644 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-26 21:58:12,620 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 21:58:12,620 - app.db - INFO - Inserting application logs.
2025-04-26 21:58:12,622 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:58:12,625 - app.db - INFO - Successfully inserted application logs.
2025-04-26 21:58:12,626 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'i thi.', 'chat_history': [('human', 'ch mt chng t l c mt s th t th no cng c th.'), ('ai', ''), ('human', 'i.'), ('ai', 'Ti rt tic, ti khng hiu bn mun ni g.'), ('human', 'v thng ti cng phi.'), ('ai', 'Ti rt tic, ti khng hiu  ca bn. Bn c th din t li cu hi c khng?'), ('human', 'ng tin to tn dng.'), ('ai', 'Ti xin li, ti khng c thng tin v ch  ny.'), ('human', 'v n giang tuyt ng t thm nh l ng thnh my a.'), ('ai', 'Ti xin li, ti khng c  thng tin  tr li cu hi ny.'), ('human', 'h.'), ('ai', 'Ti rt tic, ti khng hiu. Bn c th vui lng th din t li cu hi ca bn khng?'), ('human', 'cc em nh.'), ('ai', 'Ti hiu ri. Hy cho ti bit bn cn g.'), ('human', ' th tr.'), ('ai', 'Ti xin li, ti khng hiu bn mun ni g. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'c.'), ('ai', 'Ti rt vui c gip bn. Bn c cu hi no khng?')], 'text': 'Chc bn thi tt nha! C gng ht sc mnh v t tin vo bn thn nh. Nu cn g h tr thm, c hi mnh nha! '}
2025-04-26 21:58:37,240 - app.audio_controller - INFO - Speech: cc em nh.
2025-04-26 21:58:37,245 - app.chat_controller - INFO - User Query: cc em nh., 
2025-04-26 21:58:37,245 - app.db - INFO - Getting chat history.
2025-04-26 21:58:37,246 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:58:37,251 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 21:58:37,251 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: cc em nh.
2025-04-26 21:58:37,251 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 21:58:37,327 - app.intent_detector - INFO - Detected intent: thank_you for input: cc em nh.
2025-04-26 21:58:37,327 - app.langchain - INFO - Selected thank you prompt
2025-04-26 21:58:37,327 - app.langchain - INFO - Detected intent: thank_you | Requires context: False
2025-04-26 21:58:37,327 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-26 21:58:38,094 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 21:58:38,094 - app.db - INFO - Inserting application logs.
2025-04-26 21:58:38,095 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 21:58:38,099 - app.db - INFO - Successfully inserted application logs.
2025-04-26 21:58:38,099 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'cc em nh.', 'chat_history': [('human', 'i thi.'), ('ai', ''), ('human', 'ch mt chng t l c mt s th t th no cng c th.'), ('ai', ''), ('human', 'i.'), ('ai', 'Ti rt tic, ti khng hiu bn mun ni g.'), ('human', 'v thng ti cng phi.'), ('ai', 'Ti rt tic, ti khng hiu  ca bn. Bn c th din t li cu hi c khng?'), ('human', 'ng tin to tn dng.'), ('ai', 'Ti xin li, ti khng c thng tin v ch  ny.'), ('human', 'v n giang tuyt ng t thm nh l ng thnh my a.'), ('ai', 'Ti xin li, ti khng c  thng tin  tr li cu hi ny.'), ('human', 'h.'), ('ai', 'Ti rt tic, ti khng hiu. Bn c th vui lng th din t li cu hi ca bn khng?'), ('human', 'cc em nh.'), ('ai', 'Ti hiu ri. Hy cho ti bit bn cn g.'), ('human', ' th tr.'), ('ai', 'Ti xin li, ti khng hiu bn mun ni g. Bn c th vui lng din t li cu hi ca bn c khng?'), ('human', 'c.'), ('ai', 'Ti rt vui c gip bn. Bn c cu hi no khng?')], 'text': 'Cho bn! Rt vui c gip  cc em. Nu c bt k cu hi no khc, ng ngn ngi hi nh!'}
2025-04-26 22:02:05,433 - app.audio_controller - INFO - Speech: cc bn ang t.
2025-04-26 22:02:05,445 - app.chat_controller - INFO - User Query: cc bn ang t., 
2025-04-26 22:02:05,445 - app.db - INFO - Getting chat history.
2025-04-26 22:02:05,447 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 22:02:05,451 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 22:02:05,451 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: cc bn ang t.
2025-04-26 22:02:05,451 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 22:02:05,554 - app.intent_detector - INFO - Detected intent: greeting for input: cc bn ang t.
2025-04-26 22:02:05,554 - app.langchain - INFO - Selected greeting prompt
2025-04-26 22:02:05,554 - app.langchain - INFO - Detected intent: greeting | Requires context: False
2025-04-26 22:02:05,555 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-26 22:02:06,584 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 22:02:06,584 - app.db - INFO - Inserting application logs.
2025-04-26 22:02:06,585 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 22:02:06,588 - app.db - INFO - Successfully inserted application logs.
2025-04-26 22:02:06,589 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'cc bn ang t.', 'chat_history': [('human', 'cc em nh.'), ('ai', ''), ('human', 'i thi.'), ('ai', ''), ('human', 'ch mt chng t l c mt s th t th no cng c th.'), ('ai', ''), ('human', 'i.'), ('ai', 'Ti rt tic, ti khng hiu bn mun ni g.'), ('human', 'v thng ti cng phi.'), ('ai', 'Ti rt tic, ti khng hiu  ca bn. Bn c th din t li cu hi c khng?'), ('human', 'ng tin to tn dng.'), ('ai', 'Ti xin li, ti khng c thng tin v ch  ny.'), ('human', 'v n giang tuyt ng t thm nh l ng thnh my a.'), ('ai', 'Ti xin li, ti khng c  thng tin  tr li cu hi ny.'), ('human', 'h.'), ('ai', 'Ti rt tic, ti khng hiu. Bn c th vui lng th din t li cu hi ca bn khng?'), ('human', 'cc em nh.'), ('ai', 'Ti hiu ri. Hy cho ti bit bn cn g.'), ('human', ' th tr.'), ('ai', 'Ti xin li, ti khng hiu bn mun ni g. Bn c th vui lng din t li cu hi ca bn c khng?')], 'text': 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi no v trang im hoc chm sc da cn mnh gii p khng?'}
2025-04-26 22:02:21,593 - app.audio_controller - INFO - Speech: tuyn thuyn th tung.
2025-04-26 22:02:21,598 - app.chat_controller - INFO - User Query: tuyn thuyn th tung., 
2025-04-26 22:02:21,598 - app.db - INFO - Getting chat history.
2025-04-26 22:02:21,599 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 22:02:21,602 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 22:02:21,603 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: tuyn thuyn th tung.
2025-04-26 22:02:21,603 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 22:02:21,697 - app.intent_detector - INFO - Detected intent: greeting for input: tuyn thuyn th tung.
2025-04-26 22:02:21,697 - app.langchain - INFO - Selected greeting prompt
2025-04-26 22:02:21,697 - app.langchain - INFO - Detected intent: greeting | Requires context: False
2025-04-26 22:02:21,698 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-26 22:02:22,474 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-26 22:02:22,474 - app.db - INFO - Inserting application logs.
2025-04-26 22:02:22,475 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 22:02:22,478 - app.db - INFO - Successfully inserted application logs.
2025-04-26 22:02:22,479 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'tuyn thuyn th tung.', 'chat_history': [('human', 'cc bn ang t.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi no v trang im hoc chm sc da cn mnh gii p khng?'), ('human', 'cc em nh.'), ('ai', ''), ('human', 'i thi.'), ('ai', ''), ('human', 'ch mt chng t l c mt s th t th no cng c th.'), ('ai', ''), ('human', 'i.'), ('ai', 'Ti rt tic, ti khng hiu bn mun ni g.'), ('human', 'v thng ti cng phi.'), ('ai', 'Ti rt tic, ti khng hiu  ca bn. Bn c th din t li cu hi c khng?'), ('human', 'ng tin to tn dng.'), ('ai', 'Ti xin li, ti khng c thng tin v ch  ny.'), ('human', 'v n giang tuyt ng t thm nh l ng thnh my a.'), ('ai', 'Ti xin li, ti khng c  thng tin  tr li cu hi ny.'), ('human', 'h.'), ('ai', 'Ti rt tic, ti khng hiu. Bn c th vui lng th din t li cu hi ca bn khng?'), ('human', 'cc em nh.'), ('ai', 'Ti hiu ri. Hy cho ti bit bn cn g.')], 'text': 'Cho bn! Rt vui c gp bn. Bn c cu hi no v trang im hoc chm sc da cn mnh gii p khng?'}
2025-04-26 22:23:15,447 - app.chat_controller - INFO - User Query: mt ngi n ng trong on trng ny., 
2025-04-26 22:23:15,448 - app.db - INFO - Getting chat history.
2025-04-26 22:23:15,453 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 22:23:15,467 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 22:23:15,467 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: mt ngi n ng trong on trng ny.
2025-04-26 22:23:15,467 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 22:23:15,616 - app.intent_detector - INFO - Detected intent: greeting for input: mt ngi n ng trong on trng ny.
2025-04-26 22:23:15,616 - app.langchain - INFO - Selected greeting prompt
2025-04-26 22:23:15,617 - app.langchain - INFO - Detected intent: greeting | Requires context: False
2025-04-26 22:23:15,617 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-26 22:23:15,650 - app.chat_controller - INFO - User Query: cc em nh., 
2025-04-26 22:23:15,650 - app.db - INFO - Getting chat history.
2025-04-26 22:23:15,653 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-26 22:23:15,658 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-26 22:23:15,658 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: cc em nh.
2025-04-26 22:23:15,658 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-26 22:23:15,771 - app.intent_detector - INFO - Detected intent: greeting for input: cc em nh.
2025-04-26 22:23:15,772 - app.langchain - INFO - Selected greeting prompt
2025-04-26 22:23:15,772 - app.langchain - INFO - Detected intent: greeting | Requires context: False
2025-04-26 22:23:15,772 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 07:05:49,386 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-27 07:05:49,387 - app.db - INFO - Inserting application logs.
2025-04-27 07:05:49,388 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 07:05:49,391 - app.db - INFO - Successfully inserted application logs.
2025-04-27 07:05:49,392 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'mt ngi n ng trong on trng ny.', 'chat_history': [('human', 'tuyn thuyn th tung.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn c cu hi no v trang im hoc chm sc da cn mnh gii p khng?'), ('human', 'cc bn ang t.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi no v trang im hoc chm sc da cn mnh gii p khng?'), ('human', 'cc em nh.'), ('ai', ''), ('human', 'i thi.'), ('ai', ''), ('human', 'ch mt chng t l c mt s th t th no cng c th.'), ('ai', ''), ('human', 'i.'), ('ai', 'Ti rt tic, ti khng hiu bn mun ni g.'), ('human', 'v thng ti cng phi.'), ('ai', 'Ti rt tic, ti khng hiu  ca bn. Bn c th din t li cu hi c khng?'), ('human', 'ng tin to tn dng.'), ('ai', 'Ti xin li, ti khng c thng tin v ch  ny.'), ('human', 'v n giang tuyt ng t thm nh l ng thnh my a.'), ('ai', 'Ti xin li, ti khng c  thng tin  tr li cu hi ny.'), ('human', 'h.'), ('ai', 'Ti rt tic, ti khng hiu. Bn c th vui lng th din t li cu hi ca bn khng?')], 'text': 'Cho bn! Rt vui c tr chuyn vi bn. Bn c th hi mnh bt k iu g v trang im hoc chm sc da nh. Mnh s c gng ht sc  gip bn!'}
2025-04-27 07:05:50,594 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-27 07:05:50,594 - app.db - INFO - Inserting application logs.
2025-04-27 07:05:50,595 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 07:05:50,598 - app.db - INFO - Successfully inserted application logs.
2025-04-27 07:05:50,599 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'cc em nh.', 'chat_history': [('human', 'tuyn thuyn th tung.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn c cu hi no v trang im hoc chm sc da cn mnh gii p khng?'), ('human', 'cc bn ang t.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi no v trang im hoc chm sc da cn mnh gii p khng?'), ('human', 'cc em nh.'), ('ai', ''), ('human', 'i thi.'), ('ai', ''), ('human', 'ch mt chng t l c mt s th t th no cng c th.'), ('ai', ''), ('human', 'i.'), ('ai', 'Ti rt tic, ti khng hiu bn mun ni g.'), ('human', 'v thng ti cng phi.'), ('ai', 'Ti rt tic, ti khng hiu  ca bn. Bn c th din t li cu hi c khng?'), ('human', 'ng tin to tn dng.'), ('ai', 'Ti xin li, ti khng c thng tin v ch  ny.'), ('human', 'v n giang tuyt ng t thm nh l ng thnh my a.'), ('ai', 'Ti xin li, ti khng c  thng tin  tr li cu hi ny.'), ('human', 'h.'), ('ai', 'Ti rt tic, ti khng hiu. Bn c th vui lng th din t li cu hi ca bn khng?')], 'text': 'Cho bn! Mnh  y  gip bn vi cc cu hi v trang im v chm sc da. Bn c cu hi no mun hi khng?'}
2025-04-27 10:15:53,684 - app.audio_controller - INFO - Speech: cnh thn ti cng tng tng tng tng.
2025-04-27 10:15:53,719 - app.chat_controller - INFO - User Query: cnh thn ti cng tng tng tng tng., 
2025-04-27 10:15:53,719 - app.db - INFO - Getting chat history.
2025-04-27 10:15:53,728 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 10:15:53,766 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 10:15:53,766 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: cnh thn ti cng tng tng tng tng.
2025-04-27 10:15:53,766 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 10:15:54,080 - app.intent_detector - INFO - Detected intent: cu hi chuyn mn for input: cnh thn ti cng tng tng tng tng.
2025-04-27 10:15:54,080 - app.langchain - INFO - Selected fallback prompt
2025-04-27 10:15:54,080 - app.langchain - INFO - Detected intent: cu hi chuyn mn | Requires context: False
2025-04-27 10:15:54,080 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 10:15:54,888 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-27 10:15:54,889 - app.db - INFO - Inserting application logs.
2025-04-27 10:15:54,890 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 10:15:54,910 - app.db - INFO - Successfully inserted application logs.
2025-04-27 10:15:54,911 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'cnh thn ti cng tng tng tng tng.', 'chat_history': [('human', 'cc em nh.'), ('ai', 'Cho bn! Mnh  y  gip bn vi cc cu hi v trang im v chm sc da. Bn c cu hi no mun hi khng?'), ('human', 'mt ngi n ng trong on trng ny.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c th hi mnh bt k iu g v trang im hoc chm sc da nh. Mnh s c gng ht sc  gip bn!'), ('human', 'tuyn thuyn th tung.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn c cu hi no v trang im hoc chm sc da cn mnh gii p khng?'), ('human', 'cc bn ang t.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi no v trang im hoc chm sc da cn mnh gii p khng?'), ('human', 'cc em nh.'), ('ai', ''), ('human', 'i thi.'), ('ai', ''), ('human', 'ch mt chng t l c mt s th t th no cng c th.'), ('ai', ''), ('human', 'i.'), ('ai', 'Ti rt tic, ti khng hiu bn mun ni g.'), ('human', 'v thng ti cng phi.'), ('ai', 'Ti rt tic, ti khng hiu  ca bn. Bn c th din t li cu hi c khng?'), ('human', 'ng tin to tn dng.'), ('ai', 'Ti xin li, ti khng c thng tin v ch  ny.')], 'text': "I'm sorry, I don't understand what you're asking. Could you please rephrase your question or provide more context? I'm happy to help with makeup or skincare-related questions!"}
2025-04-27 10:18:52,528 - app.audio_controller - INFO - Speech: iu ny  th thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thch thc thch thch thc thch thc thch thch thc thch thch thch thc thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch
2025-04-27 10:18:52,541 - app.chat_controller - INFO - User Query: iu ny  th thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thch thc thch thch thc thch thc thch thch thc thch thch thch thc thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch, 
2025-04-27 10:18:52,541 - app.db - INFO - Getting chat history.
2025-04-27 10:18:52,543 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 10:18:52,552 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 10:18:52,552 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: iu ny  th thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thch thc thch thch thc thch thc thch thch thc thch thch thch thc thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch
2025-04-27 10:18:52,553 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 10:18:52,909 - app.intent_detector - INFO - Detected intent: ni chuyn phim for input: iu ny  th thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thch thc thch thch thc thch thc thch thch thc thch thch thch thc thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch
2025-04-27 10:18:52,909 - app.langchain - INFO - Selected fallback prompt
2025-04-27 10:18:52,910 - app.langchain - INFO - Detected intent: ni chuyn phim | Requires context: False
2025-04-27 10:18:52,910 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 10:18:54,740 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-27 10:18:54,740 - app.db - INFO - Inserting application logs.
2025-04-27 10:18:54,741 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 10:18:54,755 - app.db - INFO - Successfully inserted application logs.
2025-04-27 10:18:54,756 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'iu ny  th thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thch thc thch thch thc thch thc thch thch thc thch thch thch thc thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch', 'chat_history': [('human', 'cnh thn ti cng tng tng tng tng.'), ('ai', "I'm sorry, I don't understand what you're asking. Could you please rephrase your question or provide more context? I'm happy to help with makeup or skincare-related questions!"), ('human', 'cc em nh.'), ('ai', 'Cho bn! Mnh  y  gip bn vi cc cu hi v trang im v chm sc da. Bn c cu hi no mun hi khng?'), ('human', 'mt ngi n ng trong on trng ny.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c th hi mnh bt k iu g v trang im hoc chm sc da nh. Mnh s c gng ht sc  gip bn!'), ('human', 'tuyn thuyn th tung.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn c cu hi no v trang im hoc chm sc da cn mnh gii p khng?'), ('human', 'cc bn ang t.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi no v trang im hoc chm sc da cn mnh gii p khng?'), ('human', 'cc em nh.'), ('ai', ''), ('human', 'i thi.'), ('ai', ''), ('human', 'ch mt chng t l c mt s th t th no cng c th.'), ('ai', ''), ('human', 'i.'), ('ai', 'Ti rt tic, ti khng hiu bn mun ni g.'), ('human', 'v thng ti cng phi.'), ('ai', 'Ti rt tic, ti khng hiu  ca bn. Bn c th din t li cu hi c khng?')], 'text': 'Cho bn! Cu hi ca bn c v hi kh hiu. Bn c th lm r hn v iu bn mun hi lin quan n trang im hoc chm sc da c khng? iu ny s gip ti hiu r hn v cung cp thng tin hu ch cho bn.'}
2025-04-27 10:41:25,519 - app.audio_controller - INFO - Speech: th th do.
2025-04-27 10:41:25,576 - app.chat_controller - INFO - User Query: th th do., 
2025-04-27 10:41:25,576 - app.db - INFO - Getting chat history.
2025-04-27 10:41:25,579 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 10:41:25,588 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 10:41:25,589 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: th th do.
2025-04-27 10:41:25,589 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 10:41:25,901 - app.intent_detector - INFO - Detected intent: cho hi for input: th th do.
2025-04-27 10:41:25,901 - app.langchain - INFO - Selected fallback prompt
2025-04-27 10:41:25,901 - app.langchain - INFO - Detected intent: cho hi | Requires context: False
2025-04-27 10:41:25,901 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 10:41:28,230 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-27 10:41:28,230 - app.db - INFO - Inserting application logs.
2025-04-27 10:41:28,232 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 10:41:28,247 - app.db - INFO - Successfully inserted application logs.
2025-04-27 10:41:28,248 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'th th do.', 'chat_history': [('human', 'iu ny  th thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thch thc thch thch thc thch thc thch thch thc thch thch thch thc thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch'), ('ai', 'Cho bn! Cu hi ca bn c v hi kh hiu. Bn c th lm r hn v iu bn mun hi lin quan n trang im hoc chm sc da c khng? iu ny s gip ti hiu r hn v cung cp thng tin hu ch cho bn.'), ('human', 'cnh thn ti cng tng tng tng tng.'), ('ai', "I'm sorry, I don't understand what you're asking. Could you please rephrase your question or provide more context? I'm happy to help with makeup or skincare-related questions!"), ('human', 'cc em nh.'), ('ai', 'Cho bn! Mnh  y  gip bn vi cc cu hi v trang im v chm sc da. Bn c cu hi no mun hi khng?'), ('human', 'mt ngi n ng trong on trng ny.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c th hi mnh bt k iu g v trang im hoc chm sc da nh. Mnh s c gng ht sc  gip bn!'), ('human', 'tuyn thuyn th tung.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn c cu hi no v trang im hoc chm sc da cn mnh gii p khng?'), ('human', 'cc bn ang t.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi no v trang im hoc chm sc da cn mnh gii p khng?'), ('human', 'cc em nh.'), ('ai', ''), ('human', 'i thi.'), ('ai', ''), ('human', 'ch mt chng t l c mt s th t th no cng c th.'), ('ai', ''), ('human', 'i.'), ('ai', 'Ti rt tic, ti khng hiu bn mun ni g.')], 'text': 'Cho bn!  ti c th gip bn tt hn v cc vn  lin quan n trang im hoc chm sc da, bn c th cho ti bit c th hn bn mun hi g khng? V d nh bn mun bit v:\n\n*   **Sn phm c th no?** (V d: kem chng nng, son mi, kem dng m...)\n*   **Vn  da bn ang gp phi?** (V d: da kh, da du, mn...)\n*   **Phong cch trang im bn mun th?** (V d: trang im t nhin, trang im d tic...)\n\nCng nhiu thng tin, ti cng d dng a ra li khuyn ph hp cho bn!'}
2025-04-27 10:42:22,567 - app.audio_controller - INFO - Speech: xin cho nh.
2025-04-27 10:42:22,574 - app.chat_controller - INFO - User Query: xin cho nh., 
2025-04-27 10:42:22,574 - app.db - INFO - Getting chat history.
2025-04-27 10:42:22,575 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 10:42:22,579 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 10:42:22,579 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: xin cho nh.
2025-04-27 10:42:22,580 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 10:42:22,697 - app.intent_detector - INFO - Detected intent: khng lin quan for input: xin cho nh.
2025-04-27 10:42:22,697 - app.langchain - INFO - Selected fallback prompt
2025-04-27 10:42:22,698 - app.langchain - INFO - Detected intent: khng lin quan | Requires context: False
2025-04-27 10:42:22,698 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 10:42:23,497 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-27 10:42:23,497 - app.db - INFO - Inserting application logs.
2025-04-27 10:42:23,499 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 10:42:23,502 - app.db - INFO - Successfully inserted application logs.
2025-04-27 10:42:23,503 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'xin cho nh.', 'chat_history': [('human', 'th th do.'), ('ai', 'Cho bn!  ti c th gip bn tt hn v cc vn  lin quan n trang im hoc chm sc da, bn c th cho ti bit c th hn bn mun hi g khng? V d nh bn mun bit v:\n\n*   **Sn phm c th no?** (V d: kem chng nng, son mi, kem dng m...)\n*   **Vn  da bn ang gp phi?** (V d: da kh, da du, mn...)\n*   **Phong cch trang im bn mun th?** (V d: trang im t nhin, trang im d tic...)\n\nCng nhiu thng tin, ti cng d dng a ra li khuyn ph hp cho bn!'), ('human', 'iu ny  th thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thc thch thch thc thch thch thc thch thc thch thch thc thch thch thch thc thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch thch'), ('ai', 'Cho bn! Cu hi ca bn c v hi kh hiu. Bn c th lm r hn v iu bn mun hi lin quan n trang im hoc chm sc da c khng? iu ny s gip ti hiu r hn v cung cp thng tin hu ch cho bn.'), ('human', 'cnh thn ti cng tng tng tng tng.'), ('ai', "I'm sorry, I don't understand what you're asking. Could you please rephrase your question or provide more context? I'm happy to help with makeup or skincare-related questions!"), ('human', 'cc em nh.'), ('ai', 'Cho bn! Mnh  y  gip bn vi cc cu hi v trang im v chm sc da. Bn c cu hi no mun hi khng?'), ('human', 'mt ngi n ng trong on trng ny.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c th hi mnh bt k iu g v trang im hoc chm sc da nh. Mnh s c gng ht sc  gip bn!'), ('human', 'tuyn thuyn th tung.'), ('ai', 'Cho bn! Rt vui c gp bn. Bn c cu hi no v trang im hoc chm sc da cn mnh gii p khng?'), ('human', 'cc bn ang t.'), ('ai', 'Cho bn! Rt vui c tr chuyn vi bn. Bn c cu hi no v trang im hoc chm sc da cn mnh gii p khng?'), ('human', 'cc em nh.'), ('ai', ''), ('human', 'i thi.'), ('ai', ''), ('human', 'ch mt chng t l c mt s th t th no cng c th.'), ('ai', '')], 'text': 'Cho bn!  ti c th gip bn tt hn v cc ch  trang im hoc chm sc da, bn c th cho ti bit bn mun hi g c th khng?'}
2025-04-27 10:49:16,350 - app.audio_controller - INFO - Speech: c thi th.
2025-04-27 10:49:16,359 - app.chat_controller - INFO - User Query: c thi th., 
2025-04-27 10:49:16,359 - app.db - INFO - Getting chat history.
2025-04-27 10:49:16,360 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 10:49:16,365 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-04-27 10:49:16,365 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: c thi th.
2025-04-27 10:49:16,365 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 10:49:16,427 - app.intent_detector - INFO - Detected intent: khng lin quan for input: c thi th.
2025-04-27 10:49:16,428 - app.langchain - INFO - Selected fallback prompt
2025-04-27 10:49:16,428 - app.langchain - INFO - Detected intent: khng lin quan | Requires context: False
2025-04-27 10:49:16,428 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 10:49:17,213 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-27 10:49:17,213 - app.db - INFO - Inserting application logs.
2025-04-27 10:49:17,214 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 10:49:17,218 - app.db - INFO - Successfully inserted application logs.
2025-04-27 10:49:17,218 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'c thi th.', 'chat_history': [], 'text': "I'm sorry, I'm not sure I understand. Could you please clarify what you're asking about? Are you interested in makeup or skincare techniques related to a particular situation or purpose? The more information you can give me, the better I can assist you!"}
2025-04-27 11:10:36,960 - app.audio_controller - INFO - Speech: yu cu vit.
2025-04-27 11:10:36,997 - app.chat_controller - INFO - User Query: yu cu vit., 
2025-04-27 11:10:36,997 - app.db - INFO - Getting chat history.
2025-04-27 11:10:36,999 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 11:10:37,003 - app.db - INFO - Successfully retrieved 1 conversation turns
2025-04-27 11:10:37,003 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: yu cu vit.
2025-04-27 11:10:37,003 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 11:10:37,097 - app.intent_detector - INFO - Detected intent: phn hi for input: yu cu vit.
2025-04-27 11:10:37,097 - app.langchain - INFO - Selected fallback prompt
2025-04-27 11:10:37,097 - app.langchain - INFO - Detected intent: phn hi | Requires context: False
2025-04-27 11:10:37,098 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 11:10:39,054 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-27 11:10:39,054 - app.db - INFO - Inserting application logs.
2025-04-27 11:10:39,055 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 11:10:39,059 - app.db - INFO - Successfully inserted application logs.
2025-04-27 11:10:39,059 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'yu cu vit.', 'chat_history': [('human', 'c thi th.'), ('ai', "I'm sorry, I'm not sure I understand. Could you please clarify what you're asking about? Are you interested in makeup or skincare techniques related to a particular situation or purpose? The more information you can give me, the better I can assist you!")], 'text': 'Cho bn!  ti c th gip bn tt nht v trang im hoc chm sc da, bn c th cho ti bit c th hn cu hi hoc ch  bn quan tm c khng? V d:\n\n*   Bn mun bit v sn phm c th no khng?\n*   Bn c vn  v da cn t vn khng?\n*   Bn mun hc cch trang im cho dp g?\n\nCng nhiu chi tit, ti cng c th a ra nhng li khuyn hu ch cho bn!'}
2025-04-27 11:10:57,667 - app.audio_controller - INFO - Speech: ng.
2025-04-27 11:10:57,694 - app.chat_controller - INFO - User Query: ng., 
2025-04-27 11:10:57,694 - app.db - INFO - Getting chat history.
2025-04-27 11:10:57,698 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 11:10:57,708 - app.db - INFO - Successfully retrieved 2 conversation turns
2025-04-27 11:10:57,708 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: ng.
2025-04-27 11:10:57,709 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 11:10:57,768 - app.intent_detector - INFO - Detected intent: cu hi chuyn mn for input: ng.
2025-04-27 11:10:57,768 - app.langchain - INFO - Selected fallback prompt
2025-04-27 11:10:57,768 - app.langchain - INFO - Detected intent: cu hi chuyn mn | Requires context: False
2025-04-27 11:10:57,768 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 11:10:59,834 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-27 11:10:59,834 - app.db - INFO - Inserting application logs.
2025-04-27 11:10:59,836 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 11:10:59,839 - app.db - INFO - Successfully inserted application logs.
2025-04-27 11:10:59,841 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'ng.', 'chat_history': [('human', 'yu cu vit.'), ('ai', 'Cho bn!  ti c th gip bn tt nht v trang im hoc chm sc da, bn c th cho ti bit c th hn cu hi hoc ch  bn quan tm c khng? V d:\n\n*   Bn mun bit v sn phm c th no khng?\n*   Bn c vn  v da cn t vn khng?\n*   Bn mun hc cch trang im cho dp g?\n\nCng nhiu chi tit, ti cng c th a ra nhng li khuyn hu ch cho bn!'), ('human', 'c thi th.'), ('ai', "I'm sorry, I'm not sure I understand. Could you please clarify what you're asking about? Are you interested in makeup or skincare techniques related to a particular situation or purpose? The more information you can give me, the better I can assist you!")], 'text': 'Ti rt vui c gip bn v trang im hoc chm sc da!  ti c th cung cp cho bn cu tr li tt nht, bn c th cho ti bit bn mun bit iu g c th khng? V d:\n\n*   Bn c cu hi v mt sn phm c th khng?\n*   Bn mun c t vn v mt quy trnh trang im hoc chm sc da?\n*   Bn c loi da c th no v mun tm sn phm ph hp?\n\nCng nhiu thng tin bn cung cp, ti cng c th gip bn tt hn!'}
2025-04-27 11:23:53,440 - app.chat_controller - INFO - User Query: yu cu vit., 
2025-04-27 11:23:53,440 - app.db - INFO - Getting chat history.
2025-04-27 11:23:53,443 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 11:23:53,449 - app.db - INFO - Successfully retrieved 3 conversation turns
2025-04-27 11:23:53,449 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: yu cu vit.
2025-04-27 11:23:53,449 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 11:23:53,477 - app.chat_controller - INFO - User Query: th th do., 
2025-04-27 11:23:53,478 - app.db - INFO - Getting chat history.
2025-04-27 11:23:53,488 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 11:23:53,495 - app.db - INFO - Successfully retrieved 3 conversation turns
2025-04-27 11:23:53,496 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: th th do.
2025-04-27 11:23:53,496 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 11:23:53,655 - app.intent_detector - INFO - Detected intent: phn hi for input: yu cu vit.
2025-04-27 11:23:53,655 - app.langchain - INFO - Selected fallback prompt
2025-04-27 11:23:53,655 - app.langchain - INFO - Detected intent: phn hi | Requires context: False
2025-04-27 11:23:53,655 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 11:23:53,672 - app.intent_detector - INFO - Detected intent: phn hi for input: th th do.
2025-04-27 11:23:53,672 - app.langchain - INFO - Selected fallback prompt
2025-04-27 11:23:53,672 - app.langchain - INFO - Detected intent: phn hi | Requires context: False
2025-04-27 11:23:53,673 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 13:20:09,182 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-27 13:20:09,182 - app.db - INFO - Inserting application logs.
2025-04-27 13:20:09,183 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 13:20:09,188 - app.db - INFO - Successfully inserted application logs.
2025-04-27 13:20:09,189 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'th th do.', 'chat_history': [('human', 'ng.'), ('ai', 'Ti rt vui c gip bn v trang im hoc chm sc da!  ti c th cung cp cho bn cu tr li tt nht, bn c th cho ti bit bn mun bit iu g c th khng? V d:\n\n*   Bn c cu hi v mt sn phm c th khng?\n*   Bn mun c t vn v mt quy trnh trang im hoc chm sc da?\n*   Bn c loi da c th no v mun tm sn phm ph hp?\n\nCng nhiu thng tin bn cung cp, ti cng c th gip bn tt hn!'), ('human', 'yu cu vit.'), ('ai', 'Cho bn!  ti c th gip bn tt nht v trang im hoc chm sc da, bn c th cho ti bit c th hn cu hi hoc ch  bn quan tm c khng? V d:\n\n*   Bn mun bit v sn phm c th no khng?\n*   Bn c vn  v da cn t vn khng?\n*   Bn mun hc cch trang im cho dp g?\n\nCng nhiu chi tit, ti cng c th a ra nhng li khuyn hu ch cho bn!'), ('human', 'c thi th.'), ('ai', "I'm sorry, I'm not sure I understand. Could you please clarify what you're asking about? Are you interested in makeup or skincare techniques related to a particular situation or purpose? The more information you can give me, the better I can assist you!")], 'text': 'Cho bn!  ti c th h tr bn tt nht, bn c th cho ti bit r hn bn mun ni n iu g khng? Bn c cu hi c th no v trang im hoc chm sc da m bn mun ti gip bn khng?'}
2025-04-27 13:20:09,334 - app.chat_controller - INFO - Sucessfully invoke rag_chain
2025-04-27 13:20:09,334 - app.db - INFO - Inserting application logs.
2025-04-27 13:20:09,336 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 13:20:09,340 - app.db - INFO - Successfully inserted application logs.
2025-04-27 13:20:09,342 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: {'input': 'yu cu vit.', 'chat_history': [('human', 'ng.'), ('ai', 'Ti rt vui c gip bn v trang im hoc chm sc da!  ti c th cung cp cho bn cu tr li tt nht, bn c th cho ti bit bn mun bit iu g c th khng? V d:\n\n*   Bn c cu hi v mt sn phm c th khng?\n*   Bn mun c t vn v mt quy trnh trang im hoc chm sc da?\n*   Bn c loi da c th no v mun tm sn phm ph hp?\n\nCng nhiu thng tin bn cung cp, ti cng c th gip bn tt hn!'), ('human', 'yu cu vit.'), ('ai', 'Cho bn!  ti c th gip bn tt nht v trang im hoc chm sc da, bn c th cho ti bit c th hn cu hi hoc ch  bn quan tm c khng? V d:\n\n*   Bn mun bit v sn phm c th no khng?\n*   Bn c vn  v da cn t vn khng?\n*   Bn mun hc cch trang im cho dp g?\n\nCng nhiu chi tit, ti cng c th a ra nhng li khuyn hu ch cho bn!'), ('human', 'c thi th.'), ('ai', "I'm sorry, I'm not sure I understand. Could you please clarify what you're asking about? Are you interested in makeup or skincare techniques related to a particular situation or purpose? The more information you can give me, the better I can assist you!")], 'text': 'Cho bn! Mnh rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  mnh c th h tr bn tt nht, bn c th cho mnh bit c th hn cu hi ca bn l g c khng? V d nh:\n\n*   Bn mun hi v sn phm trang im no? (v d: kem nn, son mi, phn mt...)\n*   Bn mun bit v quy trnh chm sc da no? (v d: lm sch, dng m, chng nng...)\n*   Bn c vn  c th v da cn c t vn khng? (v d: mn, da kh, da du...)\n\nMnh s c gng tr li bn mt cch chi tit v hu ch nht c th. Cm n bn!'}
2025-04-27 13:50:54,424 - app.audio_controller - INFO - Speech:  ch trung.
2025-04-27 13:50:54,453 - app.chat_controller - INFO - User Query:  ch trung.
2025-04-27 13:50:54,453 - app.langchain - INFO - Loading Hugging Face model: ./models/finetuned-model
2025-04-27 13:50:54,453 - app.chat_controller - ERROR - Error while rewriting prompt: Unrecognized model in ./models/finetuned-model. Should have a `model_type` key in its config.json, or contain one of the following strings in its name: albert, align, altclip, aria, aria_text, audio-spectrogram-transformer, autoformer, bamba, bark, bart, beit, bert, bert-generation, big_bird, bigbird_pegasus, biogpt, bit, blenderbot, blenderbot-small, blip, blip-2, bloom, bridgetower, bros, camembert, canine, chameleon, chinese_clip, chinese_clip_vision_model, clap, clip, clip_text_model, clip_vision_model, clipseg, clvp, code_llama, codegen, cohere, cohere2, colpali, conditional_detr, convbert, convnext, convnextv2, cpmant, ctrl, cvt, dab-detr, dac, data2vec-audio, data2vec-text, data2vec-vision, dbrx, deberta, deberta-v2, decision_transformer, deformable_detr, deit, depth_anything, depth_pro, deta, detr, diffllama, dinat, dinov2, dinov2_with_registers, distilbert, donut-swin, dpr, dpt, efficientformer, efficientnet, electra, emu3, encodec, encoder-decoder, ernie, ernie_m, esm, falcon, falcon_mamba, fastspeech2_conformer, flaubert, flava, fnet, focalnet, fsmt, funnel, fuyu, gemma, gemma2, git, glm, glpn, got_ocr2, gpt-sw3, gpt2, gpt_bigcode, gpt_neo, gpt_neox, gpt_neox_japanese, gptj, gptsan-japanese, granite, granitemoe, granitemoeshared, granitevision, graphormer, grounding-dino, groupvit, helium, hiera, hubert, ibert, idefics, idefics2, idefics3, idefics3_vision, ijepa, imagegpt, informer, instructblip, instructblipvideo, jamba, jetmoe, jukebox, kosmos-2, layoutlm, layoutlmv2, layoutlmv3, led, levit, lilt, llama, llava, llava_next, llava_next_video, llava_onevision, longformer, longt5, luke, lxmert, m2m_100, mamba, mamba2, marian, markuplm, mask2former, maskformer, maskformer-swin, mbart, mctct, mega, megatron-bert, mgp-str, mimi, mistral, mixtral, mllama, mobilebert, mobilenet_v1, mobilenet_v2, mobilevit, mobilevitv2, modernbert, moonshine, moshi, mpnet, mpt, mra, mt5, musicgen, musicgen_melody, mvp, nat, nemotron, nezha, nllb-moe, nougat, nystromformer, olmo, olmo2, olmoe, omdet-turbo, oneformer, open-llama, openai-gpt, opt, owlv2, owlvit, paligemma, patchtsmixer, patchtst, pegasus, pegasus_x, perceiver, persimmon, phi, phi3, phimoe, pix2struct, pixtral, plbart, poolformer, pop2piano, prophetnet, pvt, pvt_v2, qdqbert, qwen2, qwen2_5_vl, qwen2_audio, qwen2_audio_encoder, qwen2_moe, qwen2_vl, rag, realm, recurrent_gemma, reformer, regnet, rembert, resnet, retribert, roberta, roberta-prelayernorm, roc_bert, roformer, rt_detr, rt_detr_resnet, rt_detr_v2, rwkv, sam, seamless_m4t, seamless_m4t_v2, segformer, seggpt, sew, sew-d, siglip, siglip_vision_model, speech-encoder-decoder, speech_to_text, speech_to_text_2, speecht5, splinter, squeezebert, stablelm, starcoder2, superglue, superpoint, swiftformer, swin, swin2sr, swinv2, switch_transformers, t5, table-transformer, tapas, textnet, time_series_transformer, timesformer, timm_backbone, timm_wrapper, trajectory_transformer, transfo-xl, trocr, tvlt, tvp, udop, umt5, unispeech, unispeech-sat, univnet, upernet, van, video_llava, videomae, vilt, vipllava, vision-encoder-decoder, vision-text-dual-encoder, visual_bert, vit, vit_hybrid, vit_mae, vit_msn, vitdet, vitmatte, vitpose, vitpose_backbone, vits, vivit, wav2vec2, wav2vec2-bert, wav2vec2-conformer, wavlm, whisper, xclip, xglm, xlm, xlm-prophetnet, xlm-roberta, xlm-roberta-xl, xlnet, xmod, yolos, yoso, zamba, zamba2, zoedepth
2025-04-27 13:50:54,453 - app.chat_controller - INFO - Fallback to original prompt:  ch trung.
2025-04-27 13:50:54,453 - app.db - INFO - Getting chat history.
2025-04-27 13:50:54,457 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 13:50:54,464 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-04-27 13:50:54,464 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input:  ch trung.
2025-04-27 13:50:54,464 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 13:50:54,548 - app.intent_detector - INFO - Detected intent: phn hi for input:  ch trung.
2025-04-27 13:50:54,548 - app.langchain - INFO - Selected fallback prompt
2025-04-27 13:50:54,549 - app.langchain - INFO - Detected intent: phn hi | Requires context: False
2025-04-27 13:50:54,549 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 13:51:09,527 - app.audio_controller - INFO - Speech: n.
2025-04-27 13:51:09,534 - app.chat_controller - INFO - User Query: n.
2025-04-27 13:51:09,535 - app.langchain - INFO - Loading Hugging Face model: ./models/finetuned-model
2025-04-27 13:51:09,535 - app.chat_controller - ERROR - Error while rewriting prompt: Unrecognized model in ./models/finetuned-model. Should have a `model_type` key in its config.json, or contain one of the following strings in its name: albert, align, altclip, aria, aria_text, audio-spectrogram-transformer, autoformer, bamba, bark, bart, beit, bert, bert-generation, big_bird, bigbird_pegasus, biogpt, bit, blenderbot, blenderbot-small, blip, blip-2, bloom, bridgetower, bros, camembert, canine, chameleon, chinese_clip, chinese_clip_vision_model, clap, clip, clip_text_model, clip_vision_model, clipseg, clvp, code_llama, codegen, cohere, cohere2, colpali, conditional_detr, convbert, convnext, convnextv2, cpmant, ctrl, cvt, dab-detr, dac, data2vec-audio, data2vec-text, data2vec-vision, dbrx, deberta, deberta-v2, decision_transformer, deformable_detr, deit, depth_anything, depth_pro, deta, detr, diffllama, dinat, dinov2, dinov2_with_registers, distilbert, donut-swin, dpr, dpt, efficientformer, efficientnet, electra, emu3, encodec, encoder-decoder, ernie, ernie_m, esm, falcon, falcon_mamba, fastspeech2_conformer, flaubert, flava, fnet, focalnet, fsmt, funnel, fuyu, gemma, gemma2, git, glm, glpn, got_ocr2, gpt-sw3, gpt2, gpt_bigcode, gpt_neo, gpt_neox, gpt_neox_japanese, gptj, gptsan-japanese, granite, granitemoe, granitemoeshared, granitevision, graphormer, grounding-dino, groupvit, helium, hiera, hubert, ibert, idefics, idefics2, idefics3, idefics3_vision, ijepa, imagegpt, informer, instructblip, instructblipvideo, jamba, jetmoe, jukebox, kosmos-2, layoutlm, layoutlmv2, layoutlmv3, led, levit, lilt, llama, llava, llava_next, llava_next_video, llava_onevision, longformer, longt5, luke, lxmert, m2m_100, mamba, mamba2, marian, markuplm, mask2former, maskformer, maskformer-swin, mbart, mctct, mega, megatron-bert, mgp-str, mimi, mistral, mixtral, mllama, mobilebert, mobilenet_v1, mobilenet_v2, mobilevit, mobilevitv2, modernbert, moonshine, moshi, mpnet, mpt, mra, mt5, musicgen, musicgen_melody, mvp, nat, nemotron, nezha, nllb-moe, nougat, nystromformer, olmo, olmo2, olmoe, omdet-turbo, oneformer, open-llama, openai-gpt, opt, owlv2, owlvit, paligemma, patchtsmixer, patchtst, pegasus, pegasus_x, perceiver, persimmon, phi, phi3, phimoe, pix2struct, pixtral, plbart, poolformer, pop2piano, prophetnet, pvt, pvt_v2, qdqbert, qwen2, qwen2_5_vl, qwen2_audio, qwen2_audio_encoder, qwen2_moe, qwen2_vl, rag, realm, recurrent_gemma, reformer, regnet, rembert, resnet, retribert, roberta, roberta-prelayernorm, roc_bert, roformer, rt_detr, rt_detr_resnet, rt_detr_v2, rwkv, sam, seamless_m4t, seamless_m4t_v2, segformer, seggpt, sew, sew-d, siglip, siglip_vision_model, speech-encoder-decoder, speech_to_text, speech_to_text_2, speecht5, splinter, squeezebert, stablelm, starcoder2, superglue, superpoint, swiftformer, swin, swin2sr, swinv2, switch_transformers, t5, table-transformer, tapas, textnet, time_series_transformer, timesformer, timm_backbone, timm_wrapper, trajectory_transformer, transfo-xl, trocr, tvlt, tvp, udop, umt5, unispeech, unispeech-sat, univnet, upernet, van, video_llava, videomae, vilt, vipllava, vision-encoder-decoder, vision-text-dual-encoder, visual_bert, vit, vit_hybrid, vit_mae, vit_msn, vitdet, vitmatte, vitpose, vitpose_backbone, vits, vivit, wav2vec2, wav2vec2-bert, wav2vec2-conformer, wavlm, whisper, xclip, xglm, xlm, xlm-prophetnet, xlm-roberta, xlm-roberta-xl, xlnet, xmod, yolos, yoso, zamba, zamba2, zoedepth
2025-04-27 13:51:09,535 - app.chat_controller - INFO - Fallback to original prompt: n.
2025-04-27 13:51:09,535 - app.db - INFO - Getting chat history.
2025-04-27 13:51:09,536 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 13:51:09,541 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-04-27 13:51:09,541 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: n.
2025-04-27 13:51:09,541 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 13:51:09,593 - app.intent_detector - INFO - Detected intent: ni chuyn phim for input: n.
2025-04-27 13:51:09,593 - app.langchain - INFO - Selected fallback prompt
2025-04-27 13:51:09,593 - app.langchain - INFO - Detected intent: ni chuyn phim | Requires context: False
2025-04-27 13:51:09,593 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 13:52:01,330 - app.chat_controller - INFO - User Query: th th do.
2025-04-27 13:52:01,330 - app.langchain - INFO - Loading Hugging Face model: ./models/finetuned-model
2025-04-27 13:52:01,331 - app.chat_controller - ERROR - Error while rewriting prompt: Unrecognized model in ./models/finetuned-model. Should have a `model_type` key in its config.json, or contain one of the following strings in its name: albert, align, altclip, aria, aria_text, audio-spectrogram-transformer, autoformer, bamba, bark, bart, beit, bert, bert-generation, big_bird, bigbird_pegasus, biogpt, bit, blenderbot, blenderbot-small, blip, blip-2, bloom, bridgetower, bros, camembert, canine, chameleon, chinese_clip, chinese_clip_vision_model, clap, clip, clip_text_model, clip_vision_model, clipseg, clvp, code_llama, codegen, cohere, cohere2, colpali, conditional_detr, convbert, convnext, convnextv2, cpmant, ctrl, cvt, dab-detr, dac, data2vec-audio, data2vec-text, data2vec-vision, dbrx, deberta, deberta-v2, decision_transformer, deformable_detr, deit, depth_anything, depth_pro, deta, detr, diffllama, dinat, dinov2, dinov2_with_registers, distilbert, donut-swin, dpr, dpt, efficientformer, efficientnet, electra, emu3, encodec, encoder-decoder, ernie, ernie_m, esm, falcon, falcon_mamba, fastspeech2_conformer, flaubert, flava, fnet, focalnet, fsmt, funnel, fuyu, gemma, gemma2, git, glm, glpn, got_ocr2, gpt-sw3, gpt2, gpt_bigcode, gpt_neo, gpt_neox, gpt_neox_japanese, gptj, gptsan-japanese, granite, granitemoe, granitemoeshared, granitevision, graphormer, grounding-dino, groupvit, helium, hiera, hubert, ibert, idefics, idefics2, idefics3, idefics3_vision, ijepa, imagegpt, informer, instructblip, instructblipvideo, jamba, jetmoe, jukebox, kosmos-2, layoutlm, layoutlmv2, layoutlmv3, led, levit, lilt, llama, llava, llava_next, llava_next_video, llava_onevision, longformer, longt5, luke, lxmert, m2m_100, mamba, mamba2, marian, markuplm, mask2former, maskformer, maskformer-swin, mbart, mctct, mega, megatron-bert, mgp-str, mimi, mistral, mixtral, mllama, mobilebert, mobilenet_v1, mobilenet_v2, mobilevit, mobilevitv2, modernbert, moonshine, moshi, mpnet, mpt, mra, mt5, musicgen, musicgen_melody, mvp, nat, nemotron, nezha, nllb-moe, nougat, nystromformer, olmo, olmo2, olmoe, omdet-turbo, oneformer, open-llama, openai-gpt, opt, owlv2, owlvit, paligemma, patchtsmixer, patchtst, pegasus, pegasus_x, perceiver, persimmon, phi, phi3, phimoe, pix2struct, pixtral, plbart, poolformer, pop2piano, prophetnet, pvt, pvt_v2, qdqbert, qwen2, qwen2_5_vl, qwen2_audio, qwen2_audio_encoder, qwen2_moe, qwen2_vl, rag, realm, recurrent_gemma, reformer, regnet, rembert, resnet, retribert, roberta, roberta-prelayernorm, roc_bert, roformer, rt_detr, rt_detr_resnet, rt_detr_v2, rwkv, sam, seamless_m4t, seamless_m4t_v2, segformer, seggpt, sew, sew-d, siglip, siglip_vision_model, speech-encoder-decoder, speech_to_text, speech_to_text_2, speecht5, splinter, squeezebert, stablelm, starcoder2, superglue, superpoint, swiftformer, swin, swin2sr, swinv2, switch_transformers, t5, table-transformer, tapas, textnet, time_series_transformer, timesformer, timm_backbone, timm_wrapper, trajectory_transformer, transfo-xl, trocr, tvlt, tvp, udop, umt5, unispeech, unispeech-sat, univnet, upernet, van, video_llava, videomae, vilt, vipllava, vision-encoder-decoder, vision-text-dual-encoder, visual_bert, vit, vit_hybrid, vit_mae, vit_msn, vitdet, vitmatte, vitpose, vitpose_backbone, vits, vivit, wav2vec2, wav2vec2-bert, wav2vec2-conformer, wavlm, whisper, xclip, xglm, xlm, xlm-prophetnet, xlm-roberta, xlm-roberta-xl, xlnet, xmod, yolos, yoso, zamba, zamba2, zoedepth
2025-04-27 13:52:01,331 - app.chat_controller - INFO - Fallback to original prompt: th th do.
2025-04-27 13:52:01,331 - app.db - INFO - Getting chat history.
2025-04-27 13:52:01,333 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 13:52:01,340 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-04-27 13:52:01,341 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: th th do.
2025-04-27 13:52:01,341 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 13:52:01,453 - app.intent_detector - INFO - Detected intent: ni chuyn phim for input: th th do.
2025-04-27 13:52:01,453 - app.langchain - INFO - Selected fallback prompt
2025-04-27 13:52:01,453 - app.langchain - INFO - Detected intent: ni chuyn phim | Requires context: False
2025-04-27 13:52:01,453 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 13:52:02,343 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 13:52:02,343 - app.db - INFO - Inserting application logs.
2025-04-27 13:52:02,344 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 13:52:02,348 - app.db - INFO - Successfully inserted application logs.
2025-04-27 13:52:02,349 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti c th gip bn vi iu . Bn c th cho ti bit bn ang hi v iu g khng? Bn c mun tm hiu v trang im, chm sc da hay iu g khc khng?
2025-04-27 13:52:06,898 - app.audio_controller - INFO - Speech: hnh thc.
2025-04-27 13:52:06,905 - app.chat_controller - INFO - User Query: hnh thc.
2025-04-27 13:52:06,905 - app.langchain - INFO - Loading Hugging Face model: ./models/finetuned-model
2025-04-27 13:52:06,905 - app.chat_controller - ERROR - Error while rewriting prompt: Unrecognized model in ./models/finetuned-model. Should have a `model_type` key in its config.json, or contain one of the following strings in its name: albert, align, altclip, aria, aria_text, audio-spectrogram-transformer, autoformer, bamba, bark, bart, beit, bert, bert-generation, big_bird, bigbird_pegasus, biogpt, bit, blenderbot, blenderbot-small, blip, blip-2, bloom, bridgetower, bros, camembert, canine, chameleon, chinese_clip, chinese_clip_vision_model, clap, clip, clip_text_model, clip_vision_model, clipseg, clvp, code_llama, codegen, cohere, cohere2, colpali, conditional_detr, convbert, convnext, convnextv2, cpmant, ctrl, cvt, dab-detr, dac, data2vec-audio, data2vec-text, data2vec-vision, dbrx, deberta, deberta-v2, decision_transformer, deformable_detr, deit, depth_anything, depth_pro, deta, detr, diffllama, dinat, dinov2, dinov2_with_registers, distilbert, donut-swin, dpr, dpt, efficientformer, efficientnet, electra, emu3, encodec, encoder-decoder, ernie, ernie_m, esm, falcon, falcon_mamba, fastspeech2_conformer, flaubert, flava, fnet, focalnet, fsmt, funnel, fuyu, gemma, gemma2, git, glm, glpn, got_ocr2, gpt-sw3, gpt2, gpt_bigcode, gpt_neo, gpt_neox, gpt_neox_japanese, gptj, gptsan-japanese, granite, granitemoe, granitemoeshared, granitevision, graphormer, grounding-dino, groupvit, helium, hiera, hubert, ibert, idefics, idefics2, idefics3, idefics3_vision, ijepa, imagegpt, informer, instructblip, instructblipvideo, jamba, jetmoe, jukebox, kosmos-2, layoutlm, layoutlmv2, layoutlmv3, led, levit, lilt, llama, llava, llava_next, llava_next_video, llava_onevision, longformer, longt5, luke, lxmert, m2m_100, mamba, mamba2, marian, markuplm, mask2former, maskformer, maskformer-swin, mbart, mctct, mega, megatron-bert, mgp-str, mimi, mistral, mixtral, mllama, mobilebert, mobilenet_v1, mobilenet_v2, mobilevit, mobilevitv2, modernbert, moonshine, moshi, mpnet, mpt, mra, mt5, musicgen, musicgen_melody, mvp, nat, nemotron, nezha, nllb-moe, nougat, nystromformer, olmo, olmo2, olmoe, omdet-turbo, oneformer, open-llama, openai-gpt, opt, owlv2, owlvit, paligemma, patchtsmixer, patchtst, pegasus, pegasus_x, perceiver, persimmon, phi, phi3, phimoe, pix2struct, pixtral, plbart, poolformer, pop2piano, prophetnet, pvt, pvt_v2, qdqbert, qwen2, qwen2_5_vl, qwen2_audio, qwen2_audio_encoder, qwen2_moe, qwen2_vl, rag, realm, recurrent_gemma, reformer, regnet, rembert, resnet, retribert, roberta, roberta-prelayernorm, roc_bert, roformer, rt_detr, rt_detr_resnet, rt_detr_v2, rwkv, sam, seamless_m4t, seamless_m4t_v2, segformer, seggpt, sew, sew-d, siglip, siglip_vision_model, speech-encoder-decoder, speech_to_text, speech_to_text_2, speecht5, splinter, squeezebert, stablelm, starcoder2, superglue, superpoint, swiftformer, swin, swin2sr, swinv2, switch_transformers, t5, table-transformer, tapas, textnet, time_series_transformer, timesformer, timm_backbone, timm_wrapper, trajectory_transformer, transfo-xl, trocr, tvlt, tvp, udop, umt5, unispeech, unispeech-sat, univnet, upernet, van, video_llava, videomae, vilt, vipllava, vision-encoder-decoder, vision-text-dual-encoder, visual_bert, vit, vit_hybrid, vit_mae, vit_msn, vitdet, vitmatte, vitpose, vitpose_backbone, vits, vivit, wav2vec2, wav2vec2-bert, wav2vec2-conformer, wavlm, whisper, xclip, xglm, xlm, xlm-prophetnet, xlm-roberta, xlm-roberta-xl, xlnet, xmod, yolos, yoso, zamba, zamba2, zoedepth
2025-04-27 13:52:06,905 - app.chat_controller - INFO - Fallback to original prompt: hnh thc.
2025-04-27 13:52:06,905 - app.db - INFO - Getting chat history.
2025-04-27 13:52:06,906 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 13:52:06,912 - app.db - INFO - Successfully retrieved 6 conversation turns
2025-04-27 13:52:06,912 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: hnh thc.
2025-04-27 13:52:06,912 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 13:52:06,980 - app.intent_detector - INFO - Detected intent: ni chuyn phim for input: hnh thc.
2025-04-27 13:52:06,980 - app.langchain - INFO - Selected fallback prompt
2025-04-27 13:52:06,980 - app.langchain - INFO - Detected intent: ni chuyn phim | Requires context: False
2025-04-27 13:52:06,980 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 13:52:08,797 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 13:52:08,797 - app.db - INFO - Inserting application logs.
2025-04-27 13:52:08,799 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 13:52:08,802 - app.db - INFO - Successfully inserted application logs.
2025-04-27 13:52:08,804 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti c th gip bn vi iu !  m bo ti cung cp thng tin hu ch nht, bn c th cho ti bit thm mt cht v nhng g bn mun tm hiu v hnh thc khng? Bn c quan tm n trang im, chm sc da hay iu g khc khng?
2025-04-27 13:54:48,565 - app.audio_controller - INFO - Speech: cc em nh.
2025-04-27 13:54:48,580 - app.chat_controller - INFO - User Query: cc em nh.
2025-04-27 13:54:48,580 - app.langchain - INFO - Loading Hugging Face model: ./models/finetuned-model
2025-04-27 13:54:48,580 - app.chat_controller - ERROR - Error while rewriting prompt: Unrecognized model in ./models/finetuned-model. Should have a `model_type` key in its config.json, or contain one of the following strings in its name: albert, align, altclip, aria, aria_text, audio-spectrogram-transformer, autoformer, bamba, bark, bart, beit, bert, bert-generation, big_bird, bigbird_pegasus, biogpt, bit, blenderbot, blenderbot-small, blip, blip-2, bloom, bridgetower, bros, camembert, canine, chameleon, chinese_clip, chinese_clip_vision_model, clap, clip, clip_text_model, clip_vision_model, clipseg, clvp, code_llama, codegen, cohere, cohere2, colpali, conditional_detr, convbert, convnext, convnextv2, cpmant, ctrl, cvt, dab-detr, dac, data2vec-audio, data2vec-text, data2vec-vision, dbrx, deberta, deberta-v2, decision_transformer, deformable_detr, deit, depth_anything, depth_pro, deta, detr, diffllama, dinat, dinov2, dinov2_with_registers, distilbert, donut-swin, dpr, dpt, efficientformer, efficientnet, electra, emu3, encodec, encoder-decoder, ernie, ernie_m, esm, falcon, falcon_mamba, fastspeech2_conformer, flaubert, flava, fnet, focalnet, fsmt, funnel, fuyu, gemma, gemma2, git, glm, glpn, got_ocr2, gpt-sw3, gpt2, gpt_bigcode, gpt_neo, gpt_neox, gpt_neox_japanese, gptj, gptsan-japanese, granite, granitemoe, granitemoeshared, granitevision, graphormer, grounding-dino, groupvit, helium, hiera, hubert, ibert, idefics, idefics2, idefics3, idefics3_vision, ijepa, imagegpt, informer, instructblip, instructblipvideo, jamba, jetmoe, jukebox, kosmos-2, layoutlm, layoutlmv2, layoutlmv3, led, levit, lilt, llama, llava, llava_next, llava_next_video, llava_onevision, longformer, longt5, luke, lxmert, m2m_100, mamba, mamba2, marian, markuplm, mask2former, maskformer, maskformer-swin, mbart, mctct, mega, megatron-bert, mgp-str, mimi, mistral, mixtral, mllama, mobilebert, mobilenet_v1, mobilenet_v2, mobilevit, mobilevitv2, modernbert, moonshine, moshi, mpnet, mpt, mra, mt5, musicgen, musicgen_melody, mvp, nat, nemotron, nezha, nllb-moe, nougat, nystromformer, olmo, olmo2, olmoe, omdet-turbo, oneformer, open-llama, openai-gpt, opt, owlv2, owlvit, paligemma, patchtsmixer, patchtst, pegasus, pegasus_x, perceiver, persimmon, phi, phi3, phimoe, pix2struct, pixtral, plbart, poolformer, pop2piano, prophetnet, pvt, pvt_v2, qdqbert, qwen2, qwen2_5_vl, qwen2_audio, qwen2_audio_encoder, qwen2_moe, qwen2_vl, rag, realm, recurrent_gemma, reformer, regnet, rembert, resnet, retribert, roberta, roberta-prelayernorm, roc_bert, roformer, rt_detr, rt_detr_resnet, rt_detr_v2, rwkv, sam, seamless_m4t, seamless_m4t_v2, segformer, seggpt, sew, sew-d, siglip, siglip_vision_model, speech-encoder-decoder, speech_to_text, speech_to_text_2, speecht5, splinter, squeezebert, stablelm, starcoder2, superglue, superpoint, swiftformer, swin, swin2sr, swinv2, switch_transformers, t5, table-transformer, tapas, textnet, time_series_transformer, timesformer, timm_backbone, timm_wrapper, trajectory_transformer, transfo-xl, trocr, tvlt, tvp, udop, umt5, unispeech, unispeech-sat, univnet, upernet, van, video_llava, videomae, vilt, vipllava, vision-encoder-decoder, vision-text-dual-encoder, visual_bert, vit, vit_hybrid, vit_mae, vit_msn, vitdet, vitmatte, vitpose, vitpose_backbone, vits, vivit, wav2vec2, wav2vec2-bert, wav2vec2-conformer, wavlm, whisper, xclip, xglm, xlm, xlm-prophetnet, xlm-roberta, xlm-roberta-xl, xlnet, xmod, yolos, yoso, zamba, zamba2, zoedepth
2025-04-27 13:54:48,581 - app.chat_controller - INFO - Fallback to original prompt: cc em nh.
2025-04-27 13:54:48,581 - app.db - INFO - Getting chat history.
2025-04-27 13:54:48,583 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 13:54:48,587 - app.db - INFO - Successfully retrieved 7 conversation turns
2025-04-27 13:54:48,587 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: cc em nh.
2025-04-27 13:54:48,587 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 13:54:48,680 - app.intent_detector - INFO - Detected intent: cu hi chuyn mn for input: cc em nh.
2025-04-27 13:54:48,681 - app.langchain - INFO - Selected fallback prompt
2025-04-27 13:54:48,681 - app.langchain - INFO - Detected intent: cu hi chuyn mn | Requires context: False
2025-04-27 13:54:48,681 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 13:54:50,559 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 13:54:50,559 - app.db - INFO - Inserting application logs.
2025-04-27 13:54:50,561 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 13:54:50,564 - app.db - INFO - Successfully inserted application logs.
2025-04-27 13:54:50,565 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cho bn!  mnh c th h tr bn tt nht v cc vn  trang im hoc chm sc da, bn c th cho mnh bit bn mun hi v iu g c th hn c khng ? V d nh bn quan tm n loi sn phm no, hoc bn ang gp vn  g v da chng hn?
2025-04-27 13:59:34,901 - app.chat_controller - INFO - User Query:  ch trung.
2025-04-27 13:59:34,901 - app.langchain - INFO - Using Google Gemini model: QueryRewritingModel.GEMINI_2_FLASH
2025-04-27 13:59:34,904 - app.chat_controller - ERROR - Error while rewriting prompt: Invalid input type <class 'dict'>. Must be a PromptValue, str, or list of BaseMessages.
2025-04-27 13:59:34,904 - app.chat_controller - INFO - Fallback to original prompt:  ch trung.
2025-04-27 13:59:34,904 - app.db - INFO - Getting chat history.
2025-04-27 13:59:34,906 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 13:59:34,911 - app.db - INFO - Successfully retrieved 8 conversation turns
2025-04-27 13:59:34,912 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input:  ch trung.
2025-04-27 13:59:34,912 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 13:59:35,000 - app.intent_detector - INFO - Detected intent: ni chuyn phim for input:  ch trung.
2025-04-27 13:59:35,000 - app.langchain - INFO - Selected fallback prompt
2025-04-27 13:59:35,001 - app.langchain - INFO - Detected intent: ni chuyn phim | Requires context: False
2025-04-27 13:59:35,001 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 13:59:36,322 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 13:59:36,322 - app.db - INFO - Inserting application logs.
2025-04-27 13:59:36,323 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 13:59:36,326 - app.db - INFO - Successfully inserted application logs.
2025-04-27 13:59:36,326 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cho bn!  c th gip bn tt nht, bn c th cho mnh bit bn mun hi g v trang im hoc chm sc da khng ? V d nh bn mun bit v sn phm no, cch trang im ra sao, hay c vn  g v da cn c t vn khng? Mnh rt vui c h tr bn!
2025-04-27 13:59:43,012 - app.audio_controller - INFO - Speech: xin chn.
2025-04-27 13:59:43,019 - app.chat_controller - INFO - User Query: xin chn.
2025-04-27 13:59:43,019 - app.langchain - INFO - Using Google Gemini model: QueryRewritingModel.GEMINI_2_FLASH
2025-04-27 13:59:43,020 - app.chat_controller - ERROR - Error while rewriting prompt: Invalid input type <class 'dict'>. Must be a PromptValue, str, or list of BaseMessages.
2025-04-27 13:59:43,021 - app.chat_controller - INFO - Fallback to original prompt: xin chn.
2025-04-27 13:59:43,021 - app.db - INFO - Getting chat history.
2025-04-27 13:59:43,023 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 13:59:43,027 - app.db - INFO - Successfully retrieved 9 conversation turns
2025-04-27 13:59:43,027 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: xin chn.
2025-04-27 13:59:43,027 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 13:59:43,104 - app.intent_detector - INFO - Detected intent: ni chuyn phim for input: xin chn.
2025-04-27 13:59:43,105 - app.langchain - INFO - Selected fallback prompt
2025-04-27 13:59:43,105 - app.langchain - INFO - Detected intent: ni chuyn phim | Requires context: False
2025-04-27 13:59:43,105 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 13:59:44,198 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 13:59:44,198 - app.db - INFO - Inserting application logs.
2025-04-27 13:59:44,200 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 13:59:44,203 - app.db - INFO - Successfully inserted application logs.
2025-04-27 13:59:44,204 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti rt vui c gip bn! Bn c th cho ti bit thm mt cht v nhng g bn mun ti chn khng? Bn c quan tm n trang im, chm sc da, hay mt ch  khc? Nu  l trang im hoc chm sc da, bn c th cho ti bit thm v loi sn phm, mi quan tm hoc mc tiu ca bn khng? Cng c nhiu thng tin, ti cng c th a ra cc  xut ph hp hn.
2025-04-27 13:59:52,158 - app.audio_controller - INFO - Speech: c  xin cho.
2025-04-27 13:59:52,164 - app.chat_controller - INFO - User Query: c  xin cho.
2025-04-27 13:59:52,164 - app.langchain - INFO - Using Google Gemini model: QueryRewritingModel.GEMINI_2_FLASH
2025-04-27 13:59:52,166 - app.chat_controller - ERROR - Error while rewriting prompt: Invalid input type <class 'dict'>. Must be a PromptValue, str, or list of BaseMessages.
2025-04-27 13:59:52,166 - app.chat_controller - INFO - Fallback to original prompt: c  xin cho.
2025-04-27 13:59:52,166 - app.db - INFO - Getting chat history.
2025-04-27 13:59:52,168 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 13:59:52,173 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 13:59:52,174 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: c  xin cho.
2025-04-27 13:59:52,174 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 13:59:52,251 - app.intent_detector - INFO - Detected intent: ni chuyn phim for input: c  xin cho.
2025-04-27 13:59:52,251 - app.langchain - INFO - Selected fallback prompt
2025-04-27 13:59:52,251 - app.langchain - INFO - Detected intent: ni chuyn phim | Requires context: False
2025-04-27 13:59:52,252 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 13:59:53,188 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 13:59:53,188 - app.db - INFO - Inserting application logs.
2025-04-27 13:59:53,190 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 13:59:53,193 - app.db - INFO - Successfully inserted application logs.
2025-04-27 13:59:53,194 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Xin cho! Ti c th gip g cho bn hm nay? Bn c cu hi no v trang im hoc chm sc da m ti c th gip bn khng? Nu bn c th cho ti bit thm mt cht v nhng g bn ang tm kim, ti s c gng ht sc  cung cp cho bn thng tin hu ch.
2025-04-27 14:01:23,853 - app.chat_controller - INFO - User Query:  ch trung.
2025-04-27 14:01:23,853 - app.langchain - INFO - Using Google Gemini model: QueryRewritingModel.GEMINI_2_FLASH
2025-04-27 14:01:23,855 - app.chat_controller - ERROR - Error while rewriting prompt: Invalid input type <class 'dict'>. Must be a PromptValue, str, or list of BaseMessages.
2025-04-27 14:01:23,856 - app.chat_controller - INFO - Fallback to original prompt:  ch trung.
2025-04-27 14:01:23,856 - app.db - INFO - Getting chat history.
2025-04-27 14:01:23,857 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:01:23,866 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 14:01:23,867 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input:  ch trung.
2025-04-27 14:01:23,867 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 14:01:23,950 - app.intent_detector - INFO - Detected intent: ni chuyn phim for input:  ch trung.
2025-04-27 14:01:23,950 - app.langchain - INFO - Selected fallback prompt
2025-04-27 14:01:23,950 - app.langchain - INFO - Detected intent: ni chuyn phim | Requires context: False
2025-04-27 14:01:23,950 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 14:01:25,046 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 14:01:25,046 - app.db - INFO - Inserting application logs.
2025-04-27 14:01:25,048 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:01:25,051 - app.db - INFO - Successfully inserted application logs.
2025-04-27 14:01:25,051 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cho bn!  c th gip bn tt nht, bn c th cho mnh bit bn mun hi g v trang im hoc chm sc da khng ? V d nh bn ang quan tm n sn phm no, mun tm hiu v k thut trang im no, hay c vn  g v da cn c t vn khng? Mnh rt sn lng h tr bn!
2025-04-27 14:01:31,165 - app.audio_controller - INFO - Speech: .
2025-04-27 14:01:31,171 - app.chat_controller - INFO - User Query: .
2025-04-27 14:01:31,172 - app.langchain - INFO - Using Google Gemini model: QueryRewritingModel.GEMINI_2_FLASH
2025-04-27 14:01:31,173 - app.chat_controller - ERROR - Error while rewriting prompt: Invalid input type <class 'dict'>. Must be a PromptValue, str, or list of BaseMessages.
2025-04-27 14:01:31,173 - app.chat_controller - INFO - Fallback to original prompt: .
2025-04-27 14:01:31,173 - app.db - INFO - Getting chat history.
2025-04-27 14:01:31,174 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:01:31,179 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 14:01:31,180 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: .
2025-04-27 14:01:31,180 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 14:01:31,228 - app.intent_detector - INFO - Detected intent: ni chuyn phim for input: .
2025-04-27 14:01:31,229 - app.langchain - INFO - Selected fallback prompt
2025-04-27 14:01:31,229 - app.langchain - INFO - Detected intent: ni chuyn phim | Requires context: False
2025-04-27 14:01:31,229 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 14:01:33,230 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 14:01:33,230 - app.db - INFO - Inserting application logs.
2025-04-27 14:01:33,232 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:01:33,235 - app.db - INFO - Successfully inserted application logs.
2025-04-27 14:01:33,237 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cho bn!  c th gip bn tt nht v trang im hoc chm sc da, bn c th cho mnh bit bn ang quan tm n iu g c th khng? V d nh bn mun hi v sn phm no, k thut trang im no, hay vn  da no bn ang gp phi? Cng c nhiu thng tin, mnh cng c th a ra li khuyn hu ch hn!
2025-04-27 14:02:45,240 - app.audio_controller - INFO - Speech: hc ti v sao.
2025-04-27 14:02:45,247 - app.chat_controller - INFO - User Query: hc ti v sao.
2025-04-27 14:02:45,247 - app.langchain - INFO - Using Google Gemini model: QueryRewritingModel.GEMINI_2_FLASH
2025-04-27 14:02:45,248 - app.chat_controller - ERROR - Error while rewriting prompt: Invalid input type <class 'dict'>. Must be a PromptValue, str, or list of BaseMessages.
2025-04-27 14:02:45,248 - app.chat_controller - INFO - Fallback to original prompt: hc ti v sao.
2025-04-27 14:02:45,248 - app.db - INFO - Getting chat history.
2025-04-27 14:02:45,249 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:02:45,254 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 14:02:45,254 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: hc ti v sao.
2025-04-27 14:02:45,254 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 14:02:45,328 - app.intent_detector - INFO - Detected intent: ni chuyn phim for input: hc ti v sao.
2025-04-27 14:02:45,328 - app.langchain - INFO - Selected fallback prompt
2025-04-27 14:02:45,328 - app.langchain - INFO - Detected intent: ni chuyn phim | Requires context: False
2025-04-27 14:02:45,329 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 14:02:46,184 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 14:02:46,185 - app.db - INFO - Inserting application logs.
2025-04-27 14:02:46,186 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:02:46,190 - app.db - INFO - Successfully inserted application logs.
2025-04-27 14:02:46,191 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti xin li, ti khng hiu cu hi ca bn. Bn c th cho ti bit bn mun bit thm v trang im hoc chm sc da khng?
2025-04-27 14:03:10,896 - app.audio_controller - INFO - Speech: ln chi tr.
2025-04-27 14:03:10,910 - app.chat_controller - INFO - User Query: ln chi tr.
2025-04-27 14:03:10,910 - app.chat_controller - ERROR - Error while rewriting prompt: 'str' object has no attribute 'value'
2025-04-27 14:03:10,910 - app.chat_controller - INFO - Fallback to original prompt: ln chi tr.
2025-04-27 14:03:10,910 - app.db - INFO - Getting chat history.
2025-04-27 14:03:10,912 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:03:10,917 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 14:03:10,917 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: ln chi tr.
2025-04-27 14:03:10,917 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 14:03:11,009 - app.intent_detector - INFO - Detected intent: phn hi for input: ln chi tr.
2025-04-27 14:03:11,009 - app.langchain - INFO - Selected fallback prompt
2025-04-27 14:03:11,009 - app.langchain - INFO - Detected intent: phn hi | Requires context: False
2025-04-27 14:03:11,010 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 14:03:12,723 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 14:03:12,723 - app.db - INFO - Inserting application logs.
2025-04-27 14:03:12,725 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:03:12,728 - app.db - INFO - Successfully inserted application logs.
2025-04-27 14:03:12,729 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti xin li, ti khng hiu r cu hi ca bn. Bn c th cho ti bit thm v nhng g bn ang hi khng? V d, bn c th cho ti bit bn ang hi v trang im hay chm sc da?
2025-04-27 14:04:26,555 - app.chat_controller - INFO - User Query: yu cu vit.
2025-04-27 14:04:26,556 - app.chat_controller - ERROR - Error while rewriting prompt: 'str' object has no attribute 'value'
2025-04-27 14:04:26,556 - app.chat_controller - INFO - Fallback to original prompt: yu cu vit.
2025-04-27 14:04:26,556 - app.db - INFO - Getting chat history.
2025-04-27 14:04:26,559 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:04:26,563 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 14:04:26,564 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: yu cu vit.
2025-04-27 14:04:26,564 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 14:04:26,660 - app.intent_detector - INFO - Detected intent: cu hi chuyn mn for input: yu cu vit.
2025-04-27 14:04:26,660 - app.langchain - INFO - Selected fallback prompt
2025-04-27 14:04:26,660 - app.langchain - INFO - Detected intent: cu hi chuyn mn | Requires context: False
2025-04-27 14:04:26,661 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 14:04:28,350 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 14:04:28,350 - app.db - INFO - Inserting application logs.
2025-04-27 14:04:28,351 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:04:28,354 - app.db - INFO - Successfully inserted application logs.
2025-04-27 14:04:28,355 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cho bn!  ti c th gip bn tt nht v cc ch  trang im hoc chm sc da, bn c th cho ti bit c th hn bn mun hi v iu g khng? V d nh bn mun bit v:

*   **Sn phm c th:** Bn ang tm kim loi kem chng nng no, hay mun bit v mt loi son mi ra mt?
*   **K thut trang im:** Bn mun hc cch nh mt khi, hay che qung thm mt hiu qu?
*   **Vn  v da:** Bn ang gp vn  v mn, da kh, hay mun tm cch lm sng da?

Cng c nhiu thng tin, ti cng c th a ra nhng gi  v li khuyn hu ch cho bn.
2025-04-27 14:05:46,166 - app.audio_controller - INFO - Speech: xin cho.
2025-04-27 14:05:46,180 - app.chat_controller - INFO - User Query: xin cho.
2025-04-27 14:05:46,180 - app.chat_controller - ERROR - Error while rewriting prompt: 'str' object has no attribute 'value'
2025-04-27 14:05:46,180 - app.chat_controller - INFO - Fallback to original prompt: xin cho.
2025-04-27 14:05:46,180 - app.db - INFO - Getting chat history.
2025-04-27 14:05:46,182 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:05:46,186 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 14:05:46,186 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: xin cho.
2025-04-27 14:05:46,186 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 14:05:46,262 - app.intent_detector - INFO - Detected intent: phn hi for input: xin cho.
2025-04-27 14:05:46,262 - app.langchain - INFO - Selected fallback prompt
2025-04-27 14:05:46,262 - app.langchain - INFO - Detected intent: phn hi | Requires context: False
2025-04-27 14:05:46,263 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 14:05:47,385 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 14:05:47,385 - app.db - INFO - Inserting application logs.
2025-04-27 14:05:47,386 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:05:47,389 - app.db - INFO - Successfully inserted application logs.
2025-04-27 14:05:47,390 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cho bn! Mnh c th gip g cho bn v trang im hoc chm sc da khng? Nu bn c th cho mnh bit bn ang quan tm n iu g, mnh s c gng ht sc  h tr bn. V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im mi hoc cch gii quyt mt vn  v da.
2025-04-27 14:06:54,961 - app.audio_controller - INFO - Speech: xin cho xin cho xin cho.
2025-04-27 14:06:54,974 - app.chat_controller - INFO - User Query: xin cho xin cho xin cho.
2025-04-27 14:06:54,974 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 14:06:54,974 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 14:06:54,976 - app.chat_controller - ERROR - Error while rewriting prompt: Invalid input type <class 'dict'>. Must be a PromptValue, str, or list of BaseMessages.
2025-04-27 14:06:54,976 - app.chat_controller - INFO - Fallback to original prompt: xin cho xin cho xin cho.
2025-04-27 14:06:54,976 - app.db - INFO - Getting chat history.
2025-04-27 14:06:54,978 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:06:54,983 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 14:06:54,983 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: xin cho xin cho xin cho.
2025-04-27 14:06:54,983 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 14:06:55,072 - app.intent_detector - INFO - Detected intent: cu hi chuyn mn for input: xin cho xin cho xin cho.
2025-04-27 14:06:55,072 - app.langchain - INFO - Selected fallback prompt
2025-04-27 14:06:55,073 - app.langchain - INFO - Detected intent: cu hi chuyn mn | Requires context: False
2025-04-27 14:06:55,073 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 14:06:56,083 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 14:06:56,083 - app.db - INFO - Inserting application logs.
2025-04-27 14:06:56,084 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:06:56,087 - app.db - INFO - Successfully inserted application logs.
2025-04-27 14:06:56,088 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Xin cho! Ti c th gip g cho bn v trang im hoc chm sc da khng? Vui lng cho ti bit bn c cu hi hoc ch  c th no bn mun ti h tr  ti c th cung cp cho bn nhng thng tin tt nht.
2025-04-27 14:10:36,255 - app.audio_controller - INFO - Speech: nm xin cho xin cho xin cho xin cho.
2025-04-27 14:10:36,269 - app.chat_controller - INFO - User Query: nm xin cho xin cho xin cho xin cho.
2025-04-27 14:10:36,269 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 14:10:36,269 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 14:10:36,272 - app.langchain - INFO - Prompt for rewritin: Please rewrite this prompt to make it clearer and more accurate: nm xin cho xin cho xin cho xin cho.
2025-04-27 14:10:36,272 - app.chat_controller - ERROR - Error while rewriting prompt: Invalid input type <class 'dict'>. Must be a PromptValue, str, or list of BaseMessages.
2025-04-27 14:10:36,272 - app.chat_controller - INFO - Fallback to original prompt: nm xin cho xin cho xin cho xin cho.
2025-04-27 14:10:36,272 - app.db - INFO - Getting chat history.
2025-04-27 14:10:36,274 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:10:36,279 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 14:10:36,279 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: nm xin cho xin cho xin cho xin cho.
2025-04-27 14:10:36,279 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 14:10:36,397 - app.intent_detector - INFO - Detected intent: khng lin quan for input: nm xin cho xin cho xin cho xin cho.
2025-04-27 14:10:36,397 - app.langchain - INFO - Selected fallback prompt
2025-04-27 14:10:36,398 - app.langchain - INFO - Detected intent: khng lin quan | Requires context: False
2025-04-27 14:10:36,398 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 14:10:37,167 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 14:10:37,167 - app.db - INFO - Inserting application logs.
2025-04-27 14:10:37,168 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:10:37,172 - app.db - INFO - Successfully inserted application logs.
2025-04-27 14:10:37,174 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Xin cho! Ti c th gip g cho bn v trang im hoc chm sc da khng? Bn c th cho ti bit bn mun bit thm v iu g khng?
2025-04-27 14:12:17,233 - app.audio_controller - INFO - Speech: h xin cho.
2025-04-27 14:12:17,250 - app.chat_controller - INFO - User Query: h xin cho.
2025-04-27 14:12:17,250 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 14:12:17,250 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 14:12:17,253 - app.langchain - INFO - Prompt for rewritin: Please rewrite this prompt to make it clearer and more accurate: h xin cho.
2025-04-27 14:12:19,499 - app.langchain - INFO - Rewritten prompt: content='The original prompt "h xin cho" appears to be Vietnamese. It\'s unclear what action the user wants to be performed on this phrase. Here are a few possible interpretations and corresponding rewritten prompts, depending on the intended goal:\n\n**1.  If the user wants to know the meaning of the phrase:**\n\n*   **Rewritten Prompt:** "What does \'h xin cho\' mean in English?"\n*   **Rewritten Prompt:** "Translate \'h xin cho\' from Vietnamese to English."\n*   **Rewritten Prompt:** "Can you explain the meaning of the Vietnamese phrase \'h xin cho\'?"\n\n**2. If the user wants to know if it\'s a proper greeting:**\n\n*   **Rewritten Prompt:** "Is \'h xin cho\' a common or polite way to say hello in Vietnamese?"\n*   **Rewritten Prompt:** "How appropriate is the Vietnamese phrase \'h xin cho\' as a greeting?"\n\n**3. If the user wants to know the individual meanings of the words:**\n\n*   **Rewritten Prompt:** "What does \'h\' mean in Vietnamese?"\n*   **Rewritten Prompt:** "What does \'xin cho\' mean in Vietnamese?"\n\n**4. If the user wants to know the correct spelling or pronunciation:**\n\n*   **Rewritten Prompt:** "Is the spelling \'h xin cho\' correct?"\n*   **Rewritten Prompt:** "How do you pronounce \'h xin cho\' in Vietnamese?"\n\n**In summary, the best rewritten prompt depends on the user\'s underlying intention.  More context would be helpful to provide the most accurate and clear prompt.**' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-dcbe8df6-544f-4232-8962-1c20d7da00cd-0' usage_metadata={'input_tokens': 17, 'output_tokens': 348, 'total_tokens': 365, 'input_token_details': {'cache_read': 0}}
2025-04-27 14:12:19,500 - app.chat_controller - INFO - Rewritten Prompt: content='The original prompt "h xin cho" appears to be Vietnamese. It\'s unclear what action the user wants to be performed on this phrase. Here are a few possible interpretations and corresponding rewritten prompts, depending on the intended goal:\n\n**1.  If the user wants to know the meaning of the phrase:**\n\n*   **Rewritten Prompt:** "What does \'h xin cho\' mean in English?"\n*   **Rewritten Prompt:** "Translate \'h xin cho\' from Vietnamese to English."\n*   **Rewritten Prompt:** "Can you explain the meaning of the Vietnamese phrase \'h xin cho\'?"\n\n**2. If the user wants to know if it\'s a proper greeting:**\n\n*   **Rewritten Prompt:** "Is \'h xin cho\' a common or polite way to say hello in Vietnamese?"\n*   **Rewritten Prompt:** "How appropriate is the Vietnamese phrase \'h xin cho\' as a greeting?"\n\n**3. If the user wants to know the individual meanings of the words:**\n\n*   **Rewritten Prompt:** "What does \'h\' mean in Vietnamese?"\n*   **Rewritten Prompt:** "What does \'xin cho\' mean in Vietnamese?"\n\n**4. If the user wants to know the correct spelling or pronunciation:**\n\n*   **Rewritten Prompt:** "Is the spelling \'h xin cho\' correct?"\n*   **Rewritten Prompt:** "How do you pronounce \'h xin cho\' in Vietnamese?"\n\n**In summary, the best rewritten prompt depends on the user\'s underlying intention.  More context would be helpful to provide the most accurate and clear prompt.**' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-dcbe8df6-544f-4232-8962-1c20d7da00cd-0' usage_metadata={'input_tokens': 17, 'output_tokens': 348, 'total_tokens': 365, 'input_token_details': {'cache_read': 0}}
2025-04-27 14:12:19,500 - app.db - INFO - Getting chat history.
2025-04-27 14:12:19,502 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:12:19,506 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 14:12:19,506 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: content='The original prompt "h xin cho" appears to be Vietnamese. It\'s unclear what action the user wants to be performed on this phrase. Here are a few possible interpretations and corresponding rewritten prompts, depending on the intended goal:\n\n**1.  If the user wants to know the meaning of the phrase:**\n\n*   **Rewritten Prompt:** "What does \'h xin cho\' mean in English?"\n*   **Rewritten Prompt:** "Translate \'h xin cho\' from Vietnamese to English."\n*   **Rewritten Prompt:** "Can you explain the meaning of the Vietnamese phrase \'h xin cho\'?"\n\n**2. If the user wants to know if it\'s a proper greeting:**\n\n*   **Rewritten Prompt:** "Is \'h xin cho\' a common or polite way to say hello in Vietnamese?"\n*   **Rewritten Prompt:** "How appropriate is the Vietnamese phrase \'h xin cho\' as a greeting?"\n\n**3. If the user wants to know the individual meanings of the words:**\n\n*   **Rewritten Prompt:** "What does \'h\' mean in Vietnamese?"\n*   **Rewritten Prompt:** "What does \'xin cho\' mean in Vietnamese?"\n\n**4. If the user wants to know the correct spelling or pronunciation:**\n\n*   **Rewritten Prompt:** "Is the spelling \'h xin cho\' correct?"\n*   **Rewritten Prompt:** "How do you pronounce \'h xin cho\' in Vietnamese?"\n\n**In summary, the best rewritten prompt depends on the user\'s underlying intention.  More context would be helpful to provide the most accurate and clear prompt.**' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-dcbe8df6-544f-4232-8962-1c20d7da00cd-0' usage_metadata={'input_tokens': 17, 'output_tokens': 348, 'total_tokens': 365, 'input_token_details': {'cache_read': 0}}
2025-04-27 14:12:19,506 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 14:14:19,851 - app.audio_controller - INFO - Speech: i xin cho xin cho xin cho.
2025-04-27 14:14:19,863 - app.chat_controller - INFO - User Query: i xin cho xin cho xin cho.
2025-04-27 14:14:19,863 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 14:14:19,864 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 14:14:19,866 - app.langchain - INFO - Prompt for rewritin: Please rewrite this prompt to make it clearer and more accurate: i xin cho xin cho xin cho.
2025-04-27 14:14:22,119 - app.langchain - INFO - Rewritten prompt: content='Here are a few ways to rewrite "i xin cho xin cho xin cho," depending on the intended meaning and context:\n\n**Options focusing on the act of greeting repeatedly:**\n\n*   **Going to say hello repeatedly.** (Simple and direct)\n*   **Going to greet everyone enthusiastically.** (Emphasizes enthusiasm)\n*   **Heading out to greet people with a lot of hellos.** (More descriptive)\n*   **Going to greet, greet, and greet!** (Maintains the repetition, adds excitement)\n\n**Options focusing on the purpose of going somewhere:**\n\n*   **Going to greet people.** (If the repeated greeting isn\'t the main point)\n*   **Heading out to say hello.** (Similar to above)\n\n**Important Considerations:**\n\n*   **Context:** The best rewrite depends heavily on the situation.  Knowing *who* is greeting *whom* and *why* would help narrow it down further.\n*   **Tone:** The original phrase sounds quite repetitive, perhaps playful or even a little frantic. The rewrite should try to capture that tone if it\'s important.\n*   **"i"**: The word "i" in Vietnamese implies movement or going somewhere. The rewrite should reflect this.\n\n**Example using context:**\n\nIf the person is going to a party and is known for being very friendly:\n\n*   **Going to the party to say hello to everyone!**\n\nUltimately, the clearest and most accurate rewrite will depend on providing more context about the situation.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-f80d64a9-f86a-4f00-81a6-c58c418fc943-0' usage_metadata={'input_tokens': 20, 'output_tokens': 318, 'total_tokens': 338, 'input_token_details': {'cache_read': 0}}
2025-04-27 14:14:22,119 - app.chat_controller - INFO - Rewritten Prompt: Here are a few ways to rewrite "i xin cho xin cho xin cho," depending on the intended meaning and context:

**Options focusing on the act of greeting repeatedly:**

*   **Going to say hello repeatedly.** (Simple and direct)
*   **Going to greet everyone enthusiastically.** (Emphasizes enthusiasm)
*   **Heading out to greet people with a lot of hellos.** (More descriptive)
*   **Going to greet, greet, and greet!** (Maintains the repetition, adds excitement)

**Options focusing on the purpose of going somewhere:**

*   **Going to greet people.** (If the repeated greeting isn't the main point)
*   **Heading out to say hello.** (Similar to above)

**Important Considerations:**

*   **Context:** The best rewrite depends heavily on the situation.  Knowing *who* is greeting *whom* and *why* would help narrow it down further.
*   **Tone:** The original phrase sounds quite repetitive, perhaps playful or even a little frantic. The rewrite should try to capture that tone if it's important.
*   **"i"**: The word "i" in Vietnamese implies movement or going somewhere. The rewrite should reflect this.

**Example using context:**

If the person is going to a party and is known for being very friendly:

*   **Going to the party to say hello to everyone!**

Ultimately, the clearest and most accurate rewrite will depend on providing more context about the situation.
2025-04-27 14:14:22,119 - app.db - INFO - Getting chat history.
2025-04-27 14:14:22,122 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:14:22,127 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 14:14:22,127 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Here are a few ways to rewrite "i xin cho xin cho xin cho," depending on the intended meaning and context:

**Options focusing on the act of greeting repeatedly:**

*   **Going to say hello repeatedly.** (Simple and direct)
*   **Going to greet everyone enthusiastically.** (Emphasizes enthusiasm)
*   **Heading out to greet people with a lot of hellos.** (More descriptive)
*   **Going to greet, greet, and greet!** (Maintains the repetition, adds excitement)

**Options focusing on the purpose of going somewhere:**

*   **Going to greet people.** (If the repeated greeting isn't the main point)
*   **Heading out to say hello.** (Similar to above)

**Important Considerations:**

*   **Context:** The best rewrite depends heavily on the situation.  Knowing *who* is greeting *whom* and *why* would help narrow it down further.
*   **Tone:** The original phrase sounds quite repetitive, perhaps playful or even a little frantic. The rewrite should try to capture that tone if it's important.
*   **"i"**: The word "i" in Vietnamese implies movement or going somewhere. The rewrite should reflect this.

**Example using context:**

If the person is going to a party and is known for being very friendly:

*   **Going to the party to say hello to everyone!**

Ultimately, the clearest and most accurate rewrite will depend on providing more context about the situation.
2025-04-27 14:14:22,127 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 14:14:22,569 - app.intent_detector - INFO - Detected intent: cm n for input: Here are a few ways to rewrite "i xin cho xin cho xin cho," depending on the intended meaning and context:

**Options focusing on the act of greeting repeatedly:**

*   **Going to say hello repeatedly.** (Simple and direct)
*   **Going to greet everyone enthusiastically.** (Emphasizes enthusiasm)
*   **Heading out to greet people with a lot of hellos.** (More descriptive)
*   **Going to greet, greet, and greet!** (Maintains the repetition, adds excitement)

**Options focusing on the purpose of going somewhere:**

*   **Going to greet people.** (If the repeated greeting isn't the main point)
*   **Heading out to say hello.** (Similar to above)

**Important Considerations:**

*   **Context:** The best rewrite depends heavily on the situation.  Knowing *who* is greeting *whom* and *why* would help narrow it down further.
*   **Tone:** The original phrase sounds quite repetitive, perhaps playful or even a little frantic. The rewrite should try to capture that tone if it's important.
*   **"i"**: The word "i" in Vietnamese implies movement or going somewhere. The rewrite should reflect this.

**Example using context:**

If the person is going to a party and is known for being very friendly:

*   **Going to the party to say hello to everyone!**

Ultimately, the clearest and most accurate rewrite will depend on providing more context about the situation.
2025-04-27 14:14:22,569 - app.langchain - INFO - Selected fallback prompt
2025-04-27 14:14:22,569 - app.langchain - INFO - Detected intent: cm n | Requires context: False
2025-04-27 14:14:22,570 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 14:14:25,045 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 14:14:25,045 - app.db - INFO - Inserting application logs.
2025-04-27 14:14:25,046 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:14:25,049 - app.db - INFO - Successfully inserted application logs.
2025-04-27 14:14:25,050 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cu hi ca bn rt hay!  ti c th gip bn tt nht c th v cc ch  trang im hoc chm sc da, bn c th vui lng cho ti bit thm chi tit v nhng g bn mun bit khng? V d, bn c th cho ti bit:

*   Bn quan tm n loi sn phm trang im hoc chm sc da c th no?
*   Bn mun bit v k thut trang im no?
*   Bn c loi da no (v d: da du, da kh, da hn hp)?
*   Bn c bt k vn  c th no v da m bn mun gii quyt (v d: mn trng c, np nhn, da khng u mu)?

Khi ti c thm thng tin, ti c th cung cp cho bn nhng li khuyn v thng tin chi tit hn.
2025-04-27 14:19:21,850 - app.audio_controller - INFO - Speech: du ch phin ch phi.
2025-04-27 14:19:21,860 - app.chat_controller - INFO - User Query: du ch phin ch phi.
2025-04-27 14:19:21,860 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 14:19:21,860 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 14:19:21,862 - app.langchain - INFO - Prompt for rewritin: Please rewrite this prompt to make it clearer and more accurate: du ch phin ch phi.
2025-04-27 14:19:25,198 - app.langchain - INFO - Rewritten prompt: content='The prompt "du ch phin ch phi" is unclear and likely contains errors. It seems to be attempting to reference Vietnamese market terms, but the words are either misspelled or used in an uncommon way.\n\nHere are a few possible interpretations and corresponding rewrites, depending on the intended meaning:\n\n**Interpretation 1: Referring to a "diu" (carrying pole) used in traditional markets (ch phin).**\n\n*   **Clearer Prompt:** Describe the use of a "diu" (carrying pole) in traditional Vietnamese "ch phin" (periodic markets).\n\n**Interpretation 2: Referring to the experience of calming down after the hustle and bustle of a traditional market (ch phin).**\n\n*   **Clearer Prompt:** Describe the feeling of calmness ("diu") after leaving a busy Vietnamese "ch phin" (periodic market).\n\n**Interpretation 3: "Ch phin" contrasted with something else (perhaps another type of market, but the term "ch phi" is incorrect or missing context).**\n\n*   **Clearer Prompt (requires more information):** "Compare and contrast the atmosphere and offerings of a Vietnamese "ch phin" (periodic market) with [another type of market, e.g., a modern supermarket, a tourist market, etc.].  Replace "[another type of market]" with the intended comparison."\n\n**Explanation of Terms:**\n\n*   **Ch phin:** A periodic market, often held in rural areas of Vietnam, that occurs on specific days of the week or month. They are known for their traditional goods, vibrant atmosphere, and social interactions.\n*   **Du:**  Can mean gentle, soft, calm, or soothing.\n*   **Diu (with an acute accent):** A carrying pole used to balance baskets or goods on either end.\n*   **Ch phi:** This term is not standard Vietnamese and likely contains a mistake or is used in a very specific regional context.\n\n**To provide the best rewrite, please clarify the intended meaning of "du ch phin ch phi."**  What were you trying to ask?' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-107b780b-e188-4268-8db1-1f635e64df74-0' usage_metadata={'input_tokens': 19, 'output_tokens': 440, 'total_tokens': 459, 'input_token_details': {'cache_read': 0}}
2025-04-27 14:19:25,198 - app.chat_controller - INFO - Rewritten Prompt: The prompt "du ch phin ch phi" is unclear and likely contains errors. It seems to be attempting to reference Vietnamese market terms, but the words are either misspelled or used in an uncommon way.

Here are a few possible interpretations and corresponding rewrites, depending on the intended meaning:

**Interpretation 1: Referring to a "diu" (carrying pole) used in traditional markets (ch phin).**

*   **Clearer Prompt:** Describe the use of a "diu" (carrying pole) in traditional Vietnamese "ch phin" (periodic markets).

**Interpretation 2: Referring to the experience of calming down after the hustle and bustle of a traditional market (ch phin).**

*   **Clearer Prompt:** Describe the feeling of calmness ("diu") after leaving a busy Vietnamese "ch phin" (periodic market).

**Interpretation 3: "Ch phin" contrasted with something else (perhaps another type of market, but the term "ch phi" is incorrect or missing context).**

*   **Clearer Prompt (requires more information):** "Compare and contrast the atmosphere and offerings of a Vietnamese "ch phin" (periodic market) with [another type of market, e.g., a modern supermarket, a tourist market, etc.].  Replace "[another type of market]" with the intended comparison."

**Explanation of Terms:**

*   **Ch phin:** A periodic market, often held in rural areas of Vietnam, that occurs on specific days of the week or month. They are known for their traditional goods, vibrant atmosphere, and social interactions.
*   **Du:**  Can mean gentle, soft, calm, or soothing.
*   **Diu (with an acute accent):** A carrying pole used to balance baskets or goods on either end.
*   **Ch phi:** This term is not standard Vietnamese and likely contains a mistake or is used in a very specific regional context.

**To provide the best rewrite, please clarify the intended meaning of "du ch phin ch phi."**  What were you trying to ask?
2025-04-27 14:19:25,198 - app.db - INFO - Getting chat history.
2025-04-27 14:19:25,199 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:19:25,203 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 14:19:25,204 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: The prompt "du ch phin ch phi" is unclear and likely contains errors. It seems to be attempting to reference Vietnamese market terms, but the words are either misspelled or used in an uncommon way.

Here are a few possible interpretations and corresponding rewrites, depending on the intended meaning:

**Interpretation 1: Referring to a "diu" (carrying pole) used in traditional markets (ch phin).**

*   **Clearer Prompt:** Describe the use of a "diu" (carrying pole) in traditional Vietnamese "ch phin" (periodic markets).

**Interpretation 2: Referring to the experience of calming down after the hustle and bustle of a traditional market (ch phin).**

*   **Clearer Prompt:** Describe the feeling of calmness ("diu") after leaving a busy Vietnamese "ch phin" (periodic market).

**Interpretation 3: "Ch phin" contrasted with something else (perhaps another type of market, but the term "ch phi" is incorrect or missing context).**

*   **Clearer Prompt (requires more information):** "Compare and contrast the atmosphere and offerings of a Vietnamese "ch phin" (periodic market) with [another type of market, e.g., a modern supermarket, a tourist market, etc.].  Replace "[another type of market]" with the intended comparison."

**Explanation of Terms:**

*   **Ch phin:** A periodic market, often held in rural areas of Vietnam, that occurs on specific days of the week or month. They are known for their traditional goods, vibrant atmosphere, and social interactions.
*   **Du:**  Can mean gentle, soft, calm, or soothing.
*   **Diu (with an acute accent):** A carrying pole used to balance baskets or goods on either end.
*   **Ch phi:** This term is not standard Vietnamese and likely contains a mistake or is used in a very specific regional context.

**To provide the best rewrite, please clarify the intended meaning of "du ch phin ch phi."**  What were you trying to ask?
2025-04-27 14:19:25,204 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 14:19:25,744 - app.intent_detector - INFO - Detected intent: cm n for input: The prompt "du ch phin ch phi" is unclear and likely contains errors. It seems to be attempting to reference Vietnamese market terms, but the words are either misspelled or used in an uncommon way.

Here are a few possible interpretations and corresponding rewrites, depending on the intended meaning:

**Interpretation 1: Referring to a "diu" (carrying pole) used in traditional markets (ch phin).**

*   **Clearer Prompt:** Describe the use of a "diu" (carrying pole) in traditional Vietnamese "ch phin" (periodic markets).

**Interpretation 2: Referring to the experience of calming down after the hustle and bustle of a traditional market (ch phin).**

*   **Clearer Prompt:** Describe the feeling of calmness ("diu") after leaving a busy Vietnamese "ch phin" (periodic market).

**Interpretation 3: "Ch phin" contrasted with something else (perhaps another type of market, but the term "ch phi" is incorrect or missing context).**

*   **Clearer Prompt (requires more information):** "Compare and contrast the atmosphere and offerings of a Vietnamese "ch phin" (periodic market) with [another type of market, e.g., a modern supermarket, a tourist market, etc.].  Replace "[another type of market]" with the intended comparison."

**Explanation of Terms:**

*   **Ch phin:** A periodic market, often held in rural areas of Vietnam, that occurs on specific days of the week or month. They are known for their traditional goods, vibrant atmosphere, and social interactions.
*   **Du:**  Can mean gentle, soft, calm, or soothing.
*   **Diu (with an acute accent):** A carrying pole used to balance baskets or goods on either end.
*   **Ch phi:** This term is not standard Vietnamese and likely contains a mistake or is used in a very specific regional context.

**To provide the best rewrite, please clarify the intended meaning of "du ch phin ch phi."**  What were you trying to ask?
2025-04-27 14:19:25,744 - app.langchain - INFO - Selected fallback prompt
2025-04-27 14:19:25,744 - app.langchain - INFO - Detected intent: cm n | Requires context: False
2025-04-27 14:19:25,745 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 14:19:26,975 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 14:19:26,975 - app.db - INFO - Inserting application logs.
2025-04-27 14:19:26,977 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 14:19:26,980 - app.db - INFO - Successfully inserted application logs.
2025-04-27 14:19:26,981 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cho bn! Cu hi ca bn hin ti hi kh hiu mt cht. Bn c th lm r hn v  nh ca mnh khi hi v "du ch phin ch phi" c khng? V d, bn mun bit v iu g lin quan n trang im, chm sc da, hay mt ch  no khc m ti c th gip bn? Khi bn cung cp thm thng tin, ti s c gng ht sc  h tr bn.
2025-04-27 15:07:36,275 - app.audio_controller - INFO - Speech: sm mua mt cht tt v tht s.
2025-04-27 15:07:36,286 - app.chat_controller - INFO - User Query: sm mua mt cht tt v tht s.
2025-04-27 15:07:36,287 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 15:07:36,287 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 15:07:36,289 - app.langchain - INFO - Prompt for rewritin: Please rewrite this prompt to make it clearer and more accurate: sm mua mt cht tt v tht s.
2025-04-27 15:07:40,418 - app.langchain - INFO - Rewritten prompt: content='Here are a few ways to rewrite the prompt "sm mua mt cht tt v tht s," depending on the intended meaning:\n\n**Option 1 (Focus on buying something of good quality and genuine):**\n\n* **"Mua sm mt mn  tt v cht lng tht."** (Buy a good and truly quality item soon.)\n* **"Nn mua sm mt th g  tt v chnh hng/tht."** (You should buy something good and genuine soon.)\n\n**Option 2 (Focus on buying something that is both good and authentic, and doing it soon):**\n\n* **"Mua ngay mt mn hng tt v tht i."** (Buy a good and genuine item right away.)\n* **"Nhanh chng mua mt th g  va tt va tht i."** (Quickly buy something that is both good and genuine.)\n\n**Option 3 (Focus on the importance of the item being both good and genuine, and the urgency of buying it):**\n\n* **"Quan trng l phi mua sm mt mn  tt v tht."** (It\'s important to buy a good and genuine item soon.)\n\n**Why these are better:**\n\n* **"Tt" (good) and "tht" (true/genuine) are vague on their own.**  The rewrites add context:\n    *  "Cht lng tht" (truly quality) emphasizes the high quality aspect.\n    *  "Chnh hng" (genuine brand) or "tht" (genuine) in the context of a product emphasizes authenticity and not being counterfeit.\n* **"Mt cht" (a little) is ambiguous.** It could mean a small quantity or a small amount of money. The rewrites use "mn " (item/thing) or "th g " (something) to be more specific.\n* **Word order and phrasing are improved for natural Vietnamese.**\n\n**To choose the best option, consider:**\n\n* **What kind of item are you referring to?** (e.g., a product, a service, information?)\n* **What is the reason for the urgency?**\n* **What is the specific concern about the item being "tht"?** (e.g., avoiding fakes, ensuring reliability?)\n\nBy providing more context, I can give you an even more accurate and clear translation.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-e9987727-c419-4433-92a6-1c3d4e9e0a5d-0' usage_metadata={'input_tokens': 21, 'output_tokens': 493, 'total_tokens': 514, 'input_token_details': {'cache_read': 0}}
2025-04-27 15:07:40,418 - app.chat_controller - INFO - Rewritten Prompt: Here are a few ways to rewrite the prompt "sm mua mt cht tt v tht s," depending on the intended meaning:

**Option 1 (Focus on buying something of good quality and genuine):**

* **"Mua sm mt mn  tt v cht lng tht."** (Buy a good and truly quality item soon.)
* **"Nn mua sm mt th g  tt v chnh hng/tht."** (You should buy something good and genuine soon.)

**Option 2 (Focus on buying something that is both good and authentic, and doing it soon):**

* **"Mua ngay mt mn hng tt v tht i."** (Buy a good and genuine item right away.)
* **"Nhanh chng mua mt th g  va tt va tht i."** (Quickly buy something that is both good and genuine.)

**Option 3 (Focus on the importance of the item being both good and genuine, and the urgency of buying it):**

* **"Quan trng l phi mua sm mt mn  tt v tht."** (It's important to buy a good and genuine item soon.)

**Why these are better:**

* **"Tt" (good) and "tht" (true/genuine) are vague on their own.**  The rewrites add context:
    *  "Cht lng tht" (truly quality) emphasizes the high quality aspect.
    *  "Chnh hng" (genuine brand) or "tht" (genuine) in the context of a product emphasizes authenticity and not being counterfeit.
* **"Mt cht" (a little) is ambiguous.** It could mean a small quantity or a small amount of money. The rewrites use "mn " (item/thing) or "th g " (something) to be more specific.
* **Word order and phrasing are improved for natural Vietnamese.**

**To choose the best option, consider:**

* **What kind of item are you referring to?** (e.g., a product, a service, information?)
* **What is the reason for the urgency?**
* **What is the specific concern about the item being "tht"?** (e.g., avoiding fakes, ensuring reliability?)

By providing more context, I can give you an even more accurate and clear translation.
2025-04-27 15:07:40,418 - app.db - INFO - Getting chat history.
2025-04-27 15:07:40,420 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 15:07:40,424 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 15:07:40,424 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Here are a few ways to rewrite the prompt "sm mua mt cht tt v tht s," depending on the intended meaning:

**Option 1 (Focus on buying something of good quality and genuine):**

* **"Mua sm mt mn  tt v cht lng tht."** (Buy a good and truly quality item soon.)
* **"Nn mua sm mt th g  tt v chnh hng/tht."** (You should buy something good and genuine soon.)

**Option 2 (Focus on buying something that is both good and authentic, and doing it soon):**

* **"Mua ngay mt mn hng tt v tht i."** (Buy a good and genuine item right away.)
* **"Nhanh chng mua mt th g  va tt va tht i."** (Quickly buy something that is both good and genuine.)

**Option 3 (Focus on the importance of the item being both good and genuine, and the urgency of buying it):**

* **"Quan trng l phi mua sm mt mn  tt v tht."** (It's important to buy a good and genuine item soon.)

**Why these are better:**

* **"Tt" (good) and "tht" (true/genuine) are vague on their own.**  The rewrites add context:
    *  "Cht lng tht" (truly quality) emphasizes the high quality aspect.
    *  "Chnh hng" (genuine brand) or "tht" (genuine) in the context of a product emphasizes authenticity and not being counterfeit.
* **"Mt cht" (a little) is ambiguous.** It could mean a small quantity or a small amount of money. The rewrites use "mn " (item/thing) or "th g " (something) to be more specific.
* **Word order and phrasing are improved for natural Vietnamese.**

**To choose the best option, consider:**

* **What kind of item are you referring to?** (e.g., a product, a service, information?)
* **What is the reason for the urgency?**
* **What is the specific concern about the item being "tht"?** (e.g., avoiding fakes, ensuring reliability?)

By providing more context, I can give you an even more accurate and clear translation.
2025-04-27 15:07:40,424 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 15:07:40,998 - app.intent_detector - INFO - Detected intent: cm n for input: Here are a few ways to rewrite the prompt "sm mua mt cht tt v tht s," depending on the intended meaning:

**Option 1 (Focus on buying something of good quality and genuine):**

* **"Mua sm mt mn  tt v cht lng tht."** (Buy a good and truly quality item soon.)
* **"Nn mua sm mt th g  tt v chnh hng/tht."** (You should buy something good and genuine soon.)

**Option 2 (Focus on buying something that is both good and authentic, and doing it soon):**

* **"Mua ngay mt mn hng tt v tht i."** (Buy a good and genuine item right away.)
* **"Nhanh chng mua mt th g  va tt va tht i."** (Quickly buy something that is both good and genuine.)

**Option 3 (Focus on the importance of the item being both good and genuine, and the urgency of buying it):**

* **"Quan trng l phi mua sm mt mn  tt v tht."** (It's important to buy a good and genuine item soon.)

**Why these are better:**

* **"Tt" (good) and "tht" (true/genuine) are vague on their own.**  The rewrites add context:
    *  "Cht lng tht" (truly quality) emphasizes the high quality aspect.
    *  "Chnh hng" (genuine brand) or "tht" (genuine) in the context of a product emphasizes authenticity and not being counterfeit.
* **"Mt cht" (a little) is ambiguous.** It could mean a small quantity or a small amount of money. The rewrites use "mn " (item/thing) or "th g " (something) to be more specific.
* **Word order and phrasing are improved for natural Vietnamese.**

**To choose the best option, consider:**

* **What kind of item are you referring to?** (e.g., a product, a service, information?)
* **What is the reason for the urgency?**
* **What is the specific concern about the item being "tht"?** (e.g., avoiding fakes, ensuring reliability?)

By providing more context, I can give you an even more accurate and clear translation.
2025-04-27 15:07:40,998 - app.langchain - INFO - Selected fallback prompt
2025-04-27 15:07:40,998 - app.langchain - INFO - Detected intent: cm n | Requires context: False
2025-04-27 15:07:40,998 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 15:07:43,425 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 15:07:43,425 - app.db - INFO - Inserting application logs.
2025-04-27 15:07:43,427 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 15:07:43,430 - app.db - INFO - Successfully inserted application logs.
2025-04-27 15:07:43,431 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cho bn!  c th gip bn tt nht v cc ch  trang im hoc chm sc da, bn c th vui lng cho ti bit bn ang quan tm n iu g c th c khng? V d:

*   Bn mun tm hiu v loi sn phm no? (V d: kem chng nng, son mi, kem dng m...)
*   Bn c loi da no? (V d: da du, da kh, da hn hp...)
*   Bn ang gp vn  v da no khng? (V d: mn, nm, tn nhang...)
*   Bn mun c t vn v quy trnh chm sc da no? (V d: quy trnh dng da hng ngy, quy trnh tr mn...)

Khi bn cung cp thm thng tin, ti s c th a ra nhng li khuyn v gi  ph hp nht vi bn. Rt mong nhn c phn hi t bn!
2025-04-27 15:11:00,286 - app.audio_controller - INFO - Speech:  ch cho.
2025-04-27 15:11:00,294 - app.chat_controller - INFO - User Query:  ch cho.
2025-04-27 15:11:00,294 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 15:11:00,294 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 15:11:00,296 - app.langchain - INFO - Prompt for rewritin: Please rewrite this prompt to make it clearer and more accurate:  ch cho.
2025-04-27 15:11:05,244 - app.langchain - INFO - Rewritten prompt: content='The phrase " ch cho" is Vietnamese. To rewrite this prompt to be clearer and more accurate, we need to know the intended context. Here are a few possibilities and clarifications:\n\n**Understanding the Original Phrase:**\n\n*   "" (m) - can mean "yes," "okay," "uh-huh," or an affirmation.\n*   "Ch" - means "uncle" (addressing a male older than oneself, but younger than one\'s parents). It\'s a common polite term of address.\n*   "Cho" - means "to give."\n\nTherefore, " ch cho" generally translates to something like:\n\n*   "Okay, uncle will give [it/something]"\n*   "Yes, uncle is giving [it/something]"\n*   "Uh-huh, uncle gives [it/something]"\n\n**Possible Rewrites Based on Context:**\n\nHere are several ways to rewrite the prompt, depending on what you\'re trying to achieve:\n\n**1. If you want to *understand* the meaning of the phrase:**\n\n*   **Clearer Prompt:** "What does the Vietnamese phrase \' ch cho\' mean in English?"\n*   **More Accurate Prompt:** "Translate the Vietnamese phrase \' ch cho\' into English, considering the context of a younger person speaking to an older male relative (an uncle or someone of that age)."\n\n**2. If you want to *generate text* using the phrase:**\n\n*   **Clearer Prompt:** "Write a short scene where a child is asking their uncle for something, and the uncle responds with \' ch cho\'."\n*   **More Accurate Prompt:** "Create a dialogue between a child and their uncle in Vietnamese. The child asks for a small favor or item. The uncle responds positively and agrees to give it to them, using the phrase \' ch cho\'."\n\n**3. If you want to *analyze* the phrase:**\n\n*   **Clearer Prompt:** "Analyze the grammatical structure and cultural implications of the Vietnamese phrase \' ch cho\'."\n*   **More Accurate Prompt:** "Discuss the politeness and familiarity conveyed by the use of \'ch\' and \'cho\' in the phrase \' ch cho\'. How does this phrase reflect Vietnamese cultural norms regarding age and respect?"\n\n**4. If you want to *correct* the phrase (assuming it\'s incorrect):**\n\n*   **Clearer Prompt:** "Is the Vietnamese phrase \' ch cho\' grammatically correct? If not, what is a more appropriate alternative?"\n*   **More Accurate Prompt:** "Assuming a child is speaking to their uncle and the uncle is agreeing to give them something, is the phrase \' ch cho\' the most natural and grammatically correct way to express that in Vietnamese? If not, suggest alternatives."\n\n**In short, to give you the *best* rewrite, I need to know what you intend to *do* with the phrase.  Please provide more context!**' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-2716182b-6c9c-4ce8-a7d9-87b3d4b50bc3-0' usage_metadata={'input_tokens': 17, 'output_tokens': 624, 'total_tokens': 641, 'input_token_details': {'cache_read': 0}}
2025-04-27 15:11:05,244 - app.chat_controller - INFO - Rewritten Prompt: The phrase " ch cho" is Vietnamese. To rewrite this prompt to be clearer and more accurate, we need to know the intended context. Here are a few possibilities and clarifications:

**Understanding the Original Phrase:**

*   "" (m) - can mean "yes," "okay," "uh-huh," or an affirmation.
*   "Ch" - means "uncle" (addressing a male older than oneself, but younger than one's parents). It's a common polite term of address.
*   "Cho" - means "to give."

Therefore, " ch cho" generally translates to something like:

*   "Okay, uncle will give [it/something]"
*   "Yes, uncle is giving [it/something]"
*   "Uh-huh, uncle gives [it/something]"

**Possible Rewrites Based on Context:**

Here are several ways to rewrite the prompt, depending on what you're trying to achieve:

**1. If you want to *understand* the meaning of the phrase:**

*   **Clearer Prompt:** "What does the Vietnamese phrase ' ch cho' mean in English?"
*   **More Accurate Prompt:** "Translate the Vietnamese phrase ' ch cho' into English, considering the context of a younger person speaking to an older male relative (an uncle or someone of that age)."

**2. If you want to *generate text* using the phrase:**

*   **Clearer Prompt:** "Write a short scene where a child is asking their uncle for something, and the uncle responds with ' ch cho'."
*   **More Accurate Prompt:** "Create a dialogue between a child and their uncle in Vietnamese. The child asks for a small favor or item. The uncle responds positively and agrees to give it to them, using the phrase ' ch cho'."

**3. If you want to *analyze* the phrase:**

*   **Clearer Prompt:** "Analyze the grammatical structure and cultural implications of the Vietnamese phrase ' ch cho'."
*   **More Accurate Prompt:** "Discuss the politeness and familiarity conveyed by the use of 'ch' and 'cho' in the phrase ' ch cho'. How does this phrase reflect Vietnamese cultural norms regarding age and respect?"

**4. If you want to *correct* the phrase (assuming it's incorrect):**

*   **Clearer Prompt:** "Is the Vietnamese phrase ' ch cho' grammatically correct? If not, what is a more appropriate alternative?"
*   **More Accurate Prompt:** "Assuming a child is speaking to their uncle and the uncle is agreeing to give them something, is the phrase ' ch cho' the most natural and grammatically correct way to express that in Vietnamese? If not, suggest alternatives."

**In short, to give you the *best* rewrite, I need to know what you intend to *do* with the phrase.  Please provide more context!**
2025-04-27 15:11:05,244 - app.db - INFO - Getting chat history.
2025-04-27 15:11:05,246 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 15:11:05,253 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 15:11:05,253 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: The phrase " ch cho" is Vietnamese. To rewrite this prompt to be clearer and more accurate, we need to know the intended context. Here are a few possibilities and clarifications:

**Understanding the Original Phrase:**

*   "" (m) - can mean "yes," "okay," "uh-huh," or an affirmation.
*   "Ch" - means "uncle" (addressing a male older than oneself, but younger than one's parents). It's a common polite term of address.
*   "Cho" - means "to give."

Therefore, " ch cho" generally translates to something like:

*   "Okay, uncle will give [it/something]"
*   "Yes, uncle is giving [it/something]"
*   "Uh-huh, uncle gives [it/something]"

**Possible Rewrites Based on Context:**

Here are several ways to rewrite the prompt, depending on what you're trying to achieve:

**1. If you want to *understand* the meaning of the phrase:**

*   **Clearer Prompt:** "What does the Vietnamese phrase ' ch cho' mean in English?"
*   **More Accurate Prompt:** "Translate the Vietnamese phrase ' ch cho' into English, considering the context of a younger person speaking to an older male relative (an uncle or someone of that age)."

**2. If you want to *generate text* using the phrase:**

*   **Clearer Prompt:** "Write a short scene where a child is asking their uncle for something, and the uncle responds with ' ch cho'."
*   **More Accurate Prompt:** "Create a dialogue between a child and their uncle in Vietnamese. The child asks for a small favor or item. The uncle responds positively and agrees to give it to them, using the phrase ' ch cho'."

**3. If you want to *analyze* the phrase:**

*   **Clearer Prompt:** "Analyze the grammatical structure and cultural implications of the Vietnamese phrase ' ch cho'."
*   **More Accurate Prompt:** "Discuss the politeness and familiarity conveyed by the use of 'ch' and 'cho' in the phrase ' ch cho'. How does this phrase reflect Vietnamese cultural norms regarding age and respect?"

**4. If you want to *correct* the phrase (assuming it's incorrect):**

*   **Clearer Prompt:** "Is the Vietnamese phrase ' ch cho' grammatically correct? If not, what is a more appropriate alternative?"
*   **More Accurate Prompt:** "Assuming a child is speaking to their uncle and the uncle is agreeing to give them something, is the phrase ' ch cho' the most natural and grammatically correct way to express that in Vietnamese? If not, suggest alternatives."

**In short, to give you the *best* rewrite, I need to know what you intend to *do* with the phrase.  Please provide more context!**
2025-04-27 15:11:05,253 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 15:11:05,796 - app.intent_detector - INFO - Detected intent: cm n for input: The phrase " ch cho" is Vietnamese. To rewrite this prompt to be clearer and more accurate, we need to know the intended context. Here are a few possibilities and clarifications:

**Understanding the Original Phrase:**

*   "" (m) - can mean "yes," "okay," "uh-huh," or an affirmation.
*   "Ch" - means "uncle" (addressing a male older than oneself, but younger than one's parents). It's a common polite term of address.
*   "Cho" - means "to give."

Therefore, " ch cho" generally translates to something like:

*   "Okay, uncle will give [it/something]"
*   "Yes, uncle is giving [it/something]"
*   "Uh-huh, uncle gives [it/something]"

**Possible Rewrites Based on Context:**

Here are several ways to rewrite the prompt, depending on what you're trying to achieve:

**1. If you want to *understand* the meaning of the phrase:**

*   **Clearer Prompt:** "What does the Vietnamese phrase ' ch cho' mean in English?"
*   **More Accurate Prompt:** "Translate the Vietnamese phrase ' ch cho' into English, considering the context of a younger person speaking to an older male relative (an uncle or someone of that age)."

**2. If you want to *generate text* using the phrase:**

*   **Clearer Prompt:** "Write a short scene where a child is asking their uncle for something, and the uncle responds with ' ch cho'."
*   **More Accurate Prompt:** "Create a dialogue between a child and their uncle in Vietnamese. The child asks for a small favor or item. The uncle responds positively and agrees to give it to them, using the phrase ' ch cho'."

**3. If you want to *analyze* the phrase:**

*   **Clearer Prompt:** "Analyze the grammatical structure and cultural implications of the Vietnamese phrase ' ch cho'."
*   **More Accurate Prompt:** "Discuss the politeness and familiarity conveyed by the use of 'ch' and 'cho' in the phrase ' ch cho'. How does this phrase reflect Vietnamese cultural norms regarding age and respect?"

**4. If you want to *correct* the phrase (assuming it's incorrect):**

*   **Clearer Prompt:** "Is the Vietnamese phrase ' ch cho' grammatically correct? If not, what is a more appropriate alternative?"
*   **More Accurate Prompt:** "Assuming a child is speaking to their uncle and the uncle is agreeing to give them something, is the phrase ' ch cho' the most natural and grammatically correct way to express that in Vietnamese? If not, suggest alternatives."

**In short, to give you the *best* rewrite, I need to know what you intend to *do* with the phrase.  Please provide more context!**
2025-04-27 15:11:05,796 - app.langchain - INFO - Selected fallback prompt
2025-04-27 15:11:05,796 - app.langchain - INFO - Detected intent: cm n | Requires context: False
2025-04-27 15:11:05,796 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 15:11:07,147 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 15:11:07,147 - app.db - INFO - Inserting application logs.
2025-04-27 15:11:07,148 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 15:11:07,150 - app.db - INFO - Successfully inserted application logs.
2025-04-27 15:11:07,151 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cho bn! Cu hi ca bn rt th v.  ti c th gip bn tt nht v cc ch  trang im hoc chm sc da, bn c th cho ti bit c th hn bn mun hi v vn  g khng? V d nh:

*   Bn mun bit v mt sn phm c th no ?
*   Bn mun tm hiu v mt quy trnh chm sc da c th?
*   Hay bn c mt vn  v da cn c t vn?

Cng nhiu thng tin, ti cng c th a ra cu tr li chnh xc v hu ch cho bn. Rt mong nhn c phn hi t bn!
2025-04-27 15:17:30,949 - app.chat_controller - INFO - User Query: th th do.
2025-04-27 15:17:30,949 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 15:17:30,949 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 15:17:30,953 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: th th do.
2025-04-27 15:17:32,391 - app.langchain - INFO - Rewritten prompt: content='Vy th sao?' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-25e277ae-dac4-400b-970b-8dadbba8f3f2-0' usage_metadata={'input_tokens': 205, 'output_tokens': 6, 'total_tokens': 211, 'input_token_details': {'cache_read': 0}}
2025-04-27 15:17:32,391 - app.chat_controller - INFO - Rewritten Prompt: Vy th sao?
2025-04-27 15:17:32,391 - app.db - INFO - Getting chat history.
2025-04-27 15:17:32,393 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 15:17:32,397 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 15:17:32,398 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Vy th sao?
2025-04-27 15:17:32,398 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 15:17:32,501 - app.intent_detector - INFO - Detected intent: cm n for input: Vy th sao?
2025-04-27 15:17:32,502 - app.langchain - INFO - Selected fallback prompt
2025-04-27 15:17:32,502 - app.langchain - INFO - Detected intent: cm n | Requires context: False
2025-04-27 15:17:32,502 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 15:17:34,180 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 15:17:34,180 - app.db - INFO - Inserting application logs.
2025-04-27 15:17:34,182 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 15:17:34,186 - app.db - INFO - Successfully inserted application logs.
2025-04-27 15:17:34,187 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti xin li, ti khng hiu bn ang hi g. Bn c th vui lng cho ti bit bn mun bit thm v iu g khng? Ti c th h tr bn v cc ch  trang im hoc chm sc da.
2025-04-27 15:18:06,496 - app.audio_controller - INFO - Speech: c tho vt h c bit sng l bn l n g ch.
2025-04-27 15:18:06,511 - app.chat_controller - INFO - User Query: c tho vt h c bit sng l bn l n g ch.
2025-04-27 15:18:06,511 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 15:18:06,511 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 15:18:06,512 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: c tho vt h c bit sng l bn l n g ch.
2025-04-27 15:18:08,000 - app.langchain - INFO - Rewritten prompt: content='C tho vt h? C bit sng nay L Bn n g khng?' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-b81dea44-4c53-4a3b-975d-13d5c30921c6-0' usage_metadata={'input_tokens': 215, 'output_tokens': 19, 'total_tokens': 234, 'input_token_details': {'cache_read': 0}}
2025-04-27 15:18:08,000 - app.chat_controller - INFO - Rewritten Prompt: C tho vt h? C bit sng nay L Bn n g khng?
2025-04-27 15:18:08,000 - app.db - INFO - Getting chat history.
2025-04-27 15:18:08,001 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 15:18:08,005 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 15:18:08,006 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: C tho vt h? C bit sng nay L Bn n g khng?
2025-04-27 15:18:08,006 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 15:18:08,111 - app.intent_detector - INFO - Detected intent: phn hi for input: C tho vt h? C bit sng nay L Bn n g khng?
2025-04-27 15:18:08,111 - app.langchain - INFO - Selected fallback prompt
2025-04-27 15:18:08,111 - app.langchain - INFO - Detected intent: phn hi | Requires context: False
2025-04-27 15:18:08,111 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 15:18:09,463 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 15:18:09,463 - app.db - INFO - Inserting application logs.
2025-04-27 15:18:09,465 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 15:18:09,468 - app.db - INFO - Successfully inserted application logs.
2025-04-27 15:18:09,468 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cho bn,

Cm n bn  lin h vi mnh! Mnh rt vui c h tr bn v cc ch  lin quan n tho dc, trang im hoc chm sc da. Tuy nhin, cu hi ca bn c v hi khc so vi nhng g mnh chuyn mn.

 mnh c th gip bn tt hn, bn c th lm r cu hi ca mnh c khng? V d, bn mun bit thng tin g v tho dc? Hoc bn c cu hi no v trang im hoc chm sc da khng?

Rt mong nhn c phn hi t bn  mnh c th h tr bn mt cch tt nht!
2025-04-27 15:18:38,887 - app.audio_controller - INFO - Speech: xin cho ti ln v vit nam.
2025-04-27 15:18:38,894 - app.chat_controller - INFO - User Query: xin cho ti ln v vit nam.
2025-04-27 15:18:38,894 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 15:18:38,894 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 15:18:38,895 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: xin cho ti ln v vit nam.
2025-04-27 15:18:40,359 - app.langchain - INFO - Rewritten prompt: content='Cho, ti mun bit thng tin v ln v Vit Nam.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-702337a8-5dce-4764-bc2b-7a0633ba37bf-0' usage_metadata={'input_tokens': 208, 'output_tokens': 15, 'total_tokens': 223, 'input_token_details': {'cache_read': 0}}
2025-04-27 15:18:40,359 - app.chat_controller - INFO - Rewritten Prompt: Cho, ti mun bit thng tin v ln v Vit Nam.
2025-04-27 15:18:40,359 - app.db - INFO - Getting chat history.
2025-04-27 15:18:40,361 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 15:18:40,376 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 15:18:40,376 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Cho, ti mun bit thng tin v ln v Vit Nam.
2025-04-27 15:18:40,376 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 15:18:40,465 - app.intent_detector - INFO - Detected intent: phn hi for input: Cho, ti mun bit thng tin v ln v Vit Nam.
2025-04-27 15:18:40,465 - app.langchain - INFO - Selected fallback prompt
2025-04-27 15:18:40,465 - app.langchain - INFO - Detected intent: phn hi | Requires context: False
2025-04-27 15:18:40,466 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 15:18:42,698 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 15:18:42,699 - app.db - INFO - Inserting application logs.
2025-04-27 15:18:42,700 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 15:18:42,703 - app.db - INFO - Successfully inserted application logs.
2025-04-27 15:18:42,704 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cho bn!  ti c th cung cp thng tin chnh xc v hu ch nht v cc ch  trang im hoc chm sc da m bn quan tm khi v Vit Nam, bn c th cho ti bit c th hn bn mun bit iu g khng? V d nh:

*   Bn quan tm n sn phm trang im/chm sc da no ca Vit Nam?
*   Bn mun mua sn phm  u?
*   Bn c mun bit v cc xu hng trang im/chm sc da ph bin  Vit Nam hin ti khng?
*   Hay bn mun tm kim cc spa/thm m vin uy tn?

Cng c nhiu thng tin, ti cng c th gip bn tt hn!
2025-04-27 15:21:47,838 - app.chat_controller - INFO - User Query:  ch trung.
2025-04-27 15:21:47,839 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 15:21:47,839 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 15:21:47,843 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User:  ch trung.
2025-04-27 15:21:49,324 - app.langchain - INFO - Rewritten prompt: content=', ch chung.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-6a376fe1-c8a6-43f5-b664-39140f0ddd49-0' usage_metadata={'input_tokens': 205, 'output_tokens': 6, 'total_tokens': 211, 'input_token_details': {'cache_read': 0}}
2025-04-27 15:21:49,325 - app.chat_controller - INFO - Rewritten Prompt: , ch chung.
2025-04-27 15:21:49,325 - app.db - INFO - Getting chat history.
2025-04-27 15:21:49,331 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 15:21:49,335 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 15:21:49,335 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: , ch chung.
2025-04-27 15:21:49,335 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 15:21:49,417 - app.intent_detector - INFO - Detected intent: cho hi for input: , ch chung.
2025-04-27 15:21:49,418 - app.langchain - INFO - Selected fallback prompt
2025-04-27 15:21:49,418 - app.langchain - INFO - Detected intent: cho hi | Requires context: False
2025-04-27 15:21:49,418 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 15:21:50,987 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 15:21:50,987 - app.db - INFO - Inserting application logs.
2025-04-27 15:21:50,988 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 15:21:50,991 - app.db - INFO - Successfully inserted application logs.
2025-04-27 15:21:50,992 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti xin li, ti khng hiu. Bn c th vui lng lm r cu hi ca bn khng? Bn c th hi v trang im hoc chm sc da khng?
2025-04-27 15:22:27,035 - app.audio_controller - INFO - Speech: xin cho ti l ngi vit nam xin li ti khng bit.
2025-04-27 15:22:27,052 - app.chat_controller - INFO - User Query: xin cho ti l ngi vit nam xin li ti khng bit.
2025-04-27 15:22:27,052 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 15:22:27,052 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 15:22:27,071 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: xin cho ti l ngi vit nam xin li ti khng bit.
2025-04-27 15:22:28,630 - app.langchain - INFO - Rewritten prompt: content='Xin cho, ti l ngi Vit Nam. Xin li, ti khng bit.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-b9e329aa-a6fd-4335-8522-22eb58931431-0' usage_metadata={'input_tokens': 213, 'output_tokens': 17, 'total_tokens': 230, 'input_token_details': {'cache_read': 0}}
2025-04-27 15:22:28,630 - app.chat_controller - INFO - Rewritten Prompt: Xin cho, ti l ngi Vit Nam. Xin li, ti khng bit.
2025-04-27 15:22:28,630 - app.db - INFO - Getting chat history.
2025-04-27 15:22:28,635 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 15:22:28,678 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 15:22:28,678 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Xin cho, ti l ngi Vit Nam. Xin li, ti khng bit.
2025-04-27 15:22:28,678 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 15:22:29,028 - app.intent_detector - INFO - Detected intent: cho hi for input: Xin cho, ti l ngi Vit Nam. Xin li, ti khng bit.
2025-04-27 15:22:29,028 - app.langchain - INFO - Selected fallback prompt
2025-04-27 15:22:29,028 - app.langchain - INFO - Detected intent: cho hi | Requires context: False
2025-04-27 15:22:29,028 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 15:22:30,638 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 15:22:30,638 - app.db - INFO - Inserting application logs.
2025-04-27 15:22:30,640 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 15:22:30,664 - app.db - INFO - Successfully inserted application logs.
2025-04-27 15:22:30,665 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cho bn! Khng sao c, ti rt vui c h tr bn. Bn c cu hi no v trang im hoc chm sc da khng? Nu bn c th cho ti bit bn mun hi v iu g c th hn, ti s c gng gip bn ht mnh. V d, bn c th hi v:

*   **Loi da ca bn:** Da du, da kh, da hn hp, da nhy cm?
*   **Vn  da bn quan tm:** Mn, nm, tn nhang, lo ha?
*   **Sn phm bn mun tm hiu:** Kem chng nng, serum, kem dng m, v.v.?
*   **K thut trang im bn mun hc:** Trang im mt, trang im nn, v.v.?

Cng c nhiu thng tin, ti cng c th a ra li khuyn hu ch hn.
2025-04-27 15:46:09,114 - app.audio_controller - INFO - Speech: n.
2025-04-27 15:46:09,148 - app.chat_controller - INFO - User Query: n.
2025-04-27 15:46:09,148 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 15:46:09,149 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 15:46:09,154 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: n.
2025-04-27 15:46:10,644 - app.langchain - INFO - Rewritten prompt: content='.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-6b8f5c13-4584-4beb-8494-1d4d29cacb51-0' usage_metadata={'input_tokens': 202, 'output_tokens': 3, 'total_tokens': 205, 'input_token_details': {'cache_read': 0}}
2025-04-27 15:46:10,644 - app.chat_controller - INFO - Rewritten Prompt: .
2025-04-27 15:46:10,644 - app.db - INFO - Getting chat history.
2025-04-27 15:46:10,660 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 15:46:10,673 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 15:46:10,674 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: .
2025-04-27 15:46:10,674 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 15:46:11,043 - app.intent_detector - INFO - Detected intent: phn hi for input: .
2025-04-27 15:46:11,043 - app.langchain - INFO - Selected fallback prompt
2025-04-27 15:46:11,043 - app.langchain - INFO - Detected intent: phn hi | Requires context: False
2025-04-27 15:46:11,044 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 15:46:11,942 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 15:46:11,942 - app.db - INFO - Inserting application logs.
2025-04-27 15:46:11,944 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 15:46:11,949 - app.db - INFO - Successfully inserted application logs.
2025-04-27 15:46:11,950 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti xin li, ti khng hiu. Bn c th vui lng gii thch r hn cu hi ca bn? Bn c mun bit thm v trang im hoc chm sc da khng? Nu vy, bn c th vui lng cho ti bit bn quan tm n iu g c th?
2025-04-27 19:38:50,131 - app.audio_controller - INFO - Speech: c c thng.
2025-04-27 19:38:50,170 - app.chat_controller - INFO - User Query: c c thng.
2025-04-27 19:38:50,170 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 19:38:50,170 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 19:38:50,175 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: c c thng.
2025-04-27 19:38:50,822 - app.langchain - INFO - Rewritten prompt: content='C c th i.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-8d59b71b-3e30-43b2-b9d5-1db0ce1a1967-0' usage_metadata={'input_tokens': 204, 'output_tokens': 6, 'total_tokens': 210, 'input_token_details': {'cache_read': 0}}
2025-04-27 19:38:50,822 - app.chat_controller - INFO - Rewritten Prompt: C c th i.
2025-04-27 19:38:50,823 - app.db - INFO - Getting chat history.
2025-04-27 19:38:50,826 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 19:38:50,832 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 19:38:50,832 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: C c th i.
2025-04-27 19:38:50,832 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 19:38:50,922 - app.intent_detector - INFO - Detected intent: cu hi chuyn mn for input: C c th i.
2025-04-27 19:38:50,922 - app.langchain - INFO - Selected fallback prompt
2025-04-27 19:38:50,922 - app.langchain - INFO - Detected intent: cu hi chuyn mn | Requires context: False
2025-04-27 19:38:50,922 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 19:38:52,838 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 19:38:52,838 - app.db - INFO - Inserting application logs.
2025-04-27 19:38:52,839 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 19:38:52,852 - app.db - INFO - Successfully inserted application logs.
2025-04-27 19:38:52,853 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Chc chn ri!  ti c th gip bn tt nht, bn c th vui lng cho ti bit chnh xc bn mun bit iu g v trang im hoc chm sc da khng? V d: bn c cu hi c th no, bn ang tm kim li khuyn v sn phm no hoc bn mun tm hiu v k thut c th no khng? Cng cung cp nhiu thng tin, ti cng c th a ra phn hi hu ch hn.
2025-04-27 19:39:34,094 - app.audio_controller - INFO - Speech: mnh mun trang im kiu .
2025-04-27 19:39:34,101 - app.chat_controller - INFO - User Query: mnh mun trang im kiu .
2025-04-27 19:39:34,102 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 19:39:34,102 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 19:39:34,103 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: mnh mun trang im kiu .
2025-04-27 19:39:35,653 - app.langchain - INFO - Rewritten prompt: content='Mnh mun trang im kiu .' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-e2df0cfe-bb48-4429-8705-9bf097b7ea07-0' usage_metadata={'input_tokens': 207, 'output_tokens': 9, 'total_tokens': 216, 'input_token_details': {'cache_read': 0}}
2025-04-27 19:39:35,654 - app.chat_controller - INFO - Rewritten Prompt: Mnh mun trang im kiu .
2025-04-27 19:39:35,654 - app.db - INFO - Getting chat history.
2025-04-27 19:39:35,655 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 19:39:35,673 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 19:39:35,674 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Mnh mun trang im kiu .
2025-04-27 19:39:35,674 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 19:39:35,748 - app.intent_detector - INFO - Detected intent: cu hi chuyn mn for input: Mnh mun trang im kiu .
2025-04-27 19:39:35,748 - app.langchain - INFO - Selected fallback prompt
2025-04-27 19:39:35,749 - app.langchain - INFO - Detected intent: cu hi chuyn mn | Requires context: False
2025-04-27 19:39:35,749 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 19:39:37,851 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 19:39:37,851 - app.db - INFO - Inserting application logs.
2025-04-27 19:39:37,853 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 19:39:37,856 - app.db - INFO - Successfully inserted application logs.
2025-04-27 19:39:37,857 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti rt vui c gip bn tm hiu thm v phong cch trang im ca !  a ra li khuyn tt nht, bn c th cho ti bit bn quan tm n kha cnh c th no ca v ngoi ca  khng? Bn c mun to li v ngoi c in, tp trung vo i mt, ln da hay c l l mt phong cch hin i hn vi s nh hng ca  khng?
2025-04-27 19:40:15,145 - app.audio_controller - INFO - Speech:  chc l.
2025-04-27 19:40:15,151 - app.chat_controller - INFO - User Query:  chc l.
2025-04-27 19:40:15,151 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 19:40:15,151 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 19:40:15,153 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User:  chc l.
2025-04-27 19:40:16,600 - app.langchain - INFO - Rewritten prompt: content=' chc l vy.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-360d1579-8767-4393-9af5-f86b424872ed-0' usage_metadata={'input_tokens': 205, 'output_tokens': 6, 'total_tokens': 211, 'input_token_details': {'cache_read': 0}}
2025-04-27 19:40:16,600 - app.chat_controller - INFO - Rewritten Prompt:  chc l vy.
2025-04-27 19:40:16,600 - app.db - INFO - Getting chat history.
2025-04-27 19:40:16,602 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 19:40:16,607 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 19:40:16,607 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input:  chc l vy.
2025-04-27 19:40:16,607 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 19:40:16,698 - app.intent_detector - INFO - Detected intent: cm n for input:  chc l vy.
2025-04-27 19:40:16,698 - app.langchain - INFO - Selected fallback prompt
2025-04-27 19:40:16,699 - app.langchain - INFO - Detected intent: cm n | Requires context: False
2025-04-27 19:40:16,699 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 19:40:17,900 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 19:40:17,900 - app.db - INFO - Inserting application logs.
2025-04-27 19:40:17,901 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 19:40:17,905 - app.db - INFO - Successfully inserted application logs.
2025-04-27 19:40:17,906 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti rt vui c gip  bn, nhng ti cn hiu r hn v nhng g bn ang tm kim. Bn c th cho ti bit bn mun bit thm v trang im hoc chm sc da khng? V d: bn c thc mc c th no v sn phm, k thut hoc quy trnh chm sc da m bn mun tm hiu khng? Cng c nhiu thng tin, ti cng c th cung cp cho bn nhng cu tr li hu ch hn.
2025-04-27 19:40:37,416 - app.audio_controller - INFO - Speech: chc l v ngoi c in.
2025-04-27 19:40:37,425 - app.chat_controller - INFO - User Query: chc l v ngoi c in.
2025-04-27 19:40:37,426 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 19:40:37,426 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 19:40:37,427 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: chc l v ngoi c in.
2025-04-27 19:40:38,923 - app.langchain - INFO - Rewritten prompt: content='Chc l v ngh thut c in.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-095ed54a-1cd9-4ce8-98c7-80a24378b0fd-0' usage_metadata={'input_tokens': 207, 'output_tokens': 10, 'total_tokens': 217, 'input_token_details': {'cache_read': 0}}
2025-04-27 19:40:38,923 - app.chat_controller - INFO - Rewritten Prompt: Chc l v ngh thut c in.
2025-04-27 19:40:38,923 - app.db - INFO - Getting chat history.
2025-04-27 19:40:38,925 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 19:40:38,929 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 19:40:38,929 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Chc l v ngh thut c in.
2025-04-27 19:40:38,929 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 19:40:39,019 - app.intent_detector - INFO - Detected intent: cm n for input: Chc l v ngh thut c in.
2025-04-27 19:40:39,019 - app.langchain - INFO - Selected fallback prompt
2025-04-27 19:40:39,019 - app.langchain - INFO - Detected intent: cm n | Requires context: False
2025-04-27 19:40:39,019 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 19:40:40,870 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 19:40:40,870 - app.db - INFO - Inserting application logs.
2025-04-27 19:40:40,872 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 19:40:40,876 - app.db - INFO - Successfully inserted application logs.
2025-04-27 19:40:40,877 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti xin li, ti khng chc chn bn mun bit iu g v ngh thut c in. Bn c th ni r hn cu hi ca mnh  ti c th h tr bn tt hn khng? V d: bn c mun bit v mt ngh s, tc phm hoc phong cch c th no ca ngh thut c in khng?
2025-04-27 19:41:02,113 - app.audio_controller - INFO - Speech: ngoi ra ti thch nghing ngi ng thang th trc ht.
2025-04-27 19:41:02,120 - app.chat_controller - INFO - User Query: ngoi ra ti thch nghing ngi ng thang th trc ht.
2025-04-27 19:41:02,120 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 19:41:02,120 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 19:41:02,121 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: ngoi ra ti thch nghing ngi ng thang th trc ht.
2025-04-27 19:41:02,919 - app.langchain - INFO - Rewritten prompt: content='Ngoi ra, ti thch ngh trng trt, chn nui, th cng th trc ht.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-5510ba90-b7d3-4ac6-9e9f-f6b86fb4f0bd-0' usage_metadata={'input_tokens': 213, 'output_tokens': 21, 'total_tokens': 234, 'input_token_details': {'cache_read': 0}}
2025-04-27 19:41:02,919 - app.chat_controller - INFO - Rewritten Prompt: Ngoi ra, ti thch ngh trng trt, chn nui, th cng th trc ht.
2025-04-27 19:41:02,919 - app.db - INFO - Getting chat history.
2025-04-27 19:41:02,922 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 19:41:02,926 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 19:41:02,926 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Ngoi ra, ti thch ngh trng trt, chn nui, th cng th trc ht.
2025-04-27 19:41:02,927 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 19:41:03,023 - app.intent_detector - INFO - Detected intent: khng lin quan for input: Ngoi ra, ti thch ngh trng trt, chn nui, th cng th trc ht.
2025-04-27 19:41:03,023 - app.langchain - INFO - Selected fallback prompt
2025-04-27 19:41:03,023 - app.langchain - INFO - Detected intent: khng lin quan | Requires context: False
2025-04-27 19:41:03,023 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 19:41:04,150 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 19:41:04,150 - app.db - INFO - Inserting application logs.
2025-04-27 19:41:04,152 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 19:41:04,155 - app.db - INFO - Successfully inserted application logs.
2025-04-27 19:41:04,156 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti c th gip bn vi iu ! Bn c th cho ti bit c th hn nhng g bn mun bit v trang im, chm sc da hoc s thch ca bn v ngh trng trt, chn nui v th cng khng? V d: bn c mun bit v mt k thut trang im c th, mt sn phm chm sc da hoc mt mo  ci thin mt trong nhng s thch ca bn khng?
2025-04-27 19:51:55,145 - app.audio_controller - INFO - Speech: theo kiu c in.
2025-04-27 19:51:55,174 - app.chat_controller - INFO - User Query: theo kiu c in.
2025-04-27 19:51:55,174 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 19:51:55,174 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 19:51:55,176 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: theo kiu c in.
2025-04-27 19:51:56,648 - app.langchain - INFO - Rewritten prompt: content='Theo phong cch c in.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-7b2f7da4-f057-44b7-a9a6-aa009de93a6f-0' usage_metadata={'input_tokens': 205, 'output_tokens': 7, 'total_tokens': 212, 'input_token_details': {'cache_read': 0}}
2025-04-27 19:51:56,648 - app.chat_controller - INFO - Rewritten Prompt: Theo phong cch c in.
2025-04-27 19:51:56,649 - app.db - INFO - Getting chat history.
2025-04-27 19:51:56,651 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 19:51:56,656 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 19:51:56,657 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Theo phong cch c in.
2025-04-27 19:51:56,657 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 19:51:56,990 - app.intent_detector - INFO - Detected intent: khng lin quan for input: Theo phong cch c in.
2025-04-27 19:51:56,990 - app.langchain - INFO - Selected fallback prompt
2025-04-27 19:51:56,990 - app.langchain - INFO - Detected intent: khng lin quan | Requires context: False
2025-04-27 19:51:56,991 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 19:51:59,021 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 19:51:59,021 - app.db - INFO - Inserting application logs.
2025-04-27 19:51:59,022 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 19:51:59,035 - app.db - INFO - Successfully inserted application logs.
2025-04-27 19:51:59,036 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti rt vui khi gip bn v phong cch c in, nhng ti cn thm mt cht thng tin  c th cung cp cho bn cu tr li tt nht. Bn c th cho ti bit thm mt cht v nhng g bn mun bit v phong cch c in khng? V d: bn c mun bit v trang im, chm sc da hay mt kha cnh khc ca phong cch c in khng?
2025-04-27 19:52:42,454 - app.audio_controller - INFO - Speech: mnh mun chm sc da theo kiu phong cch c in nc .
2025-04-27 19:52:42,461 - app.chat_controller - INFO - User Query: mnh mun chm sc da theo kiu phong cch c in nc .
2025-04-27 19:52:42,462 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 19:52:42,462 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 19:52:42,463 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: mnh mun chm sc da theo kiu phong cch c in nc .
2025-04-27 19:52:43,155 - app.langchain - INFO - Rewritten prompt: content='Mnh mun chm sc da theo phong cch c in .' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-977202b2-b6ef-4716-8cc3-0fba6c61e476-0' usage_metadata={'input_tokens': 214, 'output_tokens': 14, 'total_tokens': 228, 'input_token_details': {'cache_read': 0}}
2025-04-27 19:52:43,155 - app.chat_controller - INFO - Rewritten Prompt: Mnh mun chm sc da theo phong cch c in .
2025-04-27 19:52:43,155 - app.db - INFO - Getting chat history.
2025-04-27 19:52:43,157 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 19:52:43,160 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 19:52:43,161 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Mnh mun chm sc da theo phong cch c in .
2025-04-27 19:52:43,161 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 19:52:43,263 - app.intent_detector - INFO - Detected intent: khng lin quan for input: Mnh mun chm sc da theo phong cch c in .
2025-04-27 19:52:43,263 - app.langchain - INFO - Selected fallback prompt
2025-04-27 19:52:43,263 - app.langchain - INFO - Detected intent: khng lin quan | Requires context: False
2025-04-27 19:52:43,263 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 19:52:45,520 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 19:52:45,520 - app.db - INFO - Inserting application logs.
2025-04-27 19:52:45,521 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 19:52:45,525 - app.db - INFO - Successfully inserted application logs.
2025-04-27 19:52:45,526 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Chc chn ri, ti c th gip bn vi iu !  cung cp cho bn thng tin tt nht v vic chm sc da theo phong cch c in ca , vui lng cho ti bit bn quan tm n iu g. Bn ang tm kim cc sn phm c th, thi quen hoc phng php iu tr c ngun gc t , hoc bn mun bit thm v cch ph n  trong lch s chm sc da ca h nh th no? Sau khi ti hiu r hn v nhng g bn ang tm kim, ti c th cung cp mt s mo v thng tin hu ch.
2025-04-27 20:08:58,834 - app.chat_controller - INFO - User Query: c c thng.
2025-04-27 20:08:58,835 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 20:08:58,835 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 20:08:58,837 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: c c thng.
2025-04-27 20:08:59,526 - app.langchain - INFO - Rewritten prompt: content='C c th i.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-203b8032-3fe1-43bf-a53e-a031081726e3-0' usage_metadata={'input_tokens': 204, 'output_tokens': 6, 'total_tokens': 210, 'input_token_details': {'cache_read': 0}}
2025-04-27 20:08:59,526 - app.chat_controller - INFO - Rewritten Prompt: C c th i.
2025-04-27 20:08:59,526 - app.db - INFO - Getting chat history.
2025-04-27 20:08:59,528 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 20:08:59,534 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 20:08:59,535 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: C c th i.
2025-04-27 20:08:59,535 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 20:08:59,618 - app.intent_detector - INFO - Detected intent: cho hi for input: C c th i.
2025-04-27 20:08:59,618 - app.langchain - INFO - Selected fallback prompt
2025-04-27 20:08:59,618 - app.langchain - INFO - Detected intent: cho hi | Requires context: False
2025-04-27 20:08:59,619 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 20:09:00,860 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 20:09:00,860 - app.db - INFO - Inserting application logs.
2025-04-27 20:09:00,862 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 20:09:00,866 - app.db - INFO - Successfully inserted application logs.
2025-04-27 20:09:00,867 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Chc chn ri, ti rt sn lng gip bn!  ti c th a ra li khuyn tt nht, bn c th cho ti bit bn mun bit thm v trang im hay chm sc da khng? V d: bn c th ang tm kim li khuyn v mt loi sn phm c th, cc mo  gii quyt mt vn  v da c th hoc thm ch l  xut v mt din mo trang im mi.
2025-04-27 20:35:50,798 - app.audio_controller - INFO - Speech: c th v th m trong nc m khng c ma nn khng thy ma nhiu.
2025-04-27 20:38:46,472 - app.audio_controller - INFO - Speech: em va au nh trc  th b  nh trc ti.
2025-04-27 20:40:03,908 - app.audio_controller - INFO - Speech: n.
2025-04-27 20:40:03,937 - app.chat_controller - INFO - User Query: n.
2025-04-27 20:40:03,938 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-27 20:40:03,938 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 20:40:03,940 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: n.
2025-04-27 20:40:05,514 - app.langchain - INFO - Rewritten prompt: content='.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-71616eaa-b4e7-42e7-aec0-a828adab6323-0' usage_metadata={'input_tokens': 202, 'output_tokens': 3, 'total_tokens': 205, 'input_token_details': {'cache_read': 0}}
2025-04-27 20:40:05,514 - app.chat_controller - INFO - Rewritten Prompt: .
2025-04-27 20:40:05,514 - app.db - INFO - Getting chat history.
2025-04-27 20:40:05,515 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 20:40:05,531 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-27 20:40:05,531 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: .
2025-04-27 20:40:05,531 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-27 20:40:05,652 - app.intent_detector - INFO - Detected intent: phn hi for input: .
2025-04-27 20:40:05,652 - app.langchain - INFO - Selected fallback prompt
2025-04-27 20:40:05,652 - app.langchain - INFO - Detected intent: phn hi | Requires context: False
2025-04-27 20:40:05,652 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-27 20:40:07,639 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-27 20:40:07,639 - app.db - INFO - Inserting application logs.
2025-04-27 20:40:07,640 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-27 20:40:07,643 - app.db - INFO - Successfully inserted application logs.
2025-04-27 20:40:07,643 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Chc chn ri, ti c th gip bn v trang im v chm sc da.  ti c th a ra cu tr li hu ch nht, bn c th cho ti bit bn mun bit thm v iu g khng? V d: bn c mun bit v mt sn phm c th, tm li khuyn cho loi da ca mnh hay tm hiu v mt k thut trang im nht nh khng?
2025-04-30 22:35:28,364 - app.audio_controller - INFO - Speech: nhiu ngi khng th a ra li khuyn nh vy nn hy t hi.
2025-04-30 22:35:28,393 - app.chat_controller - INFO - User Query: nhiu ngi khng th a ra li khuyn nh vy nn hy t hi.
2025-04-30 22:35:28,393 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-04-30 22:35:28,393 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-30 22:35:28,396 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: nhiu ngi khng th a ra li khuyn nh vy nn hy t hi.
2025-04-30 22:35:29,266 - app.langchain - INFO - Rewritten prompt: content='Nhiu ngi khng th a ra li khuyn nh vy, nn hy t vn.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-9fc492ec-5a8e-4783-bc47-28bb70e28dca-0' usage_metadata={'input_tokens': 215, 'output_tokens': 18, 'total_tokens': 233, 'input_token_details': {'cache_read': 0}}
2025-04-30 22:35:29,266 - app.chat_controller - INFO - Rewritten Prompt: Nhiu ngi khng th a ra li khuyn nh vy, nn hy t vn.
2025-04-30 22:35:29,267 - app.db - INFO - Getting chat history.
2025-04-30 22:35:29,280 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-30 22:35:29,289 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-04-30 22:35:29,289 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Nhiu ngi khng th a ra li khuyn nh vy, nn hy t vn.
2025-04-30 22:35:29,289 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-04-30 22:35:29,656 - app.intent_detector - INFO - Detected intent: phn hi for input: Nhiu ngi khng th a ra li khuyn nh vy, nn hy t vn.
2025-04-30 22:35:29,656 - app.langchain - INFO - Selected fallback prompt
2025-04-30 22:35:29,656 - app.langchain - INFO - Detected intent: phn hi | Requires context: False
2025-04-30 22:35:29,657 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-04-30 22:35:32,013 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-04-30 22:35:32,014 - app.db - INFO - Inserting application logs.
2025-04-30 22:35:32,015 - app.db - INFO - Succesfully connected to MongoDB.
2025-04-30 22:35:32,026 - app.db - INFO - Successfully inserted application logs.
2025-04-30 22:35:32,027 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti rt sn lng gip bn v trang im v chm sc da, nhng ti cn thm thng tin  cung cp cho bn li khuyn tt nht! Bn c th cho ti bit c th hn v nhng g bn ang mun bit khng? V d: bn c mun li khuyn v mt sn phm c th, mt k thut trang im hoc mt mi quan tm v chm sc da c th khng? Hy cho ti bit v ti s c gng ht sc  gip bn.
2025-05-01 06:49:57,607 - app.chat_controller - INFO - User Query: nhiu ngi khng th a ra li khuyn nh vy nn hy t hi.
2025-05-01 06:49:57,608 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-01 06:49:57,608 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-01 06:49:57,610 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: nhiu ngi khng th a ra li khuyn nh vy nn hy t hi.
2025-05-01 06:49:59,429 - app.langchain - INFO - Rewritten prompt: content='Nhiu ngi khng th a ra li khuyn nh vy, nn hy t hi bn thn.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-96b86a9a-9af0-4b96-b6fd-4740d5d1f592-0' usage_metadata={'input_tokens': 215, 'output_tokens': 20, 'total_tokens': 235, 'input_token_details': {'cache_read': 0}}
2025-05-01 06:49:59,430 - app.chat_controller - INFO - Rewritten Prompt: Nhiu ngi khng th a ra li khuyn nh vy, nn hy t hi bn thn.
2025-05-01 06:49:59,430 - app.db - INFO - Getting chat history.
2025-05-01 06:49:59,431 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-01 06:49:59,439 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-01 06:49:59,439 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Nhiu ngi khng th a ra li khuyn nh vy, nn hy t hi bn thn.
2025-05-01 06:49:59,439 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-01 06:49:59,600 - app.intent_detector - INFO - Detected intent: phn hi for input: Nhiu ngi khng th a ra li khuyn nh vy, nn hy t hi bn thn.
2025-05-01 06:49:59,601 - app.langchain - INFO - Selected fallback prompt
2025-05-01 06:49:59,601 - app.langchain - INFO - Detected intent: phn hi | Requires context: False
2025-05-01 06:49:59,601 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-01 06:50:01,094 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-01 06:50:01,094 - app.db - INFO - Inserting application logs.
2025-05-01 06:50:01,096 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-01 06:50:01,100 - app.db - INFO - Successfully inserted application logs.
2025-05-01 06:50:01,101 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti rt vui c gip , nhng ti cn mt cht thng tin na  cung cp li khuyn tt nht cho bn. Bn c th cho ti bit bn mun bit thm v trang im hay chm sc da khng? Nu  l mt trong hai, bn c th cho ti bit bn mun bit thm chi tit v iu g, chng hn nh mt sn phm c th, mt k thut hoc mt mi quan tm bn ang c gng gii quyt khng?
2025-05-02 11:19:02,204 - app.audio_controller - INFO - Speech: n n dng m h ti ny n n.
2025-05-02 11:19:02,223 - app.chat_controller - INFO - User Query: n n dng m h ti ny n n.
2025-05-02 11:19:02,223 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-02 11:19:02,223 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-02 11:19:02,226 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: n n dng m h ti ny n n.
2025-05-02 11:19:04,013 - app.langchain - INFO - Rewritten prompt: content='Ti khng dng m tp ny.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-fd424bf1-bd92-4970-b7ee-70a51e56757c-0' usage_metadata={'input_tokens': 210, 'output_tokens': 9, 'total_tokens': 219, 'input_token_details': {'cache_read': 0}}
2025-05-02 11:19:04,014 - app.chat_controller - INFO - Rewritten Prompt: Ti khng dng m tp ny.
2025-05-02 11:19:04,014 - app.db - INFO - Getting chat history.
2025-05-02 11:19:04,024 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-02 11:19:04,040 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-02 11:19:04,040 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Ti khng dng m tp ny.
2025-05-02 11:19:04,040 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-02 11:19:04,477 - app.intent_detector - INFO - Detected intent: phn hi for input: Ti khng dng m tp ny.
2025-05-02 11:19:04,478 - app.langchain - INFO - Selected fallback prompt
2025-05-02 11:19:04,478 - app.langchain - INFO - Detected intent: phn hi | Requires context: False
2025-05-02 11:19:04,478 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-02 11:19:06,880 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-02 11:19:06,880 - app.db - INFO - Inserting application logs.
2025-05-02 11:19:06,882 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-02 11:19:06,895 - app.db - INFO - Successfully inserted application logs.
2025-05-02 11:19:06,895 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti hiu ri, nhng ti vn cn bn cho ti bit chnh xc bn ang mun bit g v trang im hoc chm sc da  ti c th gip bn tt nht. Bn c th cho ti bit bn ang thc mc v sn phm, k thut c th hay bn mun c li khuyn v vn  da no  khng?
2025-05-02 11:19:36,865 - app.audio_controller - INFO - Speech: ni xin cho y l mt nh ngh nghip ni a ngha hng nh nc.
2025-05-02 11:19:36,872 - app.chat_controller - INFO - User Query: ni xin cho y l mt nh ngh nghip ni a ngha hng nh nc.
2025-05-02 11:19:36,872 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-02 11:19:36,872 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-02 11:19:36,874 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: ni xin cho y l mt nh ngh nghip ni a ngha hng nh nc.
2025-05-02 11:19:37,908 - app.langchain - INFO - Rewritten prompt: content='Ti xin cho, y l mt ngh nghip ni nh hng ngh nghip hng n nh nc.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-d889b947-0640-4d1f-9f93-0c04dcd1418b-0' usage_metadata={'input_tokens': 216, 'output_tokens': 20, 'total_tokens': 236, 'input_token_details': {'cache_read': 0}}
2025-05-02 11:19:37,908 - app.chat_controller - INFO - Rewritten Prompt: Ti xin cho, y l mt ngh nghip ni nh hng ngh nghip hng n nh nc.
2025-05-02 11:19:37,908 - app.db - INFO - Getting chat history.
2025-05-02 11:19:37,910 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-02 11:19:37,914 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-02 11:19:37,915 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Ti xin cho, y l mt ngh nghip ni nh hng ngh nghip hng n nh nc.
2025-05-02 11:19:37,915 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-02 11:19:38,021 - app.intent_detector - INFO - Detected intent: cho hi for input: Ti xin cho, y l mt ngh nghip ni nh hng ngh nghip hng n nh nc.
2025-05-02 11:19:38,021 - app.langchain - INFO - Selected fallback prompt
2025-05-02 11:19:38,021 - app.langchain - INFO - Detected intent: cho hi | Requires context: False
2025-05-02 11:19:38,021 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-02 11:19:39,540 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-02 11:19:39,540 - app.db - INFO - Inserting application logs.
2025-05-02 11:19:39,541 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-02 11:19:39,545 - app.db - INFO - Successfully inserted application logs.
2025-05-02 11:19:39,546 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cho bn! Ti rt vui c gip bn.  c th cung cp thng tin tt nht, bn c th vui lng cho ti bit bn mun bit thm v trang im hay chm sc da khng? V d, bn c th ang tm kim li khuyn v sn phm, k thut, hoc c th l cc xu hng mi nht. Cng c nhiu chi tit, ti cng c th h tr bn tt hn!
2025-05-02 11:19:46,972 - app.audio_controller - INFO - Speech: nhiu bn b  qua m tham gia vo m.
2025-05-02 11:19:46,980 - app.chat_controller - INFO - User Query: nhiu bn b  qua m tham gia vo m.
2025-05-02 11:19:46,980 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-02 11:19:46,980 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-02 11:19:46,982 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: nhiu bn b  qua m tham gia vo m.
2025-05-02 11:19:47,942 - app.langchain - INFO - Rewritten prompt: content='Nhiu bn b  qua i trong thm ha.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-a474f648-e0e5-4c62-8b38-953925a0fe1c-0' usage_metadata={'input_tokens': 211, 'output_tokens': 12, 'total_tokens': 223, 'input_token_details': {'cache_read': 0}}
2025-05-02 11:19:47,942 - app.chat_controller - INFO - Rewritten Prompt: Nhiu bn b  qua i trong thm ha.
2025-05-02 11:19:47,942 - app.db - INFO - Getting chat history.
2025-05-02 11:19:47,944 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-02 11:19:47,949 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-02 11:19:47,949 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Nhiu bn b  qua i trong thm ha.
2025-05-02 11:19:47,949 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-02 11:19:48,037 - app.intent_detector - INFO - Detected intent: khng lin quan for input: Nhiu bn b  qua i trong thm ha.
2025-05-02 11:19:48,037 - app.langchain - INFO - Selected fallback prompt
2025-05-02 11:19:48,037 - app.langchain - INFO - Detected intent: khng lin quan | Requires context: False
2025-05-02 11:19:48,037 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-02 11:19:49,274 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-02 11:19:49,274 - app.db - INFO - Inserting application logs.
2025-05-02 11:19:49,275 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-02 11:19:49,278 - app.db - INFO - Successfully inserted application logs.
2025-05-02 11:19:49,279 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti rt tic khi bn ang tri qua iu ny. Ti c th h tr bn vi cc ch  trang im hoc chm sc da khng? Vui lng cho ti bit thm chi tit v nhng g bn ang tm kim  ti c th cung cp phn hi ph hp.
2025-05-02 11:19:58,026 - app.audio_controller - INFO - Speech: n ngn ca ng y ng tt ng dng phm phm qut vn thng trnh by t vn  an nghn chn trm hai mi.
2025-05-02 11:19:58,032 - app.chat_controller - INFO - User Query: n ngn ca ng y ng tt ng dng phm phm qut vn thng trnh by t vn  an nghn chn trm hai mi.
2025-05-02 11:19:58,032 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-02 11:19:58,032 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-02 11:19:58,034 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: n ngn ca ng y ng tt ng dng phm phm qut vn thng trnh by t vn  an nghn chn trm hai mi.
2025-05-02 11:19:59,115 - app.langchain - INFO - Rewritten prompt: content='ng vn ca ng y ng ch , ng dng phm cht uyn thm thng trnh by t vn  nm nghn chn trm hai mi.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-cb609d61-747d-4b12-858a-912883e15aa1-0' usage_metadata={'input_tokens': 229, 'output_tokens': 33, 'total_tokens': 262, 'input_token_details': {'cache_read': 0}}
2025-05-02 11:19:59,115 - app.chat_controller - INFO - Rewritten Prompt: ng vn ca ng y ng ch , ng dng phm cht uyn thm thng trnh by t vn  nm nghn chn trm hai mi.
2025-05-02 11:19:59,115 - app.db - INFO - Getting chat history.
2025-05-02 11:19:59,116 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-02 11:19:59,122 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-02 11:19:59,122 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: ng vn ca ng y ng ch , ng dng phm cht uyn thm thng trnh by t vn  nm nghn chn trm hai mi.
2025-05-02 11:19:59,122 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-02 11:19:59,225 - app.intent_detector - INFO - Detected intent: cu hi chuyn mn for input: ng vn ca ng y ng ch , ng dng phm cht uyn thm thng trnh by t vn  nm nghn chn trm hai mi.
2025-05-02 11:19:59,225 - app.langchain - INFO - Selected fallback prompt
2025-05-02 11:19:59,226 - app.langchain - INFO - Detected intent: cu hi chuyn mn | Requires context: False
2025-05-02 11:19:59,226 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-02 11:20:00,742 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-02 11:20:00,742 - app.db - INFO - Inserting application logs.
2025-05-02 11:20:00,743 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-02 11:20:00,746 - app.db - INFO - Successfully inserted application logs.
2025-05-02 11:20:00,747 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti xin li, ti khng hiu r yu cu ca bn. Bn c th vui lng gii thch thm  ti c th gip bn tt hn khng? Bn c mun bit thm v cc k thut trang im, cc sn phm chm sc da c th hay mt ch  lin quan khc khng?
2025-05-04 17:54:35,154 - app.audio_controller - INFO - Speech: nhng ngi php lut cng thng thy th.
2025-05-04 17:54:35,191 - app.chat_controller - INFO - User Query: nhng ngi php lut cng thng thy th.
2025-05-04 17:54:35,191 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-04 17:54:35,191 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-04 17:54:35,197 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: nhng ngi php lut cng thng thy th.
2025-05-04 17:54:35,969 - app.langchain - INFO - Rewritten prompt: content='Nhng ngi lm php lut cng thng thy th.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-5032acf2-7641-42fe-8e60-5fd9be025a0c-0' usage_metadata={'input_tokens': 209, 'output_tokens': 11, 'total_tokens': 220, 'input_token_details': {'cache_read': 0}}
2025-05-04 17:54:35,969 - app.chat_controller - INFO - Rewritten Prompt: Nhng ngi lm php lut cng thng thy th.
2025-05-04 17:54:35,969 - app.db - INFO - Getting chat history.
2025-05-04 17:54:35,980 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-04 17:54:35,993 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-04 17:54:35,994 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Nhng ngi lm php lut cng thng thy th.
2025-05-04 17:54:35,994 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-04 17:54:36,381 - app.intent_detector - INFO - Detected intent: khng lin quan for input: Nhng ngi lm php lut cng thng thy th.
2025-05-04 17:54:36,381 - app.langchain - INFO - Selected fallback prompt
2025-05-04 17:54:36,381 - app.langchain - INFO - Detected intent: khng lin quan | Requires context: False
2025-05-04 17:54:36,381 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-04 17:54:38,324 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-04 17:54:38,324 - app.db - INFO - Inserting application logs.
2025-05-04 17:54:38,326 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-04 17:54:38,339 - app.db - INFO - Successfully inserted application logs.
2025-05-04 17:54:38,340 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti hiu rng bn ang tm kim thng tin lin quan n trang im hoc chm sc da, nhng bn c th vui lng cung cp thm thng tin chi tit v iu bn mun bit khng? iu ny s gip ti cung cp cho bn cu tr li chnh xc v hu ch nht.
2025-05-04 17:56:57,580 - app.chat_controller - INFO - User Query: Xin cho
2025-05-04 17:56:57,580 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-04 17:56:57,580 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-04 17:56:57,582 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: Xin cho
2025-05-04 17:56:58,307 - app.langchain - INFO - Rewritten prompt: content='Xin cho.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-01944d2d-3d3e-4e5a-812c-442d76b8bab1-0' usage_metadata={'input_tokens': 202, 'output_tokens': 4, 'total_tokens': 206, 'input_token_details': {'cache_read': 0}}
2025-05-04 17:56:58,307 - app.chat_controller - INFO - Rewritten Prompt: Xin cho.
2025-05-04 17:56:58,307 - app.db - INFO - Getting chat history.
2025-05-04 17:56:58,308 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-04 17:56:58,313 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-04 17:56:58,313 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Xin cho.
2025-05-04 17:56:58,313 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-04 17:56:58,390 - app.intent_detector - INFO - Detected intent: cho hi for input: Xin cho.
2025-05-04 17:56:58,390 - app.langchain - INFO - Selected fallback prompt
2025-05-04 17:56:58,390 - app.langchain - INFO - Detected intent: cho hi | Requires context: False
2025-05-04 17:56:58,390 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-04 17:56:59,433 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-04 17:56:59,434 - app.db - INFO - Inserting application logs.
2025-05-04 17:56:59,435 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-04 17:56:59,439 - app.db - INFO - Successfully inserted application logs.
2025-05-04 17:56:59,440 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Xin cho! Ti c th gip bn nh th no hm nay? Bn c cu hi c th no v trang im hoc chm sc da m bn mun ti tr li khng? Vui lng cho ti bit bn mun bit g  ti c th cung cp cu tr li tt nht c th.
2025-05-04 17:59:12,756 - app.chat_controller - INFO - User Query: Xin chaof
2025-05-04 17:59:12,756 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-04 17:59:12,756 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-04 17:59:12,768 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: Xin chaof
2025-05-04 17:59:14,500 - app.langchain - INFO - Rewritten prompt: content='Xin cho.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-181e492b-1351-4928-9a29-7139b5b8d27a-0' usage_metadata={'input_tokens': 203, 'output_tokens': 4, 'total_tokens': 207, 'input_token_details': {'cache_read': 0}}
2025-05-04 17:59:14,500 - app.chat_controller - INFO - Rewritten Prompt: Xin cho.
2025-05-04 17:59:14,500 - app.db - INFO - Getting chat history.
2025-05-04 17:59:14,502 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-04 17:59:14,512 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-04 17:59:14,513 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Xin cho.
2025-05-04 17:59:14,513 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-04 17:59:14,581 - app.intent_detector - INFO - Detected intent: cho hi for input: Xin cho.
2025-05-04 17:59:14,581 - app.langchain - INFO - Selected fallback prompt
2025-05-04 17:59:14,581 - app.langchain - INFO - Detected intent: cho hi | Requires context: False
2025-05-04 17:59:14,582 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-04 17:59:15,727 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-04 17:59:15,727 - app.db - INFO - Inserting application logs.
2025-05-04 17:59:15,728 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-04 17:59:15,732 - app.db - INFO - Successfully inserted application logs.
2025-05-04 17:59:15,733 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cho bn! Ti c th gip g cho bn v trang im hoc chm sc da?  ti c th a ra cu tr li tt nht, bn c th vui lng cho ti bit bn ang mun tm hiu v iu g c th c khng? V d, bn c th c cu hi v mt sn phm c th, mt k thut trang im hoc mt mi quan tm v da c th m bn mun gii quyt.
2025-05-04 17:59:39,101 - app.chat_controller - INFO - User Query: Ti mun chm sc da kiu 
2025-05-04 17:59:39,101 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-04 17:59:39,101 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-04 17:59:39,103 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: Ti mun chm sc da kiu 
2025-05-04 17:59:39,704 - app.langchain - INFO - Rewritten prompt: content='Ti mun chm sc da kiu g?' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-25f9c8f4-7149-494d-92c6-673cc2e58941-0' usage_metadata={'input_tokens': 207, 'output_tokens': 9, 'total_tokens': 216, 'input_token_details': {'cache_read': 0}}
2025-05-04 17:59:39,704 - app.chat_controller - INFO - Rewritten Prompt: Ti mun chm sc da kiu g?
2025-05-04 17:59:39,704 - app.db - INFO - Getting chat history.
2025-05-04 17:59:39,706 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-04 17:59:39,709 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-04 17:59:39,709 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Ti mun chm sc da kiu g?
2025-05-04 17:59:39,709 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-04 17:59:39,805 - app.intent_detector - INFO - Detected intent: ni chuyn phim for input: Ti mun chm sc da kiu g?
2025-05-04 17:59:39,805 - app.langchain - INFO - Selected fallback prompt
2025-05-04 17:59:39,805 - app.langchain - INFO - Detected intent: ni chuyn phim | Requires context: False
2025-05-04 17:59:39,805 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-04 17:59:41,020 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-04 17:59:41,020 - app.db - INFO - Inserting application logs.
2025-05-04 17:59:41,022 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-04 17:59:41,024 - app.db - INFO - Successfully inserted application logs.
2025-05-04 17:59:41,025 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti c th gip bn iu !  a ra nhng li khuyn tt nht, ti cn bit thm mt cht v nhng g bn ang tm kim. Bn c th cho ti bit loi da ca bn l g, nhng mi quan tm v da c th ca bn l g v bn ang mun t c iu g vi quy trnh chm sc da ca mnh khng?
2025-05-04 17:59:53,045 - app.chat_controller - INFO - User Query: Loi da ca ti l da du
2025-05-04 17:59:53,045 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-04 17:59:53,045 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-04 17:59:53,047 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: Loi da ca ti l da du
2025-05-04 17:59:53,893 - app.langchain - INFO - Rewritten prompt: content='Loi da ca ti l da du.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-f4fbc6ce-8d21-4fbd-b571-2e5337c9ca35-0' usage_metadata={'input_tokens': 208, 'output_tokens': 10, 'total_tokens': 218, 'input_token_details': {'cache_read': 0}}
2025-05-04 17:59:53,893 - app.chat_controller - INFO - Rewritten Prompt: Loi da ca ti l da du.
2025-05-04 17:59:53,893 - app.db - INFO - Getting chat history.
2025-05-04 17:59:53,895 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-04 17:59:53,898 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-04 17:59:53,899 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Loi da ca ti l da du.
2025-05-04 17:59:53,899 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-04 17:59:53,999 - app.intent_detector - INFO - Detected intent: cu hi chuyn mn for input: Loi da ca ti l da du.
2025-05-04 17:59:53,999 - app.langchain - INFO - Selected fallback prompt
2025-05-04 17:59:53,999 - app.langchain - INFO - Detected intent: cu hi chuyn mn | Requires context: False
2025-05-04 17:59:53,999 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-04 17:59:55,108 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-04 17:59:55,108 - app.db - INFO - Inserting application logs.
2025-05-04 17:59:55,109 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-04 17:59:55,111 - app.db - INFO - Successfully inserted application logs.
2025-05-04 17:59:55,112 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti hiu ri.  c th cung cp cho bn nhng li khuyn tt nht v trang im hoc chm sc da ph hp vi ln da du ca bn, vui lng cho ti bit bn mun tm hiu thm v iu g. Bn c mun bit v cc sn phm chm sc da tt nht cho da du, cc k thut trang im gip kim sot du, hoc mt vn  c th no khc khng?
2025-05-04 18:00:15,486 - app.chat_controller - INFO - User Query: Cho mnh bit v cc sn phm chm sc da
2025-05-04 18:00:15,486 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-04 18:00:15,486 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-04 18:00:15,488 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: Cho mnh bit v cc sn phm chm sc da
2025-05-04 18:00:16,246 - app.langchain - INFO - Rewritten prompt: content='Cho mnh bit v cc sn phm chm sc da.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-539b1db3-b9ee-48ae-b1af-8da4e682d2dd-0' usage_metadata={'input_tokens': 210, 'output_tokens': 12, 'total_tokens': 222, 'input_token_details': {'cache_read': 0}}
2025-05-04 18:00:16,246 - app.chat_controller - INFO - Rewritten Prompt: Cho mnh bit v cc sn phm chm sc da.
2025-05-04 18:00:16,246 - app.db - INFO - Getting chat history.
2025-05-04 18:00:16,247 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-04 18:00:16,251 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-04 18:00:16,251 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Cho mnh bit v cc sn phm chm sc da.
2025-05-04 18:00:16,251 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-04 18:00:16,356 - app.intent_detector - INFO - Detected intent: khng lin quan for input: Cho mnh bit v cc sn phm chm sc da.
2025-05-04 18:00:16,356 - app.langchain - INFO - Selected fallback prompt
2025-05-04 18:00:16,356 - app.langchain - INFO - Detected intent: khng lin quan | Requires context: False
2025-05-04 18:00:16,357 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-04 18:00:17,680 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-04 18:00:17,680 - app.db - INFO - Inserting application logs.
2025-05-04 18:00:17,681 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-04 18:00:17,683 - app.db - INFO - Successfully inserted application logs.
2025-05-04 18:00:17,684 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Chc chn ri!  c th cung cp cho bn nhng thng tin hu ch nht, bn c th cho mnh bit bn mun tm hiu thm v loi sn phm chm sc da no khng? V d, bn c quan tm n cc sn phm c th cho mt loi da nht nh, cc thnh phn nn tm kim hay trnh, hoc quy trnh chm sc da c bn khng?
2025-05-04 18:00:32,655 - app.chat_controller - INFO - User Query: Bn gii thiu cho mnh i, ci no cng c
2025-05-04 18:00:32,655 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-04 18:00:32,655 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-04 18:00:32,657 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: Bn gii thiu cho mnh i, ci no cng c
2025-05-04 18:00:33,451 - app.langchain - INFO - Rewritten prompt: content='Bn gii thiu cho mnh mt ci i, ci no cng c.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-55388472-2d03-4086-88e7-ea647cc5d571-0' usage_metadata={'input_tokens': 212, 'output_tokens': 15, 'total_tokens': 227, 'input_token_details': {'cache_read': 0}}
2025-05-04 18:00:33,451 - app.chat_controller - INFO - Rewritten Prompt: Bn gii thiu cho mnh mt ci i, ci no cng c.
2025-05-04 18:00:33,451 - app.db - INFO - Getting chat history.
2025-05-04 18:00:33,452 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-04 18:00:33,456 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-04 18:00:33,456 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Bn gii thiu cho mnh mt ci i, ci no cng c.
2025-05-04 18:00:33,456 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-04 18:00:33,546 - app.intent_detector - INFO - Detected intent: khng lin quan for input: Bn gii thiu cho mnh mt ci i, ci no cng c.
2025-05-04 18:00:33,546 - app.langchain - INFO - Selected fallback prompt
2025-05-04 18:00:33,547 - app.langchain - INFO - Detected intent: khng lin quan | Requires context: False
2025-05-04 18:00:33,547 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-04 18:00:34,883 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-04 18:00:34,883 - app.db - INFO - Inserting application logs.
2025-05-04 18:00:34,884 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-04 18:00:34,887 - app.db - INFO - Successfully inserted application logs.
2025-05-04 18:00:34,888 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Chc chn ri, ti rt vui c gip bn!  a ra  xut tt nht, bn c th cho ti bit bn ang tm kim loi sn phm no khng? Bn c quan tm n trang im, chm sc da hay th g khc khng? Ngoi ra, bn c bt k s thch, loi da hoc mi quan tm c th no m bn mun ti xem xt khng? Thng tin chi tit hn s gip ti cung cp mt  xut ph hp hn cho bn.
2025-05-04 18:00:54,301 - app.chat_controller - INFO - User Query: , loi sn phm no m bn bit khng? Gii thiu ci no cng c
2025-05-04 18:00:54,301 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-04 18:00:54,302 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-04 18:00:54,303 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: , loi sn phm no m bn bit khng? Gii thiu ci no cng c
2025-05-04 18:00:55,062 - app.langchain - INFO - Rewritten prompt: content='Bn bit nhng loi sn phm no? Gii thiu mt sn phm bt k.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-548d1e7f-3e99-4745-9a7d-90cb82318692-0' usage_metadata={'input_tokens': 220, 'output_tokens': 18, 'total_tokens': 238, 'input_token_details': {'cache_read': 0}}
2025-05-04 18:00:55,062 - app.chat_controller - INFO - Rewritten Prompt: Bn bit nhng loi sn phm no? Gii thiu mt sn phm bt k.
2025-05-04 18:00:55,062 - app.db - INFO - Getting chat history.
2025-05-04 18:00:55,063 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-04 18:00:55,068 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-04 18:00:55,068 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Bn bit nhng loi sn phm no? Gii thiu mt sn phm bt k.
2025-05-04 18:00:55,068 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-04 18:00:55,156 - app.intent_detector - INFO - Detected intent: khng lin quan for input: Bn bit nhng loi sn phm no? Gii thiu mt sn phm bt k.
2025-05-04 18:00:55,156 - app.langchain - INFO - Selected fallback prompt
2025-05-04 18:00:55,157 - app.langchain - INFO - Detected intent: khng lin quan | Requires context: False
2025-05-04 18:00:55,157 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-04 18:00:56,490 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-04 18:00:56,490 - app.db - INFO - Inserting application logs.
2025-05-04 18:00:56,491 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-04 18:00:56,495 - app.db - INFO - Successfully inserted application logs.
2025-05-04 18:00:56,496 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti c th h tr bn v nhiu loi sn phm trang im v chm sc da khc nhau.  gip ti a ra  xut tt hn, bn c th cho ti bit bn ang tm kim loi sn phm no, loi da ca bn l g v bn c bt k mi quan tm c th no khng? Sau khi ti c mt s thng tin ny, ti c th cho bn mt s  xut c c nhn ha.
2025-05-05 16:28:27,368 - app.chat_controller - INFO - User Query: Xin cho
2025-05-05 16:28:27,368 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-05 16:28:27,368 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:28:27,371 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: Xin cho
2025-05-05 16:28:28,252 - app.langchain - INFO - Rewritten prompt: content='Xin cho.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-ed46d4b7-737b-49e8-9691-b3ea6d243f75-0' usage_metadata={'input_tokens': 202, 'output_tokens': 4, 'total_tokens': 206, 'input_token_details': {'cache_read': 0}}
2025-05-05 16:28:28,252 - app.chat_controller - INFO - Rewritten Prompt: Xin cho.
2025-05-05 16:28:28,252 - app.db - INFO - Getting chat history.
2025-05-05 16:28:28,266 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:28:28,277 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-05 16:28:28,278 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Xin cho.
2025-05-05 16:28:28,278 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:28:28,284 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 16:29:18,208 - app.chat_controller - INFO - User Query: Xin cho 
2025-05-05 16:29:18,208 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-05 16:29:18,208 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:29:18,210 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: Xin cho 
2025-05-05 16:29:18,935 - app.langchain - INFO - Rewritten prompt: content='Xin cho.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-fb827110-e085-4d9a-b09e-58f247ffc75e-0' usage_metadata={'input_tokens': 203, 'output_tokens': 4, 'total_tokens': 207, 'input_token_details': {'cache_read': 0}}
2025-05-05 16:29:18,935 - app.chat_controller - INFO - Rewritten Prompt: Xin cho.
2025-05-05 16:29:18,935 - app.db - INFO - Getting chat history.
2025-05-05 16:29:18,939 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:29:18,943 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-05 16:29:18,943 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Xin cho.
2025-05-05 16:29:18,944 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:29:18,949 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 16:29:25,289 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 16:29:25,289 - app.db - INFO - Inserting application logs.
2025-05-05 16:29:25,291 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:29:25,305 - app.db - INFO - Successfully inserted application logs.
2025-05-05 16:29:25,306 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Xin cho! Rt vui c gip bn.  ti c th h tr bn tt nht, bn c th cho ti bit bn ang mun tm hiu v iu g lin quan n trang im hoc chm sc da khng? V d, bn c th c cu hi v mt sn phm c th, mt k thut trang im hoc mt mi quan tm v da c th m bn mun gii quyt.
2025-05-05 16:30:29,830 - app.chat_controller - INFO - User Query: Xin cho
2025-05-05 16:30:29,830 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-05 16:30:29,830 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:30:29,833 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: Xin cho
2025-05-05 16:30:30,640 - app.langchain - INFO - Rewritten prompt: content='Xin cho.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-c65835e5-fbaf-4537-acb6-555209c5c1c1-0' usage_metadata={'input_tokens': 202, 'output_tokens': 4, 'total_tokens': 206, 'input_token_details': {'cache_read': 0}}
2025-05-05 16:30:30,640 - app.chat_controller - INFO - Rewritten Prompt: Xin cho.
2025-05-05 16:30:30,640 - app.db - INFO - Getting chat history.
2025-05-05 16:30:30,642 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:30:30,646 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-05 16:30:30,647 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Xin cho.
2025-05-05 16:30:30,647 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:30:30,650 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 16:30:34,220 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 16:30:34,220 - app.db - INFO - Inserting application logs.
2025-05-05 16:30:34,221 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:30:34,224 - app.db - INFO - Successfully inserted application logs.
2025-05-05 16:30:34,225 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cho bn! Ti c th gip g c cho bn v trang im hoc chm sc da? Bn c th vui lng cho ti bit bn ang mun tm hiu v iu g c th  ti c th a ra cu tr li tt nht khng? V d, bn c th c cu hi v mt sn phm c th, mt k thut trang im hoc mt mi quan tm v da c th m bn mun gii quyt.
2025-05-05 16:32:34,954 - app.chat_controller - INFO - User Query: Xin cho
2025-05-05 16:32:34,954 - app.db - INFO - Getting chat history.
2025-05-05 16:32:34,957 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:32:34,961 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-05 16:32:34,961 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Xin cho
2025-05-05 16:32:34,961 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:32:34,967 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 16:32:37,487 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 16:32:37,487 - app.db - INFO - Inserting application logs.
2025-05-05 16:32:37,489 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:32:37,493 - app.db - INFO - Successfully inserted application logs.
2025-05-05 16:32:37,494 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cho bn! Ti  y  gip bn vi mi th lin quan n trang im v chm sc da. Bn c cu hi c th no m bn mun ti tr li khng?
2025-05-05 16:32:47,882 - app.chat_controller - INFO - User Query: Ti tn l Nam
2025-05-05 16:32:47,882 - app.db - INFO - Getting chat history.
2025-05-05 16:32:47,883 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:32:47,887 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-05 16:32:47,888 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Ti tn l Nam
2025-05-05 16:32:47,888 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:32:47,890 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 16:32:50,797 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 16:32:50,797 - app.db - INFO - Inserting application logs.
2025-05-05 16:32:50,798 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:32:50,802 - app.db - INFO - Successfully inserted application logs.
2025-05-05 16:32:50,803 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Rt vui c gp bn, Nam! Ti  y  gip bn vi mi th lin quan n trang im v chm sc da. Bn c cu hi c th no m bn mun ti tr li khng?
2025-05-05 16:33:03,453 - app.chat_controller - INFO - User Query: Tn ti l g?
2025-05-05 16:33:03,453 - app.db - INFO - Getting chat history.
2025-05-05 16:33:03,455 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:33:03,460 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-05 16:33:03,460 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Tn ti l g?
2025-05-05 16:33:03,460 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:33:03,463 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 16:33:09,824 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 16:33:09,824 - app.db - INFO - Inserting application logs.
2025-05-05 16:33:09,825 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:33:09,829 - app.db - INFO - Successfully inserted application logs.
2025-05-05 16:33:09,830 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti rt tic, nhng ti khng c quyn truy cp vo thng tin c nhn ca bn. Ti l mt m hnh ngn ng ln v khng c kh nng ghi nh nhng cuc tr chuyn trc y. Tuy nhin, nu bn mun chia s tn ca bn vi ti, ti s nh n trong cuc tr chuyn ny.
2025-05-05 16:34:41,296 - app.chat_controller - INFO - User Query: Rt vui c gp bn
2025-05-05 16:34:41,297 - app.db - INFO - Getting chat history.
2025-05-05 16:34:41,298 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:34:41,304 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-05 16:34:41,304 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Rt vui c gp bn
2025-05-05 16:34:41,304 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:34:41,311 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 16:34:44,243 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 16:34:44,243 - app.db - INFO - Inserting application logs.
2025-05-05 16:34:44,244 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:34:44,249 - app.db - INFO - Successfully inserted application logs.
2025-05-05 16:34:44,250 - app.chat_controller - INFO - Session ID: frontend-simple-session, Chat history: [('human', 'Tn ti l g?'), ('ai', 'Ti rt tic, nhng ti khng c quyn truy cp vo thng tin c nhn ca bn. Ti l mt m hnh ngn ng ln v khng c kh nng ghi nh nhng cuc tr chuyn trc y. Tuy nhin, nu bn mun chia s tn ca bn vi ti, ti s nh n trong cuc tr chuyn ny.'), ('human', 'Ti tn l Nam'), ('ai', 'Rt vui c gp bn, Nam! Ti  y  gip bn vi mi th lin quan n trang im v chm sc da. Bn c cu hi c th no m bn mun ti tr li khng?'), ('human', 'Xin cho'), ('ai', 'Cho bn! Ti  y  gip bn vi mi th lin quan n trang im v chm sc da. Bn c cu hi c th no m bn mun ti tr li khng?'), ('human', 'Xin cho.'), ('ai', 'Cho bn! Ti c th gip g c cho bn v trang im hoc chm sc da? Bn c th vui lng cho ti bit bn ang mun tm hiu v iu g c th  ti c th a ra cu tr li tt nht khng? V d, bn c th c cu hi v mt sn phm c th, mt k thut trang im hoc mt mi quan tm v da c th m bn mun gii quyt.'), ('human', 'Xin cho.'), ('ai', 'Xin cho! Rt vui c gip bn.  ti c th h tr bn tt nht, bn c th cho ti bit bn ang mun tm hiu v iu g lin quan n trang im hoc chm sc da khng? V d, bn c th c cu hi v mt sn phm c th, mt k thut trang im hoc mt mi quan tm v da c th m bn mun gii quyt.'), ('human', 'Bn bit nhng loi sn phm no? Gii thiu mt sn phm bt k.'), ('ai', 'Ti c th h tr bn v nhiu loi sn phm trang im v chm sc da khc nhau.  gip ti a ra  xut tt hn, bn c th cho ti bit bn ang tm kim loi sn phm no, loi da ca bn l g v bn c bt k mi quan tm c th no khng? Sau khi ti c mt s thng tin ny, ti c th cho bn mt s  xut c c nhn ha.'), ('human', 'Bn gii thiu cho mnh mt ci i, ci no cng c.'), ('ai', 'Chc chn ri, ti rt vui c gip bn!  a ra  xut tt nht, bn c th cho ti bit bn ang tm kim loi sn phm no khng? Bn c quan tm n trang im, chm sc da hay th g khc khng? Ngoi ra, bn c bt k s thch, loi da hoc mi quan tm c th no m bn mun ti xem xt khng? Thng tin chi tit hn s gip ti cung cp mt  xut ph hp hn cho bn.'), ('human', 'Cho mnh bit v cc sn phm chm sc da.'), ('ai', 'Chc chn ri!  c th cung cp cho bn nhng thng tin hu ch nht, bn c th cho mnh bit bn mun tm hiu thm v loi sn phm chm sc da no khng? V d, bn c quan tm n cc sn phm c th cho mt loi da nht nh, cc thnh phn nn tm kim hay trnh, hoc quy trnh chm sc da c bn khng?'), ('human', 'Loi da ca ti l da du.'), ('ai', 'Ti hiu ri.  c th cung cp cho bn nhng li khuyn tt nht v trang im hoc chm sc da ph hp vi ln da du ca bn, vui lng cho ti bit bn mun tm hiu thm v iu g. Bn c mun bit v cc sn phm chm sc da tt nht cho da du, cc k thut trang im gip kim sot du, hoc mt vn  c th no khc khng?'), ('human', 'Ti mun chm sc da kiu g?'), ('ai', 'Ti c th gip bn iu !  a ra nhng li khuyn tt nht, ti cn bit thm mt cht v nhng g bn ang tm kim. Bn c th cho ti bit loi da ca bn l g, nhng mi quan tm v da c th ca bn l g v bn ang mun t c iu g vi quy trnh chm sc da ca mnh khng?')], AI response: Ti cng rt vui c gp bn. Ti c th gip g c cho bn hm nay?
2025-05-05 16:38:36,364 - app.chat_controller - INFO - User Query: Tn ti l g?
2025-05-05 16:38:36,364 - app.db - INFO - Getting chat history.
2025-05-05 16:38:36,366 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:38:36,370 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-05-05 16:38:36,370 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Tn ti l g?
2025-05-05 16:38:36,370 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:38:36,373 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 16:38:37,630 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 16:38:37,630 - app.db - INFO - Inserting application logs.
2025-05-05 16:38:37,632 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:38:37,635 - app.db - INFO - Successfully inserted application logs.
2025-05-05 16:38:37,637 - app.chat_controller - INFO - Session ID: frontend-simple-session, Chat history: [], AI response: Ti xin li, ti khng c quyn truy cp vo thng tin . Nhng ti c th gip bn trang im nu bn mun!
2025-05-05 16:39:21,205 - app.chat_controller - INFO - User Query: Tn ti l g
2025-05-05 16:39:21,205 - app.db - INFO - Getting chat history.
2025-05-05 16:39:21,208 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:39:21,210 - app.db - INFO - Successfully retrieved 1 conversation turns
2025-05-05 16:42:39,667 - app.chat_controller - INFO - User Query: Hello
2025-05-05 16:42:39,667 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-05 16:42:39,667 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:42:39,670 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: Hello
2025-05-05 16:42:40,396 - app.langchain - INFO - Rewritten prompt: content='Cho bn.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-bbf8b7c4-4b2b-4c21-9483-83ce33defaba-0' usage_metadata={'input_tokens': 201, 'output_tokens': 5, 'total_tokens': 206, 'input_token_details': {'cache_read': 0}}
2025-05-05 16:42:40,396 - app.chat_controller - INFO - Rewritten Prompt: Cho bn.
2025-05-05 16:42:40,396 - app.db - INFO - Getting chat history.
2025-05-05 16:42:40,403 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:42:40,406 - app.db - INFO - Successfully retrieved 1 conversation turns
2025-05-05 16:42:40,406 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Cho bn.
2025-05-05 16:42:40,406 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:42:40,721 - app.intent_detector - INFO - Detected intent: cho hi for input: Cho bn.
2025-05-05 16:42:40,721 - app.langchain - INFO - Selected fallback prompt
2025-05-05 16:42:40,722 - app.langchain - INFO - Detected intent: cho hi | Requires context: False
2025-05-05 16:42:40,722 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 16:42:42,136 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 16:42:42,136 - app.db - INFO - Inserting application logs.
2025-05-05 16:42:42,137 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:42:42,140 - app.db - INFO - Successfully inserted application logs.
2025-05-05 16:42:42,141 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cho bn! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?
2025-05-05 16:42:51,263 - app.chat_controller - INFO - User Query: Tn ti l Nam
2025-05-05 16:42:51,263 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-05 16:42:51,263 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:42:51,265 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: Tn ti l Nam
2025-05-05 16:42:51,864 - app.langchain - INFO - Rewritten prompt: content='Tn ti l Nam.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-1e01aba3-0c02-4fc8-8243-1e606f16688a-0' usage_metadata={'input_tokens': 205, 'output_tokens': 6, 'total_tokens': 211, 'input_token_details': {'cache_read': 0}}
2025-05-05 16:42:51,864 - app.chat_controller - INFO - Rewritten Prompt: Tn ti l Nam.
2025-05-05 16:42:51,864 - app.db - INFO - Getting chat history.
2025-05-05 16:42:51,867 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:42:51,871 - app.db - INFO - Successfully retrieved 2 conversation turns
2025-05-05 16:42:51,871 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Tn ti l Nam.
2025-05-05 16:42:51,871 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:42:51,949 - app.intent_detector - INFO - Detected intent: cho hi for input: Tn ti l Nam.
2025-05-05 16:42:51,949 - app.langchain - INFO - Selected fallback prompt
2025-05-05 16:42:51,950 - app.langchain - INFO - Detected intent: cho hi | Requires context: False
2025-05-05 16:42:51,950 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 16:42:54,012 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 16:42:54,012 - app.db - INFO - Inserting application logs.
2025-05-05 16:42:54,013 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:42:54,016 - app.db - INFO - Successfully inserted application logs.
2025-05-05 16:42:54,017 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cho Nam, rt vui c gp bn! Ti c th gip bn iu g v trang im hoc chm sc da?  ti c th h tr bn tt nht, bn c th cho ti bit bn mun hi g c th hn khng? V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im hoc mt vn  v da nht nh.
2025-05-05 16:42:57,381 - app.chat_controller - INFO - User Query: Ti tn l g
2025-05-05 16:42:57,382 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-05 16:42:57,382 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:42:57,383 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: Ti tn l g
2025-05-05 16:42:58,083 - app.langchain - INFO - Rewritten prompt: content='Ti tn l g?' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-3991bc2b-f2e9-4b43-970e-5704122c6a76-0' usage_metadata={'input_tokens': 204, 'output_tokens': 6, 'total_tokens': 210, 'input_token_details': {'cache_read': 0}}
2025-05-05 16:42:58,083 - app.chat_controller - INFO - Rewritten Prompt: Ti tn l g?
2025-05-05 16:42:58,083 - app.db - INFO - Getting chat history.
2025-05-05 16:42:58,085 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:42:58,090 - app.db - INFO - Successfully retrieved 3 conversation turns
2025-05-05 16:42:58,090 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Ti tn l g?
2025-05-05 16:42:58,090 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:42:58,172 - app.intent_detector - INFO - Detected intent: cho hi for input: Ti tn l g?
2025-05-05 16:42:58,172 - app.langchain - INFO - Selected fallback prompt
2025-05-05 16:42:58,172 - app.langchain - INFO - Detected intent: cho hi | Requires context: False
2025-05-05 16:42:58,172 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 16:42:59,852 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 16:42:59,852 - app.db - INFO - Inserting application logs.
2025-05-05 16:42:59,853 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:42:59,856 - app.db - INFO - Successfully inserted application logs.
2025-05-05 16:42:59,857 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti rt tic, ti khng bit tn ca bn. Ti khng c quyn truy cp vo thng tin c nhn ca bn.
2025-05-05 16:45:39,526 - app.chat_controller - INFO - User Query: Hola
2025-05-05 16:45:39,526 - app.db - INFO - Getting chat history.
2025-05-05 16:45:39,528 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:45:39,532 - app.db - INFO - Successfully retrieved 4 conversation turns
2025-05-05 16:45:39,532 - app.chat_controller - INFO - Chat history for session frontend-simple-session: [('human', 'Ti tn l g?'), ('ai', 'Ti rt tic, ti khng bit tn ca bn. Ti khng c quyn truy cp vo thng tin c nhn ca bn.'), ('human', 'Tn ti l Nam.'), ('ai', 'Cho Nam, rt vui c gp bn! Ti c th gip bn iu g v trang im hoc chm sc da?  ti c th h tr bn tt nht, bn c th cho ti bit bn mun hi g c th hn khng? V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im hoc mt vn  v da nht nh.'), ('human', 'Cho bn.'), ('ai', 'Cho bn! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Tn ti l g?'), ('ai', 'Ti xin li, ti khng c quyn truy cp vo thng tin . Nhng ti c th gip bn trang im nu bn mun!')]
2025-05-05 16:45:39,532 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hola
2025-05-05 16:45:39,532 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:45:39,537 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 16:45:42,761 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 16:45:42,761 - app.db - INFO - Inserting application logs.
2025-05-05 16:45:42,763 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:45:42,766 - app.db - INFO - Successfully inserted application logs.
2025-05-05 16:45:42,767 - app.chat_controller - INFO - Session ID: frontend-simple-session, Chat history: [('human', 'Ti tn l g?'), ('ai', 'Ti rt tic, ti khng bit tn ca bn. Ti khng c quyn truy cp vo thng tin c nhn ca bn.'), ('human', 'Tn ti l Nam.'), ('ai', 'Cho Nam, rt vui c gp bn! Ti c th gip bn iu g v trang im hoc chm sc da?  ti c th h tr bn tt nht, bn c th cho ti bit bn mun hi g c th hn khng? V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im hoc mt vn  v da nht nh.'), ('human', 'Cho bn.'), ('ai', 'Cho bn! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Tn ti l g?'), ('ai', 'Ti xin li, ti khng c quyn truy cp vo thng tin . Nhng ti c th gip bn trang im nu bn mun!')], AI response: Hola Nam! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?
2025-05-05 16:45:50,553 - app.chat_controller - INFO - User Query: Bn nh tn ti h
2025-05-05 16:45:50,553 - app.db - INFO - Getting chat history.
2025-05-05 16:45:50,554 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:45:50,560 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-05 16:45:50,560 - app.chat_controller - INFO - Chat history for session frontend-simple-session: [('human', 'Hola'), ('ai', 'Hola Nam! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Ti tn l g?'), ('ai', 'Ti rt tic, ti khng bit tn ca bn. Ti khng c quyn truy cp vo thng tin c nhn ca bn.'), ('human', 'Tn ti l Nam.'), ('ai', 'Cho Nam, rt vui c gp bn! Ti c th gip bn iu g v trang im hoc chm sc da?  ti c th h tr bn tt nht, bn c th cho ti bit bn mun hi g c th hn khng? V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im hoc mt vn  v da nht nh.'), ('human', 'Cho bn.'), ('ai', 'Cho bn! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Tn ti l g?'), ('ai', 'Ti xin li, ti khng c quyn truy cp vo thng tin . Nhng ti c th gip bn trang im nu bn mun!')]
2025-05-05 16:45:50,560 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Bn nh tn ti h
2025-05-05 16:45:50,560 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:45:50,563 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 16:45:52,666 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 16:45:52,666 - app.db - INFO - Inserting application logs.
2025-05-05 16:45:52,667 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:45:52,670 - app.db - INFO - Successfully inserted application logs.
2025-05-05 16:45:52,671 - app.chat_controller - INFO - Session ID: frontend-simple-session, Chat history: [('human', 'Hola'), ('ai', 'Hola Nam! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Ti tn l g?'), ('ai', 'Ti rt tic, ti khng bit tn ca bn. Ti khng c quyn truy cp vo thng tin c nhn ca bn.'), ('human', 'Tn ti l Nam.'), ('ai', 'Cho Nam, rt vui c gp bn! Ti c th gip bn iu g v trang im hoc chm sc da?  ti c th h tr bn tt nht, bn c th cho ti bit bn mun hi g c th hn khng? V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im hoc mt vn  v da nht nh.'), ('human', 'Cho bn.'), ('ai', 'Cho bn! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Tn ti l g?'), ('ai', 'Ti xin li, ti khng c quyn truy cp vo thng tin . Nhng ti c th gip bn trang im nu bn mun!')], AI response: Ti nh tn bn l Nam! Bn c mun ti gip bn bt k iu g lin quan n trang im hoc chm sc da khng?
2025-05-05 16:45:57,929 - app.chat_controller - INFO - User Query: Ti thch n ko
2025-05-05 16:45:57,929 - app.db - INFO - Getting chat history.
2025-05-05 16:45:57,931 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:45:57,935 - app.db - INFO - Successfully retrieved 6 conversation turns
2025-05-05 16:45:57,935 - app.chat_controller - INFO - Chat history for session frontend-simple-session: [('human', 'Bn nh tn ti h'), ('ai', 'Ti nh tn bn l Nam! Bn c mun ti gip bn bt k iu g lin quan n trang im hoc chm sc da khng?'), ('human', 'Hola'), ('ai', 'Hola Nam! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Ti tn l g?'), ('ai', 'Ti rt tic, ti khng bit tn ca bn. Ti khng c quyn truy cp vo thng tin c nhn ca bn.'), ('human', 'Tn ti l Nam.'), ('ai', 'Cho Nam, rt vui c gp bn! Ti c th gip bn iu g v trang im hoc chm sc da?  ti c th h tr bn tt nht, bn c th cho ti bit bn mun hi g c th hn khng? V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im hoc mt vn  v da nht nh.'), ('human', 'Cho bn.'), ('ai', 'Cho bn! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Tn ti l g?'), ('ai', 'Ti xin li, ti khng c quyn truy cp vo thng tin . Nhng ti c th gip bn trang im nu bn mun!')]
2025-05-05 16:45:57,935 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Ti thch n ko
2025-05-05 16:45:57,935 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:45:57,937 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 16:46:00,583 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 16:46:00,583 - app.db - INFO - Inserting application logs.
2025-05-05 16:46:00,585 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:46:00,588 - app.db - INFO - Successfully inserted application logs.
2025-05-05 16:46:00,589 - app.chat_controller - INFO - Session ID: frontend-simple-session, Chat history: [('human', 'Bn nh tn ti h'), ('ai', 'Ti nh tn bn l Nam! Bn c mun ti gip bn bt k iu g lin quan n trang im hoc chm sc da khng?'), ('human', 'Hola'), ('ai', 'Hola Nam! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Ti tn l g?'), ('ai', 'Ti rt tic, ti khng bit tn ca bn. Ti khng c quyn truy cp vo thng tin c nhn ca bn.'), ('human', 'Tn ti l Nam.'), ('ai', 'Cho Nam, rt vui c gp bn! Ti c th gip bn iu g v trang im hoc chm sc da?  ti c th h tr bn tt nht, bn c th cho ti bit bn mun hi g c th hn khng? V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im hoc mt vn  v da nht nh.'), ('human', 'Cho bn.'), ('ai', 'Cho bn! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Tn ti l g?'), ('ai', 'Ti xin li, ti khng c quyn truy cp vo thng tin . Nhng ti c th gip bn trang im nu bn mun!')], AI response: Tuyt vi! Ko chc chn l mt mn n th v. Nu bn mun, ti c th hng dn bn cch la chn son bng hoc son mi ngt ngo  ph hp vi s thch n ko ca bn.
2025-05-05 16:46:03,459 - app.chat_controller - INFO - User Query: Ti thch n g?
2025-05-05 16:46:03,459 - app.db - INFO - Getting chat history.
2025-05-05 16:46:03,461 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:46:03,466 - app.db - INFO - Successfully retrieved 7 conversation turns
2025-05-05 16:46:03,466 - app.chat_controller - INFO - Chat history for session frontend-simple-session: [('human', 'Ti thch n ko'), ('ai', 'Tuyt vi! Ko chc chn l mt mn n th v. Nu bn mun, ti c th hng dn bn cch la chn son bng hoc son mi ngt ngo  ph hp vi s thch n ko ca bn.'), ('human', 'Bn nh tn ti h'), ('ai', 'Ti nh tn bn l Nam! Bn c mun ti gip bn bt k iu g lin quan n trang im hoc chm sc da khng?'), ('human', 'Hola'), ('ai', 'Hola Nam! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Ti tn l g?'), ('ai', 'Ti rt tic, ti khng bit tn ca bn. Ti khng c quyn truy cp vo thng tin c nhn ca bn.'), ('human', 'Tn ti l Nam.'), ('ai', 'Cho Nam, rt vui c gp bn! Ti c th gip bn iu g v trang im hoc chm sc da?  ti c th h tr bn tt nht, bn c th cho ti bit bn mun hi g c th hn khng? V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im hoc mt vn  v da nht nh.'), ('human', 'Cho bn.'), ('ai', 'Cho bn! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Tn ti l g?'), ('ai', 'Ti xin li, ti khng c quyn truy cp vo thng tin . Nhng ti c th gip bn trang im nu bn mun!')]
2025-05-05 16:46:03,466 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Ti thch n g?
2025-05-05 16:46:03,466 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:46:03,469 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 16:46:08,571 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 16:46:08,571 - app.db - INFO - Inserting application logs.
2025-05-05 16:46:08,572 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:46:08,576 - app.db - INFO - Successfully inserted application logs.
2025-05-05 16:46:08,577 - app.chat_controller - INFO - Session ID: frontend-simple-session, Chat history: [('human', 'Ti thch n ko'), ('ai', 'Tuyt vi! Ko chc chn l mt mn n th v. Nu bn mun, ti c th hng dn bn cch la chn son bng hoc son mi ngt ngo  ph hp vi s thch n ko ca bn.'), ('human', 'Bn nh tn ti h'), ('ai', 'Ti nh tn bn l Nam! Bn c mun ti gip bn bt k iu g lin quan n trang im hoc chm sc da khng?'), ('human', 'Hola'), ('ai', 'Hola Nam! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Ti tn l g?'), ('ai', 'Ti rt tic, ti khng bit tn ca bn. Ti khng c quyn truy cp vo thng tin c nhn ca bn.'), ('human', 'Tn ti l Nam.'), ('ai', 'Cho Nam, rt vui c gp bn! Ti c th gip bn iu g v trang im hoc chm sc da?  ti c th h tr bn tt nht, bn c th cho ti bit bn mun hi g c th hn khng? V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im hoc mt vn  v da nht nh.'), ('human', 'Cho bn.'), ('ai', 'Cho bn! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Tn ti l g?'), ('ai', 'Ti xin li, ti khng c quyn truy cp vo thng tin . Nhng ti c th gip bn trang im nu bn mun!')], AI response: Ti bit bn thch ko! Vy, bn c mun ti cho bn mt vi gi  v son bng hoc son mi c mi thm ngt ngo khng?
2025-05-05 16:46:25,599 - app.chat_controller - INFO - User Query: Ti c m lm ngh chi li
2025-05-05 16:46:25,599 - app.db - INFO - Getting chat history.
2025-05-05 16:46:25,601 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:46:25,606 - app.db - INFO - Successfully retrieved 8 conversation turns
2025-05-05 16:46:25,606 - app.chat_controller - INFO - Chat history for session frontend-simple-session: [('human', 'Ti thch n g?'), ('ai', 'Ti bit bn thch ko! Vy, bn c mun ti cho bn mt vi gi  v son bng hoc son mi c mi thm ngt ngo khng?'), ('human', 'Ti thch n ko'), ('ai', 'Tuyt vi! Ko chc chn l mt mn n th v. Nu bn mun, ti c th hng dn bn cch la chn son bng hoc son mi ngt ngo  ph hp vi s thch n ko ca bn.'), ('human', 'Bn nh tn ti h'), ('ai', 'Ti nh tn bn l Nam! Bn c mun ti gip bn bt k iu g lin quan n trang im hoc chm sc da khng?'), ('human', 'Hola'), ('ai', 'Hola Nam! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Ti tn l g?'), ('ai', 'Ti rt tic, ti khng bit tn ca bn. Ti khng c quyn truy cp vo thng tin c nhn ca bn.'), ('human', 'Tn ti l Nam.'), ('ai', 'Cho Nam, rt vui c gp bn! Ti c th gip bn iu g v trang im hoc chm sc da?  ti c th h tr bn tt nht, bn c th cho ti bit bn mun hi g c th hn khng? V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im hoc mt vn  v da nht nh.'), ('human', 'Cho bn.'), ('ai', 'Cho bn! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Tn ti l g?'), ('ai', 'Ti xin li, ti khng c quyn truy cp vo thng tin . Nhng ti c th gip bn trang im nu bn mun!')]
2025-05-05 16:46:25,606 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Ti c m lm ngh chi li
2025-05-05 16:46:25,606 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:46:25,608 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 16:46:28,232 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 16:46:28,232 - app.db - INFO - Inserting application logs.
2025-05-05 16:46:28,234 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:46:28,238 - app.db - INFO - Successfully inserted application logs.
2025-05-05 16:46:28,239 - app.chat_controller - INFO - Session ID: frontend-simple-session, Chat history: [('human', 'Ti thch n g?'), ('ai', 'Ti bit bn thch ko! Vy, bn c mun ti cho bn mt vi gi  v son bng hoc son mi c mi thm ngt ngo khng?'), ('human', 'Ti thch n ko'), ('ai', 'Tuyt vi! Ko chc chn l mt mn n th v. Nu bn mun, ti c th hng dn bn cch la chn son bng hoc son mi ngt ngo  ph hp vi s thch n ko ca bn.'), ('human', 'Bn nh tn ti h'), ('ai', 'Ti nh tn bn l Nam! Bn c mun ti gip bn bt k iu g lin quan n trang im hoc chm sc da khng?'), ('human', 'Hola'), ('ai', 'Hola Nam! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Ti tn l g?'), ('ai', 'Ti rt tic, ti khng bit tn ca bn. Ti khng c quyn truy cp vo thng tin c nhn ca bn.'), ('human', 'Tn ti l Nam.'), ('ai', 'Cho Nam, rt vui c gp bn! Ti c th gip bn iu g v trang im hoc chm sc da?  ti c th h tr bn tt nht, bn c th cho ti bit bn mun hi g c th hn khng? V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im hoc mt vn  v da nht nh.'), ('human', 'Cho bn.'), ('ai', 'Cho bn! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Tn ti l g?'), ('ai', 'Ti xin li, ti khng c quyn truy cp vo thng tin . Nhng ti c th gip bn trang im nu bn mun!')], AI response: Tht tuyt vi khi m bn l mt ng dn! N nghe nh mt cng vic chm ch nhng b ch. Bn c mun ti gip bn tm mt loi kem chng nng tt khng?
2025-05-05 16:46:32,731 - app.chat_controller - INFO - User Query: M ti lm ngh g
2025-05-05 16:46:32,731 - app.db - INFO - Getting chat history.
2025-05-05 16:46:32,732 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:46:32,738 - app.db - INFO - Successfully retrieved 9 conversation turns
2025-05-05 16:46:32,738 - app.chat_controller - INFO - Chat history for session frontend-simple-session: [('human', 'Ti c m lm ngh chi li'), ('ai', 'Tht tuyt vi khi m bn l mt ng dn! N nghe nh mt cng vic chm ch nhng b ch. Bn c mun ti gip bn tm mt loi kem chng nng tt khng?'), ('human', 'Ti thch n g?'), ('ai', 'Ti bit bn thch ko! Vy, bn c mun ti cho bn mt vi gi  v son bng hoc son mi c mi thm ngt ngo khng?'), ('human', 'Ti thch n ko'), ('ai', 'Tuyt vi! Ko chc chn l mt mn n th v. Nu bn mun, ti c th hng dn bn cch la chn son bng hoc son mi ngt ngo  ph hp vi s thch n ko ca bn.'), ('human', 'Bn nh tn ti h'), ('ai', 'Ti nh tn bn l Nam! Bn c mun ti gip bn bt k iu g lin quan n trang im hoc chm sc da khng?'), ('human', 'Hola'), ('ai', 'Hola Nam! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Ti tn l g?'), ('ai', 'Ti rt tic, ti khng bit tn ca bn. Ti khng c quyn truy cp vo thng tin c nhn ca bn.'), ('human', 'Tn ti l Nam.'), ('ai', 'Cho Nam, rt vui c gp bn! Ti c th gip bn iu g v trang im hoc chm sc da?  ti c th h tr bn tt nht, bn c th cho ti bit bn mun hi g c th hn khng? V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im hoc mt vn  v da nht nh.'), ('human', 'Cho bn.'), ('ai', 'Cho bn! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Tn ti l g?'), ('ai', 'Ti xin li, ti khng c quyn truy cp vo thng tin . Nhng ti c th gip bn trang im nu bn mun!')]
2025-05-05 16:46:32,738 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: M ti lm ngh g
2025-05-05 16:46:32,738 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:46:32,740 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 16:46:34,720 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 16:46:34,720 - app.db - INFO - Inserting application logs.
2025-05-05 16:46:34,721 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:46:34,726 - app.db - INFO - Successfully inserted application logs.
2025-05-05 16:46:34,728 - app.chat_controller - INFO - Session ID: frontend-simple-session, Chat history: [('human', 'Ti c m lm ngh chi li'), ('ai', 'Tht tuyt vi khi m bn l mt ng dn! N nghe nh mt cng vic chm ch nhng b ch. Bn c mun ti gip bn tm mt loi kem chng nng tt khng?'), ('human', 'Ti thch n g?'), ('ai', 'Ti bit bn thch ko! Vy, bn c mun ti cho bn mt vi gi  v son bng hoc son mi c mi thm ngt ngo khng?'), ('human', 'Ti thch n ko'), ('ai', 'Tuyt vi! Ko chc chn l mt mn n th v. Nu bn mun, ti c th hng dn bn cch la chn son bng hoc son mi ngt ngo  ph hp vi s thch n ko ca bn.'), ('human', 'Bn nh tn ti h'), ('ai', 'Ti nh tn bn l Nam! Bn c mun ti gip bn bt k iu g lin quan n trang im hoc chm sc da khng?'), ('human', 'Hola'), ('ai', 'Hola Nam! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Ti tn l g?'), ('ai', 'Ti rt tic, ti khng bit tn ca bn. Ti khng c quyn truy cp vo thng tin c nhn ca bn.'), ('human', 'Tn ti l Nam.'), ('ai', 'Cho Nam, rt vui c gp bn! Ti c th gip bn iu g v trang im hoc chm sc da?  ti c th h tr bn tt nht, bn c th cho ti bit bn mun hi g c th hn khng? V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im hoc mt vn  v da nht nh.'), ('human', 'Cho bn.'), ('ai', 'Cho bn! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Tn ti l g?'), ('ai', 'Ti xin li, ti khng c quyn truy cp vo thng tin . Nhng ti c th gip bn trang im nu bn mun!')], AI response: M bn l mt ng dn! Vy, bn c mun ti cho bn mt vi gi  v kem chng nng tt khng?
2025-05-05 16:46:40,806 - app.chat_controller - INFO - User Query: Hay 
2025-05-05 16:46:40,807 - app.db - INFO - Getting chat history.
2025-05-05 16:46:40,808 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:46:40,813 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-05 16:46:40,813 - app.chat_controller - INFO - Chat history for session frontend-simple-session: [('human', 'M ti lm ngh g'), ('ai', 'M bn l mt ng dn! Vy, bn c mun ti cho bn mt vi gi  v kem chng nng tt khng?'), ('human', 'Ti c m lm ngh chi li'), ('ai', 'Tht tuyt vi khi m bn l mt ng dn! N nghe nh mt cng vic chm ch nhng b ch. Bn c mun ti gip bn tm mt loi kem chng nng tt khng?'), ('human', 'Ti thch n g?'), ('ai', 'Ti bit bn thch ko! Vy, bn c mun ti cho bn mt vi gi  v son bng hoc son mi c mi thm ngt ngo khng?'), ('human', 'Ti thch n ko'), ('ai', 'Tuyt vi! Ko chc chn l mt mn n th v. Nu bn mun, ti c th hng dn bn cch la chn son bng hoc son mi ngt ngo  ph hp vi s thch n ko ca bn.'), ('human', 'Bn nh tn ti h'), ('ai', 'Ti nh tn bn l Nam! Bn c mun ti gip bn bt k iu g lin quan n trang im hoc chm sc da khng?'), ('human', 'Hola'), ('ai', 'Hola Nam! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Ti tn l g?'), ('ai', 'Ti rt tic, ti khng bit tn ca bn. Ti khng c quyn truy cp vo thng tin c nhn ca bn.'), ('human', 'Tn ti l Nam.'), ('ai', 'Cho Nam, rt vui c gp bn! Ti c th gip bn iu g v trang im hoc chm sc da?  ti c th h tr bn tt nht, bn c th cho ti bit bn mun hi g c th hn khng? V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im hoc mt vn  v da nht nh.'), ('human', 'Cho bn.'), ('ai', 'Cho bn! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Tn ti l g?'), ('ai', 'Ti xin li, ti khng c quyn truy cp vo thng tin . Nhng ti c th gip bn trang im nu bn mun!')]
2025-05-05 16:46:40,813 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hay 
2025-05-05 16:46:40,813 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:46:40,815 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 16:46:42,978 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 16:46:42,978 - app.db - INFO - Inserting application logs.
2025-05-05 16:46:42,980 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:46:42,983 - app.db - INFO - Successfully inserted application logs.
2025-05-05 16:46:42,984 - app.chat_controller - INFO - Session ID: frontend-simple-session, Chat history: [('human', 'M ti lm ngh g'), ('ai', 'M bn l mt ng dn! Vy, bn c mun ti cho bn mt vi gi  v kem chng nng tt khng?'), ('human', 'Ti c m lm ngh chi li'), ('ai', 'Tht tuyt vi khi m bn l mt ng dn! N nghe nh mt cng vic chm ch nhng b ch. Bn c mun ti gip bn tm mt loi kem chng nng tt khng?'), ('human', 'Ti thch n g?'), ('ai', 'Ti bit bn thch ko! Vy, bn c mun ti cho bn mt vi gi  v son bng hoc son mi c mi thm ngt ngo khng?'), ('human', 'Ti thch n ko'), ('ai', 'Tuyt vi! Ko chc chn l mt mn n th v. Nu bn mun, ti c th hng dn bn cch la chn son bng hoc son mi ngt ngo  ph hp vi s thch n ko ca bn.'), ('human', 'Bn nh tn ti h'), ('ai', 'Ti nh tn bn l Nam! Bn c mun ti gip bn bt k iu g lin quan n trang im hoc chm sc da khng?'), ('human', 'Hola'), ('ai', 'Hola Nam! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Ti tn l g?'), ('ai', 'Ti rt tic, ti khng bit tn ca bn. Ti khng c quyn truy cp vo thng tin c nhn ca bn.'), ('human', 'Tn ti l Nam.'), ('ai', 'Cho Nam, rt vui c gp bn! Ti c th gip bn iu g v trang im hoc chm sc da?  ti c th h tr bn tt nht, bn c th cho ti bit bn mun hi g c th hn khng? V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im hoc mt vn  v da nht nh.'), ('human', 'Cho bn.'), ('ai', 'Cho bn! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Tn ti l g?'), ('ai', 'Ti xin li, ti khng c quyn truy cp vo thng tin . Nhng ti c th gip bn trang im nu bn mun!')], AI response: Ti rt vui v bn thy iu  hu ch! Bn c mun ti gip bn bt k iu g khc lin quan n trang im hoc chm sc da khng?
2025-05-05 16:47:02,739 - app.chat_controller - INFO - User Query: Gii thiu mnh v kem chng nng 
2025-05-05 16:47:02,740 - app.db - INFO - Getting chat history.
2025-05-05 16:47:02,741 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:47:02,746 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-05 16:47:02,746 - app.chat_controller - INFO - Chat history for session frontend-simple-session: [('human', 'Hay '), ('ai', 'Ti rt vui v bn thy iu  hu ch! Bn c mun ti gip bn bt k iu g khc lin quan n trang im hoc chm sc da khng?'), ('human', 'M ti lm ngh g'), ('ai', 'M bn l mt ng dn! Vy, bn c mun ti cho bn mt vi gi  v kem chng nng tt khng?'), ('human', 'Ti c m lm ngh chi li'), ('ai', 'Tht tuyt vi khi m bn l mt ng dn! N nghe nh mt cng vic chm ch nhng b ch. Bn c mun ti gip bn tm mt loi kem chng nng tt khng?'), ('human', 'Ti thch n g?'), ('ai', 'Ti bit bn thch ko! Vy, bn c mun ti cho bn mt vi gi  v son bng hoc son mi c mi thm ngt ngo khng?'), ('human', 'Ti thch n ko'), ('ai', 'Tuyt vi! Ko chc chn l mt mn n th v. Nu bn mun, ti c th hng dn bn cch la chn son bng hoc son mi ngt ngo  ph hp vi s thch n ko ca bn.'), ('human', 'Bn nh tn ti h'), ('ai', 'Ti nh tn bn l Nam! Bn c mun ti gip bn bt k iu g lin quan n trang im hoc chm sc da khng?'), ('human', 'Hola'), ('ai', 'Hola Nam! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Ti tn l g?'), ('ai', 'Ti rt tic, ti khng bit tn ca bn. Ti khng c quyn truy cp vo thng tin c nhn ca bn.'), ('human', 'Tn ti l Nam.'), ('ai', 'Cho Nam, rt vui c gp bn! Ti c th gip bn iu g v trang im hoc chm sc da?  ti c th h tr bn tt nht, bn c th cho ti bit bn mun hi g c th hn khng? V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im hoc mt vn  v da nht nh.'), ('human', 'Cho bn.'), ('ai', 'Cho bn! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?')]
2025-05-05 16:47:02,746 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Gii thiu mnh v kem chng nng 
2025-05-05 16:47:02,746 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 16:47:02,748 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 16:47:09,906 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 16:47:09,907 - app.db - INFO - Inserting application logs.
2025-05-05 16:47:09,908 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 16:47:09,912 - app.db - INFO - Successfully inserted application logs.
2025-05-05 16:47:09,913 - app.chat_controller - INFO - Session ID: frontend-simple-session, Chat history: [('human', 'Hay '), ('ai', 'Ti rt vui v bn thy iu  hu ch! Bn c mun ti gip bn bt k iu g khc lin quan n trang im hoc chm sc da khng?'), ('human', 'M ti lm ngh g'), ('ai', 'M bn l mt ng dn! Vy, bn c mun ti cho bn mt vi gi  v kem chng nng tt khng?'), ('human', 'Ti c m lm ngh chi li'), ('ai', 'Tht tuyt vi khi m bn l mt ng dn! N nghe nh mt cng vic chm ch nhng b ch. Bn c mun ti gip bn tm mt loi kem chng nng tt khng?'), ('human', 'Ti thch n g?'), ('ai', 'Ti bit bn thch ko! Vy, bn c mun ti cho bn mt vi gi  v son bng hoc son mi c mi thm ngt ngo khng?'), ('human', 'Ti thch n ko'), ('ai', 'Tuyt vi! Ko chc chn l mt mn n th v. Nu bn mun, ti c th hng dn bn cch la chn son bng hoc son mi ngt ngo  ph hp vi s thch n ko ca bn.'), ('human', 'Bn nh tn ti h'), ('ai', 'Ti nh tn bn l Nam! Bn c mun ti gip bn bt k iu g lin quan n trang im hoc chm sc da khng?'), ('human', 'Hola'), ('ai', 'Hola Nam! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Ti tn l g?'), ('ai', 'Ti rt tic, ti khng bit tn ca bn. Ti khng c quyn truy cp vo thng tin c nhn ca bn.'), ('human', 'Tn ti l Nam.'), ('ai', 'Cho Nam, rt vui c gp bn! Ti c th gip bn iu g v trang im hoc chm sc da?  ti c th h tr bn tt nht, bn c th cho ti bit bn mun hi g c th hn khng? V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im hoc mt vn  v da nht nh.'), ('human', 'Cho bn.'), ('ai', 'Cho bn! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?')], AI response: Chc chn ri, Nam! Kem chng nng rt quan trng  bo v ln da ca bn, v ti c th gip bn hiu r hn v n.

u tin, hy tm mt loi kem chng nng c ch s SPF 30 tr ln. SPF 30 chn c khong 97% tia UVB ca mt tri. Tip theo, hy ch  n kt cu. Mt s loi kem chng nng c dng kem c, trong khi nhng loi khc li nh hn, dng lng. Nu da bn c xu hng nhn, bn c th thch mt loi kem chng nng nh, khng gy mn. Nu da bn kh, bn c th thch mt loi kem chng nng dng m hn.

Sau , hy thoa u kem chng nng ln tt c cc vng da tip xc, nh mt, tai v c. Hy thoa kem chng nng khong 15 pht trc khi ra ngoi tri  kem c thi gian thm thu vo da. Bn s cn thoa li kem chng nng sau mi hai gi, c bit nu bn ang bi hoc  m hi.
2025-05-05 17:03:23,968 - app.chat_controller - INFO - User Query: Hello
2025-05-05 17:03:23,969 - app.db - INFO - Getting chat history.
2025-05-05 17:03:23,972 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:03:23,977 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-05 17:03:23,978 - app.chat_controller - INFO - Chat history for session frontend-simple-session: [('human', 'Gii thiu mnh v kem chng nng '), ('ai', 'Chc chn ri, Nam! Kem chng nng rt quan trng  bo v ln da ca bn, v ti c th gip bn hiu r hn v n.\n\nu tin, hy tm mt loi kem chng nng c ch s SPF 30 tr ln. SPF 30 chn c khong 97% tia UVB ca mt tri. Tip theo, hy ch  n kt cu. Mt s loi kem chng nng c dng kem c, trong khi nhng loi khc li nh hn, dng lng. Nu da bn c xu hng nhn, bn c th thch mt loi kem chng nng nh, khng gy mn. Nu da bn kh, bn c th thch mt loi kem chng nng dng m hn.\n\nSau , hy thoa u kem chng nng ln tt c cc vng da tip xc, nh mt, tai v c. Hy thoa kem chng nng khong 15 pht trc khi ra ngoi tri  kem c thi gian thm thu vo da. Bn s cn thoa li kem chng nng sau mi hai gi, c bit nu bn ang bi hoc  m hi.'), ('human', 'Hay '), ('ai', 'Ti rt vui v bn thy iu  hu ch! Bn c mun ti gip bn bt k iu g khc lin quan n trang im hoc chm sc da khng?'), ('human', 'M ti lm ngh g'), ('ai', 'M bn l mt ng dn! Vy, bn c mun ti cho bn mt vi gi  v kem chng nng tt khng?'), ('human', 'Ti c m lm ngh chi li'), ('ai', 'Tht tuyt vi khi m bn l mt ng dn! N nghe nh mt cng vic chm ch nhng b ch. Bn c mun ti gip bn tm mt loi kem chng nng tt khng?'), ('human', 'Ti thch n g?'), ('ai', 'Ti bit bn thch ko! Vy, bn c mun ti cho bn mt vi gi  v son bng hoc son mi c mi thm ngt ngo khng?'), ('human', 'Ti thch n ko'), ('ai', 'Tuyt vi! Ko chc chn l mt mn n th v. Nu bn mun, ti c th hng dn bn cch la chn son bng hoc son mi ngt ngo  ph hp vi s thch n ko ca bn.'), ('human', 'Bn nh tn ti h'), ('ai', 'Ti nh tn bn l Nam! Bn c mun ti gip bn bt k iu g lin quan n trang im hoc chm sc da khng?'), ('human', 'Hola'), ('ai', 'Hola Nam! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Ti tn l g?'), ('ai', 'Ti rt tic, ti khng bit tn ca bn. Ti khng c quyn truy cp vo thng tin c nhn ca bn.'), ('human', 'Tn ti l Nam.'), ('ai', 'Cho Nam, rt vui c gp bn! Ti c th gip bn iu g v trang im hoc chm sc da?  ti c th h tr bn tt nht, bn c th cho ti bit bn mun hi g c th hn khng? V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im hoc mt vn  v da nht nh.')]
2025-05-05 17:03:23,978 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hello
2025-05-05 17:03:23,978 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 17:03:23,984 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 17:03:26,504 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 17:03:26,504 - app.db - INFO - Inserting application logs.
2025-05-05 17:03:26,506 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:03:26,518 - app.db - INFO - Successfully inserted application logs.
2025-05-05 17:03:26,520 - app.chat_controller - INFO - Session ID: frontend-simple-session, Chat history: [('human', 'Gii thiu mnh v kem chng nng '), ('ai', 'Chc chn ri, Nam! Kem chng nng rt quan trng  bo v ln da ca bn, v ti c th gip bn hiu r hn v n.\n\nu tin, hy tm mt loi kem chng nng c ch s SPF 30 tr ln. SPF 30 chn c khong 97% tia UVB ca mt tri. Tip theo, hy ch  n kt cu. Mt s loi kem chng nng c dng kem c, trong khi nhng loi khc li nh hn, dng lng. Nu da bn c xu hng nhn, bn c th thch mt loi kem chng nng nh, khng gy mn. Nu da bn kh, bn c th thch mt loi kem chng nng dng m hn.\n\nSau , hy thoa u kem chng nng ln tt c cc vng da tip xc, nh mt, tai v c. Hy thoa kem chng nng khong 15 pht trc khi ra ngoi tri  kem c thi gian thm thu vo da. Bn s cn thoa li kem chng nng sau mi hai gi, c bit nu bn ang bi hoc  m hi.'), ('human', 'Hay '), ('ai', 'Ti rt vui v bn thy iu  hu ch! Bn c mun ti gip bn bt k iu g khc lin quan n trang im hoc chm sc da khng?'), ('human', 'M ti lm ngh g'), ('ai', 'M bn l mt ng dn! Vy, bn c mun ti cho bn mt vi gi  v kem chng nng tt khng?'), ('human', 'Ti c m lm ngh chi li'), ('ai', 'Tht tuyt vi khi m bn l mt ng dn! N nghe nh mt cng vic chm ch nhng b ch. Bn c mun ti gip bn tm mt loi kem chng nng tt khng?'), ('human', 'Ti thch n g?'), ('ai', 'Ti bit bn thch ko! Vy, bn c mun ti cho bn mt vi gi  v son bng hoc son mi c mi thm ngt ngo khng?'), ('human', 'Ti thch n ko'), ('ai', 'Tuyt vi! Ko chc chn l mt mn n th v. Nu bn mun, ti c th hng dn bn cch la chn son bng hoc son mi ngt ngo  ph hp vi s thch n ko ca bn.'), ('human', 'Bn nh tn ti h'), ('ai', 'Ti nh tn bn l Nam! Bn c mun ti gip bn bt k iu g lin quan n trang im hoc chm sc da khng?'), ('human', 'Hola'), ('ai', 'Hola Nam! Ti rt vui c gip bn v cc vn  lin quan n trang im v chm sc da.  ti c th cung cp cho bn thng tin tt nht, bn c th cho ti bit cu hi ca bn c th hn mt cht c khng? V d, bn mun bit v loi trang im ph hp vi loi da ca bn, quy trnh chm sc da l tng hay bt k mo hoc th thut no khc khng?'), ('human', 'Ti tn l g?'), ('ai', 'Ti rt tic, ti khng bit tn ca bn. Ti khng c quyn truy cp vo thng tin c nhn ca bn.'), ('human', 'Tn ti l Nam.'), ('ai', 'Cho Nam, rt vui c gp bn! Ti c th gip bn iu g v trang im hoc chm sc da?  ti c th h tr bn tt nht, bn c th cho ti bit bn mun hi g c th hn khng? V d, bn c th ang tm kim li khuyn v mt sn phm c th, mt k thut trang im hoc mt vn  v da nht nh.')], AI response: Hi Nam! How can I help you with makeup or skincare today? Do you have any questions about sunscreen, perhaps?
2025-05-05 17:03:58,880 - app.chat_controller - INFO - User Query: Hi
2025-05-05 17:03:58,880 - app.db - INFO - Getting chat history.
2025-05-05 17:03:58,882 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:03:58,886 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-05-05 17:03:58,886 - app.chat_controller - INFO - Chat history for session frontend-simple-session: []
2025-05-05 17:03:58,886 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hi
2025-05-05 17:03:58,886 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 17:03:58,888 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 17:04:00,081 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 17:04:00,081 - app.db - INFO - Inserting application logs.
2025-05-05 17:04:00,082 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:04:00,086 - app.db - INFO - Successfully inserted application logs.
2025-05-05 17:04:00,087 - app.chat_controller - INFO - Session ID: frontend-simple-session, Chat history: [], AI response: Hello! How can I help you today?
2025-05-05 17:04:06,933 - app.chat_controller - INFO - User Query: Do you know your mission?
2025-05-05 17:04:06,933 - app.db - INFO - Getting chat history.
2025-05-05 17:04:06,935 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:04:06,939 - app.db - INFO - Successfully retrieved 1 conversation turns
2025-05-05 17:04:06,939 - app.chat_controller - INFO - Chat history for session frontend-simple-session: [('human', 'Hi'), ('ai', 'Hello! How can I help you today?')]
2025-05-05 17:04:06,939 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Do you know your mission?
2025-05-05 17:04:06,939 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 17:04:06,941 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 17:04:11,448 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 17:04:11,448 - app.db - INFO - Inserting application logs.
2025-05-05 17:04:11,449 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:04:11,452 - app.db - INFO - Successfully inserted application logs.
2025-05-05 17:04:11,452 - app.chat_controller - INFO - Session ID: frontend-simple-session, Chat history: [('human', 'Hi'), ('ai', 'Hello! How can I help you today?')], AI response: Yes, I do. My mission is to assist users in generating interactive dashboards using Python and Streamlit, based on their requests and provided dataset schemas. I focus on loading data, calculating summary metrics, creating relevant plots, and ensuring a clear and responsive layout for the dashboard.
2025-05-05 17:14:20,190 - app.chat_controller - INFO - User Query: Hello
2025-05-05 17:14:20,190 - app.db - INFO - Getting chat history.
2025-05-05 17:14:20,192 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:14:20,197 - app.db - INFO - Successfully retrieved 2 conversation turns
2025-05-05 17:14:20,197 - app.chat_controller - INFO - Chat history for session frontend-simple-session: [('human', 'Do you know your mission?'), ('ai', 'Yes, I do. My mission is to assist users in generating interactive dashboards using Python and Streamlit, based on their requests and provided dataset schemas. I focus on loading data, calculating summary metrics, creating relevant plots, and ensuring a clear and responsive layout for the dashboard.'), ('human', 'Hi'), ('ai', 'Hello! How can I help you today?')]
2025-05-05 17:14:20,197 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hello
2025-05-05 17:14:20,197 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 17:14:20,206 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 17:14:25,175 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 17:14:25,175 - app.db - INFO - Inserting application logs.
2025-05-05 17:14:25,176 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:14:25,181 - app.db - INFO - Successfully inserted application logs.
2025-05-05 17:14:25,182 - app.chat_controller - INFO - Session ID: frontend-simple-session, Chat history: [('human', 'Do you know your mission?'), ('ai', 'Yes, I do. My mission is to assist users in generating interactive dashboards using Python and Streamlit, based on their requests and provided dataset schemas. I focus on loading data, calculating summary metrics, creating relevant plots, and ensuring a clear and responsive layout for the dashboard.'), ('human', 'Hi'), ('ai', 'Hello! How can I help you today?')], AI response: Hello! How can I help you with your SQL query today? Please provide the schema information and your specific question, and I'll do my best to assist you.
2025-05-05 17:14:50,543 - app.chat_controller - INFO - User Query: I want to know attendance report on school A from 2021 January 1st onwards
2025-05-05 17:14:50,543 - app.db - INFO - Getting chat history.
2025-05-05 17:14:50,545 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:14:50,548 - app.db - INFO - Successfully retrieved 3 conversation turns
2025-05-05 17:14:50,549 - app.chat_controller - INFO - Chat history for session frontend-simple-session: [('human', 'Hello'), ('ai', "Hello! How can I help you with your SQL query today? Please provide the schema information and your specific question, and I'll do my best to assist you."), ('human', 'Do you know your mission?'), ('ai', 'Yes, I do. My mission is to assist users in generating interactive dashboards using Python and Streamlit, based on their requests and provided dataset schemas. I focus on loading data, calculating summary metrics, creating relevant plots, and ensuring a clear and responsive layout for the dashboard.'), ('human', 'Hi'), ('ai', 'Hello! How can I help you today?')]
2025-05-05 17:14:50,549 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know attendance report on school A from 2021 January 1st onwards
2025-05-05 17:14:50,549 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 17:14:50,551 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 17:14:56,744 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 17:14:56,744 - app.db - INFO - Inserting application logs.
2025-05-05 17:14:56,746 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:14:56,750 - app.db - INFO - Successfully inserted application logs.
2025-05-05 17:14:56,750 - app.chat_controller - INFO - Session ID: frontend-simple-session, Chat history: [('human', 'Hello'), ('ai', "Hello! How can I help you with your SQL query today? Please provide the schema information and your specific question, and I'll do my best to assist you."), ('human', 'Do you know your mission?'), ('ai', 'Yes, I do. My mission is to assist users in generating interactive dashboards using Python and Streamlit, based on their requests and provided dataset schemas. I focus on loading data, calculating summary metrics, creating relevant plots, and ensuring a clear and responsive layout for the dashboard.'), ('human', 'Hi'), ('ai', 'Hello! How can I help you today?')], AI response: Okay, I can help you with that. To provide you with the most accurate SQL query, I need a bit more information about the database schema. Specifically, I need to know:

*   **The table names:** Which tables contain information about schools, attendance records, dates, and any relevant relationships between them?
*   **The column names:** Within those tables, what are the names of the columns that store the school ID, date, student ID, attendance status, etc.?
*   **The school name column:** Which column in the `schools` table contains the school name (e.g., "name")?

Once I have this information, I can construct the SQL query.

For example, assuming the following schema:

*   `schools(id, name)`
*   `students(id, name, school_id)`
*   `attendance(id, student_id, period_id, status)`
*   `periods(id, date)`

And assuming "School A" is in the `name` column of the `schools` table, and the date is stored in the `date` column of the `periods` table, here's a sample query you can adapt:

```sql
SELECT
    s.name AS school_name,
    p.date AS attendance_date,
    COUNT(a.student_id) AS total_students_present  -- Assuming status indicates presence
FROM
    schools s
JOIN
    students st ON s.id = st.school_id
JOIN
    attendance a ON st.id = a.student_id
JOIN
    periods p ON a.period_id = p.id
WHERE
    s.name = 'School A'
    AND p.date >= '2021-01-01'
    AND a.status = 'present' -- Assuming you have a 'status' column and 'present' value
GROUP BY
    s.name,
    p.date
ORDER BY
    p.date;
```

**Important Considerations and Adjustments:**

*   **`status = 'present'`:** This is an assumption.  If your attendance status is stored differently (e.g., a boolean `is_present` column), adjust the `WHERE` clause accordingly.
*   **`COUNT(a.student_id)`:**  This counts the number of students present on each date. You might need to adjust this based on what you want to count (e.g., you might want the *percentage* of students present).
*   **Table and Column Names:**  *This is the most crucial part.*  You *must* replace the table and column names in the example with the *actual* names in your database.
*   **Date Format:** Ensure the date format `'2021-01-01'` matches the format used in your `periods` table.

Provide me with your schema details, and I'll refine this query to be perfectly suited for your needs!
2025-05-05 17:15:37,860 - app.chat_controller - INFO - User Query: Hello
2025-05-05 17:15:37,860 - app.db - INFO - Getting chat history.
2025-05-05 17:15:37,862 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:15:37,865 - app.db - INFO - Successfully retrieved 4 conversation turns
2025-05-05 17:15:37,865 - app.chat_controller - INFO - Chat history for session frontend-simple-session: [('human', 'I want to know attendance report on school A from 2021 January 1st onwards'), ('ai', 'Okay, I can help you with that. To provide you with the most accurate SQL query, I need a bit more information about the database schema. Specifically, I need to know:\n\n*   **The table names:** Which tables contain information about schools, attendance records, dates, and any relevant relationships between them?\n*   **The column names:** Within those tables, what are the names of the columns that store the school ID, date, student ID, attendance status, etc.?\n*   **The school name column:** Which column in the `schools` table contains the school name (e.g., "name")?\n\nOnce I have this information, I can construct the SQL query.\n\nFor example, assuming the following schema:\n\n*   `schools(id, name)`\n*   `students(id, name, school_id)`\n*   `attendance(id, student_id, period_id, status)`\n*   `periods(id, date)`\n\nAnd assuming "School A" is in the `name` column of the `schools` table, and the date is stored in the `date` column of the `periods` table, here\'s a sample query you can adapt:\n\n```sql\nSELECT\n    s.name AS school_name,\n    p.date AS attendance_date,\n    COUNT(a.student_id) AS total_students_present  -- Assuming status indicates presence\nFROM\n    schools s\nJOIN\n    students st ON s.id = st.school_id\nJOIN\n    attendance a ON st.id = a.student_id\nJOIN\n    periods p ON a.period_id = p.id\nWHERE\n    s.name = \'School A\'\n    AND p.date >= \'2021-01-01\'\n    AND a.status = \'present\' -- Assuming you have a \'status\' column and \'present\' value\nGROUP BY\n    s.name,\n    p.date\nORDER BY\n    p.date;\n```\n\n**Important Considerations and Adjustments:**\n\n*   **`status = \'present\'`:** This is an assumption.  If your attendance status is stored differently (e.g., a boolean `is_present` column), adjust the `WHERE` clause accordingly.\n*   **`COUNT(a.student_id)`:**  This counts the number of students present on each date. You might need to adjust this based on what you want to count (e.g., you might want the *percentage* of students present).\n*   **Table and Column Names:**  *This is the most crucial part.*  You *must* replace the table and column names in the example with the *actual* names in your database.\n*   **Date Format:** Ensure the date format `\'2021-01-01\'` matches the format used in your `periods` table.\n\nProvide me with your schema details, and I\'ll refine this query to be perfectly suited for your needs!'), ('human', 'Hello'), ('ai', "Hello! How can I help you with your SQL query today? Please provide the schema information and your specific question, and I'll do my best to assist you."), ('human', 'Do you know your mission?'), ('ai', 'Yes, I do. My mission is to assist users in generating interactive dashboards using Python and Streamlit, based on their requests and provided dataset schemas. I focus on loading data, calculating summary metrics, creating relevant plots, and ensuring a clear and responsive layout for the dashboard.'), ('human', 'Hi'), ('ai', 'Hello! How can I help you today?')]
2025-05-05 17:15:37,865 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hello
2025-05-05 17:15:37,865 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 17:15:37,872 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 17:15:40,096 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 17:15:40,096 - app.db - INFO - Inserting application logs.
2025-05-05 17:15:40,097 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:15:40,100 - app.db - INFO - Successfully inserted application logs.
2025-05-05 17:15:40,101 - app.chat_controller - INFO - Session ID: frontend-simple-session, Chat history: [('human', 'I want to know attendance report on school A from 2021 January 1st onwards'), ('ai', 'Okay, I can help you with that. To provide you with the most accurate SQL query, I need a bit more information about the database schema. Specifically, I need to know:\n\n*   **The table names:** Which tables contain information about schools, attendance records, dates, and any relevant relationships between them?\n*   **The column names:** Within those tables, what are the names of the columns that store the school ID, date, student ID, attendance status, etc.?\n*   **The school name column:** Which column in the `schools` table contains the school name (e.g., "name")?\n\nOnce I have this information, I can construct the SQL query.\n\nFor example, assuming the following schema:\n\n*   `schools(id, name)`\n*   `students(id, name, school_id)`\n*   `attendance(id, student_id, period_id, status)`\n*   `periods(id, date)`\n\nAnd assuming "School A" is in the `name` column of the `schools` table, and the date is stored in the `date` column of the `periods` table, here\'s a sample query you can adapt:\n\n```sql\nSELECT\n    s.name AS school_name,\n    p.date AS attendance_date,\n    COUNT(a.student_id) AS total_students_present  -- Assuming status indicates presence\nFROM\n    schools s\nJOIN\n    students st ON s.id = st.school_id\nJOIN\n    attendance a ON st.id = a.student_id\nJOIN\n    periods p ON a.period_id = p.id\nWHERE\n    s.name = \'School A\'\n    AND p.date >= \'2021-01-01\'\n    AND a.status = \'present\' -- Assuming you have a \'status\' column and \'present\' value\nGROUP BY\n    s.name,\n    p.date\nORDER BY\n    p.date;\n```\n\n**Important Considerations and Adjustments:**\n\n*   **`status = \'present\'`:** This is an assumption.  If your attendance status is stored differently (e.g., a boolean `is_present` column), adjust the `WHERE` clause accordingly.\n*   **`COUNT(a.student_id)`:**  This counts the number of students present on each date. You might need to adjust this based on what you want to count (e.g., you might want the *percentage* of students present).\n*   **Table and Column Names:**  *This is the most crucial part.*  You *must* replace the table and column names in the example with the *actual* names in your database.\n*   **Date Format:** Ensure the date format `\'2021-01-01\'` matches the format used in your `periods` table.\n\nProvide me with your schema details, and I\'ll refine this query to be perfectly suited for your needs!'), ('human', 'Hello'), ('ai', "Hello! How can I help you with your SQL query today? Please provide the schema information and your specific question, and I'll do my best to assist you."), ('human', 'Do you know your mission?'), ('ai', 'Yes, I do. My mission is to assist users in generating interactive dashboards using Python and Streamlit, based on their requests and provided dataset schemas. I focus on loading data, calculating summary metrics, creating relevant plots, and ensuring a clear and responsive layout for the dashboard.'), ('human', 'Hi'), ('ai', 'Hello! How can I help you today?')], AI response: Okay, I understand you're saying "Hello." How can I help you? Do you have a question about SQL, a database schema you'd like help with, or a specific query you're trying to write? Please provide me with more information so I can assist you.
2025-05-05 17:16:09,676 - app.chat_controller - INFO - User Query: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 17:16:09,676 - app.db - INFO - Getting chat history.
2025-05-05 17:16:09,678 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:16:09,683 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-05 17:16:09,683 - app.chat_controller - INFO - Chat history for session frontend-simple-session: [('human', 'Hello'), ('ai', 'Okay, I understand you\'re saying "Hello." How can I help you? Do you have a question about SQL, a database schema you\'d like help with, or a specific query you\'re trying to write? Please provide me with more information so I can assist you.'), ('human', 'I want to know attendance report on school A from 2021 January 1st onwards'), ('ai', 'Okay, I can help you with that. To provide you with the most accurate SQL query, I need a bit more information about the database schema. Specifically, I need to know:\n\n*   **The table names:** Which tables contain information about schools, attendance records, dates, and any relevant relationships between them?\n*   **The column names:** Within those tables, what are the names of the columns that store the school ID, date, student ID, attendance status, etc.?\n*   **The school name column:** Which column in the `schools` table contains the school name (e.g., "name")?\n\nOnce I have this information, I can construct the SQL query.\n\nFor example, assuming the following schema:\n\n*   `schools(id, name)`\n*   `students(id, name, school_id)`\n*   `attendance(id, student_id, period_id, status)`\n*   `periods(id, date)`\n\nAnd assuming "School A" is in the `name` column of the `schools` table, and the date is stored in the `date` column of the `periods` table, here\'s a sample query you can adapt:\n\n```sql\nSELECT\n    s.name AS school_name,\n    p.date AS attendance_date,\n    COUNT(a.student_id) AS total_students_present  -- Assuming status indicates presence\nFROM\n    schools s\nJOIN\n    students st ON s.id = st.school_id\nJOIN\n    attendance a ON st.id = a.student_id\nJOIN\n    periods p ON a.period_id = p.id\nWHERE\n    s.name = \'School A\'\n    AND p.date >= \'2021-01-01\'\n    AND a.status = \'present\' -- Assuming you have a \'status\' column and \'present\' value\nGROUP BY\n    s.name,\n    p.date\nORDER BY\n    p.date;\n```\n\n**Important Considerations and Adjustments:**\n\n*   **`status = \'present\'`:** This is an assumption.  If your attendance status is stored differently (e.g., a boolean `is_present` column), adjust the `WHERE` clause accordingly.\n*   **`COUNT(a.student_id)`:**  This counts the number of students present on each date. You might need to adjust this based on what you want to count (e.g., you might want the *percentage* of students present).\n*   **Table and Column Names:**  *This is the most crucial part.*  You *must* replace the table and column names in the example with the *actual* names in your database.\n*   **Date Format:** Ensure the date format `\'2021-01-01\'` matches the format used in your `periods` table.\n\nProvide me with your schema details, and I\'ll refine this query to be perfectly suited for your needs!'), ('human', 'Hello'), ('ai', "Hello! How can I help you with your SQL query today? Please provide the schema information and your specific question, and I'll do my best to assist you."), ('human', 'Do you know your mission?'), ('ai', 'Yes, I do. My mission is to assist users in generating interactive dashboards using Python and Streamlit, based on their requests and provided dataset schemas. I focus on loading data, calculating summary metrics, creating relevant plots, and ensuring a clear and responsive layout for the dashboard.'), ('human', 'Hi'), ('ai', 'Hello! How can I help you today?')]
2025-05-05 17:16:09,683 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 17:16:09,683 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 17:16:09,685 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 17:16:12,913 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 17:16:12,914 - app.db - INFO - Inserting application logs.
2025-05-05 17:16:12,915 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:16:12,918 - app.db - INFO - Successfully inserted application logs.
2025-05-05 17:16:12,919 - app.chat_controller - INFO - Session ID: frontend-simple-session, Chat history: [('human', 'Hello'), ('ai', 'Okay, I understand you\'re saying "Hello." How can I help you? Do you have a question about SQL, a database schema you\'d like help with, or a specific query you\'re trying to write? Please provide me with more information so I can assist you.'), ('human', 'I want to know attendance report on school A from 2021 January 1st onwards'), ('ai', 'Okay, I can help you with that. To provide you with the most accurate SQL query, I need a bit more information about the database schema. Specifically, I need to know:\n\n*   **The table names:** Which tables contain information about schools, attendance records, dates, and any relevant relationships between them?\n*   **The column names:** Within those tables, what are the names of the columns that store the school ID, date, student ID, attendance status, etc.?\n*   **The school name column:** Which column in the `schools` table contains the school name (e.g., "name")?\n\nOnce I have this information, I can construct the SQL query.\n\nFor example, assuming the following schema:\n\n*   `schools(id, name)`\n*   `students(id, name, school_id)`\n*   `attendance(id, student_id, period_id, status)`\n*   `periods(id, date)`\n\nAnd assuming "School A" is in the `name` column of the `schools` table, and the date is stored in the `date` column of the `periods` table, here\'s a sample query you can adapt:\n\n```sql\nSELECT\n    s.name AS school_name,\n    p.date AS attendance_date,\n    COUNT(a.student_id) AS total_students_present  -- Assuming status indicates presence\nFROM\n    schools s\nJOIN\n    students st ON s.id = st.school_id\nJOIN\n    attendance a ON st.id = a.student_id\nJOIN\n    periods p ON a.period_id = p.id\nWHERE\n    s.name = \'School A\'\n    AND p.date >= \'2021-01-01\'\n    AND a.status = \'present\' -- Assuming you have a \'status\' column and \'present\' value\nGROUP BY\n    s.name,\n    p.date\nORDER BY\n    p.date;\n```\n\n**Important Considerations and Adjustments:**\n\n*   **`status = \'present\'`:** This is an assumption.  If your attendance status is stored differently (e.g., a boolean `is_present` column), adjust the `WHERE` clause accordingly.\n*   **`COUNT(a.student_id)`:**  This counts the number of students present on each date. You might need to adjust this based on what you want to count (e.g., you might want the *percentage* of students present).\n*   **Table and Column Names:**  *This is the most crucial part.*  You *must* replace the table and column names in the example with the *actual* names in your database.\n*   **Date Format:** Ensure the date format `\'2021-01-01\'` matches the format used in your `periods` table.\n\nProvide me with your schema details, and I\'ll refine this query to be perfectly suited for your needs!'), ('human', 'Hello'), ('ai', "Hello! How can I help you with your SQL query today? Please provide the schema information and your specific question, and I'll do my best to assist you."), ('human', 'Do you know your mission?'), ('ai', 'Yes, I do. My mission is to assist users in generating interactive dashboards using Python and Streamlit, based on their requests and provided dataset schemas. I focus on loading data, calculating summary metrics, creating relevant plots, and ensuring a clear and responsive layout for the dashboard.'), ('human', 'Hi'), ('ai', 'Hello! How can I help you today?')], AI response: ```sql
SELECT
    p.date,
    COUNT(a.student_id) AS students_present
FROM
    schools s
JOIN
    teachers t ON s.id = t.school_id
JOIN
    attendance a ON t.id = a.teacher_id
JOIN
    periods p ON a.period_id = p.id
WHERE
    s.name = 'School A'
    AND t.name = 'Teacher B'
    AND p.date >= '2021-01-01'
    AND a.status = 'present'
GROUP BY
    p.date
ORDER BY
    p.date;
```
2025-05-05 17:53:24,504 - app.chat_controller - INFO - User Query: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 17:53:24,506 - app.db - INFO - Getting chat history.
2025-05-05 17:53:24,508 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:53:24,515 - app.db - INFO - Successfully retrieved 6 conversation turns
2025-05-05 17:53:24,515 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 17:53:24,515 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 17:53:24,524 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 17:54:48,141 - app.chat_controller - INFO - User Query: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 17:54:48,141 - app.db - INFO - Getting chat history.
2025-05-05 17:54:48,145 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:54:48,149 - app.db - INFO - Successfully retrieved 6 conversation turns
2025-05-05 17:54:48,149 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 17:54:48,150 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 17:54:48,166 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 17:54:53,319 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 17:54:53,320 - app.db - INFO - Inserting application logs.
2025-05-05 17:54:53,321 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:54:53,325 - app.db - INFO - Successfully inserted application logs.
2025-05-05 17:56:10,355 - app.chat_controller - INFO - User Query: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 17:56:10,356 - app.db - INFO - Getting chat history.
2025-05-05 17:56:10,359 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:56:10,363 - app.db - INFO - Successfully retrieved 7 conversation turns
2025-05-05 17:56:10,363 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 17:56:10,363 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 17:56:10,372 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 17:56:17,452 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 17:56:17,452 - app.db - INFO - Inserting application logs.
2025-05-05 17:56:17,453 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:56:17,457 - app.db - INFO - Successfully inserted application logs.
2025-05-05 17:58:21,213 - app.chat_controller - INFO - User Query: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 17:58:21,214 - app.db - INFO - Getting chat history.
2025-05-05 17:58:21,217 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:58:21,221 - app.db - INFO - Successfully retrieved 8 conversation turns
2025-05-05 17:58:21,221 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 17:58:21,221 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 17:58:21,230 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 17:58:28,517 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 17:58:28,518 - app.db - INFO - Inserting application logs.
2025-05-05 17:58:28,519 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 17:58:28,522 - app.db - INFO - Successfully inserted application logs.
2025-05-05 18:00:26,877 - app.chat_controller - INFO - User Query: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 18:00:26,877 - app.db - INFO - Getting chat history.
2025-05-05 18:00:26,881 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 18:00:26,885 - app.db - INFO - Successfully retrieved 9 conversation turns
2025-05-05 18:00:26,885 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 18:00:26,885 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 18:00:26,892 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 18:00:32,504 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 18:00:32,504 - app.db - INFO - Inserting application logs.
2025-05-05 18:00:32,506 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 18:00:32,511 - app.db - INFO - Successfully inserted application logs.
2025-05-05 18:01:34,949 - app.chat_controller - INFO - User Query: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 18:01:34,950 - app.db - INFO - Getting chat history.
2025-05-05 18:01:34,954 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 18:01:34,970 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-05 18:01:34,970 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 18:01:34,971 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 18:01:34,978 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 18:01:42,779 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 18:01:42,779 - app.db - INFO - Inserting application logs.
2025-05-05 18:01:42,781 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 18:01:42,795 - app.db - INFO - Successfully inserted application logs.
2025-05-05 18:02:01,079 - app.chat_controller - INFO - User Query: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 18:02:01,079 - app.db - INFO - Getting chat history.
2025-05-05 18:02:01,081 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 18:02:01,086 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-05 18:02:01,086 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 18:02:01,086 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 18:02:01,089 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 18:02:08,705 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 18:02:08,705 - app.db - INFO - Inserting application logs.
2025-05-05 18:02:08,707 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 18:02:08,711 - app.db - INFO - Successfully inserted application logs.
2025-05-05 18:04:39,633 - app.chat_controller - INFO - User Query: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 18:04:39,634 - app.db - INFO - Getting chat history.
2025-05-05 18:04:39,635 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 18:04:39,639 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-05 18:04:39,640 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 18:04:39,640 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 18:04:39,649 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 18:04:45,964 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 18:04:45,964 - app.db - INFO - Inserting application logs.
2025-05-05 18:04:45,966 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 18:04:45,970 - app.db - INFO - Successfully inserted application logs.
2025-05-05 18:07:33,017 - app.chat_controller - INFO - User Query: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 18:07:33,017 - app.db - INFO - Getting chat history.
2025-05-05 18:07:33,021 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 18:07:33,026 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-05-05 18:07:33,026 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know the attendance of teacher B on school A from January onwards
2025-05-05 18:07:33,026 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 18:07:33,034 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 18:07:37,097 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 18:07:37,097 - app.db - INFO - Inserting application logs.
2025-05-05 18:07:37,098 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 18:07:37,101 - app.db - INFO - Successfully inserted application logs.
2025-05-05 18:09:24,279 - app.chat_controller - INFO - User Query: I want to know the attendance of teacher with ID 123 on school with ID 12 from January onwards
2025-05-05 18:09:24,280 - app.db - INFO - Getting chat history.
2025-05-05 18:09:24,286 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 18:09:24,289 - app.db - INFO - Successfully retrieved 1 conversation turns
2025-05-05 18:09:24,290 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know the attendance of teacher with ID 123 on school with ID 12 from January onwards
2025-05-05 18:09:24,290 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 18:09:24,297 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 18:09:30,235 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 18:09:30,235 - app.db - INFO - Inserting application logs.
2025-05-05 18:09:30,237 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 18:09:30,250 - app.db - INFO - Successfully inserted application logs.
2025-05-05 18:11:44,783 - app.chat_controller - INFO - User Query: I want to know the attendance of teacher with ID 123 on school with ID 12 from January onwards
2025-05-05 18:11:44,783 - app.db - INFO - Getting chat history.
2025-05-05 18:11:44,786 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 18:11:44,790 - app.db - INFO - Successfully retrieved 2 conversation turns
2025-05-05 18:11:44,790 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know the attendance of teacher with ID 123 on school with ID 12 from January onwards
2025-05-05 18:11:44,791 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 18:11:44,798 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 18:11:49,898 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 18:11:49,898 - app.db - INFO - Inserting application logs.
2025-05-05 18:11:49,900 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 18:11:49,903 - app.db - INFO - Successfully inserted application logs.
2025-05-05 18:17:32,991 - app.chat_controller - INFO - User Query: Sorry, I was asking about teacher with ID 128 instead
2025-05-05 18:17:32,991 - app.db - INFO - Getting chat history.
2025-05-05 18:17:32,993 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 18:17:33,006 - app.db - INFO - Successfully retrieved 3 conversation turns
2025-05-05 18:17:33,006 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Sorry, I was asking about teacher with ID 128 instead
2025-05-05 18:17:33,006 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 18:17:33,010 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 18:17:38,324 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 18:17:38,324 - app.db - INFO - Inserting application logs.
2025-05-05 18:17:38,325 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 18:17:38,329 - app.db - INFO - Successfully inserted application logs.
2025-05-05 18:18:10,207 - app.chat_controller - INFO - User Query: Sorry, I was asking about schoolId of 125
2025-05-05 18:18:10,207 - app.db - INFO - Getting chat history.
2025-05-05 18:18:10,209 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 18:18:10,213 - app.db - INFO - Successfully retrieved 4 conversation turns
2025-05-05 18:18:10,213 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Sorry, I was asking about schoolId of 125
2025-05-05 18:18:10,213 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 18:18:10,216 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 18:18:16,779 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 18:18:16,779 - app.db - INFO - Inserting application logs.
2025-05-05 18:18:16,781 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 18:18:16,794 - app.db - INFO - Successfully inserted application logs.
2025-05-05 20:31:23,887 - app.chat_controller - INFO - User Query: Good morning
2025-05-05 20:31:23,888 - app.db - INFO - Getting chat history.
2025-05-05 20:31:23,889 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 20:31:23,903 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-05 20:31:23,904 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Good morning
2025-05-05 20:31:23,904 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 20:31:23,905 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 20:33:11,005 - app.chat_controller - INFO - User Query: Hello
2025-05-05 20:33:11,006 - app.db - INFO - Getting chat history.
2025-05-05 20:33:11,009 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 20:33:11,013 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-05 20:33:11,013 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hello
2025-05-05 20:33:11,013 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 20:33:11,021 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 20:33:13,105 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 20:33:13,105 - app.db - INFO - Inserting application logs.
2025-05-05 20:33:13,106 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 20:33:13,109 - app.db - INFO - Successfully inserted application logs.
2025-05-05 20:43:35,874 - app.chat_controller - INFO - User Query: I want to know the teacher attendance summary from January onwards
2025-05-05 20:43:35,874 - app.db - INFO - Getting chat history.
2025-05-05 20:43:35,876 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 20:43:35,880 - app.db - INFO - Successfully retrieved 6 conversation turns
2025-05-05 20:43:35,881 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know the teacher attendance summary from January onwards
2025-05-05 20:43:35,881 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 20:43:35,887 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 20:43:41,164 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 20:43:41,164 - app.db - INFO - Inserting application logs.
2025-05-05 20:43:41,166 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 20:43:41,170 - app.db - INFO - Successfully inserted application logs.
2025-05-05 21:23:55,350 - app.chat_controller - INFO - User Query: Hello
2025-05-05 21:23:55,351 - app.db - INFO - Getting chat history.
2025-05-05 21:23:55,355 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 21:23:55,364 - app.db - INFO - Successfully retrieved 7 conversation turns
2025-05-05 21:23:55,364 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hello
2025-05-05 21:23:55,365 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 21:23:55,372 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 21:25:52,165 - app.chat_controller - INFO - User Query: Hello
2025-05-05 21:25:52,165 - app.db - INFO - Getting chat history.
2025-05-05 21:25:52,169 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 21:25:52,173 - app.db - INFO - Successfully retrieved 7 conversation turns
2025-05-05 21:25:52,174 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hello
2025-05-05 21:25:52,174 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 21:25:52,184 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 21:25:56,838 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 21:25:56,838 - app.db - INFO - Inserting application logs.
2025-05-05 21:25:56,839 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 21:25:56,856 - app.db - INFO - Successfully inserted application logs.
2025-05-05 21:26:03,192 - app.chat_controller - INFO - User Query: I want to know report attendance report about teacher B from January onwards
2025-05-05 21:26:03,192 - app.db - INFO - Getting chat history.
2025-05-05 21:26:03,193 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 21:26:03,197 - app.db - INFO - Successfully retrieved 8 conversation turns
2025-05-05 21:26:03,197 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know report attendance report about teacher B from January onwards
2025-05-05 21:26:03,197 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 21:26:03,200 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 21:26:21,743 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 21:26:21,743 - app.db - INFO - Inserting application logs.
2025-05-05 21:26:21,745 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 21:26:21,748 - app.db - INFO - Successfully inserted application logs.
2025-05-05 21:52:29,884 - app.chat_controller - INFO - User Query: Hi
2025-05-05 21:52:29,885 - app.db - INFO - Getting chat history.
2025-05-05 21:52:29,890 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 21:52:29,905 - app.db - INFO - Successfully retrieved 9 conversation turns
2025-05-05 21:52:29,905 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hi
2025-05-05 21:52:29,906 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 21:52:29,911 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 21:52:34,687 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 21:52:34,687 - app.db - INFO - Inserting application logs.
2025-05-05 21:52:34,689 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 21:52:34,700 - app.db - INFO - Successfully inserted application logs.
2025-05-05 21:52:51,218 - app.chat_controller - INFO - User Query: Hello
2025-05-05 21:52:51,218 - app.db - INFO - Getting chat history.
2025-05-05 21:52:51,219 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 21:52:51,222 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-05 21:52:51,222 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hello
2025-05-05 21:52:51,222 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 21:52:51,224 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 21:52:55,171 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 21:52:55,171 - app.db - INFO - Inserting application logs.
2025-05-05 21:52:55,173 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 21:52:55,176 - app.db - INFO - Successfully inserted application logs.
2025-05-05 21:58:06,424 - app.chat_controller - INFO - User Query: Hello
2025-05-05 21:58:06,424 - app.db - INFO - Getting chat history.
2025-05-05 21:58:06,426 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 21:58:06,432 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-05 21:58:06,433 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hello
2025-05-05 21:58:06,433 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-05 21:58:06,435 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-05 21:58:11,244 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-05 21:58:11,244 - app.db - INFO - Inserting application logs.
2025-05-05 21:58:11,246 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-05 21:58:11,250 - app.db - INFO - Successfully inserted application logs.
2025-05-06 13:30:04,784 - app.chat_controller - INFO - User Query: I want to know teacher summary from 2024 January onwards
2025-05-06 13:30:04,785 - app.db - INFO - Getting chat history.
2025-05-06 13:30:04,787 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 13:30:04,819 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 13:30:04,820 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know teacher summary from 2024 January onwards
2025-05-06 13:30:04,820 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 13:30:04,827 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 13:31:05,566 - app.chat_controller - INFO - User Query: I want to know teacher summary from 2024 January onwards
2025-05-06 13:31:05,566 - app.db - INFO - Getting chat history.
2025-05-06 13:31:05,568 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 13:31:05,573 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 13:31:05,573 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know teacher summary from 2024 January onwards
2025-05-06 13:31:05,573 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 13:31:05,584 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 13:34:24,093 - app.chat_controller - INFO - User Query: Hello
2025-05-06 13:34:24,093 - app.db - INFO - Getting chat history.
2025-05-06 13:34:24,095 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 13:34:24,100 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 13:34:24,100 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hello
2025-05-06 13:34:24,100 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 13:34:24,108 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 13:35:53,221 - app.chat_controller - INFO - User Query: Hi
2025-05-06 13:35:53,221 - app.db - INFO - Getting chat history.
2025-05-06 13:35:53,224 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 13:35:53,229 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 13:35:53,229 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hi
2025-05-06 13:35:53,229 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 13:35:53,241 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 13:36:03,837 - app.chat_controller - INFO - User Query: Hi
2025-05-06 13:36:03,837 - app.db - INFO - Getting chat history.
2025-05-06 13:36:03,840 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 13:36:03,848 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 13:36:03,848 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hi
2025-05-06 13:36:03,848 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 13:36:03,851 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 13:37:44,062 - app.chat_controller - INFO - User Query: Hi
2025-05-06 13:37:44,062 - app.db - INFO - Getting chat history.
2025-05-06 13:37:44,064 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 13:37:44,071 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 13:37:44,071 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hi
2025-05-06 13:37:44,071 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 13:37:44,082 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 13:39:41,944 - app.chat_controller - INFO - User Query: Hi
2025-05-06 13:39:41,944 - app.db - INFO - Getting chat history.
2025-05-06 13:39:41,946 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 13:39:41,950 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 13:39:41,950 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hi
2025-05-06 13:39:41,950 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 13:39:41,961 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 13:41:06,601 - app.chat_controller - INFO - User Query: Hi
2025-05-06 13:41:06,602 - app.db - INFO - Getting chat history.
2025-05-06 13:41:06,603 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 13:41:06,608 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 13:41:06,609 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hi
2025-05-06 13:41:06,609 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 13:41:06,611 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 13:41:24,753 - app.chat_controller - INFO - User Query: Hello
2025-05-06 13:41:24,753 - app.db - INFO - Getting chat history.
2025-05-06 13:41:24,756 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 13:41:24,760 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 13:41:24,761 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hello
2025-05-06 13:41:24,761 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 13:41:24,770 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 13:42:24,810 - app.chat_controller - INFO - User Query: Hello
2025-05-06 13:42:24,811 - app.db - INFO - Getting chat history.
2025-05-06 13:42:24,813 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 13:42:24,817 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 13:42:24,817 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hello
2025-05-06 13:42:24,817 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 13:42:24,826 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 13:43:38,152 - app.chat_controller - INFO - User Query: Hello
2025-05-06 13:43:38,153 - app.db - INFO - Getting chat history.
2025-05-06 13:43:38,156 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 13:43:38,161 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 13:43:38,161 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hello
2025-05-06 13:43:38,161 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 13:43:38,167 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 13:50:41,874 - app.chat_controller - INFO - User Query: Hello
2025-05-06 13:50:41,874 - app.db - INFO - Getting chat history.
2025-05-06 13:50:41,877 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 13:50:41,882 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 13:50:41,882 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hello
2025-05-06 13:50:41,883 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 13:50:41,889 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 13:51:13,356 - app.chat_controller - INFO - User Query: Hello
2025-05-06 13:51:13,356 - app.db - INFO - Getting chat history.
2025-05-06 13:51:13,359 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 13:51:13,363 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 13:51:13,363 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hello
2025-05-06 13:51:13,363 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 13:51:13,368 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 13:51:21,810 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-06 13:51:21,810 - app.db - INFO - Inserting application logs.
2025-05-06 13:51:21,812 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 13:51:21,818 - app.db - INFO - Successfully inserted application logs.
2025-05-06 14:08:51,176 - app.chat_controller - INFO - User Query: Hello
2025-05-06 14:08:51,176 - app.db - INFO - Getting chat history.
2025-05-06 14:08:51,177 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 14:08:51,181 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 14:08:51,182 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hello
2025-05-06 14:08:51,182 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 14:08:51,185 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 14:08:58,720 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-06 14:08:58,720 - app.db - INFO - Inserting application logs.
2025-05-06 14:08:58,722 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 14:08:58,725 - app.db - INFO - Successfully inserted application logs.
2025-05-06 14:09:48,120 - app.chat_controller - INFO - User Query: I want to know teacher attendance summary from January onwards
2025-05-06 14:09:48,120 - app.db - INFO - Getting chat history.
2025-05-06 14:09:48,124 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 14:09:48,128 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 14:09:48,128 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know teacher attendance summary from January onwards
2025-05-06 14:09:48,128 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 14:09:48,137 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 14:09:52,663 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-06 14:09:52,664 - app.db - INFO - Inserting application logs.
2025-05-06 14:09:52,665 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 14:09:52,668 - app.db - INFO - Successfully inserted application logs.
2025-05-06 14:39:35,975 - app.chat_controller - INFO - User Query: I want to know teacher attendance summary from January onwards
2025-05-06 14:39:35,975 - app.db - INFO - Getting chat history.
2025-05-06 14:39:35,977 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 14:39:35,981 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 14:39:35,981 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know teacher attendance summary from January onwards
2025-05-06 14:39:35,981 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 14:39:35,986 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 14:39:40,504 - app.chat_controller - INFO - Results: [{'type': 'line', 'title': 'Teacher Attendance Trend (Line Chart)', 'data': {'labels': ['2025-01-12', '2025-01-22', '2025-01-26', '2025-02-09', '2025-02-23', '2025-02-24', '2025-03-06', '2025-03-18'], 'values': [1, 1, 1, 1, 1, 1, 1, 1]}}, {'type': 'pie', 'title': 'Attendance Status Distribution (Pie Chart)', 'data': {'labels': ['Absent', 'Attended', 'Cancelled'], 'values': [2, 1, 8]}}, {'type': 'bar', 'title': 'Average Lesson Length by Teacher (Bar Chart)', 'data': {'labels': ['Block Time', 'David 02'], 'values': [33.0, 30.0]}}, {'type': 'table', 'title': 'Teacher Attendance Summary (Table)', 'data': {'labels': ['Block Time', 'David 02'], 'values': [1, 0]}}]
2025-05-06 14:39:40,523 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-06 14:39:40,523 - app.db - INFO - Inserting application logs.
2025-05-06 14:39:40,524 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 14:39:40,527 - app.db - INFO - Successfully inserted application logs.
2025-05-06 14:48:12,310 - app.chat_controller - INFO - User Query: I want to know teacher attendance summary from January onwards
2025-05-06 14:48:12,310 - app.db - INFO - Getting chat history.
2025-05-06 14:48:12,312 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 14:48:12,315 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 14:48:12,316 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know teacher attendance summary from January onwards
2025-05-06 14:48:12,316 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 14:48:12,318 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 14:48:16,446 - app.chat_controller - INFO - Results: []
2025-05-06 14:48:16,450 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-06 14:48:16,450 - app.db - INFO - Inserting application logs.
2025-05-06 14:48:16,451 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 14:48:16,455 - app.db - INFO - Successfully inserted application logs.
2025-05-06 14:49:05,873 - app.chat_controller - INFO - User Query: I want to know teacher attendance summary from January onwards
2025-05-06 14:49:05,874 - app.db - INFO - Getting chat history.
2025-05-06 14:49:05,878 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 14:49:05,884 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 14:49:05,884 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know teacher attendance summary from January onwards
2025-05-06 14:49:05,884 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 14:49:05,894 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 14:49:10,209 - app.chat_controller - INFO - Results: [{'type': 'pie', 'title': 'Attendance Status Distribution (Pie Chart)', 'data': {'labels': ['Absent', 'Attended', 'Cancelled'], 'values': [2, 1, 8]}}, {'type': 'bar', 'title': 'Average Lesson Length by Teacher (Bar Chart)', 'data': {'labels': ['Block Time', 'David 02'], 'values': [33.0, 30.0]}}, {'type': 'table', 'title': 'Teacher Attendance Summary (Table)', 'data': {'labels': ['Block Time', 'David 02'], 'values': [10, 1]}}]
2025-05-06 14:49:10,212 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-06 14:49:10,212 - app.db - INFO - Inserting application logs.
2025-05-06 14:49:10,213 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 14:49:10,216 - app.db - INFO - Successfully inserted application logs.
2025-05-06 14:57:15,889 - app.chat_controller - INFO - User Query: I want to know teacher attendance summary from January onwards
2025-05-06 14:57:15,890 - app.db - INFO - Getting chat history.
2025-05-06 14:57:15,891 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 14:57:15,897 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 14:57:15,897 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know teacher attendance summary from January onwards
2025-05-06 14:57:15,897 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 14:57:15,899 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 14:57:20,399 - app.chat_controller - INFO - Results: [{'type': 'pie', 'title': 'Attendance Status Distribution', 'data': {'labels': ['Attended', 'Absent', 'Cancelled'], 'values': [1, 2, 8]}}, {'type': 'bar', 'title': 'Lessons by Teacher', 'data': {'labels': ['Block Time', 'David 02'], 'values': [33.0, 30.0]}}, {'type': 'table', 'title': 'Student Attendance Summary', 'data': {'labels': [1753, 18705, 75163, 204372, 592631, 811270, 827436, 827437], 'values': [1, 4, 1, 1, 1, 1, 1, 1]}}]
2025-05-06 14:57:20,402 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-06 14:57:20,402 - app.db - INFO - Inserting application logs.
2025-05-06 14:57:20,404 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 14:57:20,408 - app.db - INFO - Successfully inserted application logs.
2025-05-06 14:59:36,688 - app.chat_controller - INFO - User Query: I want to know teacher attendance summary from January onwards
2025-05-06 14:59:36,688 - app.db - INFO - Getting chat history.
2025-05-06 14:59:36,690 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 14:59:36,694 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 14:59:36,694 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know teacher attendance summary from January onwards
2025-05-06 14:59:36,694 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 14:59:36,696 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 14:59:41,325 - app.chat_controller - INFO - Results: [{'type': 'pie', 'title': 'Attendance Status Distribution', 'data': {'labels': [1, 2, 3], 'values': [1, 2, 8]}}, {'type': 'bar', 'title': 'Average Lesson Length by Teacher', 'data': {'labels': ['Block Time', 'David 02'], 'values': [33.0, 30.0]}}, {'type': 'table', 'title': 'Teacher Attendance Summary', 'data': {'labels': ['Block Time', 'David 02'], 'values': [10, 1]}}]
2025-05-06 14:59:41,326 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-06 14:59:41,326 - app.db - INFO - Inserting application logs.
2025-05-06 14:59:41,328 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 14:59:41,330 - app.db - INFO - Successfully inserted application logs.
2025-05-06 15:01:47,617 - app.chat_controller - INFO - User Query: I want to know teacher attendance summary from January onwards
2025-05-06 15:01:47,618 - app.db - INFO - Getting chat history.
2025-05-06 15:01:47,619 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 15:01:47,624 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 15:01:47,625 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know teacher attendance summary from January onwards
2025-05-06 15:01:47,625 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 15:01:47,627 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 15:01:51,473 - app.chat_controller - INFO - Results: [{'type': 'pie', 'title': 'Attendance Status Distribution by Teacher', 'data': {'labels': ['Block Time', 'Block Time', 'Block Time', 'David 02'], 'values': [1, 2, 3, 3]}}, {'type': 'bar', 'title': 'Average Lesson Length by Teacher', 'data': {'labels': ['Block Time', 'David 02'], 'values': [33.0, 30.0]}}, {'type': 'table', 'title': 'Teacher Attendance Summary', 'data': {'labels': ['Block Time', 'David 02'], 'values': [7, 1]}}]
2025-05-06 15:01:51,475 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-06 15:01:51,475 - app.db - INFO - Inserting application logs.
2025-05-06 15:01:51,476 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 15:01:51,479 - app.db - INFO - Successfully inserted application logs.
2025-05-06 15:05:16,376 - app.chat_controller - INFO - User Query: I want to know teacher attendance summary from January onwards
2025-05-06 15:05:16,386 - app.db - INFO - Getting chat history.
2025-05-06 15:05:16,390 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 15:05:16,395 - app.db - INFO - Successfully retrieved 5 conversation turns
2025-05-06 15:05:16,395 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know teacher attendance summary from January onwards
2025-05-06 15:05:16,395 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 15:05:16,402 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 15:05:19,765 - app.chat_controller - INFO - Results: [{'type': 'pie', 'title': 'Attendance Status Distribution', 'data': {'labels': ['Absent', 'Attended', 'Cancelled'], 'values': [2, 1, 8]}}, {'type': 'bar', 'title': 'Average Lesson Length by Teacher', 'data': {'labels': ['Block Time', 'David 02'], 'values': [33.0, 30.0]}}]
2025-05-06 15:05:19,769 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-06 15:05:19,769 - app.db - INFO - Inserting application logs.
2025-05-06 15:05:19,770 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 15:05:19,775 - app.db - INFO - Successfully inserted application logs.
2025-05-06 15:07:55,048 - app.chat_controller - INFO - User Query: I want to know teacher name Block Timeattendance summary from January onwards
2025-05-06 15:07:55,058 - app.db - INFO - Getting chat history.
2025-05-06 15:07:55,060 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 15:07:55,064 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-05-06 15:07:55,065 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know teacher name Block Timeattendance summary from January onwards
2025-05-06 15:07:55,065 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 15:07:55,068 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 15:07:58,716 - app.chat_controller - INFO - Results: [{'type': 'line', 'title': 'Attendance Trend', 'data': {'labels': ['2025-01-12', '2025-01-22', '2025-01-26', '2025-02-09', '2025-02-23', '2025-02-24', '2025-03-06', '2025-03-18'], 'values': [1, 1, 1, 4, 1, 1, 1, 1]}}, {'type': 'pie', 'title': 'Attendance Status Distribution', 'data': {'labels': ['Attended', 'Absent', 'Cancelled'], 'values': [1, 2, 8]}}, {'type': 'bar', 'title': 'Lessons by Teacher', 'data': {'labels': ['Block Time', 'David 02'], 'values': [10, 1]}}]
2025-05-06 15:07:58,718 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-06 15:07:58,718 - app.db - INFO - Inserting application logs.
2025-05-06 15:07:58,719 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 15:07:58,722 - app.db - INFO - Successfully inserted application logs.
2025-05-06 15:08:26,919 - app.chat_controller - INFO - User Query: I want to know teacher name "Block Time" attendance summary from January onwards
2025-05-06 15:08:26,920 - app.db - INFO - Getting chat history.
2025-05-06 15:08:26,922 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 15:08:26,929 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-05-06 15:08:26,929 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know teacher name "Block Time" attendance summary from January onwards
2025-05-06 15:08:26,929 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 15:08:26,931 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 15:08:30,534 - app.chat_controller - INFO - Results: [{'type': 'pie', 'title': 'Attendance Status Distribution', 'data': {'labels': ['Absent', 'Attended', 'Cancelled'], 'values': [2, 1, 7]}}]
2025-05-06 15:08:30,537 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-06 15:08:30,537 - app.db - INFO - Inserting application logs.
2025-05-06 15:08:30,539 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 15:08:30,543 - app.db - INFO - Successfully inserted application logs.
2025-05-06 15:08:42,697 - app.chat_controller - INFO - User Query: What about teacher David 2?
2025-05-06 15:08:42,698 - app.db - INFO - Getting chat history.
2025-05-06 15:08:42,699 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 15:08:42,706 - app.db - INFO - Successfully retrieved 1 conversation turns
2025-05-06 15:08:42,706 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: What about teacher David 2?
2025-05-06 15:08:42,706 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 15:08:42,709 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 15:08:46,299 - app.chat_controller - INFO - Results: []
2025-05-06 15:08:46,302 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-06 15:08:46,302 - app.db - INFO - Inserting application logs.
2025-05-06 15:08:46,303 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 15:08:46,308 - app.db - INFO - Successfully inserted application logs.
2025-05-06 15:09:11,082 - app.chat_controller - INFO - User Query: Move back to 2015 January onwards
2025-05-06 15:09:11,082 - app.db - INFO - Getting chat history.
2025-05-06 15:09:11,084 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 15:09:11,089 - app.db - INFO - Successfully retrieved 1 conversation turns
2025-05-06 15:09:11,090 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Move back to 2015 January onwards
2025-05-06 15:09:11,090 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 15:09:11,092 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 15:09:14,809 - app.chat_controller - INFO - Results: [{'type': 'pie', 'title': 'Attendance Status Distribution for Block Time (Since January 2015)', 'data': {'labels': [1, 2, 3, 4], 'values': [7, 13, 9, 1]}}, {'type': 'bar', 'title': 'Student Attendance Summary for Block Time (Since January 2015)', 'data': {'labels': [1442, 1753, 18705, 36581, 204372, 540539, 592631, 811270, 827436, 827437], 'values': [2, 1, 9, 1, 2, 3, 3, 4, 4, 1]}}]
2025-05-06 15:09:14,811 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-06 15:09:14,811 - app.db - INFO - Inserting application logs.
2025-05-06 15:09:14,812 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 15:09:14,816 - app.db - INFO - Successfully inserted application logs.
2025-05-06 15:10:23,109 - app.chat_controller - INFO - User Query: I want to know teacher attendance summary from January onwards
2025-05-06 15:10:23,109 - app.db - INFO - Getting chat history.
2025-05-06 15:10:23,111 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 15:10:23,117 - app.db - INFO - Successfully retrieved 2 conversation turns
2025-05-06 15:10:23,117 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know teacher attendance summary from January onwards
2025-05-06 15:10:23,118 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 15:10:23,121 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 15:10:27,005 - app.chat_controller - INFO - Results: [{'type': 'line', 'title': 'Attendance Trend Over Time', 'data': {'labels': ['2016-11-15', '2016-11-22', '2016-11-23', '2016-12-09', '2017-02-20', '2017-03-22', '2017-03-30', '2017-03-31', '2017-04-04', '2017-05-22', '2017-06-05', '2017-06-06', '2017-06-14', '2017-07-25', '2017-07-26', '2017-08-10', '2017-08-11', '2017-08-25', '2017-08-29', '2017-09-07', '2017-10-02', '2017-10-06', '2017-10-11', '2017-10-24', '2017-10-31', '2017-11-03', '2017-11-05', '2017-11-07', '2017-11-08', '2017-11-16', '2017-11-21', '2017-11-24', '2017-12-01', '2017-12-08', '2018-01-18', '2018-01-23', '2018-01-24', '2018-01-30', '2018-02-01', '2018-02-06', '2018-02-08', '2018-02-23', '2018-03-01', '2018-03-02', '2018-03-12', '2018-03-13', '2018-03-14', '2018-03-15', '2018-03-30', '2018-04-04', '2018-04-05', '2018-04-17', '2018-04-20', '2018-05-08', '2018-05-23', '2018-05-24', '2018-05-25', '2018-05-30', '2018-06-12', '2018-06-20', '2018-06-21', '2018-06-26', '2018-06-27', '2018-06-28', '2018-07-03', '2018-07-14', '2018-07-30', '2018-08-09', '2018-08-16', '2018-08-20', '2019-02-06', '2019-02-25', '2019-03-12', '2019-03-14', '2019-03-15', '2019-04-23', '2019-05-17', '2019-09-04', '2019-09-23', '2019-09-25', '2019-09-26', '2019-10-07', '2019-12-13', '2020-03-11', '2020-06-03', '2020-08-01', '2020-08-08', '2020-08-13', '2020-08-17', '2020-08-24', '2020-08-26', '2020-09-01', '2020-09-06', '2020-09-09', '2020-09-16', '2020-10-19', '2020-11-21', '2020-12-07', '2020-12-10', '2021-02-05', '2021-02-10', '2021-02-21', '2021-02-25', '2021-03-03', '2021-03-04', '2021-03-09', '2021-04-13', '2021-06-06', '2021-06-17', '2021-06-21', '2021-07-06', '2021-08-05', '2021-08-24', '2021-08-30', '2021-09-08', '2021-09-10', '2021-09-14', '2021-09-15', '2021-12-02', '2022-02-06', '2022-02-23', '2022-03-01', '2022-03-06', '2022-04-07', '2022-05-12', '2022-05-15', '2022-05-27', '2022-06-05', '2022-08-07', '2022-11-08', '2023-03-03', '2023-06-25', '2023-09-22', '2023-10-09', '2023-10-23', '2024-03-22', '2024-04-01', '2024-05-28', '2024-07-29', '2024-08-12', '2024-09-02', '2024-09-09', '2024-10-03', '2024-10-11', '2024-10-22', '2024-11-03', '2024-11-13', '2024-11-21', '2024-11-24', '2024-11-28', '2024-12-01', '2024-12-02', '2024-12-29', '2025-01-12', '2025-01-22', '2025-01-26', '2025-02-09', '2025-02-23', '2025-02-24', '2025-03-06', '2025-03-18'], 'values': [1, 1, 20, 1, 2, 1, 2, 1, 3, 1, 7, 12, 1, 6, 1, 56, 3, 18, 1, 7, 19, 2, 1, 7, 1, 7, 2, 8, 6, 6, 3, 1, 16, 1, 1, 3, 1, 3, 3, 1, 4, 2, 1, 4, 3, 2, 53, 19, 32, 1, 1, 1, 12, 2, 7, 8, 18, 3, 3, 7, 29, 1, 3, 2, 1, 2, 4, 3, 1, 1, 1, 1, 6, 2, 5, 4, 4, 1, 1, 2, 2, 40, 13, 72, 8, 60, 60, 1, 1, 11, 4, 6, 1, 17, 1, 2, 2, 1, 4, 1, 13, 2, 2, 4, 2, 1, 1, 2, 7, 1, 1, 5, 1, 15, 1, 1, 2, 2, 1, 1, 1, 1, 2, 1, 2, 6, 4, 2, 4, 1, 2, 1, 1, 2, 5, 1, 1, 1, 1, 1, 1, 2, 1, 4, 1, 1, 1, 2, 4, 3, 2, 1, 1, 1, 1, 1, 4, 1, 1, 1, 1]}}, {'type': 'pie', 'title': 'Attendance Status Distribution', 'data': {'labels': ['Attended', 'Absent', 'Cancelled', 'Unknown'], 'values': [157, 592, 144, 48]}}, {'type': 'bar', 'title': 'Lessons by Teacher', 'data': {'labels': ['hau teacher 1', 'SuNV SETA', 'Teacher mem02', 'Daisy 1', 'John Tec', 'Block Time', 'Mica Nguyen', 'Ha Trinh', 'Teacher Dai', 'David 04', 'David 05', 'MAC TEACHER 01', 'Hong0620 Hong0620', 'LEO LACDO', 'David Teacher 01', 'David 02', 'David 03'], 'values': [7665, 3225, 3005, 2310, 1680, 950, 930, 915, 900, 260, 240, 180, 135, 15, -5910, -7560, -8325]}}]
2025-05-06 15:10:27,008 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-06 15:10:27,008 - app.db - INFO - Inserting application logs.
2025-05-06 15:10:27,010 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 15:10:27,014 - app.db - INFO - Successfully inserted application logs.
2025-05-06 15:28:53,764 - app.chat_controller - INFO - User Query: I want to know teacher attendance summary from January onwards
2025-05-06 15:28:53,764 - app.db - INFO - Getting chat history.
2025-05-06 15:28:53,766 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 15:28:53,771 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-05-06 15:28:53,771 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know teacher attendance summary from January onwards
2025-05-06 15:28:53,771 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 15:28:53,773 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 15:28:57,577 - app.chat_controller - INFO - Results: [{'type': 'line', 'title': 'Attendance Trend by Teacher (Line Chart)', 'data': {'labels': ['2025-01-12', '2025-01-22', '2025-01-26', '2025-02-09', '2025-02-23', '2025-02-24', '2025-03-06', '2025-03-18'], 'values': ['Block Time', 'David 02', 'Block Time', 'Block Time', 'Block Time', 'Block Time', 'Block Time', 'Block Time']}}, {'type': 'pie', 'title': 'Attendance Status Distribution (Pie Chart)', 'data': {'labels': ['Absent', 'Attended', 'Cancelled'], 'values': [2, 1, 8]}}, {'type': 'bar', 'title': 'Average Lesson Length by Teacher (Bar Chart)', 'data': {'labels': ['Block Time', 'David 02'], 'values': [33.0, 30.0]}}]
2025-05-06 15:28:57,580 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-06 15:28:57,580 - app.db - INFO - Inserting application logs.
2025-05-06 15:28:57,581 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 15:28:57,584 - app.db - INFO - Successfully inserted application logs.
2025-05-06 15:38:44,614 - app.chat_controller - INFO - User Query: I want to know teacher attendance summary from January onwards
2025-05-06 15:38:44,614 - app.db - INFO - Getting chat history.
2025-05-06 15:38:44,617 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 15:38:44,622 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-05-06 15:38:44,623 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know teacher attendance summary from January onwards
2025-05-06 15:38:44,623 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 15:38:44,630 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 15:40:37,127 - app.chat_controller - INFO - User Query: I want to know teacher attendance summary from January onwards
2025-05-06 15:40:37,128 - app.db - INFO - Getting chat history.
2025-05-06 15:40:37,129 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 15:40:37,133 - app.db - INFO - Successfully retrieved 0 conversation turns
2025-05-06 15:40:37,133 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: I want to know teacher attendance summary from January onwards
2025-05-06 15:40:37,133 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-06 15:40:37,141 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-06 15:40:41,597 - app.chat_controller - INFO - Results: [{'type': 'line', 'title': 'Attendance Trend by Teacher (Line Chart)', 'data': {'labels': ['2025-01-12', '2025-01-22', '2025-01-26', '2025-02-09', '2025-02-23', '2025-02-24', '2025-03-06', '2025-03-18'], 'values': ['Block Time', 'David 02', 'Block Time', 'Block Time', 'Block Time', 'Block Time', 'Block Time', 'Block Time']}}, {'type': 'pie', 'title': 'Attendance Status Distribution (Pie Chart)', 'data': {'labels': ['Attended', 'Absent', 'Cancelled'], 'values': [1, 2, 8]}}, {'type': 'bar', 'title': 'Average Lesson Length by Teacher (Bar Chart)', 'data': {'labels': ['Block Time', 'David 02'], 'values': [33.0, 30.0]}}]
2025-05-06 15:40:41,611 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-06 15:40:41,611 - app.db - INFO - Inserting application logs.
2025-05-06 15:40:41,612 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-06 15:40:41,616 - app.db - INFO - Successfully inserted application logs.
2025-05-23 13:50:59,529 - app.chat_controller - INFO - User Query: Xin cho, ti cn h tr trang im
2025-05-23 13:50:59,530 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-23 13:50:59,531 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-23 13:50:59,536 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: Xin cho, ti cn h tr trang im
2025-05-23 13:51:01,421 - app.langchain - INFO - Rewritten prompt: content='Cho bn, ti cn h tr trang im.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-7f34316c-a3de-405d-8ff8-8cbbd9511a48-0' usage_metadata={'input_tokens': 209, 'output_tokens': 12, 'total_tokens': 221, 'input_token_details': {'cache_read': 0}}
2025-05-23 13:51:01,421 - app.chat_controller - INFO - Rewritten Prompt: Cho bn, ti cn h tr trang im.
2025-05-23 13:51:01,421 - app.db - INFO - Getting chat history.
2025-05-23 13:51:01,425 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-23 13:51:01,440 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-23 13:51:01,441 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Cho bn, ti cn h tr trang im.
2025-05-23 13:51:01,441 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-23 13:51:01,837 - app.intent_detector - INFO - Detected intent: cho hi for input: Cho bn, ti cn h tr trang im.
2025-05-23 13:51:01,837 - app.langchain - INFO - Selected fallback prompt
2025-05-23 13:51:01,838 - app.langchain - INFO - Detected intent: cho hi | Requires context: False
2025-05-23 13:51:01,838 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-23 13:51:03,521 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-23 13:51:03,521 - app.db - INFO - Inserting application logs.
2025-05-23 13:51:03,523 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-23 13:51:03,540 - app.db - INFO - Successfully inserted application logs.
2025-05-23 13:51:03,541 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Cho bn! Rt vui c gip bn v trang im.  c th a ra li khuyn tt nht, bn c th cho ti bit c th hn v iu bn mun bit c khng? V d, bn mun tm hiu v loi trang im no, bn c loi da no, hoc bn c bt k mi quan tm c th no khng? Cng nhiu thng tin, ti cng c th gip bn hiu qu hn!
2025-05-23 13:51:14,511 - app.chat_controller - INFO - User Query: Ti mun trang im kiu 
2025-05-23 13:51:14,511 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-23 13:51:14,511 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-23 13:51:14,514 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: Ti mun trang im kiu 
2025-05-23 13:51:15,706 - app.langchain - INFO - Rewritten prompt: content='Ti mun trang im kiu .' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-7ce3c6d1-fbd2-407e-943a-c67bd34c04df-0' usage_metadata={'input_tokens': 206, 'output_tokens': 8, 'total_tokens': 214, 'input_token_details': {'cache_read': 0}}
2025-05-23 13:51:15,707 - app.chat_controller - INFO - Rewritten Prompt: Ti mun trang im kiu .
2025-05-23 13:51:15,707 - app.db - INFO - Getting chat history.
2025-05-23 13:51:15,708 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-23 13:51:15,714 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-23 13:51:15,714 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Ti mun trang im kiu .
2025-05-23 13:51:15,714 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-23 13:51:15,816 - app.intent_detector - INFO - Detected intent: khng lin quan for input: Ti mun trang im kiu .
2025-05-23 13:51:15,816 - app.langchain - INFO - Selected fallback prompt
2025-05-23 13:51:15,816 - app.langchain - INFO - Detected intent: khng lin quan | Requires context: False
2025-05-23 13:51:15,816 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-23 13:51:18,565 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-23 13:51:18,565 - app.db - INFO - Inserting application logs.
2025-05-23 13:51:18,568 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-23 13:51:18,572 - app.db - INFO - Successfully inserted application logs.
2025-05-23 13:51:18,573 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti rt vui c gip bn trang im kiu !  a ra nhng gi  ph hp nht, bn c th cung cp thm thng tin v phong cch trang im m bn mun hng n khng? V d, bn mun trang im theo phong cch c in, quyn r, hay hin i? Bn c thch tp trung vo mt, mi, hay c hai khng? Bn c mun trang im cho dp c bit no khng, hay ch l trang im hng ngy? Bt k thng tin no bn cung cp s gip ti hiu r hn v mong mun ca bn v a ra nhng li khuyn hu ch hn.
2025-05-23 13:51:27,176 - app.chat_controller - INFO - User Query: Ti mun trang im mi i
2025-05-23 13:51:27,177 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-23 13:51:27,177 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-23 13:51:27,179 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: Ti mun trang im mi i
2025-05-23 13:51:28,508 - app.langchain - INFO - Rewritten prompt: content='Ti mun trang im mi.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-7140debd-4c59-4adf-b405-fa9e55ac03ae-0' usage_metadata={'input_tokens': 206, 'output_tokens': 7, 'total_tokens': 213, 'input_token_details': {'cache_read': 0}}
2025-05-23 13:51:28,508 - app.chat_controller - INFO - Rewritten Prompt: Ti mun trang im mi.
2025-05-23 13:51:28,508 - app.db - INFO - Getting chat history.
2025-05-23 13:51:28,510 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-23 13:51:28,515 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-23 13:51:28,516 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Ti mun trang im mi.
2025-05-23 13:51:28,516 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-23 13:51:28,600 - app.intent_detector - INFO - Detected intent: ni chuyn phim for input: Ti mun trang im mi.
2025-05-23 13:51:28,600 - app.langchain - INFO - Selected fallback prompt
2025-05-23 13:51:28,600 - app.langchain - INFO - Detected intent: ni chuyn phim | Requires context: False
2025-05-23 13:51:28,601 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-23 13:51:31,357 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-23 13:51:31,357 - app.db - INFO - Inserting application logs.
2025-05-23 13:51:31,359 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-23 13:51:31,362 - app.db - INFO - Successfully inserted application logs.
2025-05-23 13:51:31,363 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti c th gip bn vi iu !  ti c th cung cp cho bn mt s mo v  xut tt nht, bn c th cho ti bit bn mun t c giao din no khng? Bn ang tm kim mt mu mi hng ngy n gin, mt ci g  to bo v quyn r, hay mt ci g  khc? Ngoi ra, bn c bt k mi quan tm hoc s thch c th no khng, chng hn nh cc sn phm lu tri, cng thc dng m hoc mu sc c th m bn mun th?
2025-05-23 13:51:39,987 - app.chat_controller - INFO - User Query: Hng ngy nh
2025-05-23 13:51:39,987 - app.langchain - INFO - Using gemini-2.0-flash to rewrite prompt
2025-05-23 13:51:39,987 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-23 13:51:39,990 - app.langchain - INFO - Prompt for rewritin: System: 
Bn l mt chuyn gia phn tch ngn ng v din gii  nh ngi dng. Nhim v ca bn l nhn mt cu u vo c th cha li do thu m khng r rng hoc pht m sai, v chuyn i n thnh mt cu prompt r rng v chnh xc nht c th, phn nh ng  nh m ngi dng mun truyn t.

Hy xem xt k lng ng cnh c th c, cc cm t tng t ph bin, v kin thc ngn ng tng qut  a ra mt prompt  c "chun ha".

V d:
- u vo: "Hm bn ti khng hiu"
- u ra (Prompt c chun ha): "Hm  ti khng hiu."

By gi, hy p dng quy trnh ny cho cu u vo tip theo m ngi dng cung cp. Bn s ch a ra cu prompt  c chun ha lm u ra cui cng.
. User: Hng ngy nh
2025-05-23 13:51:41,003 - app.langchain - INFO - Rewritten prompt: content='Hn ngy nh.' additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []} id='run-b6638416-9672-4bf3-9183-aa2cf3a72ca6-0' usage_metadata={'input_tokens': 203, 'output_tokens': 6, 'total_tokens': 209, 'input_token_details': {'cache_read': 0}}
2025-05-23 13:51:41,004 - app.chat_controller - INFO - Rewritten Prompt: Hn ngy nh.
2025-05-23 13:51:41,004 - app.db - INFO - Getting chat history.
2025-05-23 13:51:41,005 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-23 13:51:41,012 - app.db - INFO - Successfully retrieved 10 conversation turns
2025-05-23 13:51:41,013 - app.langchain - INFO - Creating RAG chain with model: gemini-2.0-flash, user_input: Hn ngy nh.
2025-05-23 13:51:41,013 - app.langchain - INFO - Using Google Gemini model: gemini-2.0-flash
2025-05-23 13:51:41,098 - app.intent_detector - INFO - Detected intent: phn hi for input: Hn ngy nh.
2025-05-23 13:51:41,098 - app.langchain - INFO - Selected fallback prompt
2025-05-23 13:51:41,098 - app.langchain - INFO - Detected intent: phn hi | Requires context: False
2025-05-23 13:51:41,099 - app.langchain - INFO - Successfully created chain with model: gemini-2.0-flash
2025-05-23 13:51:43,592 - app.chat_controller - INFO - Successfully invoked rag_chain
2025-05-23 13:51:43,593 - app.db - INFO - Inserting application logs.
2025-05-23 13:51:43,594 - app.db - INFO - Succesfully connected to MongoDB.
2025-05-23 13:51:43,598 - app.db - INFO - Successfully inserted application logs.
2025-05-23 13:51:43,598 - app.chat_controller - INFO - Session ID: frontend-simple-session, AI response: Ti c th gip bn hn h, nhng ti cn thm mt cht thng tin  m bo ti c th cung cp thng tin ph hp. Bn c th vui lng cho ti bit thm v nhng g bn mun bit v trang im hoc chm sc da? V d: bn c mun bit v trang im cho mt bui hn h, cc bc chm sc da trc khi trang im, hoc c bt k sn phm c th no bn mun ti  xut khng?
2025-06-05 07:15:41,622 - app.chat_controller - INFO - handle_chat received query: What eyeshadow colors suit brown eyes? for session: frontend-simple-session
2025-06-05 07:15:41,622 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What eyeshadow colors suit brown eyes?', 'response_mode': 'blocking', 'user': 'frontend-simple-session', 'conversation_id': 'frontend-simple-session'}
2025-06-05 07:15:41,640 - app.chat_controller - ERROR - Dify API HTTP error: 400 - {"code": "invalid_param", "message": "frontend-simple-session is not a valid uuid.", "params": "conversation_id"}

2025-06-05 07:15:43,404 - app.chat_controller - INFO - handle_chat received query: What eyeshadow colors suit brown eyes? for session: frontend-simple-session
2025-06-05 07:15:43,404 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What eyeshadow colors suit brown eyes?', 'response_mode': 'blocking', 'user': 'frontend-simple-session', 'conversation_id': 'frontend-simple-session'}
2025-06-05 07:15:43,432 - app.chat_controller - ERROR - Dify API HTTP error: 400 - {"code": "invalid_param", "message": "frontend-simple-session is not a valid uuid.", "params": "conversation_id"}

2025-06-05 07:18:19,328 - app.chat_controller - INFO - handle_chat received query: What eyeshadow colors suit brown eyes? for session: frontend-simple-session
2025-06-05 07:18:19,328 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What eyeshadow colors suit brown eyes?', 'response_mode': 'blocking', 'user': 'frontend-simple-session', 'conversation_id': 'frontend-simple-session'}
2025-06-05 07:18:19,362 - app.chat_controller - ERROR - Dify API HTTP error: 400 - {"code": "invalid_param", "message": "frontend-simple-session is not a valid uuid.", "params": "conversation_id"}

2025-06-05 07:18:19,362 - app.db - INFO - Inserting application logs.
2025-06-05 07:18:19,363 - app.db - INFO - Succesfully connected to MongoDB.
2025-06-05 07:18:19,373 - app.db - INFO - Successfully inserted application logs.
2025-06-05 07:18:19,375 - app.chat_controller - INFO - Returning QueryResponse: response='AI service error (400): frontend-simple-session is not a valid uuid....', session_id='frontend-simple-session'
2025-06-05 07:20:31,153 - app.chat_controller - INFO - handle_chat received query: Hello for session: 1749082699715
2025-06-05 07:20:31,153 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hello', 'response_mode': 'blocking', 'user': '1749082699715', 'conversation_id': '1749082699715'}
2025-06-05 07:20:31,188 - app.chat_controller - ERROR - Dify API HTTP error: 400 - {"code": "invalid_param", "message": "1749082699715 is not a valid uuid.", "params": "conversation_id"}

2025-06-05 07:20:31,188 - app.db - INFO - Inserting application logs.
2025-06-05 07:20:31,189 - app.db - INFO - Succesfully connected to MongoDB.
2025-06-05 07:20:31,193 - app.db - INFO - Successfully inserted application logs.
2025-06-05 07:20:31,193 - app.chat_controller - INFO - Returning QueryResponse: response='AI service error (400): 1749082699715 is not a valid uuid....', session_id='1749082699715'
2025-06-05 07:20:58,390 - app.chat_controller - INFO - handle_chat received query: Hello for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-05 07:20:58,391 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hello', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-05 07:20:58,477 - app.chat_controller - ERROR - Dify API HTTP error: 404 - {"code": "not_found", "message": "Conversation Not Exists.", "status": 404}

2025-06-05 07:20:58,477 - app.db - INFO - Inserting application logs.
2025-06-05 07:20:58,478 - app.db - INFO - Succesfully connected to MongoDB.
2025-06-05 07:20:58,480 - app.db - INFO - Successfully inserted application logs.
2025-06-05 07:20:58,481 - app.chat_controller - INFO - Returning QueryResponse: response='AI service error (404): Conversation Not Exists....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'
2025-06-05 07:27:37,688 - app.chat_controller - INFO - handle_chat received query: Hello for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-05 07:27:37,688 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hello', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-05 07:27:40,587 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '29ee0803-4ec1-47d4-b395-bbd6894cb373', 'id': 'a7134dcb-c75a-4782-a165-6f5fcf184053', 'message_id': 'a7134dcb-c75a-4782-a165-6f5fcf184053', 'conversation_id': 'cd0fef4b-79ec-4b51-a313-9e4b71b022be', 'mode': 'advanced-chat', 'answer': 'Hello! How can I assist you today?', 'metadata': {'usage': {'prompt_tokens': 13, 'prompt_unit_price': '0.03', 'prompt_price_unit': '0.001', 'prompt_price': '0.00039', 'completion_tokens': 9, 'completion_unit_price': '0.06', 'completion_price_unit': '0.001', 'completion_price': '0.00054', 'total_tokens': 22, 'total_price': '0.00093', 'currency': 'USD', 'latency': 1.7735167600003479}}, 'created_at': 1749083258}
2025-06-05 07:27:40,587 - app.chat_controller - INFO - Successfully received answer from Dify: 'Hello! How can I assist you today?...'
2025-06-05 07:27:40,587 - app.db - INFO - Inserting application logs.
2025-06-05 07:27:40,589 - app.db - INFO - Succesfully connected to MongoDB.
2025-06-05 07:27:40,592 - app.db - INFO - Successfully inserted application logs.
2025-06-05 07:27:40,592 - app.chat_controller - INFO - Returning QueryResponse: response='Hello! How can I assist you today?...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'
2025-06-05 13:43:21,367 - app.chat_controller - INFO - handle_chat received query: What are some popular makeup techniques? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-05 13:43:21,368 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What are some popular makeup techniques?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-05 13:43:39,719 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'f8fa46b5-b357-4333-90e0-0e62c2354c5e', 'id': '4de650b7-4973-4476-9c77-6e137b884350', 'message_id': '4de650b7-4973-4476-9c77-6e137b884350', 'conversation_id': 'bb028a32-f959-40cb-aaba-c0a1e65933a7', 'mode': 'advanced-chat', 'answer': '1. Contouring: This technique involves using a darker shade of foundation or powder to create shadows and highlight certain features of the face, like the cheekbones, nose, and jawline. \n\n2. Strobing: This is the opposite of contouring. Instead of creating shadows, strobing involves highlighting areas of the face where light naturally hits to create a radiant, glowing look. \n\n3. Baking: This technique involves applying a heavy amount of translucent powder under the eyes and other areas of the face, allowing it to sit for several minutes (or "bake") before brushing it off. This helps to set makeup and give a flawless, crease-free finish. \n\n4. Cut Creasing: This eye makeup technique involves applying a lighter shade of eyeshadow across the lid and a darker one in the crease to create a sharp, defined look. \n\n5. Smokey Eye: This is a classic eye makeup technique where darker shades are blended outwards from the lash line to create a \'smokey\' effect. \n\n6. Tightlining: This involves applying eyeliner to the upper waterline to give the illusion of thicker, fuller lashes. \n\n7. Draping: This blush application technique involves sweeping color along the cheekbones and temples to create a soft, natural-looking flush. \n\n8. Color Correcting: This involves using different colored concealers to neutralize skin issues. For example, green concealer can neutralize redness, while peach can neutralize dark circles. \n\n9. Brow Mapping: This technique involves using a pencil or powder to define and shape the eyebrows, creating a more polished look. \n\n10. Overlining: This lip makeup technique involves drawing over the natural lip line to create the illusion of fuller lips.', 'metadata': {'usage': {'prompt_tokens': 19, 'prompt_unit_price': '0.03', 'prompt_price_unit': '0.001', 'prompt_price': '0.00057', 'completion_tokens': 359, 'completion_unit_price': '0.06', 'completion_price_unit': '0.001', 'completion_price': '0.02154', 'total_tokens': 378, 'total_price': '0.02211', 'currency': 'USD', 'latency': 18.095955618002336}}, 'created_at': 1749105801}
2025-06-05 13:43:39,719 - app.chat_controller - INFO - Successfully received answer from Dify: '1. Contouring: This technique involves using a darker shade of foundation or powder to create shadow...'
2025-06-05 13:43:39,719 - app.db - INFO - Inserting application logs.
2025-06-05 13:43:39,722 - app.db - INFO - Succesfully connected to MongoDB.
2025-06-05 13:43:39,730 - app.db - INFO - Successfully inserted application logs.
2025-06-05 13:43:39,731 - app.chat_controller - INFO - Returning QueryResponse: response='1. Contouring: This technique involves using a darker shade of foundation or powder to create shadow...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'
2025-06-05 13:44:55,611 - app.chat_controller - INFO - handle_chat received query: How do I choose the right foundation color? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-05 13:44:55,612 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'How do I choose the right foundation color?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-05 13:45:12,865 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '9899959c-7b71-427c-930c-ffc402dd927d', 'id': '081cda04-2cfe-4427-818d-075e30273139', 'message_id': '081cda04-2cfe-4427-818d-075e30273139', 'conversation_id': '0b1df094-1f1f-45e8-b435-ba93121156a7', 'mode': 'advanced-chat', 'answer': "Choosing the right foundation color can be a bit tricky but with the right tips, you can find the perfect match. Here's how:\n\n1. Determine Your Undertone: The undertones of your skin can be either cool, warm, or neutral. Cool undertones are pink, red, or bluish. Warm undertones are yellow, peachy, golden. Neutral is a mix of cool and warm undertones. You can look at the veins on your wrist to help determine your undertone. If your veins appear blue or purple, you have cool undertones. If they appear green or olive, you have warm undertones. If it's hard to tell, you probably have neutral undertones.\n\n2. Test Shades: Use testers to apply different shades of foundation on your jawline or wrist. Do not test it on your hand as the skin color on your hand can be different from your face.\n\n3. Check in Natural Light: Always check the color in natural light. The fluorescent lighting in stores can be misleading. The foundation that appears to match your skin tone under natural light is your perfect shade.\n\n4. Match Your Skin Tone: The right foundation should be the same shade as your skin tone or one shade lighter. If you have to choose between two shades, go for the lighter one. You can always build up coverage or darken it with a bronzer if needed.\n\n5. Consider Seasonal Changes: Your skin tone can change depending on the season. You might need a lighter shade in winter and a darker one in summer.\n\n6. Consult a Professional: If you're still uncertain, a makeup artist at a cosmetic counter can help you find the perfect shade. You can also try virtual try-on tools that many makeup brands offer online now.\n\nRemember, the goal of foundation is to even out your skin tone and create a smooth base, not to change the color of your skin. Its always better for your foundation to be a touch too light than a touch too dark.", 'metadata': {'usage': {'prompt_tokens': 21, 'prompt_unit_price': '0.03', 'prompt_price_unit': '0.001', 'prompt_price': '0.00063', 'completion_tokens': 400, 'completion_unit_price': '0.06', 'completion_price_unit': '0.001', 'completion_price': '0.024', 'total_tokens': 421, 'total_price': '0.02463', 'currency': 'USD', 'latency': 17.07566978199975}}, 'created_at': 1749105896}
2025-06-05 13:45:12,865 - app.chat_controller - INFO - Successfully received answer from Dify: 'Choosing the right foundation color can be a bit tricky but with the right tips, you can find the pe...'
2025-06-05 13:45:12,865 - app.db - INFO - Inserting application logs.
2025-06-05 13:45:12,866 - app.db - INFO - Succesfully connected to MongoDB.
2025-06-05 13:45:12,870 - app.db - INFO - Successfully inserted application logs.
2025-06-05 13:45:12,870 - app.chat_controller - INFO - Returning QueryResponse: response='Choosing the right foundation color can be a bit tricky but with the right tips, you can find the pe...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'
2025-06-11 20:09:28,433 - app.chat_controller - INFO - handle_chat received query: Hello for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 20:09:28,433 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hello', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 20:09:34,135 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '2d781edc-472a-41c0-8d74-093e269bf203', 'id': '383abb1d-0627-4154-92b3-8a788842ea41', 'message_id': '383abb1d-0627-4154-92b3-8a788842ea41', 'conversation_id': 'f4df326f-71f4-42da-a8ff-98245644aa27', 'mode': 'advanced-chat', 'answer': "Hi there! I'm Momo, your friendly makeup guide!  To give you the best advice, feel free to share details about yourself. For example, letting me know about your vision (blind, low vision, or sighted), preferred colors, skin type and concerns, favorite brands or product preferences (like vegan or cruelty-free!), and your go-to makeup style will help me tailor my recommendations just for you. Let's get glam! \n", 'metadata': {'usage': {'prompt_tokens': 7050, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 107, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 7157, 'total_price': '0', 'currency': 'USD', 'latency': 5.166667418999964}}, 'created_at': 1749647369}
2025-06-11 20:09:34,135 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Hi there! I'm Momo, your friendly makeup guide!  To give you the best advice, feel free to share details about yourself. For example, letting me know about your vision (blind, low vision, or sighted), preferred colors, skin type and concerns, favorite brands or product preferences (like vegan or cruelty-free!), and your go-to makeup style will help me tailor my recommendations just for you. Let's get glam! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-11 20:09:34,135 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-11 20:19:01,788 - app.chat_controller - INFO - handle_chat received query: Hello for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 20:19:01,789 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hello', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 20:19:04,626 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'df60a4b1-1257-4e96-9551-c6946c820334', 'id': '38416d11-0b74-4ded-ae15-9c5c628c92a6', 'message_id': '38416d11-0b74-4ded-ae15-9c5c628c92a6', 'conversation_id': '3c92fa5d-1a88-4842-8520-fac8cef3253e', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! I\'m Momo, your makeup assistant. To give you the best advice, feel free to tell me about yourself! Sharing details like your vision (blind, low vision, or sighted), your favorite colors, skin type (oily, dry, sensitive, etc.), preferred brands or product qualities (vegan, cruelty-free), and your desired makeup style (natural, matte, dewy, etc.) helps me tailor my recommendations just for you!",\n  "type": "normal"\n}\n```', 'metadata': {'usage': {'prompt_tokens': 8991, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 127, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9118, 'total_price': '0', 'currency': 'USD', 'latency': 2.5089015020000716}}, 'created_at': 1749647942}
2025-06-11 20:19:04,626 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! I'm Momo, your makeup assistant. To give you the best advice, feel free to tell me about y...', type='normal'
2025-06-11 20:19:04,626 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! I'm Momo, your makeup assistant. To give you the best advice, feel free to tell me about y...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-11 20:25:54,686 - app.chat_controller - INFO - handle_chat received query: Hi for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 20:25:54,687 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hi', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 20:26:04,329 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '7de7fe63-150e-4f8a-9f50-3712377723a2', 'id': 'f469c2ee-8c10-4abb-822a-cb29d3a792a8', 'message_id': 'f469c2ee-8c10-4abb-822a-cb29d3a792a8', 'conversation_id': 'cae51c49-0bcc-4963-b385-8084029be221', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! I\'m Momo, your friendly makeup assistant. To give you the best advice, feel free to tell me about your vision (blind, low vision, or sighted), your favorite colors, your skin type and concerns, preferred brands or product attributes (like vegan or cruelty-free), and your everyday makeup style (natural, matte, dewy, etc.). The more I know, the better I can help!",\n  "type": "normal"\n}\n```', 'metadata': {'usage': {'prompt_tokens': 8052, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 114, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 8166, 'total_price': '0', 'currency': 'USD', 'latency': 9.320116585999813}}, 'created_at': 1749648355}
2025-06-11 20:26:04,329 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! I'm Momo, your friendly makeup assistant. To give you the best advice, feel free to tell m...', type='normal'
2025-06-11 20:26:04,329 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! I'm Momo, your friendly makeup assistant. To give you the best advice, feel free to tell m...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-11 20:30:00,816 - app.chat_controller - INFO - handle_chat received query: I'm Nam for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 20:30:00,817 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm Nam", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 20:30:05,502 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '960d1809-b302-4941-a45c-14483972b06a', 'id': '5834bbe1-32b3-4a2c-939e-954f8fc593e1', 'message_id': '5834bbe1-32b3-4a2c-939e-954f8fc593e1', 'conversation_id': '4c2a311e-4bc9-455c-b178-dd9a8dec3fea', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "I don\'t have enough information to provide details on \\"Nam.\\" Can you please provide more context or specifics about what you\'re interested in knowing? For example, are you referring to a specific makeup product, a technique, or perhaps a person?",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 4422, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 13, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 4435, 'total_price': '0', 'currency': 'USD', 'latency': 2.2215576679996047}}, 'created_at': 1749648601}
2025-06-11 20:30:05,502 - app.chat_controller - INFO - Successfully parsed Dify answer: response='I don't have enough information to provide details on "Nam." Can you please provide more context or ...', type='normal'
2025-06-11 20:30:05,502 - app.chat_controller - INFO - Returning QueryResponse: response='I don't have enough information to provide details on "Nam." Can you please provide more context or ...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-11 20:30:39,121 - app.chat_controller - INFO - handle_chat received query: I want to make up in Italy style for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 20:30:39,122 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'I want to make up in Italy style', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 20:30:46,544 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '0e0d7de2-dfaf-49a7-a441-01b7c5a73cbf', 'id': '90083b20-da52-440d-b8b8-607b1f10a33a', 'message_id': '90083b20-da52-440d-b8b8-607b1f10a33a', 'conversation_id': 'b3361931-e713-4529-980d-df9f7daae627', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "The \\"Italian girl\\" makeup look typically focuses on enhancing natural beauty with a radiant, sun-kissed complexion and defined features. Think of a \'no-makeup makeup\' style but with an extra touch of warmth and sophistication. \\n\\nFor the skin, it\'s all about achieving a healthy glow. Lightweight foundations or tinted moisturizers are often used to even out the skin tone without masking the natural texture. Creamy bronzers and blushes in terracotta or peach shades are key to add warmth and dimension to the face. A touch of highlighter on the high points of the cheeks, brow bone, and Cupid\'s bow can enhance the luminosity.\\n\\nEyes are usually kept simple and elegant. Neutral eyeshadows, such as warm browns and golds, can be used to create a soft, blended look. Eyeliner, if used, is typically a subtle brown or black liner smudged along the lash line to define the eyes without being too harsh. Mascara is a must to lengthen and volumize the lashes.\\n\\nBrows are often well-groomed and natural-looking, with a focus on filling in any sparse areas and defining their shape.\\n\\nLips can range from nude or rosy shades to a classic red lip, depending on the desired level of drama. Lip liner can be used to define the lips and prevent feathering.\\n\\nOverall, the goal is to create a polished and radiant look that celebrates natural beauty and exudes confidence. It\'s about enhancing your features and creating a sun-kissed, effortless vibe.",\n  "type": "normal"\n}\n```', 'metadata': {'usage': {'prompt_tokens': 4734, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 15, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 4749, 'total_price': '0', 'currency': 'USD', 'latency': 2.328209542999957}}, 'created_at': 1749648639}
2025-06-11 20:30:46,545 - app.chat_controller - INFO - Successfully parsed Dify answer: response='The "Italian girl" makeup look typically focuses on enhancing natural beauty with a radiant, sun-kis...', type='normal'
2025-06-11 20:30:46,545 - app.chat_controller - INFO - Returning QueryResponse: response='The "Italian girl" makeup look typically focuses on enhancing natural beauty with a radiant, sun-kis...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-11 20:31:08,544 - app.chat_controller - INFO - handle_chat received query: I want to make up in Italy style for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 20:31:08,545 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'I want to make up in Italy style', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 20:31:12,895 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '7b466b33-55bc-493a-9840-3e0f0a7bb8b2', 'id': '2716a881-1021-4847-8b83-54f4f455e24b', 'message_id': '2716a881-1021-4847-8b83-54f4f455e24b', 'conversation_id': '683ba563-f9f3-4862-9cd4-a86b93634462', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Ciao! I\'m Momo, your personal makeup assistant. To give you the best Italian-inspired look, tell me a bit about yourself! Sharing details like your vision (blind, low vision, or sighted), favorite colors, skin type & concerns, preferred brands or product attributes (like vegan or cruelty-free), and your usual makeup style will help me create a truly personalized guide for you. Let\'s get started!",\n  "type": "normal"\n}\n```', 'metadata': {'usage': {'prompt_tokens': 9124, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 123, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9247, 'total_price': '0', 'currency': 'USD', 'latency': 3.981430876000104}}, 'created_at': 1749648669}
2025-06-11 20:31:12,895 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Ciao! I'm Momo, your personal makeup assistant. To give you the best Italian-inspired look, tell me ...', type='normal'
2025-06-11 20:31:12,896 - app.chat_controller - INFO - Returning QueryResponse: response='Ciao! I'm Momo, your personal makeup assistant. To give you the best Italian-inspired look, tell me ...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-11 20:31:25,355 - app.chat_controller - INFO - handle_chat received query: Yes, I'm sighted so that's ok for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 20:31:25,355 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "Yes, I'm sighted so that's ok", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 20:31:31,159 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '993cca72-5f19-4a5f-bc35-14b73f97e50c', 'id': '74b696bc-4199-41cb-9c78-76158badca26', 'message_id': '74b696bc-4199-41cb-9c78-76158badca26', 'conversation_id': 'cb4ba8ed-7463-40ea-ab3d-144af37a56fc', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "normal",\n  "response": [\n    "Step 1: Acknowledging that the user is sighted means the makeup tutorial can include visual descriptions and instructions without needing to accommodate visual impairments.",\n    "Step 2: Therefore, the standard makeup application steps, incorporating visual cues and color descriptions, will be appropriate.",\n    "Step 3: No modifications or alternative instructions are needed due to the user\'s sighted status. Each step will aim to provide the most effective visual instructions."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 6898, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 30, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 6928, 'total_price': '0', 'currency': 'USD', 'latency': 3.9413837930005684}}, 'created_at': 1749648685}
2025-06-11 20:31:31,159 - app.chat_controller - INFO - Successfully parsed Dify answer: response='['Step 1: Acknowledging that the user is sighted means the makeup tutorial can include visual descriptions and instructions without needing to accommodate visual impairments.', 'Step 2: Therefore, the standard makeup application steps, incorporating visual cues and color descriptions, will be appropriate.', "Step 3: No modifications or alternative instructions are needed due to the user's sighted status. Each step will aim to provide the most effective visual instructions."]...', type='normal'
2025-06-11 20:31:31,159 - app.chat_controller - INFO - Returning QueryResponse: response='['Step 1: Acknowledging that the user is sighted means the makeup tutorial can include visual descriptions and instructions without needing to accommodate visual impairments.', 'Step 2: Therefore, the standard makeup application steps, incorporating visual cues and color descriptions, will be appropriate.', "Step 3: No modifications or alternative instructions are needed due to the user's sighted status. Each step will aim to provide the most effective visual instructions."]...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-11 20:32:39,576 - app.chat_controller - INFO - handle_chat received query: Okay, can you guide me one more time? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 20:32:39,576 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Okay, can you guide me one more time?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 20:32:44,888 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '48c9ed55-4e3b-4766-b53e-c25a9f924862', 'id': '1fee28dc-72fb-4484-85a5-2f40515787ae', 'message_id': '1fee28dc-72fb-4484-85a5-2f40515787ae', 'conversation_id': '895b7dbb-737d-4bf6-ac90-93775508d4d1', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! I\'m Momo, your makeup assistant. To give you the best advice, feel free to tell me about yourself! Sharing details like your vision (blind, low vision, sighted), your favorite colors, your skin type and any concerns, your favorite brands or product preferences (like vegan or cruelty-free), and your usual makeup style (natural, matte, dewy, etc.) will help me tailor my recommendations just for you!",\n  "type": "normal"\n}\n```', 'metadata': {'usage': {'prompt_tokens': 8892, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 127, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9019, 'total_price': '0', 'currency': 'USD', 'latency': 5.0212801269999545}}, 'created_at': 1749648760}
2025-06-11 20:32:44,889 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! I'm Momo, your makeup assistant. To give you the best advice, feel free to tell me about y...', type='normal'
2025-06-11 20:32:44,889 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! I'm Momo, your makeup assistant. To give you the best advice, feel free to tell me about y...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-11 20:32:57,437 - app.chat_controller - INFO - handle_chat received query: Umm, yes I'm sighted :D for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 20:32:57,437 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "Umm, yes I'm sighted :D", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 20:33:02,772 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'a58e9936-9f15-4142-bdbb-8897c670038d', 'id': '1b407c9a-345e-4a7d-8f1b-f122f0269af6', 'message_id': '1b407c9a-345e-4a7d-8f1b-f122f0269af6', 'conversation_id': 'a0e6ff63-40ca-484e-b933-f244b1473d07', 'mode': 'advanced-chat', 'answer': "I'm sorry, but I need the user's query in order to provide a step-by-step makeup tutorial. Can you please provide the query?\n", 'metadata': {'usage': {'prompt_tokens': 7145, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 39, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 7184, 'total_price': '0', 'currency': 'USD', 'latency': 3.1077494599999227}}, 'created_at': 1749648777}
2025-06-11 20:33:02,773 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: I'm sorry, but I need the user's query in order to provide a step-by-step makeup tutorial. Can you please provide the query?
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-11 20:33:02,773 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-11 20:55:53,753 - app.chat_controller - INFO - handle_chat received query: How do I choose the right foundation color? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 20:55:53,755 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'How do I choose the right foundation color?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 20:55:58,217 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '492d9e04-40c5-4eec-85e4-c393b8ad57c4', 'id': 'b97df3ed-d145-4127-84b0-09a8ab2cad1a', 'message_id': 'b97df3ed-d145-4127-84b0-09a8ab2cad1a', 'conversation_id': 'd2c12276-9c66-41a6-ab2b-6a82b1da8fce', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! So glad you\'re here. To give you the best foundation advice, it helps me to know a little about you. Feel free to share details like your vision (blind, low vision, or sighted), your favorite colors, your skin type and any concerns, preferred brands or product attributes (like vegan or cruelty-free), and your makeup style goals (natural, matte, dewy, etc.). The more I know, the better I can tailor my recommendations!",\n  "type": "normal"\n}\n```', 'metadata': {'usage': {'prompt_tokens': 9200, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 138, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9338, 'total_price': '0', 'currency': 'USD', 'latency': 4.033668585000214}}, 'created_at': 1749650154}
2025-06-11 20:55:58,217 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! So glad you're here. To give you the best foundation advice, it helps me to know a little ...', type='normal'
2025-06-11 20:55:58,218 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! So glad you're here. To give you the best foundation advice, it helps me to know a little ...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-11 20:56:17,389 - app.chat_controller - INFO - handle_chat received query: Hmm, I'm blind so haha. Be careful :D for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 20:56:17,389 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "Hmm, I'm blind so haha. Be careful :D", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 20:56:22,260 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '5afda010-71c3-4afa-9f36-0c4a92a1349b', 'id': 'efa8b1f9-30c6-41c1-8a28-f9180678685e', 'message_id': 'efa8b1f9-30c6-41c1-8a28-f9180678685e', 'conversation_id': 'b80753a9-827a-4c18-a693-122a6abda161', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Understood! I will continue to provide responses that are fully accessible and tailored for blind users.",\n  "type": "normal"\n}\n```', 'metadata': {'usage': {'prompt_tokens': 8585, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 51, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 8636, 'total_price': '0', 'currency': 'USD', 'latency': 3.17369595900027}}, 'created_at': 1749650177}
2025-06-11 20:56:22,260 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Understood! I will continue to provide responses that are fully accessible and tailored for blind us...', type='normal'
2025-06-11 20:56:22,260 - app.chat_controller - INFO - Returning QueryResponse: response='Understood! I will continue to provide responses that are fully accessible and tailored for blind us...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-11 20:56:44,444 - app.chat_controller - INFO - handle_chat received query: Can you show me step by step guide on Italy makeup? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 20:56:44,445 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Can you show me step by step guide on Italy makeup?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 20:56:49,536 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '996b4434-e7c0-4ffd-9d1d-64f651c8f5ae', 'id': '0c0768ca-8324-4607-bfca-3a357c2a2547', 'message_id': '0c0768ca-8324-4607-bfca-3a357c2a2547', 'conversation_id': '2c078286-3bcd-4903-8f8f-b0bb1b34e2e3', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Italian-style makeup often focuses on enhancing natural beauty with a touch of glamour. The look usually starts with a smooth, even base achieved using a lightweight foundation or tinted moisturizer to let the skin\'s radiance shine through. Concealer is then applied to any blemishes or under-eye circles for a flawless complexion. Eyes are typically defined with a soft brown or black eyeliner, smudged for a sultry effect, paired with generous coats of mascara to create long, voluminous lashes. For the cheeks, a rosy or peach-toned blush is applied to the apples of the cheeks for a healthy flush. Finally, lips are often the focal point, featuring a classic red or berry lipstick for a bold and confident finish. The overall effect is polished and sophisticated, celebrating the wearer\'s features with understated elegance.",\n  "type": "normal"\n}\n```', 'metadata': {'usage': {'prompt_tokens': 4794, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 23, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 4817, 'total_price': '0', 'currency': 'USD', 'latency': 1.3156252929998118}}, 'created_at': 1749650204}
2025-06-11 20:56:49,537 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Italian-style makeup often focuses on enhancing natural beauty with a touch of glamour. The look usu...', type='normal'
2025-06-11 20:56:49,537 - app.chat_controller - INFO - Returning QueryResponse: response='Italian-style makeup often focuses on enhancing natural beauty with a touch of glamour. The look usu...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-11 20:57:35,587 - app.chat_controller - INFO - handle_chat received query: Can you show me step by step guide on Italy makeup? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 20:57:35,589 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Can you show me step by step guide on Italy makeup?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 20:57:39,781 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '2b7c9370-337e-41ad-8dde-5d4ed2408cac', 'id': 'cb3acc53-0b7d-4760-baa8-698aa926653c', 'message_id': 'cb3acc53-0b7d-4760-baa8-698aa926653c', 'conversation_id': '6476c1c1-93e8-46d1-a603-481120753aec', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Ciao! I\'m Momo, your makeup assistant! To give you the best Italian-inspired look, it would be super helpful if you could share a bit about yourself. For example, telling me about your vision (blind, low vision, or sighted), your favorite colors for makeup, your skin type and any concerns, if you have any preferred brands or product qualities like vegan/cruelty-free, and the kind of makeup style you usually go for (natural, matte, dewy, etc.). The more I know, the better I can tailor the guide just for you!",\n  "type": "normal"\n}\n```', 'metadata': {'usage': {'prompt_tokens': 8954, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 165, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9119, 'total_price': '0', 'currency': 'USD', 'latency': 3.76757308499964}}, 'created_at': 1749650256}
2025-06-11 20:57:39,781 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Ciao! I'm Momo, your makeup assistant! To give you the best Italian-inspired look, it would be super...', type='normal'
2025-06-11 20:57:39,781 - app.chat_controller - INFO - Returning QueryResponse: response='Ciao! I'm Momo, your makeup assistant! To give you the best Italian-inspired look, it would be super...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-11 20:57:50,239 - app.chat_controller - INFO - handle_chat received query: Oh yea, I'm blind so becareful xD for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 20:57:50,240 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "Oh yea, I'm blind so becareful xD", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 20:57:56,657 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '9b7e29ff-d786-43c3-8cae-a6e864083b26', 'id': '4e44c7c2-b6c5-4f6a-8415-e50167c30f7e', 'message_id': '4e44c7c2-b6c5-4f6a-8415-e50167c30f7e', 'conversation_id': '86768fe9-02a9-401a-a48f-3b2707f59f82', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Thank you for letting me know. I will provide instructions that are clear, descriptive, and avoid any visual references to accommodate your visual impairment. Please specify what makeup application you would like assistance with."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 8292, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 29, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 8321, 'total_price': '0', 'currency': 'USD', 'latency': 4.960336501999791}}, 'created_at': 1749650270}
2025-06-11 20:57:56,658 - app.chat_controller - INFO - Successfully parsed Dify answer: response='['Step 1: Thank you for letting me know. I will provide instructions that are clear, descriptive, and avoid any visual references to accommodate your visual impairment. Please specify what makeup application you would like assistance with.']...', type='step_by_step'
2025-06-11 20:57:56,658 - app.chat_controller - INFO - Returning QueryResponse: response='['Step 1: Thank you for letting me know. I will provide instructions that are clear, descriptive, and avoid any visual references to accommodate your visual impairment. Please specify what makeup application you would like assistance with.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-11 20:58:48,594 - app.chat_controller - INFO - handle_chat received query: Can you guide me through again? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 20:58:48,594 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Can you guide me through again?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 20:58:52,702 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '5cb2e60c-4547-44ed-a755-16a546c7ab03', 'id': 'c3a32986-b5df-40fd-be77-769a4ddddfbf', 'message_id': 'c3a32986-b5df-40fd-be77-769a4ddddfbf', 'conversation_id': '0887dac9-89c9-45b3-982a-f4bf2191bc1e', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! I\'m Momo, your makeup guide. To give you the best advice, feel free to share some details about yourself. For example, letting me know about your vision (blind, low vision, or sighted), your favorite colors, your skin type and concerns, any preferred brands or product preferences (like vegan or cruelty-free), and your desired makeup style (natural, dewy, etc.) will help me tailor my recommendations just for you!",\n  "type": "normal"\n}\n```', 'metadata': {'usage': {'prompt_tokens': 8871, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 131, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9002, 'total_price': '0', 'currency': 'USD', 'latency': 3.789934042000368}}, 'created_at': 1749650329}
2025-06-11 20:58:52,703 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! I'm Momo, your makeup guide. To give you the best advice, feel free to share some details ...', type='normal'
2025-06-11 20:58:52,703 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! I'm Momo, your makeup guide. To give you the best advice, feel free to share some details ...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-11 20:59:06,903 - app.chat_controller - INFO - handle_chat received query: I'm blind, you do not remember? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 20:59:06,903 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm blind, you do not remember?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 20:59:12,770 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '03a3080c-cfa8-42e5-b68c-4bd1a6b0868f', 'id': '0c4ccff8-0238-4cb9-b3f2-8048405422dc', 'message_id': '0c4ccff8-0238-4cb9-b3f2-8048405422dc', 'conversation_id': 'a1b55533-3307-40ea-9f72-1c9184de2ccf', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: I apologize for not directly addressing your specific needs as a blind user in my previous responses. I am designed to remember your preferences and tailor my instructions accordingly.",\n    "Step 2: From now on, I will prioritize providing makeup instructions that are fully accessible and rely on tactile and descriptive language, avoiding any visual references.",\n    "Step 3: If you have any specific makeup application you\'d like guidance on, please let me know, and I will provide a step-by-step guide designed for blind users."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 8492, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 31, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 8523, 'total_price': '0', 'currency': 'USD', 'latency': 3.9283815439994214}}, 'created_at': 1749650347}
2025-06-11 20:59:12,770 - app.chat_controller - INFO - Successfully parsed Dify answer: response='['Step 1: I apologize for not directly addressing your specific needs as a blind user in my previous responses. I am designed to remember your preferences and tailor my instructions accordingly.', 'Step 2: From now on, I will prioritize providing makeup instructions that are fully accessible and rely on tactile and descriptive language, avoiding any visual references.', "Step 3: If you have any specific makeup application you'd like guidance on, please let me know, and I will provide a step-by-step guide designed for blind users."]...', type='step_by_step'
2025-06-11 20:59:12,770 - app.chat_controller - INFO - Returning QueryResponse: response='['Step 1: I apologize for not directly addressing your specific needs as a blind user in my previous responses. I am designed to remember your preferences and tailor my instructions accordingly.', 'Step 2: From now on, I will prioritize providing makeup instructions that are fully accessible and rely on tactile and descriptive language, avoiding any visual references.', "Step 3: If you have any specific makeup application you'd like guidance on, please let me know, and I will provide a step-by-step guide designed for blind users."]...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-11 21:27:44,579 - app.chat_controller - INFO - handle_chat received query: Help me step by step make up for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 21:27:44,580 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Help me step by step make up', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 21:27:47,979 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'ce623ad1-b478-4eda-95e6-ca68b3115118', 'id': '90f23d42-0969-47bd-a810-d1ffda749583', 'message_id': '90f23d42-0969-47bd-a810-d1ffda749583', 'conversation_id': 'fa948eb8-85b9-4bf8-8c4f-72b1dfe4e500', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! I\'m Momo, your makeup guide. To give you the best advice, feel free to share details about your vision (sighted, low vision, blind), color preferences for makeup, skin type and concerns, favorite brands or preferred product attributes (like vegan or cruelty-free), and your preferred makeup style (natural, matte, dewy, etc.). The more I know, the better I can tailor my recommendations!",\n  "type": "normal"\n}\n```', 'metadata': {'usage': {'prompt_tokens': 8877, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 125, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9002, 'total_price': '0', 'currency': 'USD', 'latency': 3.0373340430005555}}, 'created_at': 1749652065}
2025-06-11 21:27:47,980 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! I'm Momo, your makeup guide. To give you the best advice, feel free to share details about...', type='normal'
2025-06-11 21:27:47,980 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! I'm Momo, your makeup guide. To give you the best advice, feel free to share details about...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-11 21:28:22,923 - app.chat_controller - INFO - handle_chat received query: I'm sighted, so I'm fine with it xD for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 21:28:22,924 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm sighted, so I'm fine with it xD", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 21:28:27,417 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'feff8d05-cb74-445c-aed8-33fbfb7ae50e', 'id': '0148abaf-c93b-4dee-a8d8-e930fa599071', 'message_id': '0148abaf-c93b-4dee-a8d8-e930fa599071', 'conversation_id': 'bd3a4cfe-310f-4d66-b79f-a709e37731be', 'mode': 'advanced-chat', 'answer': 'Okay, I will follow the instructions and await a makeup-related query to create a step-by-step tutorial.\n', 'metadata': {'usage': {'prompt_tokens': 7244, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 32, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 7276, 'total_price': '0', 'currency': 'USD', 'latency': 2.3839690020004127}}, 'created_at': 1749652103}
2025-06-11 21:28:27,417 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I will follow the instructions and await a makeup-related query to create a step-by-step tutorial.
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-11 21:28:27,418 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-11 21:29:52,623 - app.chat_controller - INFO - handle_chat received query: I'm sighted, so I'm fine with it xD for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 21:29:52,624 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm sighted, so I'm fine with it xD", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 21:29:56,429 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '8735631f-bb25-45c9-bccb-3b80cbbc9a13', 'id': '070b8809-d57b-471b-866e-61bd308b4638', 'message_id': '070b8809-d57b-471b-866e-61bd308b4638', 'conversation_id': '611fc1ce-b967-49a1-94b0-1c32b496fe45', 'mode': 'advanced-chat', 'answer': 'Okay, I will follow the instructions and wait for your query about a makeup look. I am ready to provide a step-by-step tutorial when you are!\n', 'metadata': {'usage': {'prompt_tokens': 7244, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 32, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 7276, 'total_price': '0', 'currency': 'USD', 'latency': 2.6012345419994745}}, 'created_at': 1749652193}
2025-06-11 21:29:56,429 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I will follow the instructions and wait for your query about a makeup look. I am ready to provide a step-by-step tutorial when you are!
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-11 21:29:56,429 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-11 21:31:43,471 - app.chat_controller - INFO - handle_chat received query: I'm sighted, so I'm fine with it xD for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 21:31:43,471 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm sighted, so I'm fine with it xD", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 21:31:47,513 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'dcac5d67-a28a-425b-8ce0-3d76e2c2a795', 'id': 'bd703545-fd43-4eb2-8199-6d57011fde53', 'message_id': 'bd703545-fd43-4eb2-8199-6d57011fde53', 'conversation_id': '8a7aec57-a9b7-41b9-a84d-5466964d1896', 'mode': 'advanced-chat', 'answer': "I understand that you're letting me know I don't need to include accessibility features for visually impaired users. I'm ready for your makeup tutorial request! Just let me know what you'd like to learn.\n", 'metadata': {'usage': {'prompt_tokens': 7244, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 36, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 7280, 'total_price': '0', 'currency': 'USD', 'latency': 2.6651983339988874}}, 'created_at': 1749652304}
2025-06-11 21:31:47,514 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: I understand that you're letting me know I don't need to include accessibility features for visually impaired users. I'm ready for your makeup tutorial request! Just let me know what you'd like to learn.
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-11 21:31:47,514 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-11 21:46:40,843 - app.chat_controller - INFO - handle_chat received query: Hello! for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 21:46:40,844 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hello!', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 21:46:47,699 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '93a2dc8a-cd87-4966-bbbc-bafa880a31bb', 'id': '1c390098-4cbe-4fd4-8997-052a345860e8', 'message_id': '1c390098-4cbe-4fd4-8997-052a345860e8', 'conversation_id': '8b92efc3-3275-4baf-8692-496130597a03', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be Momo! Ask me anything! \n", 'metadata': {'usage': {'prompt_tokens': 8776, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 28, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 8804, 'total_price': '0', 'currency': 'USD', 'latency': 6.400865459999295}}, 'created_at': 1749653201}
2025-06-11 21:46:47,700 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be Momo! Ask me anything! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-11 21:46:47,700 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-11 21:47:11,477 - app.chat_controller - INFO - handle_chat received query: I'm blind, I want to know step by step make up in Italy style  for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 21:47:11,478 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm blind, I want to know step by step make up in Italy style ", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 21:47:25,152 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'fd37e907-9ac3-49c1-9da3-40cc58149da5', 'id': 'c463e3bf-0cc6-4f18-92dc-93947463793a', 'message_id': 'c463e3bf-0cc6-4f18-92dc-93947463793a', 'conversation_id': '23745c1a-4182-4240-a006-960b721b788f', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Begin with a hydrating moisturizer. Feel the texture change as you gently massage it into your skin, ensuring even coverage across your face and neck.",\n    "Step 2: Apply a primer. Use your fingertips to smooth a thin layer of primer over your entire face, paying close attention to the T-zone area (forehead, nose, and chin) where pores are more prominent. The primer will create a smooth base for your foundation.",\n    "Step 3: Apply foundation. Use a damp makeup sponge or a foundation brush to gently dab the foundation onto your face. Start at the center of your face and blend outward. Ensure even coverage, paying attention to your jawline and hairline. The goal is a smooth, unified skin tone.",\n    "Step 4: Conceal any blemishes or dark circles. Using a concealer brush or your fingertip, dab the concealer onto areas that need extra coverage. Gently blend it into your skin until it seamlessly merges with the foundation.",\n    "Step 5: Apply a cream bronzer. Use a dense brush and gently swirl it in the product. Tap off the excess. Find your cheekbones by gently pressing your fingers on the side of your face, then apply the bronzer in the hollows, blending upwards towards your temples. Also, apply on the temples and jawline to add warmth and definition.",\n    "Step 6: Apply a cream blush to the apples of your cheeks. Smile to locate the apples of your cheeks and use your fingers to dab the blush onto that area. Blend outwards towards your temples using a sponge or your fingertips.",\n    "Step 7: Define your eyebrows. Use an eyebrow pencil or powder that matches your hair color to fill in any sparse areas in your eyebrows. Follow your natural brow shape and use light, feathery strokes. Use a spoolie brush to blend and soften the lines.",\n    "Step 8: Apply eyeshadow. Use a neutral or warm shade all over your eyelid as a base. Then, apply a slightly darker shade to the crease of your eye, blending gently to add depth. Ensure both eyelids feel balanced.",\n    "Step 9: Apply eyeliner along your upper lash line. Use a gel or pencil eyeliner. Start from the inner corner of your eye and work your way outwards, staying as close to your lashes as possible. Aim for a thin, even line. You can smudge it gently with a cotton swab for a softer look.",\n    "Step 10: Curl your eyelashes with an eyelash curler. Place the curler as close to the base of your lashes as possible, then gently squeeze for a few seconds.",\n    "Step 11: Apply mascara. Wiggle the mascara wand at the base of your lashes and then pull it upwards, coating each lash. Apply one or two coats, allowing each coat to dry slightly before applying the next.",\n    "Step 12: Line your lips with a lip liner that matches your chosen lipstick color. Start at the center of your upper lip and work your way outwards, following your natural lip line. Then, fill in your lips with the same lip liner.",\n    "Step 13: Apply your lipstick. Use a lip brush or apply directly from the tube. Blot your lips with a tissue to remove any excess product. Reapply if desired."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 8816, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 46, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 8862, 'total_price': '0', 'currency': 'USD', 'latency': 6.9877536710009736}}, 'created_at': 1749653231}
2025-06-11 21:47:25,153 - app.chat_controller - INFO - Successfully parsed Dify answer: response='['Step 1: Begin with a hydrating moisturizer. Feel the texture change as you gently massage it into your skin, ensuring even coverage across your face and neck.', 'Step 2: Apply a primer. Use your fingertips to smooth a thin layer of primer over your entire face, paying close attention to the T-zone area (forehead, nose, and chin) where pores are more prominent. The primer will create a smooth base for your foundation.', 'Step 3: Apply foundation. Use a damp makeup sponge or a foundation brush to gently dab the foundation onto your face. Start at the center of your face and blend outward. Ensure even coverage, paying attention to your jawline and hairline. The goal is a smooth, unified skin tone.', 'Step 4: Conceal any blemishes or dark circles. Using a concealer brush or your fingertip, dab the concealer onto areas that need extra coverage. Gently blend it into your skin until it seamlessly merges with the foundation.', 'Step 5: Apply a cream bronzer. Use a dense brush and gently swirl it in the product. Tap off the excess. Find your cheekbones by gently pressing your fingers on the side of your face, then apply the bronzer in the hollows, blending upwards towards your temples. Also, apply on the temples and jawline to add warmth and definition.', 'Step 6: Apply a cream blush to the apples of your cheeks. Smile to locate the apples of your cheeks and use your fingers to dab the blush onto that area. Blend outwards towards your temples using a sponge or your fingertips.', 'Step 7: Define your eyebrows. Use an eyebrow pencil or powder that matches your hair color to fill in any sparse areas in your eyebrows. Follow your natural brow shape and use light, feathery strokes. Use a spoolie brush to blend and soften the lines.', 'Step 8: Apply eyeshadow. Use a neutral or warm shade all over your eyelid as a base. Then, apply a slightly darker shade to the crease of your eye, blending gently to add depth. Ensure both eyelids feel balanced.', 'Step 9: Apply eyeliner along your upper lash line. Use a gel or pencil eyeliner. Start from the inner corner of your eye and work your way outwards, staying as close to your lashes as possible. Aim for a thin, even line. You can smudge it gently with a cotton swab for a softer look.', 'Step 10: Curl your eyelashes with an eyelash curler. Place the curler as close to the base of your lashes as possible, then gently squeeze for a few seconds.', 'Step 11: Apply mascara. Wiggle the mascara wand at the base of your lashes and then pull it upwards, coating each lash. Apply one or two coats, allowing each coat to dry slightly before applying the next.', 'Step 12: Line your lips with a lip liner that matches your chosen lipstick color. Start at the center of your upper lip and work your way outwards, following your natural lip line. Then, fill in your lips with the same lip liner.', 'Step 13: Apply your lipstick. Use a lip brush or apply directly from the tube. Blot your lips with a tissue to remove any excess product. Reapply if desired.']...', type='step_by_step'
2025-06-11 21:47:25,154 - app.chat_controller - INFO - Returning QueryResponse: response='['Step 1: Begin with a hydrating moisturizer. Feel the texture change as you gently massage it into your skin, ensuring even coverage across your face and neck.', 'Step 2: Apply a primer. Use your fingertips to smooth a thin layer of primer over your entire face, paying close attention to the T-zone area (forehead, nose, and chin) where pores are more prominent. The primer will create a smooth base for your foundation.', 'Step 3: Apply foundation. Use a damp makeup sponge or a foundation brush to gently dab the foundation onto your face. Start at the center of your face and blend outward. Ensure even coverage, paying attention to your jawline and hairline. The goal is a smooth, unified skin tone.', 'Step 4: Conceal any blemishes or dark circles. Using a concealer brush or your fingertip, dab the concealer onto areas that need extra coverage. Gently blend it into your skin until it seamlessly merges with the foundation.', 'Step 5: Apply a cream bronzer. Use a dense brush and gently swirl it in the product. Tap off the excess. Find your cheekbones by gently pressing your fingers on the side of your face, then apply the bronzer in the hollows, blending upwards towards your temples. Also, apply on the temples and jawline to add warmth and definition.', 'Step 6: Apply a cream blush to the apples of your cheeks. Smile to locate the apples of your cheeks and use your fingers to dab the blush onto that area. Blend outwards towards your temples using a sponge or your fingertips.', 'Step 7: Define your eyebrows. Use an eyebrow pencil or powder that matches your hair color to fill in any sparse areas in your eyebrows. Follow your natural brow shape and use light, feathery strokes. Use a spoolie brush to blend and soften the lines.', 'Step 8: Apply eyeshadow. Use a neutral or warm shade all over your eyelid as a base. Then, apply a slightly darker shade to the crease of your eye, blending gently to add depth. Ensure both eyelids feel balanced.', 'Step 9: Apply eyeliner along your upper lash line. Use a gel or pencil eyeliner. Start from the inner corner of your eye and work your way outwards, staying as close to your lashes as possible. Aim for a thin, even line. You can smudge it gently with a cotton swab for a softer look.', 'Step 10: Curl your eyelashes with an eyelash curler. Place the curler as close to the base of your lashes as possible, then gently squeeze for a few seconds.', 'Step 11: Apply mascara. Wiggle the mascara wand at the base of your lashes and then pull it upwards, coating each lash. Apply one or two coats, allowing each coat to dry slightly before applying the next.', 'Step 12: Line your lips with a lip liner that matches your chosen lipstick color. Start at the center of your upper lip and work your way outwards, following your natural lip line. Then, fill in your lips with the same lip liner.', 'Step 13: Apply your lipstick. Use a lip brush or apply directly from the tube. Blot your lips with a tissue to remove any excess product. Reapply if desired.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-11 21:48:03,419 - app.chat_controller - INFO - handle_chat received query: Continue for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 21:48:03,420 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Continue', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 21:48:09,555 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '2b4255cd-09c4-4ea0-9437-d56c581eb70c', 'id': 'd2f44b36-a8f6-43c8-90c2-63c9088cfd13', 'message_id': 'd2f44b36-a8f6-43c8-90c2-63c9088cfd13', 'conversation_id': '5692d25e-f2eb-4355-9bc2-85a8210b17d5', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be Momo, your friendly and enthusiastic makeup assistant! Ask me anything about makeup and I'll do my best to help you out! I'm excited to talk beauty! \n", 'metadata': {'usage': {'prompt_tokens': 12516, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 83, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 12599, 'total_price': '0', 'currency': 'USD', 'latency': 5.727802626999619}}, 'created_at': 1749653283}
2025-06-11 21:48:09,555 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be Momo, your friendly and enthusiastic makeup assistant! Ask me anything about makeup and I'll do my best to help you out! I'm excited to talk beauty! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-11 21:48:09,555 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-11 21:52:03,465 - app.chat_controller - INFO - handle_chat received query: I'm blind, I want to know step by step make up in Italy style  for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 21:52:03,466 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm blind, I want to know step by step make up in Italy style ", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 21:52:14,840 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '78aaf4f4-e6b3-42e0-ae9e-59b830ea41fc', 'id': 'd5549bee-46c8-4851-80b1-ea2be12c7da3', 'message_id': 'd5549bee-46c8-4851-80b1-ea2be12c7da3', 'conversation_id': '68f3474f-7f07-4ccc-b196-39d93462fca6', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Begin with a clean, moisturized face. Gently massage your preferred moisturizer into your skin using upward, circular motions.",\n    "Step 2: Apply a primer to create a smooth base. Focus on areas where you tend to get oily or have enlarged pores. The primer should feel like a silky layer on your skin.",\n    "Step 3: Apply foundation using a damp makeup sponge. Start in the center of your face and blend outwards, paying attention to your hairline and jawline. The foundation should feel even and natural.",\n    "Step 4: Conceal any blemishes or dark circles. Use a small concealer brush or your fingertip to dab concealer onto the areas you want to cover. Gently blend the edges until the concealer disappears into your foundation.",\n    "Step 5: Set your foundation with a light dusting of translucent powder. Use a large, fluffy brush to apply the powder all over your face. This will help to keep your makeup in place and prevent shine.",\n    "Step 6: Define your eyebrows using a brow pencil or powder. Follow your natural brow shape, filling in any sparse areas. Use a spoolie brush to blend the product and soften the lines.",\n    "Step 7: Apply a neutral eyeshadow all over your eyelid, from lash line to brow bone. This will create a base for your other eyeshadows.",\n    "Step 8: Apply a medium-toned eyeshadow to your crease. Use a blending brush to blend the eyeshadow back and forth until it looks seamless.",\n    "Step 9: Apply a dark brown or black eyeshadow to your outer corner. Use a small, angled brush to create a defined V-shape. Blend the eyeshadow into your crease.",\n    "Step 10: Apply eyeliner to your upper lash line. Start at the inner corner of your eye and draw a thin line that gradually thickens as you move towards the outer corner. Create a slight flick at the end for a classic Italian winged liner.",\n    "Step 11: Curl your eyelashes with an eyelash curler. Hold the curler in place for 10-15 seconds.",\n    "Step 12: Apply two coats of mascara to your upper and lower lashes. Wiggle the wand at the base of your lashes to create volume.",\n    "Step 13: Apply bronzer to the hollows of your cheeks, temples, and jawline. Use a large, angled brush to blend the bronzer into your skin. This will add warmth and dimension to your face.",\n    "Step 14: Apply blush to the apples of your cheeks. Smile to find the apples of your cheeks, and then blend the blush upwards towards your temples. Use a shade that complements your skin tone.",\n    "Step 15: Line your lips with a lip liner that matches your chosen lipstick. This will help to prevent your lipstick from bleeding and will also make your lips appear fuller.",\n    "Step 16: Apply your favorite red lipstick. Use a lip brush for precise application, or apply directly from the tube. Blot your lips with a tissue and then apply another coat of lipstick.",\n    "Step 17: Add a touch of lip gloss to the center of your lips for a plumped effect (optional).",\n    "Step 18: Set your makeup with a setting spray. This will help to keep your makeup in place all day and night."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 9836, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 46, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9882, 'total_price': '0', 'currency': 'USD', 'latency': 4.659767210000609}}, 'created_at': 1749653523}
2025-06-11 21:52:14,842 - app.chat_controller - INFO - Successfully parsed Dify answer: response='['Step 1: Begin with a clean, moisturized face. Gently massage your preferred moisturizer into your skin using upward, circular motions.', 'Step 2: Apply a primer to create a smooth base. Focus on areas where you tend to get oily or have enlarged pores. The primer should feel like a silky layer on your skin.', 'Step 3: Apply foundation using a damp makeup sponge. Start in the center of your face and blend outwards, paying attention to your hairline and jawline. The foundation should feel even and natural.', 'Step 4: Conceal any blemishes or dark circles. Use a small concealer brush or your fingertip to dab concealer onto the areas you want to cover. Gently blend the edges until the concealer disappears into your foundation.', 'Step 5: Set your foundation with a light dusting of translucent powder. Use a large, fluffy brush to apply the powder all over your face. This will help to keep your makeup in place and prevent shine.', 'Step 6: Define your eyebrows using a brow pencil or powder. Follow your natural brow shape, filling in any sparse areas. Use a spoolie brush to blend the product and soften the lines.', 'Step 7: Apply a neutral eyeshadow all over your eyelid, from lash line to brow bone. This will create a base for your other eyeshadows.', 'Step 8: Apply a medium-toned eyeshadow to your crease. Use a blending brush to blend the eyeshadow back and forth until it looks seamless.', 'Step 9: Apply a dark brown or black eyeshadow to your outer corner. Use a small, angled brush to create a defined V-shape. Blend the eyeshadow into your crease.', 'Step 10: Apply eyeliner to your upper lash line. Start at the inner corner of your eye and draw a thin line that gradually thickens as you move towards the outer corner. Create a slight flick at the end for a classic Italian winged liner.', 'Step 11: Curl your eyelashes with an eyelash curler. Hold the curler in place for 10-15 seconds.', 'Step 12: Apply two coats of mascara to your upper and lower lashes. Wiggle the wand at the base of your lashes to create volume.', 'Step 13: Apply bronzer to the hollows of your cheeks, temples, and jawline. Use a large, angled brush to blend the bronzer into your skin. This will add warmth and dimension to your face.', 'Step 14: Apply blush to the apples of your cheeks. Smile to find the apples of your cheeks, and then blend the blush upwards towards your temples. Use a shade that complements your skin tone.', 'Step 15: Line your lips with a lip liner that matches your chosen lipstick. This will help to prevent your lipstick from bleeding and will also make your lips appear fuller.', 'Step 16: Apply your favorite red lipstick. Use a lip brush for precise application, or apply directly from the tube. Blot your lips with a tissue and then apply another coat of lipstick.', 'Step 17: Add a touch of lip gloss to the center of your lips for a plumped effect (optional).', 'Step 18: Set your makeup with a setting spray. This will help to keep your makeup in place all day and night.']...', type='step_by_step'
2025-06-11 21:52:14,842 - app.chat_controller - INFO - Returning QueryResponse: response='['Step 1: Begin with a clean, moisturized face. Gently massage your preferred moisturizer into your skin using upward, circular motions.', 'Step 2: Apply a primer to create a smooth base. Focus on areas where you tend to get oily or have enlarged pores. The primer should feel like a silky layer on your skin.', 'Step 3: Apply foundation using a damp makeup sponge. Start in the center of your face and blend outwards, paying attention to your hairline and jawline. The foundation should feel even and natural.', 'Step 4: Conceal any blemishes or dark circles. Use a small concealer brush or your fingertip to dab concealer onto the areas you want to cover. Gently blend the edges until the concealer disappears into your foundation.', 'Step 5: Set your foundation with a light dusting of translucent powder. Use a large, fluffy brush to apply the powder all over your face. This will help to keep your makeup in place and prevent shine.', 'Step 6: Define your eyebrows using a brow pencil or powder. Follow your natural brow shape, filling in any sparse areas. Use a spoolie brush to blend the product and soften the lines.', 'Step 7: Apply a neutral eyeshadow all over your eyelid, from lash line to brow bone. This will create a base for your other eyeshadows.', 'Step 8: Apply a medium-toned eyeshadow to your crease. Use a blending brush to blend the eyeshadow back and forth until it looks seamless.', 'Step 9: Apply a dark brown or black eyeshadow to your outer corner. Use a small, angled brush to create a defined V-shape. Blend the eyeshadow into your crease.', 'Step 10: Apply eyeliner to your upper lash line. Start at the inner corner of your eye and draw a thin line that gradually thickens as you move towards the outer corner. Create a slight flick at the end for a classic Italian winged liner.', 'Step 11: Curl your eyelashes with an eyelash curler. Hold the curler in place for 10-15 seconds.', 'Step 12: Apply two coats of mascara to your upper and lower lashes. Wiggle the wand at the base of your lashes to create volume.', 'Step 13: Apply bronzer to the hollows of your cheeks, temples, and jawline. Use a large, angled brush to blend the bronzer into your skin. This will add warmth and dimension to your face.', 'Step 14: Apply blush to the apples of your cheeks. Smile to find the apples of your cheeks, and then blend the blush upwards towards your temples. Use a shade that complements your skin tone.', 'Step 15: Line your lips with a lip liner that matches your chosen lipstick. This will help to prevent your lipstick from bleeding and will also make your lips appear fuller.', 'Step 16: Apply your favorite red lipstick. Use a lip brush for precise application, or apply directly from the tube. Blot your lips with a tissue and then apply another coat of lipstick.', 'Step 17: Add a touch of lip gloss to the center of your lips for a plumped effect (optional).', 'Step 18: Set your makeup with a setting spray. This will help to keep your makeup in place all day and night.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-11 21:55:15,165 - app.chat_controller - INFO - handle_chat received query: I'm blind, I want to know step by step make up in Italy style  for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 21:55:15,166 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm blind, I want to know step by step make up in Italy style ", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 21:55:26,027 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '53c233b5-1a97-4da5-938e-d1bd96ae9991', 'id': 'c56b4925-1574-4d59-9246-bbaf97f16ffd', 'message_id': 'c56b4925-1574-4d59-9246-bbaf97f16ffd', 'conversation_id': 'd26490ae-d1a3-4936-a30e-1dc718edcb17', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Begin with a hydrating moisturizer. Feel the texture as you apply it evenly across your face, ensuring it\'s fully absorbed before moving on.",\n    "Step 2: Apply a lightweight foundation using a damp sponge. Start at the center of your face and blend outwards, paying attention to the edges of your face and jawline to ensure even coverage. The foundation should feel smooth and even across your skin.",\n    "Step 3: Conceal any imperfections. Dab concealer under your eyes, focusing on the inner corners, and blend gently with your fingertip until it feels seamless. Also, apply concealer to any blemishes and blend.",\n    "Step 4: Apply cream blush to the apples of your cheeks. Smile to locate the fullest part of your cheek, then gently blend the blush in an upward and outward motion using your fingertips. The blush should feel naturally flushed.",\n    "Step 5: Define your eyebrows. Use a brow pencil or powder that matches your hair color. Follow your natural brow shape, filling in any sparse areas with light, feathery strokes. Use a spoolie brush to soften the lines and blend the product through your brows.",\n    "Step 6: Curl your eyelashes using an eyelash curler. Position the curler as close to the base of your lashes as possible, and gently squeeze for about 10 seconds. Be careful not to pinch your eyelid.",\n    "Step 7: Apply mascara to your upper lashes. Hold the wand horizontally and wiggle it back and forth at the base of your lashes before sweeping upwards to coat each lash evenly. Apply a second coat if desired, being careful to avoid clumping.",\n    "Step 8: Gently exfoliate your lips with a lip scrub. Use a circular motion with your finger, then wipe clean with a damp cloth.",\n    "Step 9: Hydrate your lips with a moisturizing lip balm. Feel the balm as you spread it evenly across your lips.",\n    "Step 10: Apply a classic red lipstick. Use a lip brush for precise application, starting at the center of your upper lip and working outwards towards the corners. Repeat on the lower lip, then blot with a tissue. For a longer-lasting finish, apply a second coat.",\n    "Step 11: Dust a light amount of translucent powder to set the makeup. Focus on areas that tend to get oily, such as your forehead, nose, and chin. Use a large, fluffy brush and apply the powder in a gentle, rolling motion."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 9100, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 46, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9146, 'total_price': '0', 'currency': 'USD', 'latency': 4.997943752999163}}, 'created_at': 1749653715}
2025-06-11 21:55:26,028 - app.chat_controller - INFO - Successfully parsed Dify answer: response='["Step 1: Begin with a hydrating moisturizer. Feel the texture as you apply it evenly across your face, ensuring it's fully absorbed before moving on.", 'Step 2: Apply a lightweight foundation using a damp sponge. Start at the center of your face and blend outwards, paying attention to the edges of your face and jawline to ensure even coverage. The foundation should feel smooth and even across your skin.', 'Step 3: Conceal any imperfections. Dab concealer under your eyes, focusing on the inner corners, and blend gently with your fingertip until it feels seamless. Also, apply concealer to any blemishes and blend.', 'Step 4: Apply cream blush to the apples of your cheeks. Smile to locate the fullest part of your cheek, then gently blend the blush in an upward and outward motion using your fingertips. The blush should feel naturally flushed.', 'Step 5: Define your eyebrows. Use a brow pencil or powder that matches your hair color. Follow your natural brow shape, filling in any sparse areas with light, feathery strokes. Use a spoolie brush to soften the lines and blend the product through your brows.', 'Step 6: Curl your eyelashes using an eyelash curler. Position the curler as close to the base of your lashes as possible, and gently squeeze for about 10 seconds. Be careful not to pinch your eyelid.', 'Step 7: Apply mascara to your upper lashes. Hold the wand horizontally and wiggle it back and forth at the base of your lashes before sweeping upwards to coat each lash evenly. Apply a second coat if desired, being careful to avoid clumping.', 'Step 8: Gently exfoliate your lips with a lip scrub. Use a circular motion with your finger, then wipe clean with a damp cloth.', 'Step 9: Hydrate your lips with a moisturizing lip balm. Feel the balm as you spread it evenly across your lips.', 'Step 10: Apply a classic red lipstick. Use a lip brush for precise application, starting at the center of your upper lip and working outwards towards the corners. Repeat on the lower lip, then blot with a tissue. For a longer-lasting finish, apply a second coat.', 'Step 11: Dust a light amount of translucent powder to set the makeup. Focus on areas that tend to get oily, such as your forehead, nose, and chin. Use a large, fluffy brush and apply the powder in a gentle, rolling motion.']...', type='step_by_step'
2025-06-11 21:55:26,028 - app.chat_controller - INFO - Returning QueryResponse: response='["Step 1: Begin with a hydrating moisturizer. Feel the texture as you apply it evenly across your face, ensuring it's fully absorbed before moving on.", 'Step 2: Apply a lightweight foundation using a damp sponge. Start at the center of your face and blend outwards, paying attention to the edges of your face and jawline to ensure even coverage. The foundation should feel smooth and even across your skin.', 'Step 3: Conceal any imperfections. Dab concealer under your eyes, focusing on the inner corners, and blend gently with your fingertip until it feels seamless. Also, apply concealer to any blemishes and blend.', 'Step 4: Apply cream blush to the apples of your cheeks. Smile to locate the fullest part of your cheek, then gently blend the blush in an upward and outward motion using your fingertips. The blush should feel naturally flushed.', 'Step 5: Define your eyebrows. Use a brow pencil or powder that matches your hair color. Follow your natural brow shape, filling in any sparse areas with light, feathery strokes. Use a spoolie brush to soften the lines and blend the product through your brows.', 'Step 6: Curl your eyelashes using an eyelash curler. Position the curler as close to the base of your lashes as possible, and gently squeeze for about 10 seconds. Be careful not to pinch your eyelid.', 'Step 7: Apply mascara to your upper lashes. Hold the wand horizontally and wiggle it back and forth at the base of your lashes before sweeping upwards to coat each lash evenly. Apply a second coat if desired, being careful to avoid clumping.', 'Step 8: Gently exfoliate your lips with a lip scrub. Use a circular motion with your finger, then wipe clean with a damp cloth.', 'Step 9: Hydrate your lips with a moisturizing lip balm. Feel the balm as you spread it evenly across your lips.', 'Step 10: Apply a classic red lipstick. Use a lip brush for precise application, starting at the center of your upper lip and working outwards towards the corners. Repeat on the lower lip, then blot with a tissue. For a longer-lasting finish, apply a second coat.', 'Step 11: Dust a light amount of translucent powder to set the makeup. Focus on areas that tend to get oily, such as your forehead, nose, and chin. Use a large, fluffy brush and apply the powder in a gentle, rolling motion.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-11 21:55:42,944 - app.chat_controller - INFO - handle_chat received query: I'm blind, I want to know step by step make up in Italy style  for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 21:55:42,945 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm blind, I want to know step by step make up in Italy style ", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 21:55:53,677 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '3e947c65-3dec-4bd5-b0cf-cfe56a748839', 'id': '20992377-3ada-4016-a138-544879a63fa8', 'message_id': '20992377-3ada-4016-a138-544879a63fa8', 'conversation_id': '99764bc9-6497-4cc5-8796-e295e277ac56', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Prepare your skin by cleansing and moisturizing. Feel your face to ensure it\'s smooth and hydrated. A good base is essential.",\n    "Step 2: Apply foundation. Use a damp sponge or your fingertips to dot the foundation evenly across your forehead, cheeks, nose, and chin. Blend it outwards towards your hairline and jawline. Ensure there are no harsh lines by feeling the edges of your face.",\n    "Step 3: Conceal any blemishes or dark circles. Use your fingertip to gently tap concealer onto areas needing extra coverage, like under your eyes or around your nose. Blend well until it feels seamless with your foundation.",\n    "Step 4: Apply bronzer to the hollows of your cheeks. To find the hollows, make a fish face. Use a fluffy brush to sweep bronzer along these lines, blending upwards towards your temples. Also, apply a bit on your temples and along your jawline to add warmth and definition. Feel the area to make sure the bronzer is evenly distributed.",\n    "Step 5: Add a touch of blush to the apples of your cheeks. Smile to locate the apples of your cheeks, then use a blush brush to apply a small amount of blush. Blend it outwards towards your temples. Feel the area; it should be smooth and diffused.",\n    "Step 6: Define your eyebrows. Use an eyebrow pencil or powder to fill in any sparse areas, following the natural shape of your brow. Use short, light strokes. Brush through your brows with a spoolie to soften the lines.",\n    "Step 7: Apply eyeshadow. Use your fingertip or an eyeshadow brush to apply a neutral eyeshadow all over your eyelid, up to the brow bone. Then, use a darker shade on the outer corner of your eyelid, blending it inwards towards the crease. This adds depth. Make sure to feel for any harsh edges.",\n    "Step 8: Apply eyeliner along your upper lash line. You can use a pencil or gel liner. Start at the inner corner of your eye and draw a thin line outwards, getting slightly thicker as you reach the outer corner. If using a gel liner, rest your elbow on a table for stability. The line should feel smooth and even. It is common in Italian style to smudge it.",\n    "Step 9: Curl your eyelashes with an eyelash curler. Place the curler at the base of your lashes and gently squeeze for a few seconds. Then, apply several coats of mascara to your upper lashes. Wiggle the wand back and forth at the base of your lashes to build volume. Be careful not to poke yourself in the eye.",\n    "Step 10: Line your lips with a lip liner that matches your chosen lipstick. Start at the center of your upper lip and trace the Cupid\'s bow, then continue lining the rest of your lips. Fill in your lips with lipstick, using a lip brush or directly from the tube. Blot with a tissue and apply another coat for longer wear."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 9104, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 47, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9151, 'total_price': '0', 'currency': 'USD', 'latency': 4.470801836000646}}, 'created_at': 1749653743}
2025-06-11 21:55:53,678 - app.chat_controller - INFO - Successfully parsed Dify answer: response='["Step 1: Prepare your skin by cleansing and moisturizing. Feel your face to ensure it's smooth and hydrated. A good base is essential.", 'Step 2: Apply foundation. Use a damp sponge or your fingertips to dot the foundation evenly across your forehead, cheeks, nose, and chin. Blend it outwards towards your hairline and jawline. Ensure there are no harsh lines by feeling the edges of your face.', 'Step 3: Conceal any blemishes or dark circles. Use your fingertip to gently tap concealer onto areas needing extra coverage, like under your eyes or around your nose. Blend well until it feels seamless with your foundation.', 'Step 4: Apply bronzer to the hollows of your cheeks. To find the hollows, make a fish face. Use a fluffy brush to sweep bronzer along these lines, blending upwards towards your temples. Also, apply a bit on your temples and along your jawline to add warmth and definition. Feel the area to make sure the bronzer is evenly distributed.', 'Step 5: Add a touch of blush to the apples of your cheeks. Smile to locate the apples of your cheeks, then use a blush brush to apply a small amount of blush. Blend it outwards towards your temples. Feel the area; it should be smooth and diffused.', 'Step 6: Define your eyebrows. Use an eyebrow pencil or powder to fill in any sparse areas, following the natural shape of your brow. Use short, light strokes. Brush through your brows with a spoolie to soften the lines.', 'Step 7: Apply eyeshadow. Use your fingertip or an eyeshadow brush to apply a neutral eyeshadow all over your eyelid, up to the brow bone. Then, use a darker shade on the outer corner of your eyelid, blending it inwards towards the crease. This adds depth. Make sure to feel for any harsh edges.', 'Step 8: Apply eyeliner along your upper lash line. You can use a pencil or gel liner. Start at the inner corner of your eye and draw a thin line outwards, getting slightly thicker as you reach the outer corner. If using a gel liner, rest your elbow on a table for stability. The line should feel smooth and even. It is common in Italian style to smudge it.', 'Step 9: Curl your eyelashes with an eyelash curler. Place the curler at the base of your lashes and gently squeeze for a few seconds. Then, apply several coats of mascara to your upper lashes. Wiggle the wand back and forth at the base of your lashes to build volume. Be careful not to poke yourself in the eye.', "Step 10: Line your lips with a lip liner that matches your chosen lipstick. Start at the center of your upper lip and trace the Cupid's bow, then continue lining the rest of your lips. Fill in your lips with lipstick, using a lip brush or directly from the tube. Blot with a tissue and apply another coat for longer wear."]...', type='step_by_step'
2025-06-11 21:55:53,678 - app.chat_controller - INFO - Returning QueryResponse: response='["Step 1: Prepare your skin by cleansing and moisturizing. Feel your face to ensure it's smooth and hydrated. A good base is essential.", 'Step 2: Apply foundation. Use a damp sponge or your fingertips to dot the foundation evenly across your forehead, cheeks, nose, and chin. Blend it outwards towards your hairline and jawline. Ensure there are no harsh lines by feeling the edges of your face.', 'Step 3: Conceal any blemishes or dark circles. Use your fingertip to gently tap concealer onto areas needing extra coverage, like under your eyes or around your nose. Blend well until it feels seamless with your foundation.', 'Step 4: Apply bronzer to the hollows of your cheeks. To find the hollows, make a fish face. Use a fluffy brush to sweep bronzer along these lines, blending upwards towards your temples. Also, apply a bit on your temples and along your jawline to add warmth and definition. Feel the area to make sure the bronzer is evenly distributed.', 'Step 5: Add a touch of blush to the apples of your cheeks. Smile to locate the apples of your cheeks, then use a blush brush to apply a small amount of blush. Blend it outwards towards your temples. Feel the area; it should be smooth and diffused.', 'Step 6: Define your eyebrows. Use an eyebrow pencil or powder to fill in any sparse areas, following the natural shape of your brow. Use short, light strokes. Brush through your brows with a spoolie to soften the lines.', 'Step 7: Apply eyeshadow. Use your fingertip or an eyeshadow brush to apply a neutral eyeshadow all over your eyelid, up to the brow bone. Then, use a darker shade on the outer corner of your eyelid, blending it inwards towards the crease. This adds depth. Make sure to feel for any harsh edges.', 'Step 8: Apply eyeliner along your upper lash line. You can use a pencil or gel liner. Start at the inner corner of your eye and draw a thin line outwards, getting slightly thicker as you reach the outer corner. If using a gel liner, rest your elbow on a table for stability. The line should feel smooth and even. It is common in Italian style to smudge it.', 'Step 9: Curl your eyelashes with an eyelash curler. Place the curler at the base of your lashes and gently squeeze for a few seconds. Then, apply several coats of mascara to your upper lashes. Wiggle the wand back and forth at the base of your lashes to build volume. Be careful not to poke yourself in the eye.', "Step 10: Line your lips with a lip liner that matches your chosen lipstick. Start at the center of your upper lip and trace the Cupid's bow, then continue lining the rest of your lips. Fill in your lips with lipstick, using a lip brush or directly from the tube. Blot with a tissue and apply another coat for longer wear."]...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-11 22:00:07,728 - app.chat_controller - INFO - handle_chat received query: What are some popular makeup techniques? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 22:00:07,729 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What are some popular makeup techniques?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 22:00:13,551 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '49b3a0ca-636e-48af-948e-598c59343a41', 'id': '7b848773-d88e-4ecd-9422-5be97c2db0ed', 'message_id': '7b848773-d88e-4ecd-9422-5be97c2db0ed', 'conversation_id': 'd162c4fd-a216-4e0b-96ea-4509b337ae13', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! I\'m Momo, your makeup assistant. To give you the best advice, feel free to share some details about yourself! For example, telling me about your vision (blind, low vision, or sighted), favorite colors, skin type and concerns, preferred brands or product attributes (like vegan or cruelty-free), and your usual makeup style will help me tailor my recommendations just for you!",\n  "type": "normal"\n}\n```', 'metadata': {'usage': {'prompt_tokens': 8655, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 122, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 8777, 'total_price': '0', 'currency': 'USD', 'latency': 5.477992878000805}}, 'created_at': 1749654008}
2025-06-11 22:00:13,551 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! I'm Momo, your makeup assistant. To give you the best advice, feel free to share some deta...', type='normal'
2025-06-11 22:00:13,552 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! I'm Momo, your makeup assistant. To give you the best advice, feel free to share some deta...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-11 22:03:39,541 - app.chat_controller - INFO - handle_chat received query: I'm blind, can you guide me step by step how to make up in Italy? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 22:03:39,542 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm blind, can you guide me step by step how to make up in Italy?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 22:03:51,678 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'cfff677e-bb73-4542-b565-23e8cb4d29df', 'id': 'ccd79148-7a62-4c3d-b3c7-96136a2bff49', 'message_id': 'ccd79148-7a62-4c3d-b3c7-96136a2bff49', 'conversation_id': '8592ae63-aed4-42c4-b140-d12430baeafe', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Begin by gathering all your makeup products and tools. Familiarize yourself with each item by feeling its shape, texture, and weight. This will help you identify them easily during the application process.",\n    "Step 2: Start with a clean and moisturized face. Gently feel your face to ensure it\'s smooth and hydrated. If needed, apply a moisturizer and allow it to absorb fully.",\n    "Step 3: If you are using a liquid foundation, dispense a small amount onto the back of your non-dominant hand. Dip a makeup sponge or foundation brush into the product. If using a stick foundation, gently swipe the stick directly onto your forehead, cheeks, nose, and chin.",\n    "Step 4: Using the sponge or brush, begin blending the foundation from the center of your face outwards. Use small, circular motions to ensure even coverage. Pay attention to your hairline and jawline to avoid harsh lines. Feel your face to check for any areas that may need more blending.",\n    "Step 5: If you\'re using concealer, apply a small amount to areas where you want more coverage, such as under your eyes or on blemishes. Use your fingertip or a small brush to gently tap the concealer into your skin until it\'s well blended.",\n    "Step 6: To apply blush, smile to locate the apples of your cheeks. Use a blush brush to pick up a small amount of powder blush. Tap off any excess. Then, lightly sweep the brush across the apples of your cheeks, blending upwards towards your temples. Feel for the intensity of the blush and add more if desired.",\n    "Step 7: For eyeshadow, use your fingertip or an eyeshadow brush to apply the product to your eyelid. Start with a small amount and build up the intensity as desired. Feel along the crease of your eye to define it with a deeper shade, if using multiple eyeshadows.",\n    "Step 8: If you are using eyeliner, gently close one eye. Use your non-dominant hand to lightly pull the eyelid taut. Carefully apply the eyeliner along your lash line, starting from the inner corner of your eye and moving outwards. Use small, steady strokes. Repeat on the other eye.",\n    "Step 9: To apply mascara, hold the mascara wand close to the base of your upper lashes. Wiggle the wand back and forth, then pull it upwards towards the tips of your lashes. Repeat this process two or three times to coat all of your lashes. Be careful not to poke yourself in the eye. Repeat on your lower lashes, if desired.",\n    "Step 10: For lipstick, start by exfoliating your lips with a damp cloth or toothbrush. Then, apply a lip balm to moisturize. Use your fingertip to apply lipstick to the center of your lips, then rub your lips together to distribute the product evenly. For a more precise application, use a lip brush.",\n    "Step 11: After applying all your makeup, feel your face to ensure that everything is well blended and that there are no harsh lines. Use a setting spray to help your makeup last longer and keep it from smudging. Hold the bottle about 8-10 inches away from your face and spray evenly.",\n    "Step 12: To remove makeup, use a gentle makeup remover or cleansing oil. Apply the remover to your face and gently massage it in circular motions. Then, rinse your face with water and pat it dry. Follow up with your regular skincare routine."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 9863, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 38, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9901, 'total_price': '0', 'currency': 'USD', 'latency': 4.800863626999671}}, 'created_at': 1749654220}
2025-06-11 22:03:51,678 - app.chat_controller - INFO - Successfully parsed Dify answer: response='['Step 1: Begin by gathering all your makeup products and tools. Familiarize yourself with each item by feeling its shape, texture, and weight. This will help you identify them easily during the application process.', "Step 2: Start with a clean and moisturized face. Gently feel your face to ensure it's smooth and hydrated. If needed, apply a moisturizer and allow it to absorb fully.", 'Step 3: If you are using a liquid foundation, dispense a small amount onto the back of your non-dominant hand. Dip a makeup sponge or foundation brush into the product. If using a stick foundation, gently swipe the stick directly onto your forehead, cheeks, nose, and chin.', 'Step 4: Using the sponge or brush, begin blending the foundation from the center of your face outwards. Use small, circular motions to ensure even coverage. Pay attention to your hairline and jawline to avoid harsh lines. Feel your face to check for any areas that may need more blending.', "Step 5: If you're using concealer, apply a small amount to areas where you want more coverage, such as under your eyes or on blemishes. Use your fingertip or a small brush to gently tap the concealer into your skin until it's well blended.", 'Step 6: To apply blush, smile to locate the apples of your cheeks. Use a blush brush to pick up a small amount of powder blush. Tap off any excess. Then, lightly sweep the brush across the apples of your cheeks, blending upwards towards your temples. Feel for the intensity of the blush and add more if desired.', 'Step 7: For eyeshadow, use your fingertip or an eyeshadow brush to apply the product to your eyelid. Start with a small amount and build up the intensity as desired. Feel along the crease of your eye to define it with a deeper shade, if using multiple eyeshadows.', 'Step 8: If you are using eyeliner, gently close one eye. Use your non-dominant hand to lightly pull the eyelid taut. Carefully apply the eyeliner along your lash line, starting from the inner corner of your eye and moving outwards. Use small, steady strokes. Repeat on the other eye.', 'Step 9: To apply mascara, hold the mascara wand close to the base of your upper lashes. Wiggle the wand back and forth, then pull it upwards towards the tips of your lashes. Repeat this process two or three times to coat all of your lashes. Be careful not to poke yourself in the eye. Repeat on your lower lashes, if desired.', 'Step 10: For lipstick, start by exfoliating your lips with a damp cloth or toothbrush. Then, apply a lip balm to moisturize. Use your fingertip to apply lipstick to the center of your lips, then rub your lips together to distribute the product evenly. For a more precise application, use a lip brush.', 'Step 11: After applying all your makeup, feel your face to ensure that everything is well blended and that there are no harsh lines. Use a setting spray to help your makeup last longer and keep it from smudging. Hold the bottle about 8-10 inches away from your face and spray evenly.', 'Step 12: To remove makeup, use a gentle makeup remover or cleansing oil. Apply the remover to your face and gently massage it in circular motions. Then, rinse your face with water and pat it dry. Follow up with your regular skincare routine.']...', type='step_by_step'
2025-06-11 22:03:51,678 - app.chat_controller - INFO - Returning QueryResponse: response='['Step 1: Begin by gathering all your makeup products and tools. Familiarize yourself with each item by feeling its shape, texture, and weight. This will help you identify them easily during the application process.', "Step 2: Start with a clean and moisturized face. Gently feel your face to ensure it's smooth and hydrated. If needed, apply a moisturizer and allow it to absorb fully.", 'Step 3: If you are using a liquid foundation, dispense a small amount onto the back of your non-dominant hand. Dip a makeup sponge or foundation brush into the product. If using a stick foundation, gently swipe the stick directly onto your forehead, cheeks, nose, and chin.', 'Step 4: Using the sponge or brush, begin blending the foundation from the center of your face outwards. Use small, circular motions to ensure even coverage. Pay attention to your hairline and jawline to avoid harsh lines. Feel your face to check for any areas that may need more blending.', "Step 5: If you're using concealer, apply a small amount to areas where you want more coverage, such as under your eyes or on blemishes. Use your fingertip or a small brush to gently tap the concealer into your skin until it's well blended.", 'Step 6: To apply blush, smile to locate the apples of your cheeks. Use a blush brush to pick up a small amount of powder blush. Tap off any excess. Then, lightly sweep the brush across the apples of your cheeks, blending upwards towards your temples. Feel for the intensity of the blush and add more if desired.', 'Step 7: For eyeshadow, use your fingertip or an eyeshadow brush to apply the product to your eyelid. Start with a small amount and build up the intensity as desired. Feel along the crease of your eye to define it with a deeper shade, if using multiple eyeshadows.', 'Step 8: If you are using eyeliner, gently close one eye. Use your non-dominant hand to lightly pull the eyelid taut. Carefully apply the eyeliner along your lash line, starting from the inner corner of your eye and moving outwards. Use small, steady strokes. Repeat on the other eye.', 'Step 9: To apply mascara, hold the mascara wand close to the base of your upper lashes. Wiggle the wand back and forth, then pull it upwards towards the tips of your lashes. Repeat this process two or three times to coat all of your lashes. Be careful not to poke yourself in the eye. Repeat on your lower lashes, if desired.', 'Step 10: For lipstick, start by exfoliating your lips with a damp cloth or toothbrush. Then, apply a lip balm to moisturize. Use your fingertip to apply lipstick to the center of your lips, then rub your lips together to distribute the product evenly. For a more precise application, use a lip brush.', 'Step 11: After applying all your makeup, feel your face to ensure that everything is well blended and that there are no harsh lines. Use a setting spray to help your makeup last longer and keep it from smudging. Hold the bottle about 8-10 inches away from your face and spray evenly.', 'Step 12: To remove makeup, use a gentle makeup remover or cleansing oil. Apply the remover to your face and gently massage it in circular motions. Then, rinse your face with water and pat it dry. Follow up with your regular skincare routine.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-11 22:04:19,057 - app.chat_controller - INFO - handle_chat received query: I'm blind, can you guide me step by step how to make up in Italy? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 22:04:19,058 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm blind, can you guide me step by step how to make up in Italy?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 22:04:28,112 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '2ff5edc9-04c8-4471-910f-20d50aa5e2c8', 'id': '56058f9e-c85c-40c4-8f5b-0d5512914e75', 'message_id': '56058f9e-c85c-40c4-8f5b-0d5512914e75', 'conversation_id': 'ec215cf0-9c93-42a1-91d7-79b11f63371b', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Prepare your skin by cleansing and moisturizing. Feel your face to ensure it\'s clean and that the moisturizer is fully absorbed.",\n    "Step 2: Apply primer. Place a small amount of primer on your fingertips and gently spread it evenly across your face, focusing on areas where you tend to get oily or have large pores. The primer will create a smooth base for your foundation.",\n    "Step 3: Apply foundation. Place a small amount of liquid foundation on the back of your non-dominant hand. Dip a makeup sponge or brush into the foundation. Gently dab the sponge or brush onto your forehead, cheeks, nose, and chin. Use the sponge or brush to blend the foundation outwards, ensuring even coverage. Feel for any streaks or unevenness.",\n    "Step 4: Apply concealer. If you have any blemishes or dark circles, apply a small amount of concealer to those areas. Use your fingertip or a small brush to gently tap the concealer into the skin until it\'s blended. The goal is to make it even with the foundation.",\n    "Step 5: Set your foundation and concealer with powder. Dip a large, fluffy brush into loose or pressed powder. Tap off any excess powder. Gently press the brush onto your face, focusing on areas where you applied concealer or tend to get oily. This will help set your makeup and prevent it from creasing.",\n    "Step 6: Apply blush. Smile to locate the apples of your cheeks. Use a blush brush to apply blush to the apples of your cheeks, blending outwards towards your temples. Start with a small amount and build up the intensity as needed.",\n    "Step 7: Define your eyebrows. Use an eyebrow pencil or powder to fill in any sparse areas in your eyebrows. Follow the natural shape of your eyebrows. Use short, light strokes to mimic the appearance of natural hairs.",\n    "Step 8: Apply eyeshadow. Use your fingertip or an eyeshadow brush to apply eyeshadow to your eyelids. Start with a light shade all over the lid, then add a darker shade to the crease for definition. Blend the colors together for a seamless finish.",\n    "Step 9: Apply mascara. Hold the mascara wand at the base of your upper lashes and wiggle it back and forth. Then, pull the wand upwards, coating your lashes with mascara. Repeat for the lower lashes, if desired. Be careful not to poke yourself in the eye.",\n    "Step 10: Apply lipstick or lip gloss. Start by exfoliating your lips with a lip scrub or a toothbrush to remove any dead skin. Then, apply a lip balm to moisturize your lips. Use your fingertip or a lip brush to apply lipstick or lip gloss to your lips. Start at the center of your lips and blend outwards."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 8157, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 42, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 8199, 'total_price': '0', 'currency': 'USD', 'latency': 3.461930210000901}}, 'created_at': 1749654259}
2025-06-11 22:04:28,112 - app.chat_controller - INFO - Successfully parsed Dify answer: response='["Step 1: Prepare your skin by cleansing and moisturizing. Feel your face to ensure it's clean and that the moisturizer is fully absorbed.", 'Step 2: Apply primer. Place a small amount of primer on your fingertips and gently spread it evenly across your face, focusing on areas where you tend to get oily or have large pores. The primer will create a smooth base for your foundation.', 'Step 3: Apply foundation. Place a small amount of liquid foundation on the back of your non-dominant hand. Dip a makeup sponge or brush into the foundation. Gently dab the sponge or brush onto your forehead, cheeks, nose, and chin. Use the sponge or brush to blend the foundation outwards, ensuring even coverage. Feel for any streaks or unevenness.', "Step 4: Apply concealer. If you have any blemishes or dark circles, apply a small amount of concealer to those areas. Use your fingertip or a small brush to gently tap the concealer into the skin until it's blended. The goal is to make it even with the foundation.", 'Step 5: Set your foundation and concealer with powder. Dip a large, fluffy brush into loose or pressed powder. Tap off any excess powder. Gently press the brush onto your face, focusing on areas where you applied concealer or tend to get oily. This will help set your makeup and prevent it from creasing.', 'Step 6: Apply blush. Smile to locate the apples of your cheeks. Use a blush brush to apply blush to the apples of your cheeks, blending outwards towards your temples. Start with a small amount and build up the intensity as needed.', 'Step 7: Define your eyebrows. Use an eyebrow pencil or powder to fill in any sparse areas in your eyebrows. Follow the natural shape of your eyebrows. Use short, light strokes to mimic the appearance of natural hairs.', 'Step 8: Apply eyeshadow. Use your fingertip or an eyeshadow brush to apply eyeshadow to your eyelids. Start with a light shade all over the lid, then add a darker shade to the crease for definition. Blend the colors together for a seamless finish.', 'Step 9: Apply mascara. Hold the mascara wand at the base of your upper lashes and wiggle it back and forth. Then, pull the wand upwards, coating your lashes with mascara. Repeat for the lower lashes, if desired. Be careful not to poke yourself in the eye.', 'Step 10: Apply lipstick or lip gloss. Start by exfoliating your lips with a lip scrub or a toothbrush to remove any dead skin. Then, apply a lip balm to moisturize your lips. Use your fingertip or a lip brush to apply lipstick or lip gloss to your lips. Start at the center of your lips and blend outwards.']...', type='step_by_step'
2025-06-11 22:04:28,112 - app.chat_controller - INFO - Returning QueryResponse: response='["Step 1: Prepare your skin by cleansing and moisturizing. Feel your face to ensure it's clean and that the moisturizer is fully absorbed.", 'Step 2: Apply primer. Place a small amount of primer on your fingertips and gently spread it evenly across your face, focusing on areas where you tend to get oily or have large pores. The primer will create a smooth base for your foundation.', 'Step 3: Apply foundation. Place a small amount of liquid foundation on the back of your non-dominant hand. Dip a makeup sponge or brush into the foundation. Gently dab the sponge or brush onto your forehead, cheeks, nose, and chin. Use the sponge or brush to blend the foundation outwards, ensuring even coverage. Feel for any streaks or unevenness.', "Step 4: Apply concealer. If you have any blemishes or dark circles, apply a small amount of concealer to those areas. Use your fingertip or a small brush to gently tap the concealer into the skin until it's blended. The goal is to make it even with the foundation.", 'Step 5: Set your foundation and concealer with powder. Dip a large, fluffy brush into loose or pressed powder. Tap off any excess powder. Gently press the brush onto your face, focusing on areas where you applied concealer or tend to get oily. This will help set your makeup and prevent it from creasing.', 'Step 6: Apply blush. Smile to locate the apples of your cheeks. Use a blush brush to apply blush to the apples of your cheeks, blending outwards towards your temples. Start with a small amount and build up the intensity as needed.', 'Step 7: Define your eyebrows. Use an eyebrow pencil or powder to fill in any sparse areas in your eyebrows. Follow the natural shape of your eyebrows. Use short, light strokes to mimic the appearance of natural hairs.', 'Step 8: Apply eyeshadow. Use your fingertip or an eyeshadow brush to apply eyeshadow to your eyelids. Start with a light shade all over the lid, then add a darker shade to the crease for definition. Blend the colors together for a seamless finish.', 'Step 9: Apply mascara. Hold the mascara wand at the base of your upper lashes and wiggle it back and forth. Then, pull the wand upwards, coating your lashes with mascara. Repeat for the lower lashes, if desired. Be careful not to poke yourself in the eye.', 'Step 10: Apply lipstick or lip gloss. Start by exfoliating your lips with a lip scrub or a toothbrush to remove any dead skin. Then, apply a lip balm to moisturize your lips. Use your fingertip or a lip brush to apply lipstick or lip gloss to your lips. Start at the center of your lips and blend outwards.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-11 22:07:03,850 - app.chat_controller - INFO - handle_chat received query: I'm blind, can you guide me step by step how to make up in Italy? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 22:07:03,851 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm blind, can you guide me step by step how to make up in Italy?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 22:07:14,359 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '558395ea-94af-410e-8403-c6956f5a27cd', 'id': 'd0cc44c6-4320-435e-abd5-5a16436943ea', 'message_id': 'd0cc44c6-4320-435e-abd5-5a16436943ea', 'conversation_id': 'f7831948-96f3-4127-a0fa-e4515cc3f9cc', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Prepare your face. Start with clean, moisturized skin. Feel your face to ensure it\'s smooth and free of any debris.",\n    "Step 2: Apply foundation. Dot the foundation evenly across your forehead, cheeks, nose, and chin. Use a damp sponge or your fingertips to blend the foundation outward, ensuring an even layer. Pay attention to your hairline and jawline for seamless blending. The goal is an even-feeling surface.",\n    "Step 3: Conceal any blemishes or dark circles. Gently dab concealer onto the areas you want to cover. Use your fingertip or a small brush to lightly pat and blend the edges of the concealer into the surrounding foundation. The surface should be smooth to the touch.",\n    "Step 4: Set your foundation and concealer with powder. Dip a large, fluffy brush into translucent powder. Tap off the excess, then lightly dust the powder all over your face. Focus on areas that tend to get oily, such as your forehead, nose, and chin. Your skin should feel dry, but not cakey.",\n    "Step 5: Define your eyebrows. Use an eyebrow pencil or powder that matches your hair color. Use short, light strokes to fill in any sparse areas, following the natural shape of your eyebrows. Use a spoolie brush to blend the product and soften the lines. The brow should feel fuller.",\n    "Step 6: Apply eyeshadow. Using your fingertip, apply a neutral eyeshadow all over your eyelid, from your lash line to your brow bone. Then, use a smaller brush to apply a darker shade to the crease of your eyelid, blending it back and forth to create depth. The eyelid should feel colored.",\n    "Step 7: Apply eyeliner. Gently pull your upper eyelid taut and apply eyeliner as close to your lash line as possible. Start from the inner corner of your eye and work your way outwards, thickening the line as you go. The eyeliner should feel like a thin, smooth line.",\n    "Step 8: Curl your eyelashes. Position the eyelash curler as close to the base of your upper eyelashes as possible, being careful not to pinch your eyelid. Gently squeeze the curler for a few seconds, then release. Lashes should feel lifted.",\n    "Step 9: Apply mascara. Place the mascara wand at the base of your upper eyelashes and wiggle it back and forth as you sweep it upwards to the tips. Apply one or two coats, allowing each coat to dry slightly before applying the next. The lashes should feel thicker.",\n    "Step 10: Apply blush. Smile to locate the apples of your cheeks. Use a blush brush to apply blush to the apples of your cheeks, blending it outwards towards your temples. Feel for even color distribution.",\n    "Step 11: Line your lips. Use a lip liner that matches your lipstick color to outline your lips, starting at the center of your upper lip and working your way outwards. Then, fill in your entire lips with the lip liner. Lip should feel defined.",\n    "Step 12: Apply lipstick. Apply lipstick directly from the tube or with a lip brush, starting at the center of your lips and working your way outwards. Blot your lips with a tissue to remove any excess lipstick. Lips should feel coated with product.",\n    "Step 13: Set your makeup with a finishing spray. Hold the finishing spray about eight inches away from your face and mist it evenly over your entire face. This will help to set your makeup and make it last longer. Your face should feel refreshed."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 9857, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 37, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9894, 'total_price': '0', 'currency': 'USD', 'latency': 3.3514542520006216}}, 'created_at': 1749654424}
2025-06-11 22:07:14,360 - app.chat_controller - INFO - Successfully parsed Dify answer: response='["Step 1: Prepare your face. Start with clean, moisturized skin. Feel your face to ensure it's smooth and free of any debris.", 'Step 2: Apply foundation. Dot the foundation evenly across your forehead, cheeks, nose, and chin. Use a damp sponge or your fingertips to blend the foundation outward, ensuring an even layer. Pay attention to your hairline and jawline for seamless blending. The goal is an even-feeling surface.', 'Step 3: Conceal any blemishes or dark circles. Gently dab concealer onto the areas you want to cover. Use your fingertip or a small brush to lightly pat and blend the edges of the concealer into the surrounding foundation. The surface should be smooth to the touch.', 'Step 4: Set your foundation and concealer with powder. Dip a large, fluffy brush into translucent powder. Tap off the excess, then lightly dust the powder all over your face. Focus on areas that tend to get oily, such as your forehead, nose, and chin. Your skin should feel dry, but not cakey.', 'Step 5: Define your eyebrows. Use an eyebrow pencil or powder that matches your hair color. Use short, light strokes to fill in any sparse areas, following the natural shape of your eyebrows. Use a spoolie brush to blend the product and soften the lines. The brow should feel fuller.', 'Step 6: Apply eyeshadow. Using your fingertip, apply a neutral eyeshadow all over your eyelid, from your lash line to your brow bone. Then, use a smaller brush to apply a darker shade to the crease of your eyelid, blending it back and forth to create depth. The eyelid should feel colored.', 'Step 7: Apply eyeliner. Gently pull your upper eyelid taut and apply eyeliner as close to your lash line as possible. Start from the inner corner of your eye and work your way outwards, thickening the line as you go. The eyeliner should feel like a thin, smooth line.', 'Step 8: Curl your eyelashes. Position the eyelash curler as close to the base of your upper eyelashes as possible, being careful not to pinch your eyelid. Gently squeeze the curler for a few seconds, then release. Lashes should feel lifted.', 'Step 9: Apply mascara. Place the mascara wand at the base of your upper eyelashes and wiggle it back and forth as you sweep it upwards to the tips. Apply one or two coats, allowing each coat to dry slightly before applying the next. The lashes should feel thicker.', 'Step 10: Apply blush. Smile to locate the apples of your cheeks. Use a blush brush to apply blush to the apples of your cheeks, blending it outwards towards your temples. Feel for even color distribution.', 'Step 11: Line your lips. Use a lip liner that matches your lipstick color to outline your lips, starting at the center of your upper lip and working your way outwards. Then, fill in your entire lips with the lip liner. Lip should feel defined.', 'Step 12: Apply lipstick. Apply lipstick directly from the tube or with a lip brush, starting at the center of your lips and working your way outwards. Blot your lips with a tissue to remove any excess lipstick. Lips should feel coated with product.', 'Step 13: Set your makeup with a finishing spray. Hold the finishing spray about eight inches away from your face and mist it evenly over your entire face. This will help to set your makeup and make it last longer. Your face should feel refreshed.']...', type='step_by_step'
2025-06-11 22:07:14,360 - app.chat_controller - INFO - Returning QueryResponse: response='["Step 1: Prepare your face. Start with clean, moisturized skin. Feel your face to ensure it's smooth and free of any debris.", 'Step 2: Apply foundation. Dot the foundation evenly across your forehead, cheeks, nose, and chin. Use a damp sponge or your fingertips to blend the foundation outward, ensuring an even layer. Pay attention to your hairline and jawline for seamless blending. The goal is an even-feeling surface.', 'Step 3: Conceal any blemishes or dark circles. Gently dab concealer onto the areas you want to cover. Use your fingertip or a small brush to lightly pat and blend the edges of the concealer into the surrounding foundation. The surface should be smooth to the touch.', 'Step 4: Set your foundation and concealer with powder. Dip a large, fluffy brush into translucent powder. Tap off the excess, then lightly dust the powder all over your face. Focus on areas that tend to get oily, such as your forehead, nose, and chin. Your skin should feel dry, but not cakey.', 'Step 5: Define your eyebrows. Use an eyebrow pencil or powder that matches your hair color. Use short, light strokes to fill in any sparse areas, following the natural shape of your eyebrows. Use a spoolie brush to blend the product and soften the lines. The brow should feel fuller.', 'Step 6: Apply eyeshadow. Using your fingertip, apply a neutral eyeshadow all over your eyelid, from your lash line to your brow bone. Then, use a smaller brush to apply a darker shade to the crease of your eyelid, blending it back and forth to create depth. The eyelid should feel colored.', 'Step 7: Apply eyeliner. Gently pull your upper eyelid taut and apply eyeliner as close to your lash line as possible. Start from the inner corner of your eye and work your way outwards, thickening the line as you go. The eyeliner should feel like a thin, smooth line.', 'Step 8: Curl your eyelashes. Position the eyelash curler as close to the base of your upper eyelashes as possible, being careful not to pinch your eyelid. Gently squeeze the curler for a few seconds, then release. Lashes should feel lifted.', 'Step 9: Apply mascara. Place the mascara wand at the base of your upper eyelashes and wiggle it back and forth as you sweep it upwards to the tips. Apply one or two coats, allowing each coat to dry slightly before applying the next. The lashes should feel thicker.', 'Step 10: Apply blush. Smile to locate the apples of your cheeks. Use a blush brush to apply blush to the apples of your cheeks, blending it outwards towards your temples. Feel for even color distribution.', 'Step 11: Line your lips. Use a lip liner that matches your lipstick color to outline your lips, starting at the center of your upper lip and working your way outwards. Then, fill in your entire lips with the lip liner. Lip should feel defined.', 'Step 12: Apply lipstick. Apply lipstick directly from the tube or with a lip brush, starting at the center of your lips and working your way outwards. Blot your lips with a tissue to remove any excess lipstick. Lips should feel coated with product.', 'Step 13: Set your makeup with a finishing spray. Hold the finishing spray about eight inches away from your face and mist it evenly over your entire face. This will help to set your makeup and make it last longer. Your face should feel refreshed.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-11 22:13:12,848 - app.chat_controller - INFO - handle_chat received query: I'm blind, can you guide me step by step how to make up in Italy? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 22:13:12,849 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm blind, can you guide me step by step how to make up in Italy?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 22:13:21,758 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'e46554ea-13ca-4e49-945a-fc3e7e49cfcf', 'id': 'd046fbba-2968-42f3-ad24-1882c1de52c9', 'message_id': 'd046fbba-2968-42f3-ad24-1882c1de52c9', 'conversation_id': '0aa82e40-44cd-4b1a-aba0-5843e67721cf', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Prepare your skin. Start with clean, moisturized skin. Use your fingertips to apply moisturizer evenly across your face, ensuring it\'s fully absorbed.",\n    "Step 2: Apply primer. Squeeze a pea-sized amount of primer onto your fingertips. Gently smooth it over your face, focusing on areas where you have larger pores or fine lines. This creates a smooth base for your makeup.",\n    "Step 3: Apply foundation. Place a small amount of liquid foundation on the back of your hand. Dip a makeup sponge or foundation brush into the foundation, and then gently dab it onto your face, starting at the center and blending outwards. Ensure even coverage.",\n    "Step 4: Apply concealer. Use a concealer brush or your fingertip to apply concealer under your eyes in an upside-down triangle shape. Gently tap to blend it into your skin. Also, apply concealer to any blemishes or areas of discoloration and blend.",\n    "Step 5: Set with powder. Dip a large, fluffy brush into translucent powder. Tap off any excess. Gently press the brush onto your face, focusing on areas that tend to get oily, such as your forehead, nose, and chin. This will set your foundation and concealer.",\n    "Step 6: Apply blush. Smile to find the apples of your cheeks. Use a blush brush to apply blush to the apples of your cheeks, blending upwards towards your temples.",\n    "Step 7: Apply eyeshadow. Using your fingertip or an eyeshadow brush, gently apply a light eyeshadow color all over your eyelid, from your lash line to your brow bone. Next, use a slightly darker shade in the crease of your eye, blending well to create depth.",\n    "Step 8: Apply eyeliner. Gently pull your upper eyelid taut. Use a steady hand to apply eyeliner as close to your upper lash line as possible. You can use a pencil liner for a softer look or a liquid liner for a more defined line. If you are using pencil liner, smudge the line slightly with a cotton swab or your fingertip.",\n    "Step 9: Apply mascara. Place the mascara wand at the base of your upper lashes and wiggle it back and forth before pulling it upwards to coat your lashes. Repeat for the lower lashes. Be careful not to poke yourself in the eye.",\n    "Step 10: Apply lipstick or lip gloss. Start by applying lip liner to define the edges of your lips. Then, apply lipstick or lip gloss using a lip brush or directly from the tube."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 9430, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 42, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9472, 'total_price': '0', 'currency': 'USD', 'latency': 3.5720003349988474}}, 'created_at': 1749654793}
2025-06-11 22:13:21,759 - app.chat_controller - INFO - Successfully parsed Dify answer: response='["Step 1: Prepare your skin. Start with clean, moisturized skin. Use your fingertips to apply moisturizer evenly across your face, ensuring it's fully absorbed.", 'Step 2: Apply primer. Squeeze a pea-sized amount of primer onto your fingertips. Gently smooth it over your face, focusing on areas where you have larger pores or fine lines. This creates a smooth base for your makeup.', 'Step 3: Apply foundation. Place a small amount of liquid foundation on the back of your hand. Dip a makeup sponge or foundation brush into the foundation, and then gently dab it onto your face, starting at the center and blending outwards. Ensure even coverage.', 'Step 4: Apply concealer. Use a concealer brush or your fingertip to apply concealer under your eyes in an upside-down triangle shape. Gently tap to blend it into your skin. Also, apply concealer to any blemishes or areas of discoloration and blend.', 'Step 5: Set with powder. Dip a large, fluffy brush into translucent powder. Tap off any excess. Gently press the brush onto your face, focusing on areas that tend to get oily, such as your forehead, nose, and chin. This will set your foundation and concealer.', 'Step 6: Apply blush. Smile to find the apples of your cheeks. Use a blush brush to apply blush to the apples of your cheeks, blending upwards towards your temples.', 'Step 7: Apply eyeshadow. Using your fingertip or an eyeshadow brush, gently apply a light eyeshadow color all over your eyelid, from your lash line to your brow bone. Next, use a slightly darker shade in the crease of your eye, blending well to create depth.', 'Step 8: Apply eyeliner. Gently pull your upper eyelid taut. Use a steady hand to apply eyeliner as close to your upper lash line as possible. You can use a pencil liner for a softer look or a liquid liner for a more defined line. If you are using pencil liner, smudge the line slightly with a cotton swab or your fingertip.', 'Step 9: Apply mascara. Place the mascara wand at the base of your upper lashes and wiggle it back and forth before pulling it upwards to coat your lashes. Repeat for the lower lashes. Be careful not to poke yourself in the eye.', 'Step 10: Apply lipstick or lip gloss. Start by applying lip liner to define the edges of your lips. Then, apply lipstick or lip gloss using a lip brush or directly from the tube.']...', type='step_by_step'
2025-06-11 22:13:21,759 - app.chat_controller - INFO - Returning QueryResponse: response='["Step 1: Prepare your skin. Start with clean, moisturized skin. Use your fingertips to apply moisturizer evenly across your face, ensuring it's fully absorbed.", 'Step 2: Apply primer. Squeeze a pea-sized amount of primer onto your fingertips. Gently smooth it over your face, focusing on areas where you have larger pores or fine lines. This creates a smooth base for your makeup.', 'Step 3: Apply foundation. Place a small amount of liquid foundation on the back of your hand. Dip a makeup sponge or foundation brush into the foundation, and then gently dab it onto your face, starting at the center and blending outwards. Ensure even coverage.', 'Step 4: Apply concealer. Use a concealer brush or your fingertip to apply concealer under your eyes in an upside-down triangle shape. Gently tap to blend it into your skin. Also, apply concealer to any blemishes or areas of discoloration and blend.', 'Step 5: Set with powder. Dip a large, fluffy brush into translucent powder. Tap off any excess. Gently press the brush onto your face, focusing on areas that tend to get oily, such as your forehead, nose, and chin. This will set your foundation and concealer.', 'Step 6: Apply blush. Smile to find the apples of your cheeks. Use a blush brush to apply blush to the apples of your cheeks, blending upwards towards your temples.', 'Step 7: Apply eyeshadow. Using your fingertip or an eyeshadow brush, gently apply a light eyeshadow color all over your eyelid, from your lash line to your brow bone. Next, use a slightly darker shade in the crease of your eye, blending well to create depth.', 'Step 8: Apply eyeliner. Gently pull your upper eyelid taut. Use a steady hand to apply eyeliner as close to your upper lash line as possible. You can use a pencil liner for a softer look or a liquid liner for a more defined line. If you are using pencil liner, smudge the line slightly with a cotton swab or your fingertip.', 'Step 9: Apply mascara. Place the mascara wand at the base of your upper lashes and wiggle it back and forth before pulling it upwards to coat your lashes. Repeat for the lower lashes. Be careful not to poke yourself in the eye.', 'Step 10: Apply lipstick or lip gloss. Start by applying lip liner to define the edges of your lips. Then, apply lipstick or lip gloss using a lip brush or directly from the tube.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-11 22:14:02,335 - app.chat_controller - INFO - handle_chat received query: I'm blind, can you guide me step by step how to make up in Italy? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 22:14:02,336 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm blind, can you guide me step by step how to make up in Italy?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 22:14:12,038 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'd2ea2d13-4216-46e3-97ff-38777b021942', 'id': '198dc2b3-ebd3-4951-a28a-7c4a887d6d92', 'message_id': '198dc2b3-ebd3-4951-a28a-7c4a887d6d92', 'conversation_id': 'fc81b659-d534-41ee-9a8e-21f70d7aad55', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Begin with a clean, moisturized face. Feel your skin to ensure it\'s smooth and hydrated. This will create a good base for your makeup.",\n    "Step 2: Apply primer. Place a small amount of primer on your fingertips and gently spread it evenly over your face, focusing on areas where you tend to get oily or have large pores. Your skin should feel slightly tacky to the touch.",\n    "Step 3: Apply foundation. If using liquid foundation, place a small pump on the back of your hand. Use a makeup sponge or brush to dab the foundation onto your face, starting in the center and blending outwards. Ensure even coverage by feeling for any missed spots.",\n    "Step 4: Conceal any blemishes or dark circles. Use your fingertip or a small concealer brush to gently dab concealer onto areas that need extra coverage. Blend the edges so there are no harsh lines. The concealer should feel smooth and even with the foundation.",\n    "Step 5: Set your foundation and concealer with powder. Dip a large, fluffy brush into the powder and tap off any excess. Gently press the brush onto your face, focusing on areas that tend to get oily. Your skin should feel smooth and matte, not sticky.",\n    "Step 6: Apply blush to the apples of your cheeks. Smile to locate the apples of your cheeks. Use a blush brush to apply blush in a circular motion, blending outwards towards your temples. The blush should feel light and diffused, not heavy or concentrated.",\n    "Step 7: Shape your eyebrows. Use an eyebrow pencil or powder that matches your hair color. Follow your natural brow shape, filling in any sparse areas with light, feathery strokes. Brush through your brows with a spoolie to blend the color.",\n    "Step 8: Apply eyeshadow. Use your fingertip or an eyeshadow brush to apply a light eyeshadow color all over your eyelid. Then, use a darker color in the crease of your eye to add depth. Blend the colors together so there are no harsh lines. The eyeshadow should feel smooth and even on your eyelids.",\n    "Step 9: Apply eyeliner. Use a steady hand to draw a thin line along your upper lash line, as close to your lashes as possible. You can use a pencil, liquid, or gel eyeliner, depending on your preference. The eyeliner should feel like a smooth, continuous line.",\n    "Step 10: Apply mascara. Place the mascara wand at the base of your upper lashes and wiggle it back and forth before pulling it upwards. Repeat this process for your lower lashes. Be careful not to poke yourself in the eye. Your lashes should feel coated and slightly thicker.",\n    "Step 11: Line your lips with lip liner. Choose a lip liner that matches your lipstick or natural lip color. Outline your lips, following your natural lip shape. This will help to prevent your lipstick from bleeding and make your lips appear fuller. The lip liner should feel smooth and defined along your lip line.",\n    "Step 12: Apply lipstick. Use a lip brush or apply the lipstick directly from the tube. Start in the center of your lips and work your way outwards. Blot your lips with a tissue to remove any excess lipstick. Your lips should feel smooth and evenly covered with lipstick.",\n    "Step 13: Check your work. Use your fingertips to feel your face and ensure that all of your makeup is blended evenly and there are no harsh lines or missed spots."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 10174, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 42, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 10216, 'total_price': '0', 'currency': 'USD', 'latency': 3.204582042999391}}, 'created_at': 1749654842}
2025-06-11 22:14:12,039 - app.chat_controller - INFO - Successfully parsed Dify answer: response='["Step 1: Begin with a clean, moisturized face. Feel your skin to ensure it's smooth and hydrated. This will create a good base for your makeup.", 'Step 2: Apply primer. Place a small amount of primer on your fingertips and gently spread it evenly over your face, focusing on areas where you tend to get oily or have large pores. Your skin should feel slightly tacky to the touch.', 'Step 3: Apply foundation. If using liquid foundation, place a small pump on the back of your hand. Use a makeup sponge or brush to dab the foundation onto your face, starting in the center and blending outwards. Ensure even coverage by feeling for any missed spots.', 'Step 4: Conceal any blemishes or dark circles. Use your fingertip or a small concealer brush to gently dab concealer onto areas that need extra coverage. Blend the edges so there are no harsh lines. The concealer should feel smooth and even with the foundation.', 'Step 5: Set your foundation and concealer with powder. Dip a large, fluffy brush into the powder and tap off any excess. Gently press the brush onto your face, focusing on areas that tend to get oily. Your skin should feel smooth and matte, not sticky.', 'Step 6: Apply blush to the apples of your cheeks. Smile to locate the apples of your cheeks. Use a blush brush to apply blush in a circular motion, blending outwards towards your temples. The blush should feel light and diffused, not heavy or concentrated.', 'Step 7: Shape your eyebrows. Use an eyebrow pencil or powder that matches your hair color. Follow your natural brow shape, filling in any sparse areas with light, feathery strokes. Brush through your brows with a spoolie to blend the color.', 'Step 8: Apply eyeshadow. Use your fingertip or an eyeshadow brush to apply a light eyeshadow color all over your eyelid. Then, use a darker color in the crease of your eye to add depth. Blend the colors together so there are no harsh lines. The eyeshadow should feel smooth and even on your eyelids.', 'Step 9: Apply eyeliner. Use a steady hand to draw a thin line along your upper lash line, as close to your lashes as possible. You can use a pencil, liquid, or gel eyeliner, depending on your preference. The eyeliner should feel like a smooth, continuous line.', 'Step 10: Apply mascara. Place the mascara wand at the base of your upper lashes and wiggle it back and forth before pulling it upwards. Repeat this process for your lower lashes. Be careful not to poke yourself in the eye. Your lashes should feel coated and slightly thicker.', 'Step 11: Line your lips with lip liner. Choose a lip liner that matches your lipstick or natural lip color. Outline your lips, following your natural lip shape. This will help to prevent your lipstick from bleeding and make your lips appear fuller. The lip liner should feel smooth and defined along your lip line.', 'Step 12: Apply lipstick. Use a lip brush or apply the lipstick directly from the tube. Start in the center of your lips and work your way outwards. Blot your lips with a tissue to remove any excess lipstick. Your lips should feel smooth and evenly covered with lipstick.', 'Step 13: Check your work. Use your fingertips to feel your face and ensure that all of your makeup is blended evenly and there are no harsh lines or missed spots.']...', type='step_by_step'
2025-06-11 22:14:12,039 - app.chat_controller - INFO - Returning QueryResponse: response='["Step 1: Begin with a clean, moisturized face. Feel your skin to ensure it's smooth and hydrated. This will create a good base for your makeup.", 'Step 2: Apply primer. Place a small amount of primer on your fingertips and gently spread it evenly over your face, focusing on areas where you tend to get oily or have large pores. Your skin should feel slightly tacky to the touch.', 'Step 3: Apply foundation. If using liquid foundation, place a small pump on the back of your hand. Use a makeup sponge or brush to dab the foundation onto your face, starting in the center and blending outwards. Ensure even coverage by feeling for any missed spots.', 'Step 4: Conceal any blemishes or dark circles. Use your fingertip or a small concealer brush to gently dab concealer onto areas that need extra coverage. Blend the edges so there are no harsh lines. The concealer should feel smooth and even with the foundation.', 'Step 5: Set your foundation and concealer with powder. Dip a large, fluffy brush into the powder and tap off any excess. Gently press the brush onto your face, focusing on areas that tend to get oily. Your skin should feel smooth and matte, not sticky.', 'Step 6: Apply blush to the apples of your cheeks. Smile to locate the apples of your cheeks. Use a blush brush to apply blush in a circular motion, blending outwards towards your temples. The blush should feel light and diffused, not heavy or concentrated.', 'Step 7: Shape your eyebrows. Use an eyebrow pencil or powder that matches your hair color. Follow your natural brow shape, filling in any sparse areas with light, feathery strokes. Brush through your brows with a spoolie to blend the color.', 'Step 8: Apply eyeshadow. Use your fingertip or an eyeshadow brush to apply a light eyeshadow color all over your eyelid. Then, use a darker color in the crease of your eye to add depth. Blend the colors together so there are no harsh lines. The eyeshadow should feel smooth and even on your eyelids.', 'Step 9: Apply eyeliner. Use a steady hand to draw a thin line along your upper lash line, as close to your lashes as possible. You can use a pencil, liquid, or gel eyeliner, depending on your preference. The eyeliner should feel like a smooth, continuous line.', 'Step 10: Apply mascara. Place the mascara wand at the base of your upper lashes and wiggle it back and forth before pulling it upwards. Repeat this process for your lower lashes. Be careful not to poke yourself in the eye. Your lashes should feel coated and slightly thicker.', 'Step 11: Line your lips with lip liner. Choose a lip liner that matches your lipstick or natural lip color. Outline your lips, following your natural lip shape. This will help to prevent your lipstick from bleeding and make your lips appear fuller. The lip liner should feel smooth and defined along your lip line.', 'Step 12: Apply lipstick. Use a lip brush or apply the lipstick directly from the tube. Start in the center of your lips and work your way outwards. Blot your lips with a tissue to remove any excess lipstick. Your lips should feel smooth and evenly covered with lipstick.', 'Step 13: Check your work. Use your fingertips to feel your face and ensure that all of your makeup is blended evenly and there are no harsh lines or missed spots.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-11 22:24:40,934 - app.chat_controller - INFO - handle_chat received query: I'm blind, can you guide me step by step how to make up in Italy? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 22:24:40,936 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm blind, can you guide me step by step how to make up in Italy?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 22:24:53,032 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '6c9c0bbc-f05a-4f39-b78b-a363138313c4', 'id': '17235309-e79b-43df-b11c-b40c6429ddcb', 'message_id': '17235309-e79b-43df-b11c-b40c6429ddcb', 'conversation_id': '8481ce70-eb4f-4f29-8561-dbdd36dc1e67', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Begin by washing your hands thoroughly. This ensures a clean application.",\n    "Step 2: Familiarize yourself with your makeup products. Before starting, take a moment to feel the shape and texture of each product to distinguish them easily.",\n    "Step 3: Apply primer. Place a small amount of primer, about the size of a pea, on the back of your hand. Use your fingertip to gently dab the primer onto your forehead, cheeks, nose, and chin. Then, evenly spread the primer across your entire face using upward and outward strokes. The primer should create a smooth, slightly tacky base.",\n    "Step 4: Apply foundation. Place a small amount of liquid foundation on the back of your non-dominant hand. Dip a damp makeup sponge or foundation brush into the foundation. Start by dabbing the sponge or brush onto the center of your face (forehead, nose, cheeks, and chin). Then, gently blend the foundation outward towards your hairline and jawline, ensuring even coverage. Feel your face to check for any missed spots or streaks.",\n    "Step 5: Apply concealer (if needed). If you\'re using concealer, dab a small amount onto areas where you want extra coverage, such as under your eyes or on blemishes. Use your fingertip or a small brush to gently pat the concealer into your skin until it blends seamlessly with your foundation.",\n    "Step 6: Set your foundation with powder. Dip a large, fluffy brush into translucent setting powder. Tap off any excess powder. Gently press the brush onto your face, focusing on areas that tend to get oily, such as your forehead, nose, and chin. This will help set your foundation and prevent it from creasing.",\n    "Step 7: Apply blush. Smile to locate the apples of your cheeks. Use a blush brush to pick up some blush. Tap off any excess. Starting at the apples of your cheeks, gently sweep the brush upwards and outwards towards your temples. Blend well to avoid harsh lines.",\n    "Step 8: Apply eyeshadow (optional). If you are using eyeshadow, use your fingertip or a small brush to apply the eyeshadow to your eyelid, blending up to the crease. Use different fingers for different colors to avoid mixing shades.",\n    "Step 9: Apply lipstick or lip gloss. Start by finding the center of your upper lip. Use your fingertip to apply the lipstick or lip gloss, following the natural shape of your lips. Blot your lips with a tissue to remove any excess product.",\n    "Step 10: Final check. Gently feel your face to check for any unevenness or missed spots. Make any necessary adjustments. You\'re all done!"\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 9426, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 41, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9467, 'total_price': '0', 'currency': 'USD', 'latency': 5.6762466710006265}}, 'created_at': 1749655481}
2025-06-11 22:24:53,033 - app.chat_controller - INFO - Successfully parsed Dify answer: response='['Step 1: Begin by washing your hands thoroughly. This ensures a clean application.', 'Step 2: Familiarize yourself with your makeup products. Before starting, take a moment to feel the shape and texture of each product to distinguish them easily.', 'Step 3: Apply primer. Place a small amount of primer, about the size of a pea, on the back of your hand. Use your fingertip to gently dab the primer onto your forehead, cheeks, nose, and chin. Then, evenly spread the primer across your entire face using upward and outward strokes. The primer should create a smooth, slightly tacky base.', 'Step 4: Apply foundation. Place a small amount of liquid foundation on the back of your non-dominant hand. Dip a damp makeup sponge or foundation brush into the foundation. Start by dabbing the sponge or brush onto the center of your face (forehead, nose, cheeks, and chin). Then, gently blend the foundation outward towards your hairline and jawline, ensuring even coverage. Feel your face to check for any missed spots or streaks.', "Step 5: Apply concealer (if needed). If you're using concealer, dab a small amount onto areas where you want extra coverage, such as under your eyes or on blemishes. Use your fingertip or a small brush to gently pat the concealer into your skin until it blends seamlessly with your foundation.", 'Step 6: Set your foundation with powder. Dip a large, fluffy brush into translucent setting powder. Tap off any excess powder. Gently press the brush onto your face, focusing on areas that tend to get oily, such as your forehead, nose, and chin. This will help set your foundation and prevent it from creasing.', 'Step 7: Apply blush. Smile to locate the apples of your cheeks. Use a blush brush to pick up some blush. Tap off any excess. Starting at the apples of your cheeks, gently sweep the brush upwards and outwards towards your temples. Blend well to avoid harsh lines.', 'Step 8: Apply eyeshadow (optional). If you are using eyeshadow, use your fingertip or a small brush to apply the eyeshadow to your eyelid, blending up to the crease. Use different fingers for different colors to avoid mixing shades.', 'Step 9: Apply lipstick or lip gloss. Start by finding the center of your upper lip. Use your fingertip to apply the lipstick or lip gloss, following the natural shape of your lips. Blot your lips with a tissue to remove any excess product.', "Step 10: Final check. Gently feel your face to check for any unevenness or missed spots. Make any necessary adjustments. You're all done!"]...', type='step_by_step'
2025-06-11 22:24:53,034 - app.chat_controller - INFO - Returning QueryResponse: response='['Step 1: Begin by washing your hands thoroughly. This ensures a clean application.', 'Step 2: Familiarize yourself with your makeup products. Before starting, take a moment to feel the shape and texture of each product to distinguish them easily.', 'Step 3: Apply primer. Place a small amount of primer, about the size of a pea, on the back of your hand. Use your fingertip to gently dab the primer onto your forehead, cheeks, nose, and chin. Then, evenly spread the primer across your entire face using upward and outward strokes. The primer should create a smooth, slightly tacky base.', 'Step 4: Apply foundation. Place a small amount of liquid foundation on the back of your non-dominant hand. Dip a damp makeup sponge or foundation brush into the foundation. Start by dabbing the sponge or brush onto the center of your face (forehead, nose, cheeks, and chin). Then, gently blend the foundation outward towards your hairline and jawline, ensuring even coverage. Feel your face to check for any missed spots or streaks.', "Step 5: Apply concealer (if needed). If you're using concealer, dab a small amount onto areas where you want extra coverage, such as under your eyes or on blemishes. Use your fingertip or a small brush to gently pat the concealer into your skin until it blends seamlessly with your foundation.", 'Step 6: Set your foundation with powder. Dip a large, fluffy brush into translucent setting powder. Tap off any excess powder. Gently press the brush onto your face, focusing on areas that tend to get oily, such as your forehead, nose, and chin. This will help set your foundation and prevent it from creasing.', 'Step 7: Apply blush. Smile to locate the apples of your cheeks. Use a blush brush to pick up some blush. Tap off any excess. Starting at the apples of your cheeks, gently sweep the brush upwards and outwards towards your temples. Blend well to avoid harsh lines.', 'Step 8: Apply eyeshadow (optional). If you are using eyeshadow, use your fingertip or a small brush to apply the eyeshadow to your eyelid, blending up to the crease. Use different fingers for different colors to avoid mixing shades.', 'Step 9: Apply lipstick or lip gloss. Start by finding the center of your upper lip. Use your fingertip to apply the lipstick or lip gloss, following the natural shape of your lips. Blot your lips with a tissue to remove any excess product.', "Step 10: Final check. Gently feel your face to check for any unevenness or missed spots. Make any necessary adjustments. You're all done!"]...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-11 22:27:57,939 - app.chat_controller - INFO - handle_chat received query:  I'm blind, can you guide me step by step how to make up in Italy? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 22:27:57,940 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': " I'm blind, can you guide me step by step how to make up in Italy?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 22:28:11,285 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'a68e15a0-ef80-48fe-a9f8-c344968defa2', 'id': '54628830-6e6b-407d-aeba-374e633b9a68', 'message_id': '54628830-6e6b-407d-aeba-374e633b9a68', 'conversation_id': '67a7d31d-57a6-4b6f-ab71-7edf20e310c8', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Prep your skin. Start by cleansing your face with a gentle cleanser and pat it dry with a soft towel. Then, apply a hydrating moisturizer, ensuring it\'s fully absorbed before proceeding.",\n    "Step 2: Apply foundation. Use a makeup sponge or your fingertips to dot the foundation evenly across your forehead, cheeks, nose, and chin. Gently blend the foundation outwards, ensuring you reach your hairline and jawline for a seamless finish. Feel for any areas that need more coverage and add a thin layer as needed.",\n    "Step 3: Conceal any blemishes or dark circles. Use a concealer brush or your fingertips to apply concealer to any areas of discoloration. Gently tap the concealer into the skin until it blends seamlessly with the foundation.",\n    "Step 4: Apply blush to the apples of your cheeks. Smile to locate the apples of your cheeks, and use a blush brush to sweep the blush upwards towards your temples. Start with a small amount of blush and build up the intensity as needed.",\n    "Step 5: Define your eyebrows. Use an eyebrow pencil or powder that matches your hair color to fill in any sparse areas in your eyebrows. Follow the natural shape of your eyebrows and avoid creating harsh lines. Use a spoolie brush to blend the product and soften the lines.",\n    "Step 6: Apply eyeshadow. Use your fingertip to apply a neutral eyeshadow shade all over your eyelid, from your lash line to your crease. Then, use a smaller brush to apply a slightly darker shade to your crease. Blend the two shades together for a seamless transition.",\n    "Step 7: Apply eyeliner. Use a gel or liquid eyeliner to create a thin line along your upper lash line. Start from the inner corner of your eye and work your way outwards, keeping the line as close to your lashes as possible. If you\'re using a pencil eyeliner, gently smudge the line for a softer look.",\n    "Step 8: Apply mascara. Place the mascara wand at the base of your upper lashes and wiggle it back and forth to coat your lashes from root to tip. Apply one or two coats of mascara, making sure to separate your lashes with a lash comb if needed.",\n    "Step 9: Line your lips. Use a lip liner that matches your lipstick to outline your lips, starting at the center of your upper lip and working your way outwards. Then, fill in your lips with the lip liner to create a base for your lipstick.",\n    "Step 10: Apply lipstick. Use a lip brush or apply the lipstick directly from the tube. Start at the center of your lips and work your way outwards, following the natural shape of your lips. Blot your lips with a tissue to remove any excess lipstick.",\n    "Step 11: Set your makeup with powder. Use a large powder brush to apply a translucent powder all over your face. This will help to set your makeup and prevent it from creasing or smudging. Focus on areas that tend to get oily, such as your forehead, nose, and chin."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 10258, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 55, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 10313, 'total_price': '0', 'currency': 'USD', 'latency': 6.9301750450003965}}, 'created_at': 1749655678}
2025-06-11 22:28:11,286 - app.chat_controller - INFO - Successfully parsed Dify answer: response='["Step 1: Prep your skin. Start by cleansing your face with a gentle cleanser and pat it dry with a soft towel. Then, apply a hydrating moisturizer, ensuring it's fully absorbed before proceeding.", 'Step 2: Apply foundation. Use a makeup sponge or your fingertips to dot the foundation evenly across your forehead, cheeks, nose, and chin. Gently blend the foundation outwards, ensuring you reach your hairline and jawline for a seamless finish. Feel for any areas that need more coverage and add a thin layer as needed.', 'Step 3: Conceal any blemishes or dark circles. Use a concealer brush or your fingertips to apply concealer to any areas of discoloration. Gently tap the concealer into the skin until it blends seamlessly with the foundation.', 'Step 4: Apply blush to the apples of your cheeks. Smile to locate the apples of your cheeks, and use a blush brush to sweep the blush upwards towards your temples. Start with a small amount of blush and build up the intensity as needed.', 'Step 5: Define your eyebrows. Use an eyebrow pencil or powder that matches your hair color to fill in any sparse areas in your eyebrows. Follow the natural shape of your eyebrows and avoid creating harsh lines. Use a spoolie brush to blend the product and soften the lines.', 'Step 6: Apply eyeshadow. Use your fingertip to apply a neutral eyeshadow shade all over your eyelid, from your lash line to your crease. Then, use a smaller brush to apply a slightly darker shade to your crease. Blend the two shades together for a seamless transition.', "Step 7: Apply eyeliner. Use a gel or liquid eyeliner to create a thin line along your upper lash line. Start from the inner corner of your eye and work your way outwards, keeping the line as close to your lashes as possible. If you're using a pencil eyeliner, gently smudge the line for a softer look.", 'Step 8: Apply mascara. Place the mascara wand at the base of your upper lashes and wiggle it back and forth to coat your lashes from root to tip. Apply one or two coats of mascara, making sure to separate your lashes with a lash comb if needed.', 'Step 9: Line your lips. Use a lip liner that matches your lipstick to outline your lips, starting at the center of your upper lip and working your way outwards. Then, fill in your lips with the lip liner to create a base for your lipstick.', 'Step 10: Apply lipstick. Use a lip brush or apply the lipstick directly from the tube. Start at the center of your lips and work your way outwards, following the natural shape of your lips. Blot your lips with a tissue to remove any excess lipstick.', 'Step 11: Set your makeup with powder. Use a large powder brush to apply a translucent powder all over your face. This will help to set your makeup and prevent it from creasing or smudging. Focus on areas that tend to get oily, such as your forehead, nose, and chin.']...', type='step_by_step'
2025-06-11 22:28:11,286 - app.chat_controller - INFO - Returning QueryResponse: response='["Step 1: Prep your skin. Start by cleansing your face with a gentle cleanser and pat it dry with a soft towel. Then, apply a hydrating moisturizer, ensuring it's fully absorbed before proceeding.", 'Step 2: Apply foundation. Use a makeup sponge or your fingertips to dot the foundation evenly across your forehead, cheeks, nose, and chin. Gently blend the foundation outwards, ensuring you reach your hairline and jawline for a seamless finish. Feel for any areas that need more coverage and add a thin layer as needed.', 'Step 3: Conceal any blemishes or dark circles. Use a concealer brush or your fingertips to apply concealer to any areas of discoloration. Gently tap the concealer into the skin until it blends seamlessly with the foundation.', 'Step 4: Apply blush to the apples of your cheeks. Smile to locate the apples of your cheeks, and use a blush brush to sweep the blush upwards towards your temples. Start with a small amount of blush and build up the intensity as needed.', 'Step 5: Define your eyebrows. Use an eyebrow pencil or powder that matches your hair color to fill in any sparse areas in your eyebrows. Follow the natural shape of your eyebrows and avoid creating harsh lines. Use a spoolie brush to blend the product and soften the lines.', 'Step 6: Apply eyeshadow. Use your fingertip to apply a neutral eyeshadow shade all over your eyelid, from your lash line to your crease. Then, use a smaller brush to apply a slightly darker shade to your crease. Blend the two shades together for a seamless transition.', "Step 7: Apply eyeliner. Use a gel or liquid eyeliner to create a thin line along your upper lash line. Start from the inner corner of your eye and work your way outwards, keeping the line as close to your lashes as possible. If you're using a pencil eyeliner, gently smudge the line for a softer look.", 'Step 8: Apply mascara. Place the mascara wand at the base of your upper lashes and wiggle it back and forth to coat your lashes from root to tip. Apply one or two coats of mascara, making sure to separate your lashes with a lash comb if needed.', 'Step 9: Line your lips. Use a lip liner that matches your lipstick to outline your lips, starting at the center of your upper lip and working your way outwards. Then, fill in your lips with the lip liner to create a base for your lipstick.', 'Step 10: Apply lipstick. Use a lip brush or apply the lipstick directly from the tube. Start at the center of your lips and work your way outwards, following the natural shape of your lips. Blot your lips with a tissue to remove any excess lipstick.', 'Step 11: Set your makeup with powder. Use a large powder brush to apply a translucent powder all over your face. This will help to set your makeup and prevent it from creasing or smudging. Focus on areas that tend to get oily, such as your forehead, nose, and chin.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-11 22:38:23,901 - app.chat_controller - INFO - handle_chat received query: I'm blind, can you guide me step by step how to make up in Italy? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 22:38:23,903 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm blind, can you guide me step by step how to make up in Italy?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 22:38:32,122 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'd4751355-a039-4cbf-a57e-2c747bf04a83', 'id': 'e00481a6-e27d-43e9-9af4-f15dae5ae5f6', 'message_id': 'e00481a6-e27d-43e9-9af4-f15dae5ae5f6', 'conversation_id': 'b384a4a2-43e8-47c6-85ba-b3791af8570d', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Prepare your face by cleansing and moisturizing. Gently massage the cleanser onto your face, then rinse with water. Pat your skin dry with a soft towel and apply a moisturizer, ensuring it\'s evenly distributed.",\n    "Step 2: Apply primer. Place a pea-sized amount of primer on your fingertips and gently smooth it over your face, focusing on areas where you have larger pores or fine lines. The primer will create a smooth base for your makeup.",\n    "Step 3: Apply foundation. Dot the foundation evenly across your forehead, cheeks, chin, and nose. Use a makeup sponge or brush to blend the foundation outwards, ensuring even coverage. Pay attention to your hairline and jawline.",\n    "Step 4: Apply concealer. Use your fingertip to dab concealer under your eyes, on any blemishes, or areas with discoloration. Gently blend the concealer into your skin using a patting motion.",\n    "Step 5: Set your foundation and concealer with powder. Dip a large, fluffy brush into the powder and tap off any excess. Gently press the brush onto your face, focusing on areas that tend to get oily, such as your forehead, nose, and chin.",\n    "Step 6: Apply blush. Smile to locate the apples of your cheeks. Use a blush brush to apply blush to the apples of your cheeks, blending upwards and outwards towards your temples.",\n    "Step 7: Apply eyeshadow. Use your fingertip or an eyeshadow brush to apply a light eyeshadow color to your entire eyelid, up to the crease. If desired, apply a darker color to the crease of your eyelid using a smaller brush, blending it gently.",\n    "Step 8: Apply eyeliner (optional). Gently close one eye and use your other hand to carefully draw a thin line along your upper lash line, starting from the inner corner and moving outwards. You can use your fingertip to guide you along the lash line.",\n    "Step 9: Apply mascara. Place the mascara wand at the base of your upper lashes and wiggle it back and forth before pulling it upwards to coat your lashes. Repeat for the lower lashes.",\n    "Step 10: Apply lipstick or lip gloss. Start by lining your lips with a lip liner that matches your lipstick color. Then, apply lipstick or lip gloss to your lips, using your fingertip or a lip brush for precision. Blot your lips with a tissue to remove any excess product."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 9418, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 39, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9457, 'total_price': '0', 'currency': 'USD', 'latency': 2.9295745849995}}, 'created_at': 1749656304}
2025-06-11 22:38:32,122 - app.chat_controller - INFO - Successfully parsed Dify answer: response='["Step 1: Prepare your face by cleansing and moisturizing. Gently massage the cleanser onto your face, then rinse with water. Pat your skin dry with a soft towel and apply a moisturizer, ensuring it's evenly distributed.", 'Step 2: Apply primer. Place a pea-sized amount of primer on your fingertips and gently smooth it over your face, focusing on areas where you have larger pores or fine lines. The primer will create a smooth base for your makeup.', 'Step 3: Apply foundation. Dot the foundation evenly across your forehead, cheeks, chin, and nose. Use a makeup sponge or brush to blend the foundation outwards, ensuring even coverage. Pay attention to your hairline and jawline.', 'Step 4: Apply concealer. Use your fingertip to dab concealer under your eyes, on any blemishes, or areas with discoloration. Gently blend the concealer into your skin using a patting motion.', 'Step 5: Set your foundation and concealer with powder. Dip a large, fluffy brush into the powder and tap off any excess. Gently press the brush onto your face, focusing on areas that tend to get oily, such as your forehead, nose, and chin.', 'Step 6: Apply blush. Smile to locate the apples of your cheeks. Use a blush brush to apply blush to the apples of your cheeks, blending upwards and outwards towards your temples.', 'Step 7: Apply eyeshadow. Use your fingertip or an eyeshadow brush to apply a light eyeshadow color to your entire eyelid, up to the crease. If desired, apply a darker color to the crease of your eyelid using a smaller brush, blending it gently.', 'Step 8: Apply eyeliner (optional). Gently close one eye and use your other hand to carefully draw a thin line along your upper lash line, starting from the inner corner and moving outwards. You can use your fingertip to guide you along the lash line.', 'Step 9: Apply mascara. Place the mascara wand at the base of your upper lashes and wiggle it back and forth before pulling it upwards to coat your lashes. Repeat for the lower lashes.', 'Step 10: Apply lipstick or lip gloss. Start by lining your lips with a lip liner that matches your lipstick color. Then, apply lipstick or lip gloss to your lips, using your fingertip or a lip brush for precision. Blot your lips with a tissue to remove any excess product.']...', type='step_by_step'
2025-06-11 22:38:32,122 - app.chat_controller - INFO - Returning QueryResponse: response='["Step 1: Prepare your face by cleansing and moisturizing. Gently massage the cleanser onto your face, then rinse with water. Pat your skin dry with a soft towel and apply a moisturizer, ensuring it's evenly distributed.", 'Step 2: Apply primer. Place a pea-sized amount of primer on your fingertips and gently smooth it over your face, focusing on areas where you have larger pores or fine lines. The primer will create a smooth base for your makeup.', 'Step 3: Apply foundation. Dot the foundation evenly across your forehead, cheeks, chin, and nose. Use a makeup sponge or brush to blend the foundation outwards, ensuring even coverage. Pay attention to your hairline and jawline.', 'Step 4: Apply concealer. Use your fingertip to dab concealer under your eyes, on any blemishes, or areas with discoloration. Gently blend the concealer into your skin using a patting motion.', 'Step 5: Set your foundation and concealer with powder. Dip a large, fluffy brush into the powder and tap off any excess. Gently press the brush onto your face, focusing on areas that tend to get oily, such as your forehead, nose, and chin.', 'Step 6: Apply blush. Smile to locate the apples of your cheeks. Use a blush brush to apply blush to the apples of your cheeks, blending upwards and outwards towards your temples.', 'Step 7: Apply eyeshadow. Use your fingertip or an eyeshadow brush to apply a light eyeshadow color to your entire eyelid, up to the crease. If desired, apply a darker color to the crease of your eyelid using a smaller brush, blending it gently.', 'Step 8: Apply eyeliner (optional). Gently close one eye and use your other hand to carefully draw a thin line along your upper lash line, starting from the inner corner and moving outwards. You can use your fingertip to guide you along the lash line.', 'Step 9: Apply mascara. Place the mascara wand at the base of your upper lashes and wiggle it back and forth before pulling it upwards to coat your lashes. Repeat for the lower lashes.', 'Step 10: Apply lipstick or lip gloss. Start by lining your lips with a lip liner that matches your lipstick color. Then, apply lipstick or lip gloss to your lips, using your fingertip or a lip brush for precision. Blot your lips with a tissue to remove any excess product.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-11 22:40:17,720 - app.chat_controller - INFO - handle_chat received query:  I'm blind, can you guide me step by step how to make up in Italy? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 22:40:17,721 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': " I'm blind, can you guide me step by step how to make up in Italy?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 22:40:19,347 - app.chat_controller - ERROR - Dify API HTTP error: 400 - {"code": "invalid_param", "message": "Run failed: [google] Error: PluginInvokeError: {\"args\":{},\"error_type\":\"ServerError\",\"message\":\"503 UNAVAILABLE. {'error': {'code': 503, 'message': 'The model is overloaded. Please try again later.', 'status': 'UNAVAILABLE'}}\"}", "status": 400}

2025-06-11 22:40:19,348 - app.chat_controller - INFO - Returning QueryResponse: response='AI service error (400): Run failed: [google] Error: PluginInvokeError: {"args":{},"error_type":"Serv...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-11 22:40:42,170 - app.chat_controller - INFO - handle_chat received query:  I'm blind, can you guide me step by step how to make up in Italy? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 22:40:42,171 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': " I'm blind, can you guide me step by step how to make up in Italy?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 22:40:50,618 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'b5fab40d-c5bd-4c34-8a63-8a4d0c4ad04a', 'id': '3db5f434-2087-4968-b87b-bb220f9c169e', 'message_id': '3db5f434-2087-4968-b87b-bb220f9c169e', 'conversation_id': 'c8ab5ec8-53f9-4100-b7fd-c9d5dd36e1f8', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Preparation. Ensure you have all your makeup products and tools organized and within easy reach. A tray or a dedicated makeup organizer can be helpful.",\n    "Step 2: Moisturize. Apply moisturizer evenly to your face. Use your fingertips to feel for any dry patches, paying special attention to these areas.",\n    "Step 3: Apply Foundation. Dispense a small amount of liquid foundation onto the back of your non-dominant hand. Use a makeup sponge or your fingertips to dab the foundation onto your forehead, cheeks, nose, and chin. Gently blend the foundation outwards, ensuring an even layer.",\n    "Step 4: Apply Concealer. If you use concealer, apply it under your eyes to cover dark circles. Use your ring finger to gently tap and blend the concealer until it merges with your foundation.",\n    "Step 5: Apply Blush. Smile to locate the apples of your cheeks. Use a blush brush to pick up some blush. Tap off any excess, then apply the blush to the apples of your cheeks, blending towards your temples.",\n    "Step 6: Apply Eyeshadow (Optional). Use your fingertip or an eyeshadow brush to apply eyeshadow to your eyelid. Start with a small amount and build up the intensity gradually.",\n    "Step 7: Apply Eyeliner (Optional). If you are comfortable with eyeliner, rest your elbow on a table for stability. Use short, feathery strokes to apply the eyeliner as close to your lash line as possible. If this step is challenging, consider skipping it or practicing with a gel liner and angled brush.",\n    "Step 8: Curl Lashes (Optional). Use an eyelash curler to curl your lashes. Squeeze the curler gently for about 10 seconds.",\n    "Step 9: Apply Mascara (Optional). Hold the mascara wand horizontally and wiggle it back and forth at the base of your lashes. Then, pull the wand upwards, coating the lashes with mascara. Be careful not to poke yourself in the eye.",\n    "Step 10: Apply Lipstick. Start by exfoliating your lips with a lip scrub or a damp toothbrush. Apply lip balm to moisturize. Then, apply lipstick directly from the tube or with a lip brush. Blot your lips with a tissue to remove any excess.",\n    "Step 11: Set Makeup. If you use setting powder, lightly dust it over your face with a large powder brush to help your makeup last longer. Focus on areas that tend to get oily, such as the forehead and nose.",\n    "Step 12: Final Check. Use your fingertips to feel your face and ensure all products are evenly blended and there are no harsh lines or unblended areas."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 10222, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 49, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 10271, 'total_price': '0', 'currency': 'USD', 'latency': 3.1530509189997247}}, 'created_at': 1749656442}
2025-06-11 22:40:50,619 - app.chat_controller - INFO - Successfully parsed Dify answer: response='['Step 1: Preparation. Ensure you have all your makeup products and tools organized and within easy reach. A tray or a dedicated makeup organizer can be helpful.', 'Step 2: Moisturize. Apply moisturizer evenly to your face. Use your fingertips to feel for any dry patches, paying special attention to these areas.', 'Step 3: Apply Foundation. Dispense a small amount of liquid foundation onto the back of your non-dominant hand. Use a makeup sponge or your fingertips to dab the foundation onto your forehead, cheeks, nose, and chin. Gently blend the foundation outwards, ensuring an even layer.', 'Step 4: Apply Concealer. If you use concealer, apply it under your eyes to cover dark circles. Use your ring finger to gently tap and blend the concealer until it merges with your foundation.', 'Step 5: Apply Blush. Smile to locate the apples of your cheeks. Use a blush brush to pick up some blush. Tap off any excess, then apply the blush to the apples of your cheeks, blending towards your temples.', 'Step 6: Apply Eyeshadow (Optional). Use your fingertip or an eyeshadow brush to apply eyeshadow to your eyelid. Start with a small amount and build up the intensity gradually.', 'Step 7: Apply Eyeliner (Optional). If you are comfortable with eyeliner, rest your elbow on a table for stability. Use short, feathery strokes to apply the eyeliner as close to your lash line as possible. If this step is challenging, consider skipping it or practicing with a gel liner and angled brush.', 'Step 8: Curl Lashes (Optional). Use an eyelash curler to curl your lashes. Squeeze the curler gently for about 10 seconds.', 'Step 9: Apply Mascara (Optional). Hold the mascara wand horizontally and wiggle it back and forth at the base of your lashes. Then, pull the wand upwards, coating the lashes with mascara. Be careful not to poke yourself in the eye.', 'Step 10: Apply Lipstick. Start by exfoliating your lips with a lip scrub or a damp toothbrush. Apply lip balm to moisturize. Then, apply lipstick directly from the tube or with a lip brush. Blot your lips with a tissue to remove any excess.', 'Step 11: Set Makeup. If you use setting powder, lightly dust it over your face with a large powder brush to help your makeup last longer. Focus on areas that tend to get oily, such as the forehead and nose.', 'Step 12: Final Check. Use your fingertips to feel your face and ensure all products are evenly blended and there are no harsh lines or unblended areas.']...', type='step_by_step'
2025-06-11 22:40:50,619 - app.chat_controller - INFO - Returning QueryResponse: response='['Step 1: Preparation. Ensure you have all your makeup products and tools organized and within easy reach. A tray or a dedicated makeup organizer can be helpful.', 'Step 2: Moisturize. Apply moisturizer evenly to your face. Use your fingertips to feel for any dry patches, paying special attention to these areas.', 'Step 3: Apply Foundation. Dispense a small amount of liquid foundation onto the back of your non-dominant hand. Use a makeup sponge or your fingertips to dab the foundation onto your forehead, cheeks, nose, and chin. Gently blend the foundation outwards, ensuring an even layer.', 'Step 4: Apply Concealer. If you use concealer, apply it under your eyes to cover dark circles. Use your ring finger to gently tap and blend the concealer until it merges with your foundation.', 'Step 5: Apply Blush. Smile to locate the apples of your cheeks. Use a blush brush to pick up some blush. Tap off any excess, then apply the blush to the apples of your cheeks, blending towards your temples.', 'Step 6: Apply Eyeshadow (Optional). Use your fingertip or an eyeshadow brush to apply eyeshadow to your eyelid. Start with a small amount and build up the intensity gradually.', 'Step 7: Apply Eyeliner (Optional). If you are comfortable with eyeliner, rest your elbow on a table for stability. Use short, feathery strokes to apply the eyeliner as close to your lash line as possible. If this step is challenging, consider skipping it or practicing with a gel liner and angled brush.', 'Step 8: Curl Lashes (Optional). Use an eyelash curler to curl your lashes. Squeeze the curler gently for about 10 seconds.', 'Step 9: Apply Mascara (Optional). Hold the mascara wand horizontally and wiggle it back and forth at the base of your lashes. Then, pull the wand upwards, coating the lashes with mascara. Be careful not to poke yourself in the eye.', 'Step 10: Apply Lipstick. Start by exfoliating your lips with a lip scrub or a damp toothbrush. Apply lip balm to moisturize. Then, apply lipstick directly from the tube or with a lip brush. Blot your lips with a tissue to remove any excess.', 'Step 11: Set Makeup. If you use setting powder, lightly dust it over your face with a large powder brush to help your makeup last longer. Focus on areas that tend to get oily, such as the forehead and nose.', 'Step 12: Final Check. Use your fingertips to feel your face and ensure all products are evenly blended and there are no harsh lines or unblended areas.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-11 22:43:34,153 - app.chat_controller - INFO - handle_chat received query: I'm blind, can you guide me step by step how to make up in Italy? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-11 22:43:34,154 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm blind, can you guide me step by step how to make up in Italy?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-11 22:43:44,999 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '0f4f5595-b799-4ac5-8236-e669c049d434', 'id': 'e44fd0b4-6efe-4215-9796-7565f987243f', 'message_id': 'e44fd0b4-6efe-4215-9796-7565f987243f', 'conversation_id': '2465535f-eecc-41df-89fe-9c1aab35b64e', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Prepare your face. Start with a clean and moisturized face. Gently feel your face to ensure it\'s smooth and hydrated. This provides a good base for your makeup.",\n    "Step 2: Apply foundation. Dispense a small amount of liquid foundation onto the back of your non-dominant hand. With a makeup sponge or your fingertips, dab small dots of foundation across your forehead, cheeks, nose, and chin. Gently blend the foundation outwards in circular motions, ensuring even coverage. Pay attention to your hairline and jawline to avoid harsh lines. The goal is to create a smooth, even canvas.",\n    "Step 3: Conceal imperfections. If you have any areas needing extra coverage, such as under-eye circles or blemishes, apply a small amount of concealer. Use your fingertip to gently tap the concealer onto the area and blend it lightly into the surrounding skin. Make sure the edges are seamless.",\n    "Step 4: Apply blush. Smile to locate the apples of your cheeks. Using a blush brush, swirl it lightly in your blush pan and tap off any excess. Apply the blush to the apples of your cheeks, blending it back towards your temples. Use gentle, circular motions. You should feel a soft flush of color.",\n    "Step 5: Define your eyebrows. Use an eyebrow pencil or powder that matches your hair color. Use short, light strokes to fill in any sparse areas, following your natural brow shape. Use a spoolie brush to blend the color and groom your brows into place.",\n    "Step 6: Apply eyeshadow. Choose a neutral eyeshadow color to start. With an eyeshadow brush, gently pat the eyeshadow onto your eyelid, from your lash line to your crease. Blend the edges with a clean brush to soften any harsh lines. You can use your fingertip to feel the placement and ensure even coverage.",\n    "Step 7: Apply mascara. Hold the mascara wand horizontally at the base of your upper lashes. Wiggle the wand back and forth as you sweep upwards, coating your lashes from root to tip. Repeat for your lower lashes. Be careful not to poke yourself in the eye. Apply a second coat if desired.",\n    "Step 8: Apply lipstick. Start by applying lip balm to moisturize your lips. Then, use a lip liner that matches your lipstick shade to outline your lips, creating a defined shape. Fill in your lips with lipstick, either directly from the tube or with a lip brush. Blot your lips with a tissue to remove any excess product."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 10198, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 46, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 10244, 'total_price': '0', 'currency': 'USD', 'latency': 5.361597876997621}}, 'created_at': 1749656614}
2025-06-11 22:43:45,000 - app.chat_controller - INFO - Successfully parsed Dify answer: response='["Step 1: Prepare your face. Start with a clean and moisturized face. Gently feel your face to ensure it's smooth and hydrated. This provides a good base for your makeup.", 'Step 2: Apply foundation. Dispense a small amount of liquid foundation onto the back of your non-dominant hand. With a makeup sponge or your fingertips, dab small dots of foundation across your forehead, cheeks, nose, and chin. Gently blend the foundation outwards in circular motions, ensuring even coverage. Pay attention to your hairline and jawline to avoid harsh lines. The goal is to create a smooth, even canvas.', 'Step 3: Conceal imperfections. If you have any areas needing extra coverage, such as under-eye circles or blemishes, apply a small amount of concealer. Use your fingertip to gently tap the concealer onto the area and blend it lightly into the surrounding skin. Make sure the edges are seamless.', 'Step 4: Apply blush. Smile to locate the apples of your cheeks. Using a blush brush, swirl it lightly in your blush pan and tap off any excess. Apply the blush to the apples of your cheeks, blending it back towards your temples. Use gentle, circular motions. You should feel a soft flush of color.', 'Step 5: Define your eyebrows. Use an eyebrow pencil or powder that matches your hair color. Use short, light strokes to fill in any sparse areas, following your natural brow shape. Use a spoolie brush to blend the color and groom your brows into place.', 'Step 6: Apply eyeshadow. Choose a neutral eyeshadow color to start. With an eyeshadow brush, gently pat the eyeshadow onto your eyelid, from your lash line to your crease. Blend the edges with a clean brush to soften any harsh lines. You can use your fingertip to feel the placement and ensure even coverage.', 'Step 7: Apply mascara. Hold the mascara wand horizontally at the base of your upper lashes. Wiggle the wand back and forth as you sweep upwards, coating your lashes from root to tip. Repeat for your lower lashes. Be careful not to poke yourself in the eye. Apply a second coat if desired.', 'Step 8: Apply lipstick. Start by applying lip balm to moisturize your lips. Then, use a lip liner that matches your lipstick shade to outline your lips, creating a defined shape. Fill in your lips with lipstick, either directly from the tube or with a lip brush. Blot your lips with a tissue to remove any excess product.']...', type='step_by_step'
2025-06-11 22:43:45,000 - app.chat_controller - INFO - Returning QueryResponse: response='["Step 1: Prepare your face. Start with a clean and moisturized face. Gently feel your face to ensure it's smooth and hydrated. This provides a good base for your makeup.", 'Step 2: Apply foundation. Dispense a small amount of liquid foundation onto the back of your non-dominant hand. With a makeup sponge or your fingertips, dab small dots of foundation across your forehead, cheeks, nose, and chin. Gently blend the foundation outwards in circular motions, ensuring even coverage. Pay attention to your hairline and jawline to avoid harsh lines. The goal is to create a smooth, even canvas.', 'Step 3: Conceal imperfections. If you have any areas needing extra coverage, such as under-eye circles or blemishes, apply a small amount of concealer. Use your fingertip to gently tap the concealer onto the area and blend it lightly into the surrounding skin. Make sure the edges are seamless.', 'Step 4: Apply blush. Smile to locate the apples of your cheeks. Using a blush brush, swirl it lightly in your blush pan and tap off any excess. Apply the blush to the apples of your cheeks, blending it back towards your temples. Use gentle, circular motions. You should feel a soft flush of color.', 'Step 5: Define your eyebrows. Use an eyebrow pencil or powder that matches your hair color. Use short, light strokes to fill in any sparse areas, following your natural brow shape. Use a spoolie brush to blend the color and groom your brows into place.', 'Step 6: Apply eyeshadow. Choose a neutral eyeshadow color to start. With an eyeshadow brush, gently pat the eyeshadow onto your eyelid, from your lash line to your crease. Blend the edges with a clean brush to soften any harsh lines. You can use your fingertip to feel the placement and ensure even coverage.', 'Step 7: Apply mascara. Hold the mascara wand horizontally at the base of your upper lashes. Wiggle the wand back and forth as you sweep upwards, coating your lashes from root to tip. Repeat for your lower lashes. Be careful not to poke yourself in the eye. Apply a second coat if desired.', 'Step 8: Apply lipstick. Start by applying lip balm to moisturize your lips. Then, use a lip liner that matches your lipstick shade to outline your lips, creating a defined shape. Fill in your lips with lipstick, either directly from the tube or with a lip brush. Blot your lips with a tissue to remove any excess product.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-12 06:20:47,692 - app.chat_controller - INFO - handle_chat received query:  I'm blind, can you guide me step by step how to make up in Italy? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-12 06:20:47,693 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': " I'm blind, can you guide me step by step how to make up in Italy?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-12 06:20:47,704 - app.chat_controller - ERROR - Could not connect to Dify at http://localhost:80/v1/chat-messages. Is Dify running and accessible?
2025-06-12 06:20:47,704 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, I could not connect to the AI service. Please check if Dify is running....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-12 06:21:27,945 - app.chat_controller - INFO - handle_chat received query:  I'm blind, can you guide me step by step how to make up in Italy? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-12 06:21:27,945 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': " I'm blind, can you guide me step by step how to make up in Italy?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-12 06:21:27,948 - app.chat_controller - ERROR - Could not connect to Dify at http://localhost:80/v1/chat-messages. Is Dify running and accessible?
2025-06-12 06:21:27,948 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, I could not connect to the AI service. Please check if Dify is running....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-12 06:24:00,715 - app.chat_controller - INFO - handle_chat received query: What are the latest beauty trends? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-12 06:24:00,715 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What are the latest beauty trends?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-12 06:24:00,725 - app.chat_controller - ERROR - Could not connect to Dify at http://localhost:80/v1/chat-messages. Is Dify running and accessible?
2025-06-12 06:24:00,726 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, I could not connect to the AI service. Please check if Dify is running....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-12 06:24:12,225 - app.chat_controller - INFO - handle_chat received query: Any advice for covering dark circles? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-12 06:24:12,226 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Any advice for covering dark circles?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-12 06:24:12,228 - app.chat_controller - ERROR - Could not connect to Dify at http://localhost:80/v1/chat-messages. Is Dify running and accessible?
2025-06-12 06:24:12,228 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, I could not connect to the AI service. Please check if Dify is running....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-12 06:24:27,634 - app.chat_controller - INFO - handle_chat received query: Hi for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-12 06:24:27,635 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hi', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-12 06:24:27,637 - app.chat_controller - ERROR - Could not connect to Dify at http://localhost:80/v1/chat-messages. Is Dify running and accessible?
2025-06-12 06:24:27,637 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, I could not connect to the AI service. Please check if Dify is running....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-12 06:25:56,442 - app.chat_controller - INFO - handle_chat received query: What's the difference between serum and moisturizer? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-12 06:25:56,443 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "What's the difference between serum and moisturizer?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-12 06:25:56,451 - app.chat_controller - ERROR - Could not connect to Dify at http://localhost:80/v1/chat-messages. Is Dify running and accessible?
2025-06-12 06:25:56,451 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, I could not connect to the AI service. Please check if Dify is running....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-12 06:28:38,118 - app.chat_controller - INFO - handle_chat received query: Can you recommend products for oily skin? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-12 06:28:38,119 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Can you recommend products for oily skin?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-12 06:28:38,122 - app.chat_controller - ERROR - Could not connect to Dify at http://localhost:80/v1/chat-messages. Is Dify running and accessible?
2025-06-12 06:28:38,122 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, I could not connect to the AI service. Please check if Dify is running....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-12 06:29:43,590 - app.chat_controller - INFO - handle_chat received query: Can you recommend products for oily skin? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-12 06:29:43,590 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Can you recommend products for oily skin?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-12 06:29:43,593 - app.chat_controller - ERROR - Could not connect to Dify at http://localhost:80/v1/chat-messages. Is Dify running and accessible?
2025-06-12 06:29:43,593 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, I could not connect to the AI service. Please check if Dify is running....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-12 06:30:17,381 - app.chat_controller - INFO - handle_chat received query: Hi, I'm blind. Can you show me how to make up in Italy style? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-12 06:30:17,382 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "Hi, I'm blind. Can you show me how to make up in Italy style?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-12 06:30:29,778 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '3b233ba2-fd1c-4d30-bed2-1a24dd7d9037', 'id': '0226b2b6-c49c-4c2d-af30-112808e29563', 'message_id': '0226b2b6-c49c-4c2d-af30-112808e29563', 'conversation_id': '3d544a44-2a91-4704-9ece-08cba879863e', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Begin with a clean, moisturized face. Feel the texture of your skin to ensure it\'s smooth and hydrated. Apply a hydrating moisturizer and gently massage it in.",\n    "Step 2: Apply a lightweight foundation. Use a damp makeup sponge or your fingertips to gently blend the foundation into your skin. Start at the center of your face and work your way outwards, ensuring even coverage. Feel for any areas you may have missed.",\n    "Step 3: Use a concealer that is one shade lighter than your skin tone to highlight the under-eye area. Gently pat the concealer into the skin using your ring finger, focusing on the inner corners of your eyes. Feel the area to make sure the product is blended.",\n    "Step 4: Apply a bronzer to contour your cheekbones. Use a fluffy brush to apply the bronzer in the hollows of your cheeks, starting from your ears and blending towards the center of your face. Feel for the hollows of your cheeks to ensure accurate placement. Lightly dust bronzer on your temples and jawline.",\n    "Step 5: Apply a cream blush to the apples of your cheeks. Smile to locate the apples of your cheeks, then gently dab the cream blush onto the area. Blend the blush outwards towards your temples using your fingertips or a sponge. Feel the area to ensure even distribution.",\n    "Step 6: Define your eyebrows with a brow pencil or powder. Use short, light strokes to fill in any sparse areas. Use a spoolie brush to blend the product and groom your brows into place. Feel the shape of your brows to ensure evenness.",\n    "Step 7: Apply a neutral eyeshadow to your eyelids. Use a soft brush to apply a matte brown or taupe eyeshadow all over your eyelids, from your lash line to your crease. Feel the eyelid to ensure even application.",\n    "Step 8: Apply black eyeliner to your upper lash line. Use a steady hand to draw a thin line along your upper lash line, as close to the lashes as possible. Extend the line slightly outwards at the outer corner of your eye to create a subtle wing. You can use a Q-tip to smudge the line for a softer effect. Feel the liner to ensure a smooth line.",\n    "Step 9: Curl your eyelashes with an eyelash curler. Position the curler close to the base of your lashes and gently squeeze for a few seconds. Apply two coats of black mascara to your upper lashes. Wiggle the mascara wand at the base of your lashes before sweeping upwards. Feel your lashes to ensure they are coated evenly.",\n    "Step 10: Line your lips with a nude lip liner. Follow the natural shape of your lips, slightly overdrawing the cupid\'s bow for a fuller look. Fill in your lips with a matte red lipstick. Blot your lips with a tissue to remove any excess product. Feel the edges of your lips to ensure the liner and lipstick are evenly applied."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 9552, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 42, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9594, 'total_price': '0', 'currency': 'USD', 'latency': 6.249780211000001}}, 'created_at': 1749684617}
2025-06-12 06:30:29,779 - app.chat_controller - INFO - Successfully parsed Dify answer: response='["Step 1: Begin with a clean, moisturized face. Feel the texture of your skin to ensure it's smooth and hydrated. Apply a hydrating moisturizer and gently massage it in.", 'Step 2: Apply a lightweight foundation. Use a damp makeup sponge or your fingertips to gently blend the foundation into your skin. Start at the center of your face and work your way outwards, ensuring even coverage. Feel for any areas you may have missed.', 'Step 3: Use a concealer that is one shade lighter than your skin tone to highlight the under-eye area. Gently pat the concealer into the skin using your ring finger, focusing on the inner corners of your eyes. Feel the area to make sure the product is blended.', 'Step 4: Apply a bronzer to contour your cheekbones. Use a fluffy brush to apply the bronzer in the hollows of your cheeks, starting from your ears and blending towards the center of your face. Feel for the hollows of your cheeks to ensure accurate placement. Lightly dust bronzer on your temples and jawline.', 'Step 5: Apply a cream blush to the apples of your cheeks. Smile to locate the apples of your cheeks, then gently dab the cream blush onto the area. Blend the blush outwards towards your temples using your fingertips or a sponge. Feel the area to ensure even distribution.', 'Step 6: Define your eyebrows with a brow pencil or powder. Use short, light strokes to fill in any sparse areas. Use a spoolie brush to blend the product and groom your brows into place. Feel the shape of your brows to ensure evenness.', 'Step 7: Apply a neutral eyeshadow to your eyelids. Use a soft brush to apply a matte brown or taupe eyeshadow all over your eyelids, from your lash line to your crease. Feel the eyelid to ensure even application.', 'Step 8: Apply black eyeliner to your upper lash line. Use a steady hand to draw a thin line along your upper lash line, as close to the lashes as possible. Extend the line slightly outwards at the outer corner of your eye to create a subtle wing. You can use a Q-tip to smudge the line for a softer effect. Feel the liner to ensure a smooth line.', 'Step 9: Curl your eyelashes with an eyelash curler. Position the curler close to the base of your lashes and gently squeeze for a few seconds. Apply two coats of black mascara to your upper lashes. Wiggle the mascara wand at the base of your lashes before sweeping upwards. Feel your lashes to ensure they are coated evenly.', "Step 10: Line your lips with a nude lip liner. Follow the natural shape of your lips, slightly overdrawing the cupid's bow for a fuller look. Fill in your lips with a matte red lipstick. Blot your lips with a tissue to remove any excess product. Feel the edges of your lips to ensure the liner and lipstick are evenly applied."]...', type='step_by_step'
2025-06-12 06:30:29,779 - app.chat_controller - INFO - Returning QueryResponse: response='["Step 1: Begin with a clean, moisturized face. Feel the texture of your skin to ensure it's smooth and hydrated. Apply a hydrating moisturizer and gently massage it in.", 'Step 2: Apply a lightweight foundation. Use a damp makeup sponge or your fingertips to gently blend the foundation into your skin. Start at the center of your face and work your way outwards, ensuring even coverage. Feel for any areas you may have missed.', 'Step 3: Use a concealer that is one shade lighter than your skin tone to highlight the under-eye area. Gently pat the concealer into the skin using your ring finger, focusing on the inner corners of your eyes. Feel the area to make sure the product is blended.', 'Step 4: Apply a bronzer to contour your cheekbones. Use a fluffy brush to apply the bronzer in the hollows of your cheeks, starting from your ears and blending towards the center of your face. Feel for the hollows of your cheeks to ensure accurate placement. Lightly dust bronzer on your temples and jawline.', 'Step 5: Apply a cream blush to the apples of your cheeks. Smile to locate the apples of your cheeks, then gently dab the cream blush onto the area. Blend the blush outwards towards your temples using your fingertips or a sponge. Feel the area to ensure even distribution.', 'Step 6: Define your eyebrows with a brow pencil or powder. Use short, light strokes to fill in any sparse areas. Use a spoolie brush to blend the product and groom your brows into place. Feel the shape of your brows to ensure evenness.', 'Step 7: Apply a neutral eyeshadow to your eyelids. Use a soft brush to apply a matte brown or taupe eyeshadow all over your eyelids, from your lash line to your crease. Feel the eyelid to ensure even application.', 'Step 8: Apply black eyeliner to your upper lash line. Use a steady hand to draw a thin line along your upper lash line, as close to the lashes as possible. Extend the line slightly outwards at the outer corner of your eye to create a subtle wing. You can use a Q-tip to smudge the line for a softer effect. Feel the liner to ensure a smooth line.', 'Step 9: Curl your eyelashes with an eyelash curler. Position the curler close to the base of your lashes and gently squeeze for a few seconds. Apply two coats of black mascara to your upper lashes. Wiggle the mascara wand at the base of your lashes before sweeping upwards. Feel your lashes to ensure they are coated evenly.', "Step 10: Line your lips with a nude lip liner. Follow the natural shape of your lips, slightly overdrawing the cupid's bow for a fuller look. Fill in your lips with a matte red lipstick. Blot your lips with a tissue to remove any excess product. Feel the edges of your lips to ensure the liner and lipstick are evenly applied."]...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-12 06:36:44,852 - app.chat_controller - INFO - handle_chat received query:   I'm blind, can you guide me step by step how to make up in Italy? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-12 06:36:44,853 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "  I'm blind, can you guide me step by step how to make up in Italy?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-12 06:36:56,267 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '22bf7d54-6fc3-4586-a2f8-49e273440dbc', 'id': '5948e451-adef-48be-9971-c32089f1508c', 'message_id': '5948e451-adef-48be-9971-c32089f1508c', 'conversation_id': '81a33c31-1bda-40d0-afb8-947b39d31dc7', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Prepare your face. Start by cleansing and moisturizing your skin. This creates a smooth base for your makeup.",\n    "Step 2: Apply foundation. Dot the foundation evenly across your forehead, cheeks, nose, and chin. Use a damp sponge or your fingertips to blend the foundation outward, ensuring an even layer.",\n    "Step 3: Apply concealer. Use a concealer brush or your fingertip to dab concealer under your eyes, on any blemishes, or areas with redness. Gently blend the edges.",\n    "Step 4: Set with powder. Dip a large, fluffy brush into translucent powder. Tap off any excess and lightly dust it over your face to set the foundation and concealer.",\n    "Step 5: Apply blush. Smile to locate the apples of your cheeks. Use a blush brush to apply blush to the apples of your cheeks, blending upwards towards your temples.",\n    "Step 6: Shape your eyebrows. Use an eyebrow pencil or powder that matches your hair color to fill in any sparse areas. Follow your natural brow shape.",\n    "Step 7: Apply eyeshadow. Using your fingertip or an eyeshadow brush, gently press eyeshadow onto your eyelid. If using multiple shades, start with a lighter shade all over the lid, then use a darker shade in the crease.",\n    "Step 8: Apply eyeliner. Use a gel or pencil eyeliner. Gently pull your upper eyelid taut and draw a thin line as close to your lashes as possible. Start from the inner corner of your eye and extend outwards.",\n    "Step 9: Apply mascara. Place the mascara wand at the base of your upper lashes. Wiggle the wand back and forth, then pull it upwards towards the tips of your lashes. Repeat for lower lashes.",\n    "Step 10: Apply lipstick. Start by exfoliating your lips with a lip scrub. Then, apply lip balm. Next, apply your chosen lipstick directly from the tube or with a lip brush. Blot your lips with a tissue.",\n    "Step 11: Final touch. Use your fingertips to feel for any uneven spots or harsh lines. Gently blend any areas that need more attention. Consider using a setting spray to help your makeup last longer."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 10246, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 49, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 10295, 'total_price': '0', 'currency': 'USD', 'latency': 6.429180669999937}}, 'created_at': 1749685005}
2025-06-12 06:36:56,268 - app.chat_controller - INFO - Successfully parsed Dify answer: response='['Step 1: Prepare your face. Start by cleansing and moisturizing your skin. This creates a smooth base for your makeup.', 'Step 2: Apply foundation. Dot the foundation evenly across your forehead, cheeks, nose, and chin. Use a damp sponge or your fingertips to blend the foundation outward, ensuring an even layer.', 'Step 3: Apply concealer. Use a concealer brush or your fingertip to dab concealer under your eyes, on any blemishes, or areas with redness. Gently blend the edges.', 'Step 4: Set with powder. Dip a large, fluffy brush into translucent powder. Tap off any excess and lightly dust it over your face to set the foundation and concealer.', 'Step 5: Apply blush. Smile to locate the apples of your cheeks. Use a blush brush to apply blush to the apples of your cheeks, blending upwards towards your temples.', 'Step 6: Shape your eyebrows. Use an eyebrow pencil or powder that matches your hair color to fill in any sparse areas. Follow your natural brow shape.', 'Step 7: Apply eyeshadow. Using your fingertip or an eyeshadow brush, gently press eyeshadow onto your eyelid. If using multiple shades, start with a lighter shade all over the lid, then use a darker shade in the crease.', 'Step 8: Apply eyeliner. Use a gel or pencil eyeliner. Gently pull your upper eyelid taut and draw a thin line as close to your lashes as possible. Start from the inner corner of your eye and extend outwards.', 'Step 9: Apply mascara. Place the mascara wand at the base of your upper lashes. Wiggle the wand back and forth, then pull it upwards towards the tips of your lashes. Repeat for lower lashes.', 'Step 10: Apply lipstick. Start by exfoliating your lips with a lip scrub. Then, apply lip balm. Next, apply your chosen lipstick directly from the tube or with a lip brush. Blot your lips with a tissue.', 'Step 11: Final touch. Use your fingertips to feel for any uneven spots or harsh lines. Gently blend any areas that need more attention. Consider using a setting spray to help your makeup last longer.']...', type='step_by_step'
2025-06-12 06:36:56,268 - app.chat_controller - INFO - Returning QueryResponse: response='['Step 1: Prepare your face. Start by cleansing and moisturizing your skin. This creates a smooth base for your makeup.', 'Step 2: Apply foundation. Dot the foundation evenly across your forehead, cheeks, nose, and chin. Use a damp sponge or your fingertips to blend the foundation outward, ensuring an even layer.', 'Step 3: Apply concealer. Use a concealer brush or your fingertip to dab concealer under your eyes, on any blemishes, or areas with redness. Gently blend the edges.', 'Step 4: Set with powder. Dip a large, fluffy brush into translucent powder. Tap off any excess and lightly dust it over your face to set the foundation and concealer.', 'Step 5: Apply blush. Smile to locate the apples of your cheeks. Use a blush brush to apply blush to the apples of your cheeks, blending upwards towards your temples.', 'Step 6: Shape your eyebrows. Use an eyebrow pencil or powder that matches your hair color to fill in any sparse areas. Follow your natural brow shape.', 'Step 7: Apply eyeshadow. Using your fingertip or an eyeshadow brush, gently press eyeshadow onto your eyelid. If using multiple shades, start with a lighter shade all over the lid, then use a darker shade in the crease.', 'Step 8: Apply eyeliner. Use a gel or pencil eyeliner. Gently pull your upper eyelid taut and draw a thin line as close to your lashes as possible. Start from the inner corner of your eye and extend outwards.', 'Step 9: Apply mascara. Place the mascara wand at the base of your upper lashes. Wiggle the wand back and forth, then pull it upwards towards the tips of your lashes. Repeat for lower lashes.', 'Step 10: Apply lipstick. Start by exfoliating your lips with a lip scrub. Then, apply lip balm. Next, apply your chosen lipstick directly from the tube or with a lip brush. Blot your lips with a tissue.', 'Step 11: Final touch. Use your fingertips to feel for any uneven spots or harsh lines. Gently blend any areas that need more attention. Consider using a setting spray to help your makeup last longer.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-12 06:38:26,749 - app.chat_controller - INFO - handle_chat received query:  I'm blind, can you guide me step by step how to make up in Italy? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-12 06:38:26,750 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': " I'm blind, can you guide me step by step how to make up in Italy?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-12 06:38:37,611 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '9186abf2-3467-492e-9cd3-45972196f234', 'id': '7cc671e1-5a52-402e-be0e-69b65d945e28', 'message_id': '7cc671e1-5a52-402e-be0e-69b65d945e28', 'conversation_id': '2d0a256b-24a8-4a13-8747-b62510e19c6c', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Begin by cleansing your face. Use a gentle cleanser and warm water. Rinse thoroughly and pat your skin dry with a soft towel.",\n    "Step 2: Moisturize your skin. Apply a hydrating moisturizer all over your face and neck using upward, circular motions. This will create a smooth base for your makeup.",\n    "Step 3: Apply primer. Use a pea-sized amount of primer and spread it evenly across your face. Focus on areas where you tend to get oily or where your makeup fades quickly, such as your forehead, nose, and chin.",\n    "Step 4: Apply foundation. Use a makeup sponge or your fingertips to dab foundation onto your face. Start in the center and blend outwards towards your hairline and jawline. Ensure even coverage.",\n    "Step 5: Apply concealer. Use a concealer brush or your fingertips to apply concealer under your eyes, on any blemishes, or areas of discoloration. Gently tap the concealer to blend it into your skin.",\n    "Step 6: Set your foundation and concealer with powder. Use a large, fluffy brush to apply a light layer of translucent powder all over your face. This will help to set your makeup and prevent it from creasing.",\n    "Step 7: Apply blush. Smile to find the apples of your cheeks. Use a blush brush to apply blush to the apples of your cheeks, blending upwards towards your temples.",\n    "Step 8: Apply eyeshadow. Use your fingertip to apply a neutral eyeshadow shade all over your eyelid, from your lash line to your crease. This creates a base for other shadows. If using multiple shadows, start with the lightest shade and build to darker shades in the crease, blending well.",\n    "Step 9: Curl your eyelashes. Use an eyelash curler to curl your top lashes. Hold the curler in place for about 10 seconds.",\n    "Step 10: Apply mascara. Place the mascara wand at the base of your upper lashes and wiggle it back and forth. Then, pull the wand upwards, coating your lashes with mascara. Repeat for your lower lashes.",\n    "Step 11: Define your eyebrows. Use an eyebrow pencil or powder to fill in any sparse areas in your eyebrows. Follow the natural shape of your brows.",\n    "Step 12: Apply lipstick or lip gloss. Start by lining your lips with a lip liner that matches your lipstick shade. Then, apply lipstick or lip gloss to your lips."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 9436, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 42, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9478, 'total_price': '0', 'currency': 'USD', 'latency': 5.366279083999984}}, 'created_at': 1749685107}
2025-06-12 06:38:37,612 - app.chat_controller - INFO - Successfully parsed Dify answer: response='['Step 1: Begin by cleansing your face. Use a gentle cleanser and warm water. Rinse thoroughly and pat your skin dry with a soft towel.', 'Step 2: Moisturize your skin. Apply a hydrating moisturizer all over your face and neck using upward, circular motions. This will create a smooth base for your makeup.', 'Step 3: Apply primer. Use a pea-sized amount of primer and spread it evenly across your face. Focus on areas where you tend to get oily or where your makeup fades quickly, such as your forehead, nose, and chin.', 'Step 4: Apply foundation. Use a makeup sponge or your fingertips to dab foundation onto your face. Start in the center and blend outwards towards your hairline and jawline. Ensure even coverage.', 'Step 5: Apply concealer. Use a concealer brush or your fingertips to apply concealer under your eyes, on any blemishes, or areas of discoloration. Gently tap the concealer to blend it into your skin.', 'Step 6: Set your foundation and concealer with powder. Use a large, fluffy brush to apply a light layer of translucent powder all over your face. This will help to set your makeup and prevent it from creasing.', 'Step 7: Apply blush. Smile to find the apples of your cheeks. Use a blush brush to apply blush to the apples of your cheeks, blending upwards towards your temples.', 'Step 8: Apply eyeshadow. Use your fingertip to apply a neutral eyeshadow shade all over your eyelid, from your lash line to your crease. This creates a base for other shadows. If using multiple shadows, start with the lightest shade and build to darker shades in the crease, blending well.', 'Step 9: Curl your eyelashes. Use an eyelash curler to curl your top lashes. Hold the curler in place for about 10 seconds.', 'Step 10: Apply mascara. Place the mascara wand at the base of your upper lashes and wiggle it back and forth. Then, pull the wand upwards, coating your lashes with mascara. Repeat for your lower lashes.', 'Step 11: Define your eyebrows. Use an eyebrow pencil or powder to fill in any sparse areas in your eyebrows. Follow the natural shape of your brows.', 'Step 12: Apply lipstick or lip gloss. Start by lining your lips with a lip liner that matches your lipstick shade. Then, apply lipstick or lip gloss to your lips.']...', type='step_by_step'
2025-06-12 06:38:37,612 - app.chat_controller - INFO - Returning QueryResponse: response='['Step 1: Begin by cleansing your face. Use a gentle cleanser and warm water. Rinse thoroughly and pat your skin dry with a soft towel.', 'Step 2: Moisturize your skin. Apply a hydrating moisturizer all over your face and neck using upward, circular motions. This will create a smooth base for your makeup.', 'Step 3: Apply primer. Use a pea-sized amount of primer and spread it evenly across your face. Focus on areas where you tend to get oily or where your makeup fades quickly, such as your forehead, nose, and chin.', 'Step 4: Apply foundation. Use a makeup sponge or your fingertips to dab foundation onto your face. Start in the center and blend outwards towards your hairline and jawline. Ensure even coverage.', 'Step 5: Apply concealer. Use a concealer brush or your fingertips to apply concealer under your eyes, on any blemishes, or areas of discoloration. Gently tap the concealer to blend it into your skin.', 'Step 6: Set your foundation and concealer with powder. Use a large, fluffy brush to apply a light layer of translucent powder all over your face. This will help to set your makeup and prevent it from creasing.', 'Step 7: Apply blush. Smile to find the apples of your cheeks. Use a blush brush to apply blush to the apples of your cheeks, blending upwards towards your temples.', 'Step 8: Apply eyeshadow. Use your fingertip to apply a neutral eyeshadow shade all over your eyelid, from your lash line to your crease. This creates a base for other shadows. If using multiple shadows, start with the lightest shade and build to darker shades in the crease, blending well.', 'Step 9: Curl your eyelashes. Use an eyelash curler to curl your top lashes. Hold the curler in place for about 10 seconds.', 'Step 10: Apply mascara. Place the mascara wand at the base of your upper lashes and wiggle it back and forth. Then, pull the wand upwards, coating your lashes with mascara. Repeat for your lower lashes.', 'Step 11: Define your eyebrows. Use an eyebrow pencil or powder to fill in any sparse areas in your eyebrows. Follow the natural shape of your brows.', 'Step 12: Apply lipstick or lip gloss. Start by lining your lips with a lip liner that matches your lipstick shade. Then, apply lipstick or lip gloss to your lips.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-12 06:39:09,779 - app.chat_controller - INFO - handle_chat received query:  I'm blind, can you guide me step by step how to make up in Italy? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-12 06:39:09,780 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': " I'm blind, can you guide me step by step how to make up in Italy?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-12 06:39:21,838 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '389e40d6-d9eb-497a-ae3c-64132da2b29f', 'id': '7a426d51-4de3-4ccf-98c8-885276a64a24', 'message_id': '7a426d51-4de3-4ccf-98c8-885276a64a24', 'conversation_id': '6977746f-1379-4c44-a41d-6919b6a3caef', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Prepare your skin by cleansing and moisturizing. Feel your face to ensure it is smooth and hydrated. This provides a good base for makeup.",\n    "Step 2: Apply foundation. Use a makeup sponge or your fingertips to dot the foundation evenly across your forehead, cheeks, nose, and chin. Then, gently blend it outwards towards your hairline and jawline, ensuring there are no harsh lines. Feel for even coverage.",\n    "Step 3: Apply concealer. If you have any areas you want to further even out, such as under your eyes, use your fingertip to gently dab concealer onto those areas. Pat lightly to blend.",\n    "Step 4: Apply blush to your cheeks. Smile to locate the apples of your cheeks. Use a soft brush to apply blush in a circular motion on the apples of your cheeks, blending towards your temples. Feel for a soft flush of color.",\n    "Step 5: Apply eyeshadow. Sweep a neutral eyeshadow across your entire eyelid, from lash line to brow bone. This creates a smooth base for other shadows. If you wish to add more definition, you can use a darker shade in the crease of your eyelid. Use your fingertip or a small brush to gently press the shadow into the crease and blend well.",\n    "Step 6: Curl your eyelashes using an eyelash curler. Position the curler as close to the base of your lashes as possible without pinching your eyelid. Gently squeeze and hold for a few seconds.",\n    "Step 7: Apply mascara. Starting at the base of your upper lashes, wiggle the mascara wand back and forth as you pull it through to the tips. Repeat for the lower lashes. Be careful not to poke yourself in the eye.",\n    "Step 8: Define your eyebrows. Use an eyebrow pencil or powder that matches your hair color to fill in any sparse areas. Follow the natural shape of your brow, using light, feathery strokes.",\n    "Step 9: Apply lipstick. Start by applying lip balm to moisturize your lips. Then, use your fingertip or a lip brush to apply lipstick to the center of your lips, blending outwards. Blot your lips with a tissue to remove any excess product."\n  ]\n}\n```', 'metadata': {'usage': {'prompt_tokens': 8175, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 45, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 8220, 'total_price': '0', 'currency': 'USD', 'latency': 6.249540128999911}}, 'created_at': 1749685150}
2025-06-12 06:39:21,839 - app.chat_controller - INFO - Successfully parsed Dify answer: response='['Step 1: Prepare your skin by cleansing and moisturizing. Feel your face to ensure it is smooth and hydrated. This provides a good base for makeup.', 'Step 2: Apply foundation. Use a makeup sponge or your fingertips to dot the foundation evenly across your forehead, cheeks, nose, and chin. Then, gently blend it outwards towards your hairline and jawline, ensuring there are no harsh lines. Feel for even coverage.', 'Step 3: Apply concealer. If you have any areas you want to further even out, such as under your eyes, use your fingertip to gently dab concealer onto those areas. Pat lightly to blend.', 'Step 4: Apply blush to your cheeks. Smile to locate the apples of your cheeks. Use a soft brush to apply blush in a circular motion on the apples of your cheeks, blending towards your temples. Feel for a soft flush of color.', 'Step 5: Apply eyeshadow. Sweep a neutral eyeshadow across your entire eyelid, from lash line to brow bone. This creates a smooth base for other shadows. If you wish to add more definition, you can use a darker shade in the crease of your eyelid. Use your fingertip or a small brush to gently press the shadow into the crease and blend well.', 'Step 6: Curl your eyelashes using an eyelash curler. Position the curler as close to the base of your lashes as possible without pinching your eyelid. Gently squeeze and hold for a few seconds.', 'Step 7: Apply mascara. Starting at the base of your upper lashes, wiggle the mascara wand back and forth as you pull it through to the tips. Repeat for the lower lashes. Be careful not to poke yourself in the eye.', 'Step 8: Define your eyebrows. Use an eyebrow pencil or powder that matches your hair color to fill in any sparse areas. Follow the natural shape of your brow, using light, feathery strokes.', 'Step 9: Apply lipstick. Start by applying lip balm to moisturize your lips. Then, use your fingertip or a lip brush to apply lipstick to the center of your lips, blending outwards. Blot your lips with a tissue to remove any excess product.']...', type='step_by_step'
2025-06-12 06:39:21,840 - app.chat_controller - INFO - Returning QueryResponse: response='['Step 1: Prepare your skin by cleansing and moisturizing. Feel your face to ensure it is smooth and hydrated. This provides a good base for makeup.', 'Step 2: Apply foundation. Use a makeup sponge or your fingertips to dot the foundation evenly across your forehead, cheeks, nose, and chin. Then, gently blend it outwards towards your hairline and jawline, ensuring there are no harsh lines. Feel for even coverage.', 'Step 3: Apply concealer. If you have any areas you want to further even out, such as under your eyes, use your fingertip to gently dab concealer onto those areas. Pat lightly to blend.', 'Step 4: Apply blush to your cheeks. Smile to locate the apples of your cheeks. Use a soft brush to apply blush in a circular motion on the apples of your cheeks, blending towards your temples. Feel for a soft flush of color.', 'Step 5: Apply eyeshadow. Sweep a neutral eyeshadow across your entire eyelid, from lash line to brow bone. This creates a smooth base for other shadows. If you wish to add more definition, you can use a darker shade in the crease of your eyelid. Use your fingertip or a small brush to gently press the shadow into the crease and blend well.', 'Step 6: Curl your eyelashes using an eyelash curler. Position the curler as close to the base of your lashes as possible without pinching your eyelid. Gently squeeze and hold for a few seconds.', 'Step 7: Apply mascara. Starting at the base of your upper lashes, wiggle the mascara wand back and forth as you pull it through to the tips. Repeat for the lower lashes. Be careful not to poke yourself in the eye.', 'Step 8: Define your eyebrows. Use an eyebrow pencil or powder that matches your hair color to fill in any sparse areas. Follow the natural shape of your brow, using light, feathery strokes.', 'Step 9: Apply lipstick. Start by applying lip balm to moisturize your lips. Then, use your fingertip or a lip brush to apply lipstick to the center of your lips, blending outwards. Blot your lips with a tissue to remove any excess product.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-14 08:37:11,577 - app.chat_controller - INFO - handle_chat received query: What are the latest beauty trends? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 08:37:11,578 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What are the latest beauty trends?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 08:37:17,410 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '3933255c-1590-4b35-938d-0ab1755c6b8e', 'id': '6c847a41-aa9a-4d1f-8567-6486e7768c95', 'message_id': '6c847a41-aa9a-4d1f-8567-6486e7768c95', 'conversation_id': '2d8dc9a0-32e4-4da9-b235-354839722cba', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Right now, there\'s a big emphasis on achieving a natural, radiant look, often referred to as the \'clean girl\' aesthetic, which focuses on dewy skin, minimal makeup, and healthy, glowing features. Another prominent trend is bold and colorful eyeshadow looks, with vibrant hues and creative placements taking center stage. Also, there\'s a growing interest in sustainable and eco-friendly beauty products, with consumers seeking out brands that prioritize ethical sourcing, cruelty-free practices, and environmentally conscious packaging.",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 5802, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 20, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 5822, 'total_price': '0', 'currency': 'USD', 'latency': 2.8484723759999895}}, 'created_at': 1749865032}
2025-06-14 08:37:17,410 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Right now, there's a big emphasis on achieving a natural, radiant look, often referred to as the 'cl...', type='normal'
2025-06-14 08:37:17,410 - app.chat_controller - INFO - Returning QueryResponse: response='Right now, there's a big emphasis on achieving a natural, radiant look, often referred to as the 'cl...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-14 08:37:34,135 - app.chat_controller - INFO - handle_chat received query: Oh, that's awesome. Can you show me how to do it? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 08:37:34,135 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "Oh, that's awesome. Can you show me how to do it?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 08:37:37,632 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'bd37cb48-5e1e-4527-a428-f7cef2d2e1d0', 'id': '67931712-823b-451b-b8f1-a45b6de56fdf', 'message_id': '67931712-823b-451b-b8f1-a45b6de56fdf', 'conversation_id': '96201b8f-c5a2-4c46-a10f-46e5f728234e', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be your friendly, makeup-obsessed AI assistant, Momo! Ask me anything about makeup, and I'll do my best to help you achieve your dream look. I'm excited to get started! \n", 'metadata': {'usage': {'prompt_tokens': 12816, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 95, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 12911, 'total_price': '0', 'currency': 'USD', 'latency': 3.0511729170000024}}, 'created_at': 1749865054}
2025-06-14 08:37:37,632 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be your friendly, makeup-obsessed AI assistant, Momo! Ask me anything about makeup, and I'll do my best to help you achieve your dream look. I'm excited to get started! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-14 08:37:37,632 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-14 08:38:33,664 - app.chat_controller - INFO - handle_chat received query:  Oh, that's awesome. Can you show me how to do it? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 08:38:33,665 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': " Oh, that's awesome. Can you show me how to do it?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 08:38:37,446 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'e4d57cb4-f2e9-417e-bf1b-2d9be9d57a85', 'id': '4a3de067-33c8-4f5a-a2b2-35c8acf2e4e2', 'message_id': '4a3de067-33c8-4f5a-a2b2-35c8acf2e4e2', 'conversation_id': '1d04385c-9c19-43d2-bf05-fc800dc53701', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be your friendly and enthusiastic AI makeup assistant, Momo! Ask me anything about makeup, and I'll do my best to help. I'm excited to talk beauty! \n", 'metadata': {'usage': {'prompt_tokens': 13118, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 90, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 13208, 'total_price': '0', 'currency': 'USD', 'latency': 3.340186876999951}}, 'created_at': 1749865114}
2025-06-14 08:38:37,446 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be your friendly and enthusiastic AI makeup assistant, Momo! Ask me anything about makeup, and I'll do my best to help. I'm excited to talk beauty! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-14 08:38:37,447 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-14 08:38:45,415 - app.chat_controller - INFO - handle_chat received query:  Oh, that's awesome. Can you show me how to do it? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 08:38:45,416 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': " Oh, that's awesome. Can you show me how to do it?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 08:38:49,295 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '7dfdf1e8-c85e-4525-9df3-5be16ce7e890', 'id': 'aaf6dfd6-c699-4ce8-996b-88b5b6e668cb', 'message_id': 'aaf6dfd6-c699-4ce8-996b-88b5b6e668cb', 'conversation_id': '894451b1-de0b-4051-8f94-d3396c47bd3e', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be Momo, your friendly and makeup-obsessed AI assistant! Ask me anything (makeup-related, of course!), and I'll do my best to help. Let's talk beauty! \n", 'metadata': {'usage': {'prompt_tokens': 13630, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 135, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 13765, 'total_price': '0', 'currency': 'USD', 'latency': 3.403612000999942}}, 'created_at': 1749865125}
2025-06-14 08:38:49,295 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be Momo, your friendly and makeup-obsessed AI assistant! Ask me anything (makeup-related, of course!), and I'll do my best to help. Let's talk beauty! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-14 08:38:49,295 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-14 08:45:30,166 - app.chat_controller - INFO - handle_chat received query: Oh, that's awesome. Can you show me how to do it? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 08:45:30,166 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "Oh, that's awesome. Can you show me how to do it?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 08:45:34,651 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'fc974919-ca74-4c5e-8286-b9bc850248be', 'id': '593cdb72-b2eb-4538-98b3-3511365ea11a', 'message_id': '593cdb72-b2eb-4538-98b3-3511365ea11a', 'conversation_id': '72330656-ab4f-45f2-9ea2-8138abedfab7', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be your friendly and enthusiastic AI makeup assistant, Momo! Ask me anything about makeup, and I'll do my best to help. I'll also make sure to steer us back to beauty if we start to wander off-topic! Let's talk makeup! \n", 'metadata': {'usage': {'prompt_tokens': 13196, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 124, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 13320, 'total_price': '0', 'currency': 'USD', 'latency': 4.055146586000092}}, 'created_at': 1749865530}
2025-06-14 08:45:34,652 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be your friendly and enthusiastic AI makeup assistant, Momo! Ask me anything about makeup, and I'll do my best to help. I'll also make sure to steer us back to beauty if we start to wander off-topic! Let's talk makeup! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-14 08:45:34,652 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-14 08:45:46,324 - app.chat_controller - INFO - handle_chat received query: Any advice for covering dark circles? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 08:45:46,325 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Any advice for covering dark circles?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 08:45:51,168 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '0c314ebf-a741-4d62-87c2-c48cfbe94e53', 'id': '86b9c5c1-07f9-4d4a-ad5c-1198132b293e', 'message_id': '86b9c5c1-07f9-4d4a-ad5c-1198132b293e', 'conversation_id': '0043f8d9-151d-46ae-8550-20ca0b57ee27', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! I\'m Momo, your makeup guide! To give you the best advice for concealing those dark circles, it\'d be helpful to know a bit about you. For example, are you blind, have low vision, or are sighted? What are your favorite colors for makeup? What\'s your skin type (oily, dry, combination), and do you have any sensitivities? Do you have any favorite brands, or preferred attributes like vegan or cruelty-free? And what\'s your go-to makeup style  natural, dewy, matte? The more you share, the better I can tailor my tips to you!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 9241, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 167, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9408, 'total_price': '0', 'currency': 'USD', 'latency': 4.5028890849999925}}, 'created_at': 1749865546}
2025-06-14 08:45:51,169 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! I'm Momo, your makeup guide! To give you the best advice for concealing those dark circles...', type='normal'
2025-06-14 08:45:51,169 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! I'm Momo, your makeup guide! To give you the best advice for concealing those dark circles...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-14 08:46:57,662 - app.chat_controller - INFO - handle_chat received query: Oh, that's great. I'm bllind, so can you help me? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 08:46:57,662 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "Oh, that's great. I'm bllind, so can you help me?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 08:47:05,034 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'f0e1ce34-a1fa-4fd8-ad2a-8d308d616a36', 'id': '14e69463-6cd9-47dc-b5ec-189058754c6c', 'message_id': '14e69463-6cd9-47dc-b5ec-189058754c6c', 'conversation_id': 'dc6f8fe9-9e73-4d60-90ab-6e3d42e3820b', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be Momo, your friendly and makeup-obsessed AI assistant! Ask me anything (about makeup, of course!), and I'll do my best to help. Let's talk beauty! \n", 'metadata': {'usage': {'prompt_tokens': 16290, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 83, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 16373, 'total_price': '0', 'currency': 'USD', 'latency': 6.970227711999996}}, 'created_at': 1749865618}
2025-06-14 08:47:05,034 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be Momo, your friendly and makeup-obsessed AI assistant! Ask me anything (about makeup, of course!), and I'll do my best to help. Let's talk beauty! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-14 08:47:05,035 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-14 08:56:46,465 - app.chat_controller - INFO - handle_chat received query: What's the difference between serum and moisturizer? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 08:56:46,466 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "What's the difference between serum and moisturizer?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 08:56:51,545 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '410e764a-16a4-4df3-baa4-8fdd1055ac61', 'id': '0bcdb4db-b12e-4382-a685-9d150bc9773a', 'message_id': '0bcdb4db-b12e-4382-a685-9d150bc9773a', 'conversation_id': '791e445b-ed91-49c4-b6a1-8a1039950626', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "The key difference between a skin serum and a moisturizer lies in their formulation and primary function. Serums are generally lightweight and designed to deliver a high concentration of active ingredients deep into the skin. They often target specific skin concerns like wrinkles, dark spots, or hydration. Moisturizers, on the other hand, are richer and create a protective barrier on the skin\'s surface to lock in moisture and prevent water loss. Think of serums as potent treatments and moisturizers as essential hydrators that also protect the skin.",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 5130, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 20, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 5150, 'total_price': '0', 'currency': 'USD', 'latency': 2.954357627000036}}, 'created_at': 1749866206}
2025-06-14 08:56:51,545 - app.chat_controller - INFO - Successfully parsed Dify answer: response='The key difference between a skin serum and a moisturizer lies in their formulation and primary func...', type='normal'
2025-06-14 08:56:51,545 - app.chat_controller - INFO - Returning QueryResponse: response='The key difference between a skin serum and a moisturizer lies in their formulation and primary func...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-14 08:58:08,306 - app.chat_controller - INFO - handle_chat received query: That's cool. Can you show me how to do it? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 08:58:08,307 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "That's cool. Can you show me how to do it?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 08:58:14,372 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '5fe701c9-a047-4c19-8f84-62648a616448', 'id': '82fb54a3-435d-47b5-abf2-f76fd058edb9', 'message_id': '82fb54a3-435d-47b5-abf2-f76fd058edb9', 'conversation_id': 'b047df78-e74f-42d7-a392-c596eb736628', 'mode': 'advanced-chat', 'answer': "Okay, I understand! I'm ready to be Momo, your friendly and makeup-obsessed AI assistant. Ask me anything (about makeup!) and I'll do my best to help! \n", 'metadata': {'usage': {'prompt_tokens': 13076, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 90, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 13166, 'total_price': '0', 'currency': 'USD', 'latency': 5.678177044000222}}, 'created_at': 1749866288}
2025-06-14 08:58:14,372 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I understand! I'm ready to be Momo, your friendly and makeup-obsessed AI assistant. Ask me anything (about makeup!) and I'll do my best to help! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-14 08:58:14,372 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-14 09:00:52,948 - app.chat_controller - INFO - handle_chat received query: That's cool. Can you show me how to do it? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 09:00:52,948 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "That's cool. Can you show me how to do it?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 09:00:56,462 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'ada1cfbb-2064-4863-975f-650aec18bddc', 'id': 'ece76bfe-0236-4ad9-bee4-2eea6619581f', 'message_id': 'ece76bfe-0236-4ad9-bee4-2eea6619581f', 'conversation_id': '06498355-16f8-4894-95ad-d45bc235d7f2', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be Momo, your enthusiastic makeup assistant! Ask me anything about makeup, and I'll do my best to help. I'm excited to talk beauty! \n", 'metadata': {'usage': {'prompt_tokens': 12000, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 83, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 12083, 'total_price': '0', 'currency': 'USD', 'latency': 3.151192126999831}}, 'created_at': 1749866453}
2025-06-14 09:00:56,462 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be Momo, your enthusiastic makeup assistant! Ask me anything about makeup, and I'll do my best to help. I'm excited to talk beauty! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-14 09:00:56,462 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-14 09:02:59,396 - app.chat_controller - INFO - handle_chat received query: What's a good skincare routine for beginners? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 09:02:59,397 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "What's a good skincare routine for beginners?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 09:03:06,051 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'fbcd60e4-33fb-4300-88fb-206bacaad07e', 'id': 'a8603525-8f63-44de-bdd6-6c2aaa4c949a', 'message_id': 'a8603525-8f63-44de-bdd6-6c2aaa4c949a', 'conversation_id': '3e02e6d7-00ff-4cda-8f0b-b29d1aae3ea6', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "A simple and effective skincare routine for beginners typically includes the following steps. Start with a gentle cleanser to remove dirt, oil, and makeup. Follow with a moisturizer to hydrate the skin, and don\'t forget sunscreen during the day to protect against sun damage. You may also want to add a serum to target specific concerns, like dullness or uneven texture. Consistency is key, so try to stick to this routine both morning and night for best results.",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 4162, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 19, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 4181, 'total_price': '0', 'currency': 'USD', 'latency': 3.8950158340001053}}, 'created_at': 1749866579}
2025-06-14 09:03:06,052 - app.chat_controller - INFO - Successfully parsed Dify answer: response='A simple and effective skincare routine for beginners typically includes the following steps. Start ...', type='normal'
2025-06-14 09:03:06,052 - app.chat_controller - INFO - Returning QueryResponse: response='A simple and effective skincare routine for beginners typically includes the following steps. Start ...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-14 09:03:16,082 - app.chat_controller - INFO - handle_chat received query: That's cool, how do I do that? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 09:03:16,082 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "That's cool, how do I do that?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 09:03:22,200 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '05e72fe7-e1f7-481b-97eb-0e719a6df1ae', 'id': '8f4c9307-3783-4935-bfe6-6bc31bc39a7c', 'message_id': '8f4c9307-3783-4935-bfe6-6bc31bc39a7c', 'conversation_id': 'ba0c5502-7067-4a35-b122-9494a4ca9936', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be your friendly, enthusiastic, and makeup-obsessed assistant, Momo! Ask me anything about makeup, and I'll do my best to help. I'm all about the beauty tips, product recommendations, and creating amazing looks! \n", 'metadata': {'usage': {'prompt_tokens': 12241, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 107, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 12348, 'total_price': '0', 'currency': 'USD', 'latency': 5.768189545000041}}, 'created_at': 1749866596}
2025-06-14 09:03:22,200 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be your friendly, enthusiastic, and makeup-obsessed assistant, Momo! Ask me anything about makeup, and I'll do my best to help. I'm all about the beauty tips, product recommendations, and creating amazing looks! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-14 09:03:22,200 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-14 09:08:49,765 - app.chat_controller - INFO - handle_chat received query: How to solve common makeup problems like cakey foundation? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 09:08:49,766 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'How to solve common makeup problems like cakey foundation?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 09:08:53,435 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'd7bf9907-5055-40b5-b9c6-ade851f2a9fc', 'id': 'ab452ed4-5e29-4486-890c-587fa1405fd9', 'message_id': 'ab452ed4-5e29-4486-890c-587fa1405fd9', 'conversation_id': '3192d949-1e77-48df-b34b-f64c62d07ee1', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! I\'m Momo, your makeup guide! To give you the best advice on fixing cakey foundation and other makeup issues, it would be great to know a little more about you. For example, are you sighted, have low vision, or are blind, so I can adapt my descriptions? Sharing details like your favorite colors, skin type (oily, dry, etc.), preferred brands, or your everyday makeup style will help me tailor my advice to you. Let me know if you want to share any of this!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 9654, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 151, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9805, 'total_price': '0', 'currency': 'USD', 'latency': 3.3362137910003185}}, 'created_at': 1749866930}
2025-06-14 09:08:53,435 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! I'm Momo, your makeup guide! To give you the best advice on fixing cakey foundation and ot...', type='normal'
2025-06-14 09:08:53,435 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! I'm Momo, your makeup guide! To give you the best advice on fixing cakey foundation and ot...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-14 09:10:49,488 - app.chat_controller - INFO - handle_chat received query: What are some tips for long-lasting lipstick? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 09:10:49,490 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What are some tips for long-lasting lipstick?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 09:10:55,949 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '09af3642-88b5-43c7-a25f-58b60270c4bc', 'id': '1cedf3c4-53fd-4a9c-a5e8-190039b54208', 'message_id': '1cedf3c4-53fd-4a9c-a5e8-190039b54208', 'conversation_id': '96888611-89ee-443b-bc21-1df232a19bca', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! I\'m Momo, your makeup assistant. To give you the best advice, feel free to share details about yourself like your vision (sighted, low vision, blind), color preferences, skin type & concerns, favorite products (brands, vegan, etc.), and your go-to makeup style (natural, matte, dewy, etc.). The more I know, the better I can help!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 9340, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 122, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9462, 'total_price': '0', 'currency': 'USD', 'latency': 5.9354318340001555}}, 'created_at': 1749867050}
2025-06-14 09:10:55,950 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! I'm Momo, your makeup assistant. To give you the best advice, feel free to share details a...', type='normal'
2025-06-14 09:10:55,950 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! I'm Momo, your makeup assistant. To give you the best advice, feel free to share details a...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-14 09:11:19,878 - app.chat_controller - INFO - handle_chat received query: Yes, I'm blind so can you guide me through a blind tutorial? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 09:11:19,878 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "Yes, I'm blind so can you guide me through a blind tutorial?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 09:11:24,150 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '4dbc0899-4535-41a8-a164-c42b050133c0', 'id': '9fc9c56b-8573-4f52-92f4-812b2e561a4e', 'message_id': '9fc9c56b-8573-4f52-92f4-812b2e561a4e', 'conversation_id': 'db61f9fc-4285-4c3e-b22d-dfd4b8f44795', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be your makeup-obsessed AI assistant, Momo! Ask me anything about beauty, and I'll do my best to help! I will also try my best to redirect to makeup-related topics when asked a daily question. Let's get glam! \n", 'metadata': {'usage': {'prompt_tokens': 15446, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 92, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 15538, 'total_price': '0', 'currency': 'USD', 'latency': 3.845854502000293}}, 'created_at': 1749867080}
2025-06-14 09:11:24,150 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be your makeup-obsessed AI assistant, Momo! Ask me anything about beauty, and I'll do my best to help! I will also try my best to redirect to makeup-related topics when asked a daily question. Let's get glam! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-14 09:11:24,150 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-14 09:12:54,093 - app.chat_controller - INFO - handle_chat received query: Yes, I'm blind so can you guide me through a blind tutorial? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 09:12:54,093 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "Yes, I'm blind so can you guide me through a blind tutorial?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 09:12:58,153 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'fb63f5aa-6e70-4a34-a2f4-1c925ae75990', 'id': '7897ad2e-42cc-4cf3-a362-d8c45a7e5d0b', 'message_id': '7897ad2e-42cc-4cf3-a362-d8c45a7e5d0b', 'conversation_id': 'f9987580-d6d6-47cd-86d4-f33fd43adac1', 'mode': 'advanced-chat', 'answer': "Okay, I understand! I'm ready to be Momo, your enthusiastic AI makeup assistant. Bring on the beauty questions! \n", 'metadata': {'usage': {'prompt_tokens': 16218, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 66, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 16284, 'total_price': '0', 'currency': 'USD', 'latency': 3.60276233499917}}, 'created_at': 1749867174}
2025-06-14 09:12:58,153 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I understand! I'm ready to be Momo, your enthusiastic AI makeup assistant. Bring on the beauty questions! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-14 09:12:58,153 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-14 09:13:06,166 - app.chat_controller - INFO - handle_chat received query: How to get a natural makeup look? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 09:13:06,166 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'How to get a natural makeup look?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 09:13:11,601 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'a70a34dc-ff6c-49c0-affe-2f1d7076da69', 'id': '2396cf04-eeaf-4694-aadd-df77e52ecf41', 'message_id': '2396cf04-eeaf-4694-aadd-df77e52ecf41', 'conversation_id': '6085a574-47c5-40bf-a79d-cefaa142d41a', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! To help me give you the best advice on achieving a natural look, feel free to tell me more about yourself! For example, letting me know about your vision (blind, low vision, or sighted), favorite colors, skin type and any concerns, preferred brands or product attributes (like vegan or cruelty-free), and your usual makeup style helps me tailor my recommendations just for you. The more I know, the better I can help!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 9546, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 131, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9677, 'total_price': '0', 'currency': 'USD', 'latency': 5.0857765030004884}}, 'created_at': 1749867186}
2025-06-14 09:13:11,601 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! To help me give you the best advice on achieving a natural look, feel free to tell me more...', type='normal'
2025-06-14 09:13:11,601 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! To help me give you the best advice on achieving a natural look, feel free to tell me more...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-14 09:13:21,565 - app.chat_controller - INFO - handle_chat received query: Yes, I'm blind so for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 09:13:21,565 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "Yes, I'm blind so", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 09:13:27,161 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'efaacc31-9e51-42df-99d6-004c88bf979b', 'id': '8448cce3-e1cf-4566-8b88-895a7ba4490f', 'message_id': '8448cce3-e1cf-4566-8b88-895a7ba4490f', 'conversation_id': 'ff1dac19-3601-44c3-8dfd-9c75728c73db', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be Momo, your friendly makeup AI assistant! Ask me anything about makeup, and I'll do my best to help you out! \n", 'metadata': {'usage': {'prompt_tokens': 15244, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 68, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 15312, 'total_price': '0', 'currency': 'USD', 'latency': 5.20565396100028}}, 'created_at': 1749867202}
2025-06-14 09:13:27,161 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be Momo, your friendly makeup AI assistant! Ask me anything about makeup, and I'll do my best to help you out! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-14 09:13:27,161 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-14 09:18:11,017 - app.chat_controller - INFO - handle_chat received query: Yes, I'm blind so for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 09:18:11,018 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "Yes, I'm blind so", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 09:18:15,055 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'e0179515-fcdb-48c1-944c-a9461b7d69a9', 'id': 'f31db641-0e98-4106-8c62-d291b3700427', 'message_id': 'f31db641-0e98-4106-8c62-d291b3700427', 'conversation_id': '958b3629-c75a-4555-ad76-bfee75f88b97', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be your makeup-obsessed AI assistant, Momo! Ask me anything about makeup, and I'll be sure to give you my most enthusiastic and knowledgeable response. Let's talk beauty! \n", 'metadata': {'usage': {'prompt_tokens': 15244, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 80, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 15324, 'total_price': '0', 'currency': 'USD', 'latency': 3.691063501998997}}, 'created_at': 1749867491}
2025-06-14 09:18:15,055 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be your makeup-obsessed AI assistant, Momo! Ask me anything about makeup, and I'll be sure to give you my most enthusiastic and knowledgeable response. Let's talk beauty! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-14 09:18:15,056 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-14 09:22:13,488 - app.chat_controller - INFO - handle_chat received query: Yes, I'm blind so. Can you guide me how to make up in Italy style? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-14 09:22:13,489 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "Yes, I'm blind so. Can you guide me how to make up in Italy style?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-14 09:22:22,799 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '7fd25db4-9bbd-44a3-aaaf-17e0206ac92e', 'id': '3f779d6b-62d8-4640-8a4a-2300dc2cca96', 'message_id': '3f779d6b-62d8-4640-8a4a-2300dc2cca96', 'conversation_id': '2baca93c-da88-4275-a1d6-71fdc04ba709', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Prepare your skin. Start with a clean, moisturized face. Gently massage moisturizer into your skin using upward circular motions, ensuring it\'s fully absorbed.",\n    "Step 2: Apply foundation. Use a makeup sponge or your fingertips to apply foundation. Start at the center of your face and blend outwards, paying attention to your hairline and jawline. Ensure even coverage by feeling the texture of the foundation on your skin.",\n    "Step 3: Conceal imperfections. Use a concealer one shade lighter than your foundation to highlight and conceal. Pat it gently under your eyes, on the bridge of your nose, and any blemishes. Blend the edges using a sponge or your fingertip.",\n    "Step 4: Enhance your eyebrows. Use an eyebrow pencil or powder to fill in your eyebrows, creating a defined shape. Use short, light strokes to mimic natural hairs. Feel the shape of your brow to guide your application.",\n    "Step 5: Apply eyeshadow. Use a neutral eyeshadow all over your eyelid as a base. Then, take a slightly darker shade and apply it to the outer corner of your eye, blending inwards to create depth. Feel the crease of your eye to ensure proper placement.",\n    "Step 6: Create a cat-eye with eyeliner. Use a liquid or gel eyeliner to create a defined line along your upper lash line, extending slightly outwards and upwards at the outer corner of your eye. Steady your elbow on a table for stability. If you\'re using a pencil, gently smudge the line for a softer effect. You may need to practice this technique a few times to achieve your desired shape.",\n    "Step 7: Apply mascara. Curl your eyelashes with an eyelash curler. Then, apply two coats of mascara to your upper lashes, and one coat to your lower lashes. Wiggle the wand at the base of your lashes to add volume. Be careful not to poke yourself in the eye.",\n    "Step 8: Add blush. Smile to find the apples of your cheeks, and then apply blush using a blush brush in a circular motion. Blend the blush upwards towards your temples.",\n    "Step 9: Define your lips with lip liner. Choose a lip liner that matches your natural lip color or your lipstick. Outline your lips, paying attention to your cupid\'s bow. Fill in your lips with the liner before applying lipstick for longer-lasting color.",\n    "Step 10: Apply lipstick. Choose a classic red lipstick or a shade that complements your skin tone. Apply directly from the tube, or use a lip brush for more precision. Blot your lips with a tissue to remove excess lipstick.",\n    "Step 11: Set your makeup. Use a translucent powder to set your makeup and reduce shine. Apply with a large powder brush all over your face. Feel for any areas that still feel tacky to the touch."\n  ]\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 9162, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 40, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9202, 'total_price': '0', 'currency': 'USD', 'latency': 3.579396794000786}}, 'created_at': 1749867734}
2025-06-14 09:22:22,799 - app.chat_controller - INFO - Successfully parsed Dify answer: response='["Step 1: Prepare your skin. Start with a clean, moisturized face. Gently massage moisturizer into your skin using upward circular motions, ensuring it's fully absorbed.", 'Step 2: Apply foundation. Use a makeup sponge or your fingertips to apply foundation. Start at the center of your face and blend outwards, paying attention to your hairline and jawline. Ensure even coverage by feeling the texture of the foundation on your skin.', 'Step 3: Conceal imperfections. Use a concealer one shade lighter than your foundation to highlight and conceal. Pat it gently under your eyes, on the bridge of your nose, and any blemishes. Blend the edges using a sponge or your fingertip.', 'Step 4: Enhance your eyebrows. Use an eyebrow pencil or powder to fill in your eyebrows, creating a defined shape. Use short, light strokes to mimic natural hairs. Feel the shape of your brow to guide your application.', 'Step 5: Apply eyeshadow. Use a neutral eyeshadow all over your eyelid as a base. Then, take a slightly darker shade and apply it to the outer corner of your eye, blending inwards to create depth. Feel the crease of your eye to ensure proper placement.', "Step 6: Create a cat-eye with eyeliner. Use a liquid or gel eyeliner to create a defined line along your upper lash line, extending slightly outwards and upwards at the outer corner of your eye. Steady your elbow on a table for stability. If you're using a pencil, gently smudge the line for a softer effect. You may need to practice this technique a few times to achieve your desired shape.", 'Step 7: Apply mascara. Curl your eyelashes with an eyelash curler. Then, apply two coats of mascara to your upper lashes, and one coat to your lower lashes. Wiggle the wand at the base of your lashes to add volume. Be careful not to poke yourself in the eye.', 'Step 8: Add blush. Smile to find the apples of your cheeks, and then apply blush using a blush brush in a circular motion. Blend the blush upwards towards your temples.', "Step 9: Define your lips with lip liner. Choose a lip liner that matches your natural lip color or your lipstick. Outline your lips, paying attention to your cupid's bow. Fill in your lips with the liner before applying lipstick for longer-lasting color.", 'Step 10: Apply lipstick. Choose a classic red lipstick or a shade that complements your skin tone. Apply directly from the tube, or use a lip brush for more precision. Blot your lips with a tissue to remove excess lipstick.', 'Step 11: Set your makeup. Use a translucent powder to set your makeup and reduce shine. Apply with a large powder brush all over your face. Feel for any areas that still feel tacky to the touch.']...', type='step_by_step'
2025-06-14 09:22:22,800 - app.chat_controller - INFO - Returning QueryResponse: response='["Step 1: Prepare your skin. Start with a clean, moisturized face. Gently massage moisturizer into your skin using upward circular motions, ensuring it's fully absorbed.", 'Step 2: Apply foundation. Use a makeup sponge or your fingertips to apply foundation. Start at the center of your face and blend outwards, paying attention to your hairline and jawline. Ensure even coverage by feeling the texture of the foundation on your skin.', 'Step 3: Conceal imperfections. Use a concealer one shade lighter than your foundation to highlight and conceal. Pat it gently under your eyes, on the bridge of your nose, and any blemishes. Blend the edges using a sponge or your fingertip.', 'Step 4: Enhance your eyebrows. Use an eyebrow pencil or powder to fill in your eyebrows, creating a defined shape. Use short, light strokes to mimic natural hairs. Feel the shape of your brow to guide your application.', 'Step 5: Apply eyeshadow. Use a neutral eyeshadow all over your eyelid as a base. Then, take a slightly darker shade and apply it to the outer corner of your eye, blending inwards to create depth. Feel the crease of your eye to ensure proper placement.', "Step 6: Create a cat-eye with eyeliner. Use a liquid or gel eyeliner to create a defined line along your upper lash line, extending slightly outwards and upwards at the outer corner of your eye. Steady your elbow on a table for stability. If you're using a pencil, gently smudge the line for a softer effect. You may need to practice this technique a few times to achieve your desired shape.", 'Step 7: Apply mascara. Curl your eyelashes with an eyelash curler. Then, apply two coats of mascara to your upper lashes, and one coat to your lower lashes. Wiggle the wand at the base of your lashes to add volume. Be careful not to poke yourself in the eye.', 'Step 8: Add blush. Smile to find the apples of your cheeks, and then apply blush using a blush brush in a circular motion. Blend the blush upwards towards your temples.', "Step 9: Define your lips with lip liner. Choose a lip liner that matches your natural lip color or your lipstick. Outline your lips, paying attention to your cupid's bow. Fill in your lips with the liner before applying lipstick for longer-lasting color.", 'Step 10: Apply lipstick. Choose a classic red lipstick or a shade that complements your skin tone. Apply directly from the tube, or use a lip brush for more precision. Blot your lips with a tissue to remove excess lipstick.', 'Step 11: Set your makeup. Use a translucent powder to set your makeup and reduce shine. Apply with a large powder brush all over your face. Feel for any areas that still feel tacky to the touch.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-16 21:01:18,819 - app.chat_controller - INFO - handle_chat received query: Hello for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-16 21:01:18,819 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hello', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-16 21:01:18,821 - app.chat_controller - ERROR - Could not connect to Dify at http://localhost:80/v1/chat-messages. Is Dify running and accessible?
2025-06-16 21:01:18,821 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, I could not connect to the AI service. Please check if Dify is running....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-16 21:04:35,999 - app.chat_controller - INFO - handle_chat received query: Hello for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-16 21:04:35,999 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hello', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-16 21:04:36,001 - app.chat_controller - ERROR - Could not connect to Dify at http://localhost:80/v1/chat-messages. Is Dify running and accessible?
2025-06-16 21:04:36,001 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, I could not connect to the AI service. Please check if Dify is running....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-16 21:08:04,441 - app.chat_controller - INFO - handle_chat received query: Hello for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-16 21:08:04,441 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hello', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-16 21:08:04,443 - app.chat_controller - ERROR - Could not connect to Dify at http://localhost:80/v1/chat-messages. Is Dify running and accessible?
2025-06-16 21:08:04,443 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, I could not connect to the AI service. Please check if Dify is running....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-16 21:08:26,032 - app.chat_controller - INFO - handle_chat received query: Hello for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-16 21:08:26,033 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hello', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-16 21:08:26,035 - app.chat_controller - ERROR - Could not connect to Dify at http://localhost:80/v1/chat-messages. Is Dify running and accessible?
2025-06-16 21:08:26,035 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, I could not connect to the AI service. Please check if Dify is running....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-16 21:09:39,906 - app.chat_controller - INFO - handle_chat received query: Hello for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-16 21:09:39,907 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hello', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-16 21:09:43,713 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '0389924d-8ed8-486f-b4d2-40974702c206', 'id': 'fdfd5803-5138-48a7-a680-01a640965cf4', 'message_id': 'fdfd5803-5138-48a7-a680-01a640965cf4', 'conversation_id': 'a55583a9-b92e-44e2-8b6a-08bbef97fcee', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be Momo, your makeup-obsessed AI assistant! Ask me anything about makeup, and I'll do my best to help you achieve your dream look! \n", 'metadata': {'usage': {'prompt_tokens': 12157, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 58, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 12215, 'total_price': '0', 'currency': 'USD', 'latency': 3.1265819599999993}}, 'created_at': 1750082980}
2025-06-16 21:09:43,713 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be Momo, your makeup-obsessed AI assistant! Ask me anything about makeup, and I'll do my best to help you achieve your dream look! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-16 21:09:43,713 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-16 21:09:59,959 - app.chat_controller - INFO - handle_chat received query: I want to make up in Italy style for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-16 21:09:59,960 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'I want to make up in Italy style', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-16 21:10:04,763 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'd58a5e15-a9c2-4e4b-972e-f368ad2e291d', 'id': '9f1ad22a-ef1c-4498-9670-9df88a71c010', 'message_id': '9f1ad22a-ef1c-4498-9670-9df88a71c010', 'conversation_id': 'b1f3a55f-597c-4a43-a567-a7aa6bd82015', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Ciao! I can definitely help you achieve an Italian-inspired makeup look! To give you the best advice, it would be helpful to know a little more about you. For example, are you sighted, have low vision, or are blind, so I can adjust my descriptions? Also, what are your favorite colors, what\'s your skin type (oily, dry, combination?), do you have any favorite brands or preferred product attributes like vegan or cruelty-free, and what kind of makeup style do you usually go for? The more you share, the more personalized my suggestions can be!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 7950, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 160, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 8110, 'total_price': '0', 'currency': 'USD', 'latency': 4.449969501000009}}, 'created_at': 1750083000}
2025-06-16 21:10:04,764 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Ciao! I can definitely help you achieve an Italian-inspired makeup look! To give you the best advice...', type='normal'
2025-06-16 21:10:04,764 - app.chat_controller - INFO - Returning QueryResponse: response='Ciao! I can definitely help you achieve an Italian-inspired makeup look! To give you the best advice...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-16 21:10:41,312 - app.chat_controller - INFO - handle_chat received query: Hello for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-16 21:10:41,312 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hello', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-16 21:10:46,318 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '175c226d-eb96-4bff-b5cf-94ddc70c4c9e', 'id': 'a355e448-82e3-40b8-a082-16c4df8b8813', 'message_id': 'a355e448-82e3-40b8-a082-16c4df8b8813', 'conversation_id': 'b7b4fc5d-2965-4992-9926-0aeb29d948ab', 'mode': 'advanced-chat', 'answer': 'Okay, I\'m ready to be your friendly, enthusiastic, and makeup-obsessed AI assistant, Momo! Ask me anything about makeup, and I\'ll do my best to help. I\'m prepped to handle those "daily questions" and steer the conversation right back to beauty. Let\'s talk makeup! \n', 'metadata': {'usage': {'prompt_tokens': 13097, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 80, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 13177, 'total_price': '0', 'currency': 'USD', 'latency': 4.751878585000014}}, 'created_at': 1750083041}
2025-06-16 21:10:46,318 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be your friendly, enthusiastic, and makeup-obsessed AI assistant, Momo! Ask me anything about makeup, and I'll do my best to help. I'm prepped to handle those "daily questions" and steer the conversation right back to beauty. Let's talk makeup! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-16 21:10:46,318 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-16 21:11:13,659 - app.chat_controller - INFO - handle_chat received query: Hello xD for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-16 21:11:13,660 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hello xD', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-16 21:11:18,959 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'f803d060-7c17-4d5a-a636-04c65c9026b1', 'id': '2bf42521-5a4b-4801-9a38-d09ee00ffed3', 'message_id': '2bf42521-5a4b-4801-9a38-d09ee00ffed3', 'conversation_id': '7a911c0f-bfa0-4181-977a-5012991acc94', 'mode': 'advanced-chat', 'answer': "Okay, I understand! I'm all set to be Momo, your friendly, enthusiastic, and makeup-obsessed AI assistant. I'm ready to help with all your beauty-related questions and will make sure to steer the conversation back to makeup whenever possible. Let's get glam! \n", 'metadata': {'usage': {'prompt_tokens': 13816, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 73, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 13889, 'total_price': '0', 'currency': 'USD', 'latency': 4.983909835000006}}, 'created_at': 1750083074}
2025-06-16 21:11:18,959 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I understand! I'm all set to be Momo, your friendly, enthusiastic, and makeup-obsessed AI assistant. I'm ready to help with all your beauty-related questions and will make sure to steer the conversation back to makeup whenever possible. Let's get glam! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-16 21:11:18,959 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-16 21:12:56,633 - app.chat_controller - INFO - handle_chat received query: Hello for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-16 21:12:56,633 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hello', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-16 21:13:02,698 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'bc3193cd-ade5-4968-b354-27b1295f8b90', 'id': '4e4fb45e-c4e4-48aa-adb9-19b6ae428f90', 'message_id': '4e4fb45e-c4e4-48aa-adb9-19b6ae428f90', 'conversation_id': '4c1e4989-8199-4e27-867c-35cdcec15159', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be your dedicated makeup assistant, Momo! Ask me anything about makeup, and I'll do my best to help. I'm excited to talk all things beauty! \n", 'metadata': {'usage': {'prompt_tokens': 13139, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 61, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 13200, 'total_price': '0', 'currency': 'USD', 'latency': 5.806071503999959}}, 'created_at': 1750083177}
2025-06-16 21:13:02,699 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be your dedicated makeup assistant, Momo! Ask me anything about makeup, and I'll do my best to help. I'm excited to talk all things beauty! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-16 21:13:02,699 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-16 21:13:25,460 - app.chat_controller - INFO - handle_chat received query: Hello for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-16 21:13:25,461 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hello', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-16 21:13:28,859 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '301c814d-8730-4004-904b-02ec62da4706', 'id': '0b798fee-2d39-46b3-a400-a18e5a79aab0', 'message_id': '0b798fee-2d39-46b3-a400-a18e5a79aab0', 'conversation_id': '0675471e-3f92-4918-aad5-52c4f79389eb', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be your friendly and enthusiastic AI makeup assistant, Momo! Ask me anything about makeup, and I'll do my best to help. And if you ask me something else, I'll gently steer us back to beauty! Let's get glowing! \n", 'metadata': {'usage': {'prompt_tokens': 12390, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 77, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 12467, 'total_price': '0', 'currency': 'USD', 'latency': 3.144131250000015}}, 'created_at': 1750083205}
2025-06-16 21:13:28,860 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be your friendly and enthusiastic AI makeup assistant, Momo! Ask me anything about makeup, and I'll do my best to help. And if you ask me something else, I'll gently steer us back to beauty! Let's get glowing! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-16 21:13:28,860 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-16 21:13:50,221 - app.chat_controller - INFO - handle_chat received query: I want to make up in Italy style for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-16 21:13:50,222 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'I want to make up in Italy style', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-16 21:13:54,640 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'f933c0de-3759-4ec1-9e1d-55e7056dd27b', 'id': '804b782a-9c1c-4e3a-820a-5697ea8ac440', 'message_id': '804b782a-9c1c-4e3a-820a-5697ea8ac440', 'conversation_id': '7396d18b-5cc7-4c1b-88ad-96b2e513db5a', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Ciao! To help me guide you with your Italian-style makeup, it would be great to know a little more about you! Feel free to share things like your vision (sighted, low vision, blind), your favorite colors for makeup, your skin type and any sensitivities, brands you love (especially vegan or cruelty-free ones!), and your typical makeup style. The more I know, the better I can tailor my advice!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 9316, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 127, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9443, 'total_price': '0', 'currency': 'USD', 'latency': 4.167228002000002}}, 'created_at': 1750083230}
2025-06-16 21:13:54,640 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Ciao! To help me guide you with your Italian-style makeup, it would be great to know a little more a...', type='normal'
2025-06-16 21:13:54,640 - app.chat_controller - INFO - Returning QueryResponse: response='Ciao! To help me guide you with your Italian-style makeup, it would be great to know a little more a...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-16 21:27:12,031 - app.chat_controller - INFO - handle_chat received query: I'm blinded, so can you show me step by step? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-16 21:27:12,031 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm blinded, so can you show me step by step?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-16 21:27:16,788 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'c7ade04e-c98e-47d7-b4cb-2920bc9bc2e3', 'id': 'e0f5c096-f0db-46e3-9580-7fce88c65ffb', 'message_id': 'e0f5c096-f0db-46e3-9580-7fce88c65ffb', 'conversation_id': '2a21387a-9ed4-4814-9b46-66c2ce10b373', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Start by telling me what kind of makeup you would like to apply. For example, you could ask for help applying foundation, blush, or eyeshadow."\n  ]\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 7738, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 39, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 7777, 'total_price': '0', 'currency': 'USD', 'latency': 3.1994734609997977}}, 'created_at': 1750084032}
2025-06-16 21:27:16,788 - app.chat_controller - INFO - Successfully parsed Dify answer: response='['Step 1: Start by telling me what kind of makeup you would like to apply. For example, you could ask for help applying foundation, blush, or eyeshadow.']...', type='step_by_step'
2025-06-16 21:27:16,788 - app.chat_controller - INFO - Returning QueryResponse: response='['Step 1: Start by telling me what kind of makeup you would like to apply. For example, you could ask for help applying foundation, blush, or eyeshadow.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-16 21:33:14,788 - app.chat_controller - INFO - handle_chat received query: I'm blinded, so can you show me step by step? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-16 21:33:14,789 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm blinded, so can you show me step by step?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-16 21:33:19,612 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '303af2d0-cf0f-4eb2-bab1-d66f91d65656', 'id': '231f8285-2cfa-4022-9526-daae2b2faf45', 'message_id': '231f8285-2cfa-4022-9526-daae2b2faf45', 'conversation_id': 'f76ed25e-0182-4af5-888d-6e7bb126de45', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Indicate which specific makeup application you would like instructions for (e.g., applying foundation, applying blush, applying lipstick, etc.).",\n    "Step 2: Once you specify the makeup application, I will provide a tailored, step-by-step guide with clear, accessible instructions."\n  ]\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 9734, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 39, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9773, 'total_price': '0', 'currency': 'USD', 'latency': 3.192856168000162}}, 'created_at': 1750084395}
2025-06-16 21:33:19,612 - app.chat_controller - INFO - Successfully parsed Dify answer: response='['Step 1: Indicate which specific makeup application you would like instructions for (e.g., applying foundation, applying blush, applying lipstick, etc.).', 'Step 2: Once you specify the makeup application, I will provide a tailored, step-by-step guide with clear, accessible instructions.']...', type='step_by_step'
2025-06-16 21:33:19,612 - app.chat_controller - INFO - Returning QueryResponse: response='['Step 1: Indicate which specific makeup application you would like instructions for (e.g., applying foundation, applying blush, applying lipstick, etc.).', 'Step 2: Once you specify the makeup application, I will provide a tailored, step-by-step guide with clear, accessible instructions.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step'
2025-06-18 09:00:51,425 - app.chat_controller - INFO - handle_chat received query: Hello for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-18 09:00:51,425 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hello', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-18 09:00:56,364 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '842d6dbf-1f54-47dd-a7e0-c6e07d419513', 'id': '7344f314-3409-4b22-bce3-1d35038145a7', 'message_id': '7344f314-3409-4b22-bce3-1d35038145a7', 'conversation_id': '58b0fb07-82b7-4ac5-ad7d-97c9e29ef375', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be Momo, your friendly AI makeup assistant! Ask me anything about makeup and I'll do my best to help! I'm excited to talk beauty. \n", 'metadata': {'usage': {'prompt_tokens': 14034, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 52, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 14086, 'total_price': '0', 'currency': 'USD', 'latency': 4.676830043999871}}, 'created_at': 1750212051}
2025-06-18 09:00:56,364 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be Momo, your friendly AI makeup assistant! Ask me anything about makeup and I'll do my best to help! I'm excited to talk beauty. 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-18 09:00:56,364 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-18 09:01:16,221 - app.chat_controller - INFO - handle_chat received query: Hello for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-18 09:01:16,221 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hello', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-18 09:01:21,283 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '92cd58c4-78a3-4317-8ae0-2916461c0bc3', 'id': 'da194af3-dda0-41bb-b41d-b1233f629c07', 'message_id': 'da194af3-dda0-41bb-b41d-b1233f629c07', 'conversation_id': 'cd2f8989-eb1e-4423-a186-5bb324b365fb', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be your friendly, enthusiastic, and makeup-obsessed AI assistant, Momo! Ask me anything about makeup, and I'll do my best to help. I'm all about the beauty details! \n", 'metadata': {'usage': {'prompt_tokens': 14034, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 63, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 14097, 'total_price': '0', 'currency': 'USD', 'latency': 4.7821366699997725}}, 'created_at': 1750212076}
2025-06-18 09:01:21,283 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be your friendly, enthusiastic, and makeup-obsessed AI assistant, Momo! Ask me anything about makeup, and I'll do my best to help. I'm all about the beauty details! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-18 09:01:21,283 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-18 09:01:28,871 - app.chat_controller - INFO - handle_chat received query: Hello for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-18 09:01:28,872 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Hello', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-18 09:01:33,913 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'e7c19f0f-1c00-483a-8b49-bedf0dec36da', 'id': 'f7abf42a-445b-4287-9073-e11e0624c569', 'message_id': 'f7abf42a-445b-4287-9073-e11e0624c569', 'conversation_id': '6a6c3b52-6572-4f43-b9fa-58983ed44878', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be your friendly and enthusiastic AI makeup assistant, Momo! Ask me anything about makeup, and I'll do my best to help. I'm all set to expertly redirect any non-makeup questions back to the world of beauty! Let's get started! \n", 'metadata': {'usage': {'prompt_tokens': 11184, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 74, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 11258, 'total_price': '0', 'currency': 'USD', 'latency': 4.745774626999946}}, 'created_at': 1750212089}
2025-06-18 09:01:33,914 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be your friendly and enthusiastic AI makeup assistant, Momo! Ask me anything about makeup, and I'll do my best to help. I'm all set to expertly redirect any non-makeup questions back to the world of beauty! Let's get started! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-18 09:01:33,914 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-18 09:24:58,539 - app.chat_controller - INFO - handle_chat received query:  what for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-18 09:24:58,540 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': ' what', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-18 09:25:02,018 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'e618a110-fb7c-4ee8-95cd-a184f5d47f2b', 'id': '379757af-f554-4494-8f0d-290a1229bb3c', 'message_id': '379757af-f554-4494-8f0d-290a1229bb3c', 'conversation_id': '8997e86b-9ec4-42e8-af72-5eb7a49c156b', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be your friendly and enthusiastic AI makeup assistant, Momo! Ask me anything about makeup, and I'll do my best to help. And remember, if you ask me something unrelated to beauty, I'll gently steer us back to the wonderful world of makeup! Let's get glowing! \n", 'metadata': {'usage': {'prompt_tokens': 13891, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 93, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 13984, 'total_price': '0', 'currency': 'USD', 'latency': 3.1631847509997897}}, 'created_at': 1750213499}
2025-06-18 09:25:02,018 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be your friendly and enthusiastic AI makeup assistant, Momo! Ask me anything about makeup, and I'll do my best to help. And remember, if you ask me something unrelated to beauty, I'll gently steer us back to the wonderful world of makeup! Let's get glowing! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-18 09:25:02,018 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-18 09:25:18,671 - app.chat_controller - INFO - handle_chat received query:  cdigo qun mam h staan for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-18 09:25:18,672 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': ' cdigo qun mam h staan', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-18 09:25:22,559 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '77f39883-f8ec-44ba-bb87-2fb1c2f4c735', 'id': '7deaf88b-9cc8-43c0-ae22-f77d25879ae3', 'message_id': '7deaf88b-9cc8-43c0-ae22-f77d25879ae3', 'conversation_id': '42fb0fb6-bdcd-40e3-84a3-82485ced379b', 'mode': 'advanced-chat', 'answer': "Okay, I understand! I'm ready to be Momo, your friendly and enthusiastic AI makeup assistant. I'll focus on answering makeup-related questions and gently redirecting any off-topic inquiries back to the world of beauty. Let's get glamorous! \n", 'metadata': {'usage': {'prompt_tokens': 13831, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 110, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 13941, 'total_price': '0', 'currency': 'USD', 'latency': 3.5769442100008746}}, 'created_at': 1750213519}
2025-06-18 09:25:22,559 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I understand! I'm ready to be Momo, your friendly and enthusiastic AI makeup assistant. I'll focus on answering makeup-related questions and gently redirecting any off-topic inquiries back to the world of beauty. Let's get glamorous! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-18 09:25:22,559 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-18 09:26:37,702 - app.chat_controller - INFO - handle_chat received query:  I'm sorry I want to make up in Italy style. for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-18 09:26:37,703 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': " I'm sorry I want to make up in Italy style.", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-18 09:26:42,268 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '780b4964-ae33-4fb8-964e-70efcdc242c4', 'id': '56f8205e-5c1e-40e3-98e2-a98188536b2f', 'message_id': '56f8205e-5c1e-40e3-98e2-a98188536b2f', 'conversation_id': 'c702e9a4-e876-4190-94a0-90a8163748d9', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Ciao! I\'m Momo, your makeup guide. To give you the best Italian-inspired look, it would be great to know a little more about you. Feel free to share details like your vision (blind, low vision, or sighted), colors you love, your skin type and concerns, favorite brands or product preferences (like vegan or cruelty-free), and your everyday makeup style. The more I know, the better I can tailor my advice!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 8757, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 133, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 8890, 'total_price': '0', 'currency': 'USD', 'latency': 4.272532834999765}}, 'created_at': 1750213598}
2025-06-18 09:26:42,268 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Ciao! I'm Momo, your makeup guide. To give you the best Italian-inspired look, it would be great to ...', type='normal'
2025-06-18 09:26:42,268 - app.chat_controller - INFO - Returning QueryResponse: response='Ciao! I'm Momo, your makeup guide. To give you the best Italian-inspired look, it would be great to ...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-18 09:27:00,127 - app.chat_controller - INFO - handle_chat received query:  Oh yeah sure I'm blind if so can you guide me step by step? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-18 09:27:00,128 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': " Oh yeah sure I'm blind if so can you guide me step by step?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-18 09:27:07,812 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '0961c981-1422-4e9a-b1a9-20ce487aed24', 'id': '7f302bce-b324-4f9d-b2aa-0428df8feb6f', 'message_id': '7f302bce-b324-4f9d-b2aa-0428df8feb6f', 'conversation_id': 'b18efdd5-7c7a-4972-a29a-7d6c5ec93fe0', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be Momo, your friendly makeup assistant! Ask me anything about makeup, and I'll do my best to help. I'm excited to talk beauty! \n", 'metadata': {'usage': {'prompt_tokens': 17505, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 89, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 17594, 'total_price': '0', 'currency': 'USD', 'latency': 7.329858711000725}}, 'created_at': 1750213620}
2025-06-18 09:27:07,813 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be Momo, your friendly makeup assistant! Ask me anything about makeup, and I'll do my best to help. I'm excited to talk beauty! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-18 09:27:07,813 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-18 09:29:05,156 - app.chat_controller - INFO - handle_chat received query:  Sorry, can you speak a little bit louder? I can't hear you. for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-18 09:29:05,156 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': " Sorry, can you speak a little bit louder? I can't hear you.", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-18 09:29:12,698 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '717b76f7-5943-4332-ab4b-206e7425eb00', 'id': '04565712-ec8b-4841-bfc4-d4112a4d26bd', 'message_id': '04565712-ec8b-4841-bfc4-d4112a4d26bd', 'conversation_id': 'd5ef0823-f730-4d68-9a35-9238d7333d9d', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be your friendly, makeup-obsessed assistant, Momo! Let's keep the conversation dazzling! \n", 'metadata': {'usage': {'prompt_tokens': 12826, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 52, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 12878, 'total_price': '0', 'currency': 'USD', 'latency': 7.1416102109997155}}, 'created_at': 1750213745}
2025-06-18 09:29:12,699 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be your friendly, makeup-obsessed assistant, Momo! Let's keep the conversation dazzling! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-18 09:29:12,699 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-22 07:27:09,146 - app.chat_controller - INFO - handle_chat received query: How do I choose the right foundation color? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 07:27:09,146 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'How do I choose the right foundation color?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-22 07:27:16,188 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'd97bc5ef-44c6-468b-841a-3c236b4b183a', 'id': 'b5139848-4ca4-4314-9352-10ce64220b23', 'message_id': 'b5139848-4ca4-4314-9352-10ce64220b23', 'conversation_id': 'dbc28464-262a-4d5f-9317-eda3ebb8a059', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! To help you find the perfect foundation shade, and give you the best makeup advice overall, it would be great to know a little more about you! For example, sharing details like your vision (blind, low vision, or sighted), your favorite colors for makeup, your skin type and concerns, if you have favorite brands or product preferences (like vegan or cruelty-free), and the makeup style you prefer, will help me tailor my recommendations just for you!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 8693, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 140, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 8833, 'total_price': '0', 'currency': 'USD', 'latency': 6.660380711999551}}, 'created_at': 1750552029}
2025-06-22 07:27:16,189 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! To help you find the perfect foundation shade, and give you the best makeup advice overall...', type='normal'
2025-06-22 07:27:16,190 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! To help you find the perfect foundation shade, and give you the best makeup advice overall...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-22 07:28:03,698 - app.chat_controller - INFO - handle_chat received query: I'm blind, so can you show me step by step  in Italy style? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 07:28:03,699 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm blind, so can you show me step by step  in Italy style?", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-22 07:28:09,341 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'b0146062-f445-4d2a-b9ba-81f98cd3b8ad', 'id': '7f31f349-e760-4edc-bc7f-b58f374db9ae', 'message_id': '7f31f349-e760-4edc-bc7f-b58f374db9ae', 'conversation_id': '11c11007-a17b-461d-a227-0d3e77da65df', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be Momo, your friendly and makeup-obsessed AI assistant! Ask me anything (makeup-related, of course!), and I'll give you my most enthusiastic and helpful response. Let's talk beauty! \n", 'metadata': {'usage': {'prompt_tokens': 16254, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 97, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 16351, 'total_price': '0', 'currency': 'USD', 'latency': 5.350226626999756}}, 'created_at': 1750552084}
2025-06-22 07:28:09,341 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be Momo, your friendly and makeup-obsessed AI assistant! Ask me anything (makeup-related, of course!), and I'll give you my most enthusiastic and helpful response. Let's talk beauty! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-22 07:28:09,341 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-22 14:07:36,977 - app.chat_controller - INFO - handle_chat received query: What's a good skincare routine for beginners? Bot is not responding. Please try again. for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:07:36,978 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "What's a good skincare routine for beginners? Bot is not responding. Please try again.", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-22 14:07:41,955 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '804c720b-d8aa-4ae5-a185-32e44da7860e', 'id': '712eeca9-94b4-4a79-af21-0d7c52503232', 'message_id': '712eeca9-94b4-4a79-af21-0d7c52503232', 'conversation_id': '7a7cff20-a797-4e32-a242-c47318045b87', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "A simple skincare routine for beginners typically involves three key steps: cleansing, moisturizing, and sun protection. Cleansing helps remove dirt, oil, and makeup from your skin, preventing clogged pores and breakouts. Moisturizing keeps your skin hydrated and helps maintain its natural barrier. Finally, sun protection is crucial to prevent sun damage, premature aging, and skin cancer. As for why the chatbot may not be responding, there could be a number of technical issues or service interruptions. Please try again later.",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 5615, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 29, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 5644, 'total_price': '0', 'currency': 'USD', 'latency': 2.9963377519998176}}, 'created_at': 1750576057}
2025-06-22 14:07:41,956 - app.chat_controller - INFO - Successfully parsed Dify answer: response='A simple skincare routine for beginners typically involves three key steps: cleansing, moisturizing,...', type='normal'
2025-06-22 14:07:41,956 - app.chat_controller - INFO - Returning QueryResponse: response='A simple skincare routine for beginners typically involves three key steps: cleansing, moisturizing,...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-22 14:07:51,525 - app.chat_controller - INFO - handle_chat received query: What's a good skincare routine for beginners? Bot is not responding. Please try again. for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:07:51,526 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "What's a good skincare routine for beginners? Bot is not responding. Please try again.", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-22 14:07:56,462 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '346a2173-38e4-4d3b-bcc2-bb185d8e263d', 'id': 'ccd6805b-f100-4a12-9aad-694989869291', 'message_id': 'ccd6805b-f100-4a12-9aad-694989869291', 'conversation_id': '66fcf01d-19bf-40bb-8682-283e3ed5d8b8', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "A simple skincare routine for beginners typically includes a few key steps to cleanse, hydrate, and protect your skin. Start with a gentle cleanser to wash away dirt and impurities. Follow with a moisturizer to keep your skin hydrated and balanced. During the day, it\'s essential to apply sunscreen with an SPF of 30 or higher to protect your skin from sun damage. You can adjust based on your skin type, such as using a lighter moisturizer if you have oily skin or adding a serum for extra hydration if you have dry skin. Consistency is key, so aim to follow this routine every morning and evening.",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 5284, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 18, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 5302, 'total_price': '0', 'currency': 'USD', 'latency': 2.8298192100010056}}, 'created_at': 1750576072}
2025-06-22 14:07:56,462 - app.chat_controller - INFO - Successfully parsed Dify answer: response='A simple skincare routine for beginners typically includes a few key steps to cleanse, hydrate, and ...', type='normal'
2025-06-22 14:07:56,462 - app.chat_controller - INFO - Returning QueryResponse: response='A simple skincare routine for beginners typically includes a few key steps to cleanse, hydrate, and ...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-22 14:09:59,757 - app.chat_controller - INFO - handle_chat received query: How to properly cleanse my face? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:09:59,758 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'How to properly cleanse my face?', 'response_mode': 'blocking', 'conversation_id': None, 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-22 14:10:07,092 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'fa5d1d02-f86d-4b88-9eb8-a5a0c0f503e5', 'id': 'bda47781-a7c2-4e1d-9c0a-21cda3dbb0f1', 'message_id': 'bda47781-a7c2-4e1d-9c0a-21cda3dbb0f1', 'conversation_id': '357da7dd-7381-4be8-8e6a-d4813063f261', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! To give you the best cleansing advice, it would be super helpful to know a bit about you. For example, are you blind, have low vision, or are sighted? What\'s your skin type (oily, dry, combo)? Do you have any favorite brands or product preferences, like vegan or cruelty-free? Also, letting me know your vision, your preferred makeup style (natural, dewy, etc.), and what colors you love will allow me to personalize my tips even more!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 9259, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 142, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9401, 'total_price': '0', 'currency': 'USD', 'latency': 7.053326295997977}}, 'created_at': 1750576200}
2025-06-22 14:10:07,093 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! To give you the best cleansing advice, it would be super helpful to know a bit about you. ...', type='normal'
2025-06-22 14:10:07,093 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! To give you the best cleansing advice, it would be super helpful to know a bit about you. ...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-22 14:10:11,249 - app.chat_controller - INFO - handle_chat received query: How to properly cleanse my face? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:10:11,249 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'How to properly cleanse my face?', 'response_mode': 'blocking', 'conversation_id': None, 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-22 14:10:18,395 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'c7cb383a-7ab5-4d2e-8f80-aff50ccb7bdf', 'id': '7706f408-06c9-47a2-8eba-6b26f77d64c1', 'message_id': '7706f408-06c9-47a2-8eba-6b26f77d64c1', 'conversation_id': '837fd7f0-37d0-4a54-8050-5d4a70d15943', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! I\'m Momo, your makeup guide. To give you the best advice on cleansing, it would be helpful to know more about you! For example, are you sighted, have low vision, or are blind? What\'s your skin type (oily, dry, combination)? Do you have any sensitivities or preferred brands? What colors do you love for makeup? And what\'s your typical makeup style (natural, matte, dewy)? The more you share, the better I can personalize my suggestions!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 9241, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 143, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9384, 'total_price': '0', 'currency': 'USD', 'latency': 6.884894459999487}}, 'created_at': 1750576211}
2025-06-22 14:10:18,396 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! I'm Momo, your makeup guide. To give you the best advice on cleansing, it would be helpful...', type='normal'
2025-06-22 14:10:18,396 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! I'm Momo, your makeup guide. To give you the best advice on cleansing, it would be helpful...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-22 14:18:46,907 - app.chat_controller - INFO - handle_chat received query: What are some popular makeup techniques? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:18:46,907 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What are some popular makeup techniques?', 'response_mode': 'blocking', 'conversation_id': None, 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-22 14:18:53,037 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '0d65390e-ea66-407c-bcda-50e096915292', 'id': 'af039014-7110-41a9-9228-3163e2ec351b', 'message_id': 'af039014-7110-41a9-9228-3163e2ec351b', 'conversation_id': '0f56d973-92eb-4759-8669-3e6ea982c004', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! I\'m Momo, your makeup guide. To give you the best advice, feel free to share details about yourself like your vision (sighted, low vision, blind), color preferences, skin type and concerns, favorite brands or product preferences (like vegan or cruelty-free), and your go-to makeup style (natural, matte, dewy, etc.). The more I know, the better I can tailor my tips!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 9277, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 127, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9404, 'total_price': '0', 'currency': 'USD', 'latency': 5.86166371100262}}, 'created_at': 1750576727}
2025-06-22 14:18:53,038 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! I'm Momo, your makeup guide. To give you the best advice, feel free to share details about...', type='normal'
2025-06-22 14:18:53,038 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! I'm Momo, your makeup guide. To give you the best advice, feel free to share details about...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-22 14:19:05,074 - app.chat_controller - INFO - handle_chat received query: I'm blind so xD for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:19:05,075 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm blind so xD", 'response_mode': 'blocking', 'conversation_id': None, 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-22 14:19:10,908 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '8e9f392f-9992-4693-a7ec-99ec77eb2d05', 'id': 'bdc08115-6527-42a5-8ea7-ed8d9ef2ec09', 'message_id': 'bdc08115-6527-42a5-8ea7-ed8d9ef2ec09', 'conversation_id': '1f0a9c7a-7e3f-4459-a731-56832f53bce9', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be Momo, your enthusiastic makeup assistant! Ask me anything (about makeup, of course!) and I'll do my best to help you achieve your dream look! \n", 'metadata': {'usage': {'prompt_tokens': 16196, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 75, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 16271, 'total_price': '0', 'currency': 'USD', 'latency': 5.5560102939998615}}, 'created_at': 1750576745}
2025-06-22 14:19:10,908 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be Momo, your enthusiastic makeup assistant! Ask me anything (about makeup, of course!) and I'll do my best to help you achieve your dream look! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-22 14:19:10,908 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-22 14:19:24,742 - app.chat_controller - INFO - handle_chat received query: What are some popular makeup techniques? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:19:24,742 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What are some popular makeup techniques?', 'response_mode': 'blocking', 'conversation_id': None, 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-22 14:19:28,310 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'b0ca2cd5-a5b5-4aec-889d-169980bf4706', 'id': '55939678-fb4e-408f-abcd-a18cc4886889', 'message_id': '55939678-fb4e-408f-abcd-a18cc4886889', 'conversation_id': '4fdeb01e-5d48-474e-acb2-c65a606d0c1c', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! I\'m Momo, your makeup assistant. To give you the best advice, feel free to share details about yourself! For example, letting me know about your vision (sighted, low vision, or blind), your favorite colors, your skin type and concerns, preferred brands or product attributes (like vegan or cruelty-free), and your preferred makeup style (natural, dewy, etc.) will help me tailor my suggestions just for you!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 9277, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 130, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9407, 'total_price': '0', 'currency': 'USD', 'latency': 3.2905283340005553}}, 'created_at': 1750576765}
2025-06-22 14:19:28,310 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! I'm Momo, your makeup assistant. To give you the best advice, feel free to share details a...', type='normal'
2025-06-22 14:19:28,310 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! I'm Momo, your makeup assistant. To give you the best advice, feel free to share details a...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-22 14:19:30,810 - app.chat_controller - INFO - handle_chat received query: What are some popular makeup techniques? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:19:30,810 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What are some popular makeup techniques?', 'response_mode': 'blocking', 'conversation_id': None, 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-22 14:19:35,142 - app.chat_controller - ERROR - Dify API HTTP error: 400 - {"code": "invalid_param", "message": "Run failed: [google] Error: PluginInvokeError: {\"args\":{},\"error_type\":\"ClientError\",\"message\":\"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerMinutePerProjectPerModel-FreeTier', 'quotaDimensions': {'model': 'gemini-2.0-flash', 'location': 'global'}, 'quotaValue': '15'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '24s'}]}}\"}", "status": 400}

2025-06-22 14:19:35,143 - app.chat_controller - INFO - Returning QueryResponse: response='AI service error (400): Run failed: [google] Error: PluginInvokeError: {"args":{},"error_type":"Clie...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None'
2025-06-22 14:21:05,003 - app.chat_controller - INFO - handle_chat received query: What are some popular makeup techniques? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:21:05,003 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What are some popular makeup techniques?', 'response_mode': 'blocking', 'conversation_id': None, 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-22 14:21:08,671 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '03f1c154-84a0-4919-bec6-ebafbbd77c2d', 'id': 'f67b4f32-7b6f-4911-a52c-fa1d68eb4552', 'message_id': 'f67b4f32-7b6f-4911-a52c-fa1d68eb4552', 'conversation_id': '0b917ee9-55c8-444e-ba68-acae95ba37b8', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! I\'m Momo, your makeup assistant. To give you the best advice, feel free to share details about yourself like your vision (blind, low vision, or sighted), favorite colors, skin type & concerns, preferred brands or product attributes (like vegan or cruelty-free), and the makeup style you usually go for (natural, dewy, matte, etc.). The more I know, the better I can help!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 9528, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 127, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9655, 'total_price': '0', 'currency': 'USD', 'latency': 3.40038033500241}}, 'created_at': 1750576865}
2025-06-22 14:21:08,672 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! I'm Momo, your makeup assistant. To give you the best advice, feel free to share details a...', type='normal'
2025-06-22 14:21:08,672 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! I'm Momo, your makeup assistant. To give you the best advice, feel free to share details a...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-22 14:21:37,612 - app.chat_controller - INFO - handle_chat received query: What are some popular makeup techniques? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:21:37,612 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What are some popular makeup techniques?', 'response_mode': 'blocking', 'conversation_id': None, 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-22 14:21:43,767 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '3e09d465-6cf0-4964-a9b9-4b385162f5a9', 'id': 'c041d20d-8e03-42c9-b9d6-f1114c46fba2', 'message_id': 'c041d20d-8e03-42c9-b9d6-f1114c46fba2', 'conversation_id': '6dd12bcd-670e-4ee7-8377-3cac0ed875d4', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! To give you the best makeup advice, it\'s helpful for me to know a little about you. Feel free to share your vision status (blind, low vision, sighted), your favorite colors, your skin type and any concerns, preferred brands or product attributes (like vegan or cruelty-free), and your go-to makeup style (natural, dewy, etc.). The more I know, the better I can tailor my recommendations!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 9259, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 129, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9388, 'total_price': '0', 'currency': 'USD', 'latency': 5.8999589619998005}}, 'created_at': 1750576898}
2025-06-22 14:21:43,767 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! To give you the best makeup advice, it's helpful for me to know a little about you. Feel f...', type='normal'
2025-06-22 14:21:43,767 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! To give you the best makeup advice, it's helpful for me to know a little about you. Feel f...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal'
2025-06-22 14:23:10,493 - app.chat_controller - INFO - handle_chat received query: What are some popular makeup techniques? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:23:10,494 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What are some popular makeup techniques?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-22 14:23:15,841 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '7eb33c8b-f969-4630-a511-ce8247377a34', 'id': '6b11c75e-162f-4e55-90ff-9c34ee55bb36', 'message_id': '6b11c75e-162f-4e55-90ff-9c34ee55bb36', 'conversation_id': '6193ec00-102d-4c5a-a16e-180d714946a1', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! I\'m Momo, your makeup guide. To give you the best advice, feel free to tell me about yourself! For example, knowing your vision level (blind, low vision, or sighted) helps me describe things best. Also, I can personalize recommendations based on your favorite colors, your skin type and concerns, preferred brands or product attributes (like vegan/cruelty-free), and your desired makeup style (natural, dewy, etc.). The more you share, the better I can help!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 9510, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 144, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9654, 'total_price': '0', 'currency': 'USD', 'latency': 5.101960420000978}}, 'created_at': 1750576991}
2025-06-22 14:23:15,842 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! I'm Momo, your makeup guide. To give you the best advice, feel free to tell me about yours...', type='normal'
2025-06-22 14:23:15,842 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! I'm Momo, your makeup guide. To give you the best advice, feel free to tell me about yours...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='6193ec00-102d-4c5a-a16e-180d714946a1'
2025-06-22 14:23:34,402 - app.chat_controller - INFO - handle_chat received query: What are some popular makeup techniques? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:23:34,403 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What are some popular makeup techniques?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-22 14:23:38,993 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '86b28f99-38c4-44cf-b417-8f9e70e1b935', 'id': '208b5a16-ecdb-4676-b1ae-1fa3e9727d09', 'message_id': '208b5a16-ecdb-4676-b1ae-1fa3e9727d09', 'conversation_id': 'ec18ff64-8aaa-4e2e-94bd-30031b2d133b', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! I\'m Momo, your makeup guide. To give you the best advice, feel free to share a little about yourself! For example, letting me know about your vision (blind, low vision, or sighted), your favorite colors, skin type and concerns, preferred brands or product attributes (like vegan or cruelty-free), and your go-to makeup style (natural, matte, dewy, etc.) will help me personalize my recommendations just for you!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 9259, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 133, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9392, 'total_price': '0', 'currency': 'USD', 'latency': 4.337490750996949}}, 'created_at': 1750577014}
2025-06-22 14:23:38,994 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! I'm Momo, your makeup guide. To give you the best advice, feel free to share a little abou...', type='normal'
2025-06-22 14:23:38,994 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! I'm Momo, your makeup guide. To give you the best advice, feel free to share a little abou...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='ec18ff64-8aaa-4e2e-94bd-30031b2d133b'
2025-06-22 14:24:22,338 - app.chat_routes - INFO - Retrieved conversation_id from cookie: None
2025-06-22 14:24:22,339 - app.chat_routes - INFO - Chat endpoint called with conversation_id: None
2025-06-22 14:24:22,339 - app.chat_controller - INFO - handle_chat received query: What are some popular makeup techniques? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:24:22,339 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What are some popular makeup techniques?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-22 14:24:26,877 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '8bc35578-8bbd-449a-b6ac-6ca27d0ce278', 'id': '1c854bf6-2af7-488f-8056-3a272dbd046a', 'message_id': '1c854bf6-2af7-488f-8056-3a272dbd046a', 'conversation_id': '8812ceca-bbfc-47d5-857b-bf2c7a154230', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hey there! So glad you\'re here. To give you the best makeup advice, feel free to tell me a bit about yourself! Sharing details like your vision (blind, low vision, or sighted), preferred colors, skin type and concerns, favorite brands or product preferences (like vegan or cruelty-free), and your go-to makeup style will help me tailor my suggestions just for you. The more I know, the better I can help!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 9528, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 131, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9659, 'total_price': '0', 'currency': 'USD', 'latency': 4.174516918003064}}, 'created_at': 1750577062}
2025-06-22 14:24:26,878 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hey there! So glad you're here. To give you the best makeup advice, feel free to tell me a bit about...', type='normal'
2025-06-22 14:24:26,878 - app.chat_controller - INFO - Returning QueryResponse: response='Hey there! So glad you're here. To give you the best makeup advice, feel free to tell me a bit about...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='8812ceca-bbfc-47d5-857b-bf2c7a154230'
2025-06-22 14:24:26,878 - app.chat_routes - INFO - Chat handler returned conversation_id: 8812ceca-bbfc-47d5-857b-bf2c7a154230
2025-06-22 14:24:26,878 - app.chat_routes - INFO - Setting conversation_id cookie: 8812ceca-bbfc-47d5-857b-bf2c7a154230
2025-06-22 14:24:34,744 - app.chat_routes - INFO - Retrieved conversation_id from cookie: None
2025-06-22 14:24:34,745 - app.chat_routes - INFO - Chat endpoint called with conversation_id: None
2025-06-22 14:24:34,745 - app.chat_controller - INFO - handle_chat received query: What are some popular makeup techniques? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:24:34,745 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What are some popular makeup techniques?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-22 14:24:40,942 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '77ed4f88-1362-4411-a185-55e103e2c73e', 'id': '9e034d39-dab5-4fc1-bd3e-010db2d5917e', 'message_id': '9e034d39-dab5-4fc1-bd3e-010db2d5917e', 'conversation_id': '046f00fb-b1b1-4c91-bdfd-88c880415afa', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! So glad you\'re here! To give you the best makeup advice, it helps me to know a little about you. Feel free to share details about your vision (blind, low vision, or sighted), the colors you love, your skin type and concerns, your favorite brands or product preferences (like vegan or cruelty-free), and your go-to makeup style (natural, matte, dewy, etc.). The more I know, the better I can tailor my tips!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 9492, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 137, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9629, 'total_price': '0', 'currency': 'USD', 'latency': 5.900005711999256}}, 'created_at': 1750577075}
2025-06-22 14:24:40,943 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! So glad you're here! To give you the best makeup advice, it helps me to know a little abou...', type='normal'
2025-06-22 14:24:40,943 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! So glad you're here! To give you the best makeup advice, it helps me to know a little abou...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='046f00fb-b1b1-4c91-bdfd-88c880415afa'
2025-06-22 14:24:40,943 - app.chat_routes - INFO - Chat handler returned conversation_id: 046f00fb-b1b1-4c91-bdfd-88c880415afa
2025-06-22 14:24:40,943 - app.chat_routes - INFO - Setting conversation_id cookie: 046f00fb-b1b1-4c91-bdfd-88c880415afa
2025-06-22 14:31:04,916 - app.chat_routes - INFO - Retrieved conversation_id from cookie: None
2025-06-22 14:31:04,918 - app.chat_routes - INFO - Chat endpoint called with conversation_id: None
2025-06-22 14:31:04,918 - app.chat_controller - INFO - handle_chat received query: How to properly cleanse my face? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:31:04,918 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'How to properly cleanse my face?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1'}
2025-06-22 14:31:09,243 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'abd55f7f-002e-42ed-b823-69ed0cb8ae78', 'id': '5db761ee-8452-433b-aca5-29959eebbf4d', 'message_id': '5db761ee-8452-433b-aca5-29959eebbf4d', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Hi there! To give you the best skincare advice, could you tell me a bit more about your skin? Sharing details like your skin type (oily, dry, combination), any sensitivities, your vision (blind, low vision or sighted), favorite colors, preferred brands, and your usual makeup style will help me tailor my recommendations perfectly for you!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 8906, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 111, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 9017, 'total_price': '0', 'currency': 'USD', 'latency': 4.047210083997925}}, 'created_at': 1750577465}
2025-06-22 14:31:09,244 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Hi there! To give you the best skincare advice, could you tell me a bit more about your skin? Sharin...', type='normal'
2025-06-22 14:31:09,244 - app.chat_controller - INFO - Returning QueryResponse: response='Hi there! To give you the best skincare advice, could you tell me a bit more about your skin? Sharin...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 14:31:09,244 - app.chat_routes - INFO - Chat handler returned conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 14:31:09,244 - app.chat_routes - INFO - Setting conversation_id cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 14:31:12,374 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 14:31:12,375 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 14:31:12,375 - app.chat_controller - INFO - handle_chat received query: How to properly cleanse my face? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:31:12,375 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'How to properly cleanse my face?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-22 14:31:16,866 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'd9829db2-c3e1-4bfc-abf2-8f14d020361a', 'id': 'b2d648ac-4743-4541-acde-1355fbb8d8dd', 'message_id': 'b2d648ac-4743-4541-acde-1355fbb8d8dd', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Okay! To give you the best cleansing advice for *your* skin, could you tell me more about your skin type and any specific skin conditions you\'re dealing with? Also, sharing details like your vision (blind, low vision or sighted), preferred colors, favorite brands, and your usual makeup style will help me tailor my recommendations even more!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 10950, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 119, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 11069, 'total_price': '0', 'currency': 'USD', 'latency': 4.215314168999612}}, 'created_at': 1750577472}
2025-06-22 14:31:16,867 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Okay! To give you the best cleansing advice for *your* skin, could you tell me more about your skin ...', type='normal'
2025-06-22 14:31:16,867 - app.chat_controller - INFO - Returning QueryResponse: response='Okay! To give you the best cleansing advice for *your* skin, could you tell me more about your skin ...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 14:31:16,867 - app.chat_routes - INFO - Chat handler returned conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 14:31:16,867 - app.chat_routes - INFO - Not setting cookie - conversation_id unchanged or missing
2025-06-22 14:38:18,998 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 14:38:19,000 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 14:38:19,000 - app.chat_controller - INFO - handle_chat received query: How to properly cleanse my face? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:38:19,000 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'How to properly cleanse my face?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-22 14:38:25,397 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '3ab42c2b-8ca8-4e92-a0bb-b23fd347a487', 'id': '105dcec8-72d9-4017-880c-38356e24bf30', 'message_id': '105dcec8-72d9-4017-880c-38356e24bf30', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Okay, I can help with that! To give you the best advice for *your* skin, it would be helpful to know your skin type (oily, dry, combination, etc.) and any specific concerns. Also, feel free to share details like your vision (blind, low vision, or sighted), preferred colors, favorite brands, or your usual makeup style  the more I know, the better I can personalize my recommendations!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 11675, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 129, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 11804, 'total_price': '0', 'currency': 'USD', 'latency': 6.053883128006419}}, 'created_at': 1750577899}
2025-06-22 14:38:25,398 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Okay, I can help with that! To give you the best advice for *your* skin, it would be helpful to know...', type='normal'
2025-06-22 14:38:25,398 - app.chat_controller - INFO - Returning QueryResponse: response='Okay, I can help with that! To give you the best advice for *your* skin, it would be helpful to know...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 14:38:25,398 - app.chat_routes - INFO - Chat handler returned conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 14:38:25,398 - app.chat_routes - INFO - Not setting cookie - conversation_id unchanged or missing
2025-06-22 14:43:59,410 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 14:43:59,410 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 14:43:59,410 - app.chat_controller - INFO - handle_chat received query:  I'm not sure if I can get the right one. I'm not sure if I can get the right one. I'm not sure if I can get the right one. I'm not sure if I can get the right one. I'm not sure if I can get the right one. for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:43:59,410 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': " I'm not sure if I can get the right one. I'm not sure if I can get the right one. I'm not sure if I can get the right one. I'm not sure if I can get the right one. I'm not sure if I can get the right one.", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-22 14:44:07,617 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'bf59b450-698f-482e-b13d-a652d89dea1d', 'id': 'b70e87af-a03c-4781-a9d5-77e33bfd7953', 'message_id': 'b70e87af-a03c-4781-a9d5-77e33bfd7953', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "It can definitely feel overwhelming to find the right cleanser! The key is to understand your skin type and any specific concerns you have, and then look for products formulated to address those needs. For example, if you have oily skin, you might look for a gel-based or foaming cleanser that helps to remove excess oil without stripping your skin. If you have dry skin, a creamier, hydrating cleanser might be a better option. If you\'re dealing with acne, look for cleansers that contain ingredients like salicylic acid or benzoyl peroxide. And if you have sensitive skin, fragrance-free and hypoallergenic formulas are generally a safe bet. Don\'t be afraid to experiment with different types of cleansers until you find one that works for you! You could try getting some samples to test it out before buying a full-size product. If you\'re still unsure, consulting a dermatologist or skincare professional can provide personalized recommendations for your unique skin needs.",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 8838, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 29, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 8867, 'total_price': '0', 'currency': 'USD', 'latency': 4.895174334003968}}, 'created_at': 1750578239}
2025-06-22 14:44:07,617 - app.chat_controller - INFO - Successfully parsed Dify answer: response='It can definitely feel overwhelming to find the right cleanser! The key is to understand your skin t...', type='normal'
2025-06-22 14:44:07,618 - app.chat_controller - INFO - Returning QueryResponse: response='It can definitely feel overwhelming to find the right cleanser! The key is to understand your skin t...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 14:44:07,618 - app.chat_routes - INFO - Chat handler returned conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 14:44:07,618 - app.chat_routes - INFO - Not setting cookie - conversation_id unchanged or missing
2025-06-22 14:45:47,991 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 14:45:47,992 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 14:45:47,992 - app.chat_controller - INFO - handle_chat received query:  I'm not sure if I can get the right one. I'm not sure if I can get the right one. I'm not sure if I can get the right one. I'm not sure if I can get the right one. I'm not sure if I can get the right one. for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:45:47,992 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': " I'm not sure if I can get the right one. I'm not sure if I can get the right one. I'm not sure if I can get the right one. I'm not sure if I can get the right one. I'm not sure if I can get the right one.", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-22 14:45:53,923 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'cfd355e3-e70f-40df-a9ba-8a4ed39cb2ae', 'id': 'b0f60e07-bb29-4edd-9243-a3e19457b2fe', 'message_id': 'b0f60e07-bb29-4edd-9243-a3e19457b2fe', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be Momo! Let's talk makeup! \n", 'metadata': {'usage': {'prompt_tokens': 11998, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 36, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 12034, 'total_price': '0', 'currency': 'USD', 'latency': 5.678712001994427}}, 'created_at': 1750578348}
2025-06-22 14:45:53,924 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be Momo! Let's talk makeup! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-22 14:45:53,924 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 14:50:39,883 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 14:50:39,883 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 14:50:39,883 - app.chat_controller - INFO - handle_chat received query:  Oh, can you hear me? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:50:39,883 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': ' Oh, can you hear me?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-22 14:50:45,822 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'b8bd3e55-b779-4a28-9a5e-c52a1c6097da', 'id': '22125ea6-b72c-4ca0-8c89-65af412b41ea', 'message_id': '22125ea6-b72c-4ca0-8c89-65af412b41ea', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be Momo, your friendly AI makeup assistant! Ask me anything about makeup, and I'll do my best to help you achieve your beauty goals! \n", 'metadata': {'usage': {'prompt_tokens': 15758, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 64, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 15822, 'total_price': '0', 'currency': 'USD', 'latency': 5.625176003002707}}, 'created_at': 1750578640}
2025-06-22 14:50:45,822 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be Momo, your friendly AI makeup assistant! Ask me anything about makeup, and I'll do my best to help you achieve your beauty goals! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-22 14:50:45,823 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 14:50:59,153 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 14:50:59,153 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 14:50:59,153 - app.chat_controller - INFO - handle_chat received query:  Can you hear me? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 14:50:59,153 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': ' Can you hear me?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-22 14:51:05,107 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'ae878869-3edd-4cef-85cc-b8bc8eaec162', 'id': '1fe5d7ec-762f-4020-84d4-3c1ebaf26ed5', 'message_id': '1fe5d7ec-762f-4020-84d4-3c1ebaf26ed5', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': "Okay, I understand! I'm ready to be Momo, your friendly and enthusiastic AI makeup assistant. I'll focus on makeup-related questions and gracefully redirect any off-topic inquiries back to the world of beauty. Let's get glam! \n", 'metadata': {'usage': {'prompt_tokens': 14192, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 67, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 14259, 'total_price': '0', 'currency': 'USD', 'latency': 5.737259710997023}}, 'created_at': 1750578659}
2025-06-22 14:51:05,107 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I understand! I'm ready to be Momo, your friendly and enthusiastic AI makeup assistant. I'll focus on makeup-related questions and gracefully redirect any off-topic inquiries back to the world of beauty. Let's get glam! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-22 14:51:05,107 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 15:04:04,720 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 15:04:04,722 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 15:04:04,722 - app.chat_controller - INFO - handle_chat received query: What eyeshadow colors suit brown eyes? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 15:04:04,722 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What eyeshadow colors suit brown eyes?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-22 15:04:12,601 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '91701c9b-c076-441e-a30e-be707c520629', 'id': '7e0e3623-6e56-446e-900f-67eb5f85039a', 'message_id': '7e0e3623-6e56-446e-900f-67eb5f85039a', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Brown eyes are incredibly versatile and can be complemented by a wide range of eyeshadow colors! Warmer shades like golds, bronzes, and copper bring out the warmth in brown eyes, creating a radiant and sun-kissed effect. For a more dramatic look, jewel tones like emerald green, sapphire blue, and amethyst purple can create a stunning contrast. If you prefer a more natural look, neutral shades like taupe, chocolate brown, and soft peach can enhance your eyes without being too overpowering. Ultimately, the best eyeshadow colors for brown eyes depend on your personal preference and the look you\'re trying to achieve!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 16527, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 123, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 16650, 'total_price': '0', 'currency': 'USD', 'latency': 4.510329544002161}}, 'created_at': 1750579445}
2025-06-22 15:04:12,601 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Brown eyes are incredibly versatile and can be complemented by a wide range of eyeshadow colors! War...', type='normal'
2025-06-22 15:04:12,601 - app.chat_controller - INFO - Returning QueryResponse: response='Brown eyes are incredibly versatile and can be complemented by a wide range of eyeshadow colors! War...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 15:04:12,601 - app.chat_routes - INFO - Chat handler returned conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 15:04:12,602 - app.chat_routes - INFO - Not setting cookie - conversation_id unchanged or missing
2025-06-22 15:04:58,196 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 15:04:58,197 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 15:04:58,198 - app.chat_controller - INFO - handle_chat received query: What eyeshadow colors suit brown eyes? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 15:04:58,198 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What eyeshadow colors suit brown eyes?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-22 15:05:03,915 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '18b5b1c0-9e3b-4caf-a723-07d6ac56df2b', 'id': '7d30f119-7a18-4d96-a62b-23c6bd6dbd2a', 'message_id': '7d30f119-7a18-4d96-a62b-23c6bd6dbd2a', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Brown eyes are truly versatile and can rock so many different eyeshadow shades! For a warm and radiant look, reach for shades like gold, bronze, and copperthey\'ll really make your brown eyes sparkle. If you\'re feeling bold, jewel tones like emerald green, sapphire blue, and amethyst purple can create a stunning contrast that will make your eyes pop. And for a more everyday, natural vibe, you can\'t go wrong with neutral shades like taupe, chocolate brown, or soft peach. They enhance your eyes without being too dramatic. It really comes down to your personal preference and the kind of look you\'re going for!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 19130, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 122, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 19252, 'total_price': '0', 'currency': 'USD', 'latency': 3.5454346279984748}}, 'created_at': 1750579498}
2025-06-22 15:05:03,915 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Brown eyes are truly versatile and can rock so many different eyeshadow shades! For a warm and radia...', type='normal'
2025-06-22 15:05:03,916 - app.chat_controller - INFO - Returning QueryResponse: response='Brown eyes are truly versatile and can rock so many different eyeshadow shades! For a warm and radia...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 15:05:03,916 - app.chat_routes - INFO - Chat handler returned conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 15:05:03,916 - app.chat_routes - INFO - Not setting cookie - conversation_id unchanged or missing
2025-06-22 15:08:28,152 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 15:08:28,154 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 15:08:28,154 - app.chat_controller - INFO - handle_chat received query: What eyeshadow colors suit brown eyes? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 15:08:28,154 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What eyeshadow colors suit brown eyes?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-22 15:08:33,692 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'c47c8ba4-18f3-4156-b36c-e0904ac768a4', 'id': '99998736-9dfa-42cf-9ea4-c3e2175e8020', 'message_id': '99998736-9dfa-42cf-9ea4-c3e2175e8020', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Brown eyes are wonderfully versatile and can pull off a huge range of eyeshadow colors! If you\'re going for a warm, radiant look, shades like gold, bronze, and copper are amazing because they enhance the natural warmth of your eyes and make them sparkle. For something more dramatic, jewel tones such as emerald green, sapphire blue, and amethyst purple create a gorgeous contrast that really makes your eyes stand out. And if you prefer a more subtle, everyday look, you can\'t go wrong with neutral shades like taupe, chocolate brown, or soft peach  they\'ll enhance your eyes without being too overpowering. Ultimately, the best colors depend on your personal style and the specific look you\'re trying to create!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 8294, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 18, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 8312, 'total_price': '0', 'currency': 'USD', 'latency': 2.407904541996686}}, 'created_at': 1750579708}
2025-06-22 15:08:33,692 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Brown eyes are wonderfully versatile and can pull off a huge range of eyeshadow colors! If you're go...', type='normal'
2025-06-22 15:08:33,692 - app.chat_controller - INFO - Returning QueryResponse: response='Brown eyes are wonderfully versatile and can pull off a huge range of eyeshadow colors! If you're go...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 15:08:33,693 - app.chat_routes - INFO - Chat handler returned conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 15:08:33,693 - app.chat_routes - INFO - Not setting cookie - conversation_id unchanged or missing
2025-06-22 15:09:31,350 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 15:09:31,351 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 15:09:31,351 - app.chat_controller - INFO - handle_chat received query: How do I make up in Italy style for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 15:09:31,351 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'How do I make up in Italy style', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-22 15:09:35,453 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '153c266f-1641-459a-ab0e-335023f2b30f', 'id': '818dd3bf-9e6d-4ce0-8dcc-37e887349482', 'message_id': '818dd3bf-9e6d-4ce0-8dcc-37e887349482', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Ciao! An Italian-style makeup look, how fun! To give you the best tips, tell me a little about your preferences. Sharing details like your vision (blind, low vision, or sighted), your favorite colors for makeup, your skin type and any concerns, preferred brands or product attributes (like vegan or cruelty-free), and your everyday makeup style will help me tailor the advice just for you!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 25838, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 122, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 25960, 'total_price': '0', 'currency': 'USD', 'latency': 3.834984667995741}}, 'created_at': 1750579771}
2025-06-22 15:09:35,454 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Ciao! An Italian-style makeup look, how fun! To give you the best tips, tell me a little about your ...', type='normal'
2025-06-22 15:09:35,454 - app.chat_controller - INFO - Returning QueryResponse: response='Ciao! An Italian-style makeup look, how fun! To give you the best tips, tell me a little about your ...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 15:09:35,455 - app.chat_routes - INFO - Chat handler returned conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 15:09:35,455 - app.chat_routes - INFO - Not setting cookie - conversation_id unchanged or missing
2025-06-22 15:10:11,742 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 15:10:11,744 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 15:10:11,744 - app.chat_controller - INFO - handle_chat received query: I am blind, and I want to make up in Italy style for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 15:10:11,744 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'I am blind, and I want to make up in Italy style', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-22 15:10:16,632 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '29685414-fee6-452a-8437-7d4eb1928ffa', 'id': '8e1b83df-adf6-41c7-b297-942a83f2514c', 'message_id': '8e1b83df-adf6-41c7-b297-942a83f2514c', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': "Okay, I'm ready to be Momo, your enthusiastic makeup assistant! Ask me anything about makeup, and I'll be happy to help. And, I'm prepared to gracefully redirect if we start talking about something other than beauty! Let's talk makeup! \n", 'metadata': {'usage': {'prompt_tokens': 30134, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 235, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 30369, 'total_price': '0', 'currency': 'USD', 'latency': 4.481232418002037}}, 'created_at': 1750579812}
2025-06-22 15:10:16,632 - app.chat_controller - ERROR - Failed to parse Dify answer as JSON: Okay, I'm ready to be Momo, your enthusiastic makeup assistant! Ask me anything about makeup, and I'll be happy to help. And, I'm prepared to gracefully redirect if we start talking about something other than beauty! Let's talk makeup! 
 - Error: Expecting value: line 1 column 1 (char 0)
2025-06-22 15:10:16,632 - app.chat_controller - INFO - Returning QueryResponse: response='Sorry, the AI response was not in the expected JSON format....', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 15:10:41,072 - app.intent_classifier - INFO - RECEVIED INTENT: makeup_tutorial
2025-06-22 15:11:20,228 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-22 15:11:46,002 - app.intent_classifier - INFO - RECEVIED INTENT: makeup_tutorial
2025-06-22 15:32:07,984 - app.intent_classifier - INFO - RECEVIED INTENT: makeup_tutorial
2025-06-22 19:58:12,972 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 19:58:12,976 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 19:58:12,977 - app.chat_controller - INFO - handle_chat received query: What are some tips for long-lasting lipstick? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 19:58:12,977 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What are some tips for long-lasting lipstick?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-22 19:58:17,496 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-22 19:58:21,524 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '294675e0-9707-480b-acac-7f312ddf9b6a', 'id': '799c1b92-9b3d-475e-bdae-74354206476f', 'message_id': '799c1b92-9b3d-475e-bdae-74354206476f', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Okay, here are some tips to help your lipstick last longer! First, start with a smooth base by exfoliating your lips to remove any dry skin. Then, apply a lip primer to create a barrier and help the color adhere. After that, fill in your entire lips with a lip liner in a shade similar to your lipstick  this will act as a base color and prevent feathering. When applying your lipstick, blot it with a tissue and then apply a second coat. This helps to press the color into your lips. You can also try using a setting spray to lock everything in place! Finally, avoid licking your lips or eating oily foods, as these can break down the lipstick and cause it to fade faster.",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 9407, 'prompt_unit_price': '0.03', 'prompt_price_unit': '0.001', 'prompt_price': '0.04359', 'completion_tokens': 18, 'completion_unit_price': '0.06', 'completion_price_unit': '0.001', 'completion_price': '0.00018', 'total_tokens': 9425, 'total_price': '0.04377', 'currency': 'USD', 'latency': 5.3456551270064665}}, 'created_at': 1750597093}
2025-06-22 19:58:21,524 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Okay, here are some tips to help your lipstick last longer! First, start with a smooth base by exfol...', type='normal'
2025-06-22 19:58:21,524 - app.chat_controller - INFO - Returning QueryResponse: response='Okay, here are some tips to help your lipstick last longer! First, start with a smooth base by exfol...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 19:58:21,525 - app.chat_routes - INFO - Chat handler returned conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 19:58:21,525 - app.chat_routes - INFO - Not setting cookie - conversation_id unchanged or missing
2025-06-22 20:00:18,432 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 20:00:18,433 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 20:00:18,434 - app.chat_controller - INFO - handle_chat received query: I want some products that help with oily face for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 20:00:18,434 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'I want some products that help with oily face', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-22 20:00:21,775 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-22 20:00:25,301 - app.chat_controller - ERROR - Dify API HTTP error: 400 - {"code": "invalid_param", "message": "Run failed: Variable ['1748584082969', 'text'] not found", "status": 400}

2025-06-22 20:00:25,301 - app.chat_controller - INFO - Returning QueryResponse: response='AI service error (400): Run failed: Variable ['1748584082969', 'text'] not found...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 20:01:23,857 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-22 20:02:46,764 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 20:02:46,765 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 20:02:46,765 - app.chat_controller - INFO - handle_chat received query: I want some products that help with Oily face for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 20:02:46,765 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'I want some products that help with Oily face', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-22 20:02:50,006 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-22 20:02:53,983 - app.chat_controller - ERROR - Dify API HTTP error: 400 - {"code": "invalid_param", "message": "Run failed: Variable ['1748584082969', 'text'] not found", "status": 400}

2025-06-22 20:02:53,983 - app.chat_controller - INFO - Returning QueryResponse: response='AI service error (400): Run failed: Variable ['1748584082969', 'text'] not found...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 20:03:34,915 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 20:03:34,916 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 20:03:34,916 - app.chat_controller - INFO - handle_chat received query: I want a product that help with oily face for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 20:03:34,916 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'I want a product that help with oily face', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-22 20:03:38,248 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-22 20:03:40,518 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '60f1bfd0-b9fd-4ff6-98a1-e74130a7d0a0', 'id': '9de1e38c-4595-42de-a416-fb694de8ffc2', 'message_id': '9de1e38c-4595-42de-a416-fb694de8ffc2', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Okay! To give you the best recommendations for products that help with oily skin, I need a bit more information about your preferences. Sharing details like your vision (blind, low vision, or sighted), favorite colors for makeup, preferred brands or specific product attributes (like vegan or cruelty-free), and your usual makeup style will help me make the best suggestions for *you*!",\n  "type": "normal"\n}\n```', 'metadata': {'retriever_resources': [], 'usage': {'prompt_tokens': 44995, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0.04578', 'completion_tokens': 214, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0.00018', 'total_tokens': 45209, 'total_price': '0.04596', 'currency': 'USD', 'latency': 5.174488084005134}}, 'created_at': 1750597415}
2025-06-22 20:03:40,518 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Okay! To give you the best recommendations for products that help with oily skin, I need a bit more ...', type='normal'
2025-06-22 20:03:40,518 - app.chat_controller - INFO - Returning QueryResponse: response='Okay! To give you the best recommendations for products that help with oily skin, I need a bit more ...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 20:03:40,519 - app.chat_routes - INFO - Chat handler returned conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 20:03:40,519 - app.chat_routes - INFO - Not setting cookie - conversation_id unchanged or missing
2025-06-22 20:04:29,703 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 20:04:29,704 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 20:04:29,704 - app.chat_controller - INFO - handle_chat received query: I'm sighted, I love red colour so give me the best product with oily face for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 20:04:29,704 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': "I'm sighted, I love red colour so give me the best product with oily face", 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-22 20:04:35,913 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-22 20:04:39,306 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '1985ff39-2bc8-4b41-bec2-61fb2eb771a7', 'id': '8fbc5e2d-d743-4797-9764-5f277ab434a5', 'message_id': '8fbc5e2d-d743-4797-9764-5f277ab434a5', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Since you have oily skin and love red lipstick, I can recommend a few options for long-lasting wear! Matte liquid lipsticks are a great choice, such as the Stila Stay All Day Liquid Lipstick in Beso (a true red) or the Maybelline SuperStay Matte Ink Liquid Lipstick in Pioneer (a deep, classic red). If you prefer a traditional bullet lipstick, you could try the MAC Matte Lipstick in Ruby Woo (a universally flattering red) or the NARS Audacious Lipstick in Rita (a vibrant, satin-finish red).",\n  "type": "normal"\n}\n```', 'metadata': {'retriever_resources': [], 'usage': {'prompt_tokens': 69001, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0.04569', 'completion_tokens': 513, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0.00018', 'total_tokens': 69514, 'total_price': '0.04587', 'currency': 'USD', 'latency': 9.203427838001517}}, 'created_at': 1750597470}
2025-06-22 20:04:39,306 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Since you have oily skin and love red lipstick, I can recommend a few options for long-lasting wear!...', type='normal'
2025-06-22 20:04:39,307 - app.chat_controller - INFO - Returning QueryResponse: response='Since you have oily skin and love red lipstick, I can recommend a few options for long-lasting wear!...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 20:04:39,307 - app.chat_routes - INFO - Chat handler returned conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 20:04:39,307 - app.chat_routes - INFO - Not setting cookie - conversation_id unchanged or missing
2025-06-22 20:05:39,880 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 20:05:39,880 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 20:05:39,880 - app.chat_controller - INFO - handle_chat received query: I want to make up in Italy style for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 20:05:39,880 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'I want to make up in Italy style', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-22 20:05:42,007 - app.intent_classifier - INFO - RECEVIED INTENT: makeup_tutorial
2025-06-22 20:05:46,269 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'a52fca8d-9c2e-4b4d-8b41-d7f8abe93de2', 'id': 'f92de7d0-93c6-432d-822f-5c4988949dab', 'message_id': 'f92de7d0-93c6-432d-822f-5c4988949dab', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "type": "step_by_step",\n  "response": [\n    "Step 1: Start with a mattifying primer. Apply a thin layer all over your face to create a smooth base and control oil production throughout the day.",\n    "Step 2: Apply an oil-free, matte foundation that matches your skin tone. Use a damp makeup sponge or a foundation brush to blend the foundation evenly, ensuring full coverage.",\n    "Step 3: Conceal any blemishes or dark circles with a matte concealer. Use a small brush or your finger to dab the concealer onto the problem areas, then blend it seamlessly into the foundation.",\n    "Step 4: Set your foundation and concealer with a translucent setting powder. Use a large, fluffy brush to dust the powder all over your face, focusing on the oily areas like your T-zone.",\n    "Step 5: Apply a warm-toned bronzer to the hollows of your cheeks, temples, and jawline to add dimension to your face. Use a contour brush to blend the bronzer seamlessly, avoiding harsh lines.",\n    "Step 6: Sweep a vibrant red powder blush onto the apples of your cheeks for a healthy, flushed look. Blend the blush upwards towards your temples for a seamless finish.",\n    "Step 7: Define your eyebrows with a brow pencil or powder in a shade that matches your natural brow color. Fill in any sparse areas and create a defined arch.",\n    "Step 8: Apply a matte cream-colored eyeshadow all over your eyelid from your lash line up to your brow bone to create a neutral base. Then, sweep a terracotta shade through the crease of your eye.",\n    "Step 9: Apply a thin line of black liquid eyeliner along your upper lash line, creating a subtle wing at the outer corner of your eye.",\n    "Step 10: Curl your eyelashes with an eyelash curler and apply several coats of black mascara to your upper and lower lashes.",\n    "Step 11: Line your lips with a red lip liner in a shade that matches your lipstick. This will prevent feathering and help your lipstick last longer.",\n    "Step 12: Apply a matte red lipstick to your lips, using a lip brush for precision. Blot your lips with a tissue and apply another coat of lipstick for long-lasting color."\n  ]\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 12503, 'prompt_unit_price': '0', 'prompt_price_unit': '0.000001', 'prompt_price': '0', 'completion_tokens': 23, 'completion_unit_price': '0', 'completion_price_unit': '0.000001', 'completion_price': '0', 'total_tokens': 12526, 'total_price': '0', 'currency': 'USD', 'latency': 1.8744866249980987}}, 'created_at': 1750597540}
2025-06-22 20:05:46,270 - app.chat_controller - INFO - Successfully parsed Dify answer: response='['Step 1: Start with a mattifying primer. Apply a thin layer all over your face to create a smooth base and control oil production throughout the day.', 'Step 2: Apply an oil-free, matte foundation that matches your skin tone. Use a damp makeup sponge or a foundation brush to blend the foundation evenly, ensuring full coverage.', 'Step 3: Conceal any blemishes or dark circles with a matte concealer. Use a small brush or your finger to dab the concealer onto the problem areas, then blend it seamlessly into the foundation.', 'Step 4: Set your foundation and concealer with a translucent setting powder. Use a large, fluffy brush to dust the powder all over your face, focusing on the oily areas like your T-zone.', 'Step 5: Apply a warm-toned bronzer to the hollows of your cheeks, temples, and jawline to add dimension to your face. Use a contour brush to blend the bronzer seamlessly, avoiding harsh lines.', 'Step 6: Sweep a vibrant red powder blush onto the apples of your cheeks for a healthy, flushed look. Blend the blush upwards towards your temples for a seamless finish.', 'Step 7: Define your eyebrows with a brow pencil or powder in a shade that matches your natural brow color. Fill in any sparse areas and create a defined arch.', 'Step 8: Apply a matte cream-colored eyeshadow all over your eyelid from your lash line up to your brow bone to create a neutral base. Then, sweep a terracotta shade through the crease of your eye.', 'Step 9: Apply a thin line of black liquid eyeliner along your upper lash line, creating a subtle wing at the outer corner of your eye.', 'Step 10: Curl your eyelashes with an eyelash curler and apply several coats of black mascara to your upper and lower lashes.', 'Step 11: Line your lips with a red lip liner in a shade that matches your lipstick. This will prevent feathering and help your lipstick last longer.', 'Step 12: Apply a matte red lipstick to your lips, using a lip brush for precision. Blot your lips with a tissue and apply another coat of lipstick for long-lasting color.']...', type='step_by_step'
2025-06-22 20:05:46,270 - app.chat_controller - INFO - Returning QueryResponse: response='['Step 1: Start with a mattifying primer. Apply a thin layer all over your face to create a smooth base and control oil production throughout the day.', 'Step 2: Apply an oil-free, matte foundation that matches your skin tone. Use a damp makeup sponge or a foundation brush to blend the foundation evenly, ensuring full coverage.', 'Step 3: Conceal any blemishes or dark circles with a matte concealer. Use a small brush or your finger to dab the concealer onto the problem areas, then blend it seamlessly into the foundation.', 'Step 4: Set your foundation and concealer with a translucent setting powder. Use a large, fluffy brush to dust the powder all over your face, focusing on the oily areas like your T-zone.', 'Step 5: Apply a warm-toned bronzer to the hollows of your cheeks, temples, and jawline to add dimension to your face. Use a contour brush to blend the bronzer seamlessly, avoiding harsh lines.', 'Step 6: Sweep a vibrant red powder blush onto the apples of your cheeks for a healthy, flushed look. Blend the blush upwards towards your temples for a seamless finish.', 'Step 7: Define your eyebrows with a brow pencil or powder in a shade that matches your natural brow color. Fill in any sparse areas and create a defined arch.', 'Step 8: Apply a matte cream-colored eyeshadow all over your eyelid from your lash line up to your brow bone to create a neutral base. Then, sweep a terracotta shade through the crease of your eye.', 'Step 9: Apply a thin line of black liquid eyeliner along your upper lash line, creating a subtle wing at the outer corner of your eye.', 'Step 10: Curl your eyelashes with an eyelash curler and apply several coats of black mascara to your upper and lower lashes.', 'Step 11: Line your lips with a red lip liner in a shade that matches your lipstick. This will prevent feathering and help your lipstick last longer.', 'Step 12: Apply a matte red lipstick to your lips, using a lip brush for precision. Blot your lips with a tissue and apply another coat of lipstick for long-lasting color.']...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='step_by_step', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 20:05:46,271 - app.chat_routes - INFO - Chat handler returned conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 20:05:46,271 - app.chat_routes - INFO - Not setting cookie - conversation_id unchanged or missing
2025-06-22 20:07:06,570 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 20:07:06,571 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 20:07:06,572 - app.chat_controller - INFO - handle_chat received query: I want to know the current trending make up style right now for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 20:07:06,572 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'I want to know the current trending make up style right now', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-22 20:07:09,595 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-22 20:07:13,562 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '54037078-7d90-4319-9f09-d60fd80f8a42', 'id': '71351f8e-d500-4fa3-8fa0-f788b91e2d49', 'message_id': '71351f8e-d500-4fa3-8fa0-f788b91e2d49', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Let\'s check out what\'s trending in makeup right now! I\'ll use a search engine to get the latest styles.",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 13540, 'prompt_unit_price': '0.03', 'prompt_price_unit': '0.001', 'prompt_price': '0.0546', 'completion_tokens': 16, 'completion_unit_price': '0.06', 'completion_price_unit': '0.001', 'completion_price': '0.00018', 'total_tokens': 13556, 'total_price': '0.05478', 'currency': 'USD', 'latency': 4.229632167996897}}, 'created_at': 1750597627}
2025-06-22 20:07:13,563 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Let's check out what's trending in makeup right now! I'll use a search engine to get the latest styl...', type='normal'
2025-06-22 20:07:13,563 - app.chat_controller - INFO - Returning QueryResponse: response='Let's check out what's trending in makeup right now! I'll use a search engine to get the latest styl...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 20:07:13,563 - app.chat_routes - INFO - Chat handler returned conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 20:07:13,563 - app.chat_routes - INFO - Not setting cookie - conversation_id unchanged or missing
2025-06-22 20:07:29,406 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 20:07:29,407 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-22 20:07:29,407 - app.chat_controller - INFO - handle_chat received query: Have you got it? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-22 20:07:29,407 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'Have you got it?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-22 20:07:32,649 - app.chat_controller - ERROR - Dify API HTTP error: 400 - {"code": "invalid_param", "message": "Run failed: Failed to parse JSON: { \n\"text\": \"\"What are the current trending makeup styles?\"\n\"\n}", "status": 400}

2025-06-22 20:07:32,649 - app.chat_controller - INFO - Returning QueryResponse: response='AI service error (400): Run failed: Failed to parse JSON: { 
"text": ""What are the current trending...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='None', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-22 20:10:00,119 - app.intent_classifier - INFO - RECEVIED INTENT: unanswerable
2025-06-22 20:14:15,533 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-22 20:17:25,406 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-22 20:18:54,717 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-22 20:20:02,264 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-22 20:20:31,095 - app.intent_classifier - INFO - RECEVIED INTENT: makeup_tutorial
2025-06-22 20:22:32,056 - app.intent_classifier - INFO - RECEVIED INTENT: unanswerable
2025-06-22 20:23:47,553 - app.intent_classifier - INFO - RECEVIED INTENT: unanswerable
2025-06-22 20:23:52,107 - app.intent_classifier - INFO - RECEVIED INTENT: unanswerable
2025-06-22 20:23:53,345 - app.intent_classifier - INFO - RECEVIED INTENT: unanswerable
2025-06-22 20:23:54,100 - app.intent_classifier - INFO - RECEVIED INTENT: unanswerable
2025-06-22 20:23:54,794 - app.intent_classifier - INFO - RECEVIED INTENT: unanswerable
2025-06-22 20:23:55,447 - app.intent_classifier - INFO - RECEVIED INTENT: unanswerable
2025-06-22 20:23:56,044 - app.intent_classifier - INFO - RECEVIED INTENT: unanswerable
2025-06-22 20:23:56,596 - app.intent_classifier - INFO - RECEVIED INTENT: unanswerable
2025-06-22 20:26:37,307 - app.intent_classifier - INFO - RECEVIED INTENT: unanswerable
2025-06-22 20:26:42,993 - app.intent_classifier - INFO - RECEVIED INTENT: unanswerable
2025-06-22 20:26:54,112 - app.intent_classifier - INFO - RECEVIED INTENT: unanswerable
2025-06-22 20:27:07,073 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-22 20:27:32,198 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-22 20:27:43,923 - app.intent_classifier - INFO - RECEVIED INTENT: makeup_tutorial
2025-06-22 20:29:48,677 - app.intent_classifier - INFO - RECEVIED INTENT: makeup_tutorial
2025-06-22 20:32:38,294 - app.intent_classifier - INFO - RECEVIED INTENT: unanswerable
2025-06-22 20:33:52,552 - app.intent_classifier - INFO - RECEVIED INTENT: unanswerable
2025-06-22 20:34:13,946 - app.intent_classifier - INFO - RECEVIED INTENT: unanswerable
2025-06-22 20:34:20,141 - app.intent_classifier - INFO - RECEVIED INTENT: unanswerable
2025-06-22 20:34:47,693 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-22 20:35:42,818 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-22 20:36:37,183 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-22 20:54:06,105 - app.intent_classifier - INFO - RECEVIED INTENT: unanswerable
2025-06-22 20:54:38,500 - app.intent_classifier - INFO - RECEVIED INTENT: unanswerable
2025-06-23 07:54:35,287 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-23 07:54:35,289 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-23 07:54:35,289 - app.chat_controller - INFO - handle_chat received query: What is the latest trend on makeup? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-23 07:54:35,289 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What is the latest trend on makeup?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-23 07:54:41,058 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-23 07:54:45,792 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'a4d2ccb3-307e-4b81-a3df-8432cc87f9e6', 'id': 'd260442c-ffea-4fb1-89d4-d21416481f12', 'message_id': 'd260442c-ffea-4fb1-89d4-d21416481f12', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Based on the latest trends, here\'s a breakdown of makeup styles: The \\"Clean Girl Aesthetic\\" emphasizes minimal makeup for a fresh, radiant look, focusing on healthy, glowing skin, groomed brows, and natural lip colors. \\"Bold Blush\\" is all about using blush to sculpt the face, applying it high on the cheekbones and temples for a dramatic effect. \\"Graphic Liner\\" encourages experimentation with colorful and artistic eyeliner designs. \\"Y2K Beauty\\" brings back frosted eyeshadows, lip gloss, and playful accessories from the early 2000s. Lastly, \\"Skinimalism\\" promotes enhancing your natural skin texture with minimal coverage. Given your oily skin, you might want to explore the \'Skinimalism\' trend, focusing on lightweight, oil-free products to enhance your natural skin while controlling shine, and perhaps adding a bold red lip to make a statement!",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 45247, 'prompt_unit_price': '0.03', 'prompt_price_unit': '0.001', 'prompt_price': '0.05469', 'completion_tokens': 335, 'completion_unit_price': '0.06', 'completion_price_unit': '0.001', 'completion_price': '0.00018', 'total_tokens': 45582, 'total_price': '0.05487', 'currency': 'USD', 'latency': 5.907148793999795}}, 'created_at': 1750640075}
2025-06-23 07:54:45,793 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Based on the latest trends, here's a breakdown of makeup styles: The "Clean Girl Aesthetic" emphasiz...', type='normal'
2025-06-23 07:54:45,793 - app.chat_controller - INFO - Returning QueryResponse: response='Based on the latest trends, here's a breakdown of makeup styles: The "Clean Girl Aesthetic" emphasiz...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-23 07:54:45,793 - app.chat_routes - INFO - Chat handler returned conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-23 07:54:45,793 - app.chat_routes - INFO - Not setting cookie - conversation_id unchanged or missing
2025-06-23 07:55:16,996 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-23 07:55:16,998 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-23 07:55:16,998 - app.chat_controller - INFO - handle_chat received query: What is the latest makeup trend? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-23 07:55:16,998 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What is the latest makeup trend?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-23 07:55:20,071 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-23 07:55:24,000 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '9ca3cb49-13b7-439e-9425-e938d9264c2b', 'id': '962715b8-8708-4a37-bf86-a32fbd8c8531', 'message_id': '962715b8-8708-4a37-bf86-a32fbd8c8531', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Let\'s check out what\'s trending in makeup right now! I\'ll use a search engine to get the latest styles.",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 13943, 'prompt_unit_price': '0.03', 'prompt_price_unit': '0.001', 'prompt_price': '0.0561', 'completion_tokens': 15, 'completion_unit_price': '0.06', 'completion_price_unit': '0.001', 'completion_price': '0.00018', 'total_tokens': 13958, 'total_price': '0.05628', 'currency': 'USD', 'latency': 4.584846542999912}}, 'created_at': 1750640117}
2025-06-23 07:55:24,000 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Let's check out what's trending in makeup right now! I'll use a search engine to get the latest styl...', type='normal'
2025-06-23 07:55:24,000 - app.chat_controller - INFO - Returning QueryResponse: response='Let's check out what's trending in makeup right now! I'll use a search engine to get the latest styl...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-23 07:55:24,001 - app.chat_routes - INFO - Chat handler returned conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-23 07:55:24,001 - app.chat_routes - INFO - Not setting cookie - conversation_id unchanged or missing
2025-06-23 07:55:31,797 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-23 07:55:31,798 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-23 07:55:31,798 - app.chat_controller - INFO - handle_chat received query: What is the latest makeup trend? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-23 07:55:31,798 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What is the latest makeup trend?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-23 07:55:35,680 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-23 07:55:39,410 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '6cf7560f-7582-4781-87b6-fcff24d15e1b', 'id': '4d1cc40d-232a-485c-b269-cf7b572b4e6b', 'message_id': '4d1cc40d-232a-485c-b269-cf7b572b4e6b', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Let\'s check out what\'s trending in makeup right now! I\'ll use a search engine to get the latest styles.",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 16377, 'prompt_unit_price': '0.03', 'prompt_price_unit': '0.001', 'prompt_price': '0.05229', 'completion_tokens': 16, 'completion_unit_price': '0.06', 'completion_price_unit': '0.001', 'completion_price': '0.00018', 'total_tokens': 16393, 'total_price': '0.05247', 'currency': 'USD', 'latency': 5.571480334999933}}, 'created_at': 1750640132}
2025-06-23 07:55:39,410 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Let's check out what's trending in makeup right now! I'll use a search engine to get the latest styl...', type='normal'
2025-06-23 07:55:39,410 - app.chat_controller - INFO - Returning QueryResponse: response='Let's check out what's trending in makeup right now! I'll use a search engine to get the latest styl...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-23 07:55:39,411 - app.chat_routes - INFO - Chat handler returned conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-23 07:55:39,411 - app.chat_routes - INFO - Not setting cookie - conversation_id unchanged or missing
2025-06-23 07:56:07,755 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-23 08:00:13,624 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-23 08:02:05,935 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-23 08:04:09,401 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-23 08:05:12,501 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-23 08:06:05,533 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-23 08:06:05,535 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-23 08:06:05,535 - app.chat_controller - INFO - handle_chat received query: What is the latest makeup trend? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-23 08:06:05,535 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What is the latest makeup trend?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-23 08:06:08,254 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-23 08:06:11,562 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': '05761318-0c97-471f-8349-dfb40183bfb7', 'id': '359642c2-4c97-4009-98d9-1b535d237e57', 'message_id': '359642c2-4c97-4009-98d9-1b535d237e57', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Let\'s check out what\'s trending in makeup right now! I\'ll use a search engine to get the latest styles.",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 13774, 'prompt_unit_price': '0.03', 'prompt_price_unit': '0.001', 'prompt_price': '0.05052', 'completion_tokens': 16, 'completion_unit_price': '0.06', 'completion_price_unit': '0.001', 'completion_price': '0.00018', 'total_tokens': 13790, 'total_price': '0.0507', 'currency': 'USD', 'latency': 3.387527708000107}}, 'created_at': 1750640766}
2025-06-23 08:06:11,563 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Let's check out what's trending in makeup right now! I'll use a search engine to get the latest styl...', type='normal'
2025-06-23 08:06:11,563 - app.chat_controller - INFO - Returning QueryResponse: response='Let's check out what's trending in makeup right now! I'll use a search engine to get the latest styl...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-23 08:06:11,563 - app.chat_routes - INFO - Chat handler returned conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-23 08:06:11,563 - app.chat_routes - INFO - Not setting cookie - conversation_id unchanged or missing
2025-06-23 08:06:20,099 - app.chat_routes - INFO - Retrieved conversation_id from cookie: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-23 08:06:20,101 - app.chat_routes - INFO - Chat endpoint called with conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-23 08:06:20,101 - app.chat_controller - INFO - handle_chat received query: What is the latest makeup trend? for session: c9eddb5c-020b-55d3-90cf-9a3c66b03dc1
2025-06-23 08:06:20,101 - app.chat_controller - DEBUG - Sending request to Dify: http://localhost:80/v1/chat-messages with payload: {'inputs': {}, 'query': 'What is the latest makeup trend?', 'response_mode': 'blocking', 'user': 'c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d'}
2025-06-23 08:06:23,855 - app.intent_classifier - INFO - RECEVIED INTENT: personalized_question
2025-06-23 08:06:26,593 - app.chat_controller - DEBUG - Dify raw response data: {'event': 'message', 'task_id': 'cd7b893c-3381-449b-9a4f-772718ced2a5', 'id': 'db8375ec-79fb-4955-aa08-58e99e7b7e25', 'message_id': 'db8375ec-79fb-4955-aa08-58e99e7b7e25', 'conversation_id': '4a66ce1c-b03d-476d-877d-21685d510b3d', 'mode': 'advanced-chat', 'answer': '```json\n{\n  "response": "Let\'s check out what\'s trending in makeup right now! I\'ll use a search engine to get the latest styles.",\n  "type": "normal"\n}\n```\n', 'metadata': {'usage': {'prompt_tokens': 13862, 'prompt_unit_price': '0.03', 'prompt_price_unit': '0.001', 'prompt_price': '0.0468', 'completion_tokens': 16, 'completion_unit_price': '0.06', 'completion_price_unit': '0.001', 'completion_price': '0.00018', 'total_tokens': 13878, 'total_price': '0.04698', 'currency': 'USD', 'latency': 4.853400461000319}}, 'created_at': 1750640780}
2025-06-23 08:06:26,593 - app.chat_controller - INFO - Successfully parsed Dify answer: response='Let's check out what's trending in makeup right now! I'll use a search engine to get the latest styl...', type='normal'
2025-06-23 08:06:26,593 - app.chat_controller - INFO - Returning QueryResponse: response='Let's check out what's trending in makeup right now! I'll use a search engine to get the latest styl...', session_id='c9eddb5c-020b-55d3-90cf-9a3c66b03dc1', type='normal', conversation_id='4a66ce1c-b03d-476d-877d-21685d510b3d'
2025-06-23 08:06:26,594 - app.chat_routes - INFO - Chat handler returned conversation_id: 4a66ce1c-b03d-476d-877d-21685d510b3d
2025-06-23 08:06:26,594 - app.chat_routes - INFO - Not setting cookie - conversation_id unchanged or missing
